import{S as ne,i as re,s as oe,k as g,a as B,q as J,l as k,m as E,c as z,r as M,h,n as b,b as C,E as p,Y as x,H as U,v as fe,d as T,f as ue,g as D,_ as de,I as _e,F as ee,J as me,V as he,o as ie,G as F,u as pe,L as be,a2 as ve,K as O,w as te,y as P,z as Q,A as R,B as Y,Q as ge,R as ke,T as Ee,U as ye}from"../chunks/index.d0f8a730.js";import{f as Ie}from"../chunks/index.b4e343af.js";import{p as Se}from"../chunks/stores.b3ad4fd3.js";import{s as se}from"../chunks/state.c2a70a8a.js";import{t as we}from"../chunks/table.badb5814.js";import{I as ce}from"../chunks/Icon.1de0c66c.js";function le(o,t,e){const l=o.slice();return l[15]=t[e],l[17]=e,l}function De(o){let t,e,l;return e=new ce({props:{icon:"search",size:"18"}}),{c(){t=g("i"),P(e.$$.fragment),this.h()},l(n){t=k(n,"I",{class:!0});var a=E(t);Q(e.$$.fragment,a),a.forEach(h),this.h()},h(){b(t,"class","svelte-12fj0m9")},m(n,a){C(n,t,a),R(e,t,null),l=!0},p:O,i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){T(e.$$.fragment,n),l=!1},d(n){n&&h(t),Y(e)}}}function $e(o){let t,e,l,n,a;return e=new ce({props:{icon:"x",size:"18"}}),{c(){t=g("button"),P(e.$$.fragment),this.h()},l(u){t=k(u,"BUTTON",{class:!0});var s=E(t);Q(e.$$.fragment,s),s.forEach(h),this.h()},h(){b(t,"class","svelte-12fj0m9")},m(u,s){C(u,t,s),R(e,t,null),l=!0,n||(a=U(t,"click",o[8]),n=!0)},p:O,i(u){l||(D(e.$$.fragment,u),l=!0)},o(u){T(e.$$.fragment,u),l=!1},d(u){u&&h(t),Y(e),n=!1,a()}}}function ae(o){let t,e,l=o[15].name+"",n,a,u,s;return{c(){t=g("li"),e=g("a"),n=J(l),u=B(),this.h()},l(r){t=k(r,"LI",{});var i=E(t);e=k(i,"A",{href:!0,class:!0});var y=E(e);n=M(y,l),y.forEach(h),u=z(i),i.forEach(h),this.h()},h(){b(e,"href",a="/database/table/"+o[15].id),b(e,"class","svelte-12fj0m9"),F(e,"active",o[15].id===o[4].params.id)},m(r,i){C(r,t,i),p(t,e),p(e,n),p(t,u)},p(r,i){i&1&&l!==(l=r[15].name+"")&&pe(n,l),i&1&&a!==(a="/database/table/"+r[15].id)&&b(e,"href",a),i&17&&F(e,"active",r[15].id===r[4].params.id)},i(r){s||be(()=>{s=ve(t,Ie,{duration:100,delay:7*o[17]}),s.start()})},o:O,d(r){r&&h(t)}}}function je(o){let t,e,l,n,a,u,s,r,i,y,I,V,A,$,j,q,L,c;const N=[$e,De],S=[];function H(f,m){return f[3]?0:1}n=H(o),a=S[n]=N[n](o);let w=o[0],_=[];for(let f=0;f<w.length;f+=1)_[f]=ae(le(o,w,f));return{c(){t=g("aside"),e=g("div"),l=g("div"),a.c(),u=B(),s=g("input"),r=B(),i=g("kbd"),y=J("Ctrl"),I=g("kbd"),V=J("K"),A=B(),$=g("nav"),j=g("ul");for(let f=0;f<_.length;f+=1)_[f].c();this.h()},l(f){t=k(f,"ASIDE",{class:!0});var m=E(t);e=k(m,"DIV",{class:!0});var v=E(e);l=k(v,"DIV",{class:!0});var d=E(l);a.l(d),u=z(d),s=k(d,"INPUT",{type:!0,placeholder:!0,class:!0}),r=z(d),i=k(d,"KBD",{class:!0});var K=E(i);y=M(K,"Ctrl"),K.forEach(h),I=k(d,"KBD",{class:!0});var W=E(I);V=M(W,"K"),W.forEach(h),d.forEach(h),v.forEach(h),A=z(m),$=k(m,"NAV",{class:!0});var X=E($);j=k(X,"UL",{});var Z=E(j);for(let G=0;G<_.length;G+=1)_[G].l(Z);Z.forEach(h),X.forEach(h),m.forEach(h),this.h()},h(){b(s,"type","text"),b(s,"placeholder","Search tables"),b(s,"class","svelte-12fj0m9"),b(i,"class","svelte-12fj0m9"),b(I,"class","svelte-12fj0m9"),b(l,"class","filter svelte-12fj0m9"),b(e,"class","filter-container svelte-12fj0m9"),b($,"class","svelte-12fj0m9"),b(t,"class","svelte-12fj0m9")},m(f,m){C(f,t,m),p(t,e),p(e,l),S[n].m(l,null),p(l,u),p(l,s),o[9](s),x(s,o[3]),p(l,r),p(l,i),p(i,y),p(l,I),p(I,V),p(t,A),p(t,$),p($,j);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(j,null);o[11](t),q=!0,L||(c=[U(s,"input",o[10]),U(s,"input",o[5]),U(s,"keydown",o[6]),U(t,"keydown",o[7])],L=!0)},p(f,[m]){let v=n;if(n=H(f),n===v?S[n].p(f,m):(fe(),T(S[v],1,1,()=>{S[v]=null}),ue(),a=S[n],a?a.p(f,m):(a=S[n]=N[n](f),a.c()),D(a,1),a.m(l,u)),m&8&&s.value!==f[3]&&x(s,f[3]),m&17){w=f[0];let d;for(d=0;d<w.length;d+=1){const K=le(f,w,d);_[d]?(_[d].p(K,m),D(_[d],1)):(_[d]=ae(K),_[d].c(),D(_[d],1),_[d].m(j,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=w.length}},i(f){if(!q){D(a);for(let m=0;m<w.length;m+=1)D(_[m]);q=!0}},o(f){T(a),q=!1},d(f){f&&h(t),S[n].d(),o[9](null),de(_,f),o[11](null),L=!1,_e(c)}}}function Ke(o,t,e){let l,n;ee(o,Se,c=>e(4,l=c)),ee(o,se,c=>e(13,n=c));let a=n.tables,u=a,s,r,i;(async()=>await we.get())().then(c=>{a=c,e(0,u=c),me(se,n.tables=c,n)});const y=he();ie(async()=>{r.focus(),document.addEventListener("keydown",c=>{c.ctrlKey&&c.key==="k"&&(c.preventDefault(),y("sidebarNeeded"),r.focus(),r.select())}),l.data.table&&s.querySelector(`[href$="${l.data.table.id}"]`).scrollIntoView({behavior:"smooth",block:"center"})});const I=()=>{i?e(0,u=a.filter(c=>c.name.includes(i))):e(0,u=a)},V=c=>{c.key==="Escape"&&(e(3,i=""),I()),c.key==="Enter"&&s.querySelector("li:first-child a").click()},A=c=>{var N,S,H,w,_,f,m,v,d,K;c.key==="ArrowDown"&&s.contains(document.activeElement)&&(c.preventDefault(),document.activeElement.matches("input")?(N=s.querySelector("a"))==null||N.focus():(_=(w=(H=(S=document.activeElement)==null?void 0:S.parentElement)==null?void 0:H.nextElementSibling)==null?void 0:w.querySelector("a"))==null||_.focus()),c.key==="ArrowUp"&&s.contains(document.activeElement)&&(c.preventDefault(),(f=document.activeElement)!=null&&f.matches("li:first-child a")?r.focus():(K=(d=(v=(m=document.activeElement)==null?void 0:m.parentElement)==null?void 0:v.previousElementSibling)==null?void 0:d.querySelector("a"))==null||K.focus()),c.key==="Escape"&&s.contains(document.activeElement)&&(r.focus(),e(3,i=""),I())},$=()=>{e(3,i=null),I()};function j(c){te[c?"unshift":"push"](()=>{r=c,e(2,r)})}function q(){i=this.value,e(3,i)}function L(c){te[c?"unshift":"push"](()=>{s=c,e(1,s)})}return[u,s,r,i,l,I,V,A,$,j,q,L]}class qe extends ne{constructor(t){super(),re(this,t,Ke,je,oe,{})}}function Te(o){let t,e,l,n,a;l=new qe({}),l.$on("sidebarNeeded",o[3]);const u=o[2].default,s=ge(u,o,o[1],null);return{c(){t=g("div"),e=g("div"),P(l.$$.fragment),n=B(),s&&s.c(),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=E(t);e=k(i,"DIV",{class:!0});var y=E(e);Q(l.$$.fragment,y),y.forEach(h),n=z(i),s&&s.l(i),i.forEach(h),this.h()},h(){b(e,"class","tables-container svelte-s8xmdg"),b(t,"class","container svelte-s8xmdg"),F(t,"tablesHidden",o[0])},m(r,i){C(r,t,i),p(t,e),R(l,e,null),p(t,n),s&&s.m(t,null),a=!0},p(r,[i]){s&&s.p&&(!a||i&2)&&ke(s,u,r,r[1],a?ye(u,r[1],i,null):Ee(r[1]),null),(!a||i&1)&&F(t,"tablesHidden",r[0])},i(r){a||(D(l.$$.fragment,r),D(s,r),a=!0)},o(r){T(l.$$.fragment,r),T(s,r),a=!1},d(r){r&&h(t),Y(l),s&&s.d(r)}}}function Ve(o,t,e){let{$$slots:l={},$$scope:n}=t,a=!1;ie(()=>{document.addEventListener("keydown",s=>{!s.target.matches("input, textarea")&&s.key==="b"&&(e(0,a=!a),localStorage.tablesHidden=a)})});const u=()=>e(0,a=!1);return o.$$set=s=>{"$$scope"in s&&e(1,n=s.$$scope)},[a,n,l,u]}class ze extends ne{constructor(t){super(),re(this,t,Ve,Te,oe,{})}}export{ze as component};
