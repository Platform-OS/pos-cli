import{Q as Z,R as $,S as L,T as x,s as ee,a as w,f,J as te,d as _,c as T,g as p,h as v,j as m,i as S,u as i,v as G,o as le,D as se,E as ae,F as re,G as ce,p as oe,A as g,r as ne,N as ue,l as M,m as H,w as he,z as ie}from"../chunks/scheduler.bed694a1.js";import{g as U,t as C,c as W,a as A,S as de,i as _e}from"../chunks/index.606d5641.js";import{e as J}from"../chunks/each.177d9825.js";import{p as fe}from"../chunks/stores.cd24c88c.js";import{s as P}from"../chunks/state.88bbaa31.js";function pe(l,e){const s=e.token={};function a(o,n,u,t){if(e.token!==s)return;e.resolved=t;let r=e.ctx;u!==void 0&&(r=r.slice(),r[u]=t);const h=o&&(e.current=o)(r);let c=!1;e.block&&(e.blocks?e.blocks.forEach((d,b)=>{b!==n&&d&&(U(),C(d,1,1,()=>{e.blocks[b]===d&&(e.blocks[b]=null)}),W())}):e.block.d(1),h.c(),A(h,1),h.m(e.mount(),e.anchor),c=!0),e.block=h,e.blocks&&(e.blocks[n]=h),c&&x()}if(Z(l)){const o=$();if(l.then(n=>{L(o),a(e.then,1,e.value,n),L(null)},n=>{if(L(o),a(e.catch,2,e.error,n),L(null),!e.hasCatch)throw n}),e.current!==e.pending)return a(e.pending,0),!0}else{if(e.current!==e.then)return a(e.then,1,e.value,l),!0;e.resolved=l}}function me(l,e,s){const a=e.slice(),{resolved:o}=l;l.current===l.then&&(a[l.value]=o),l.current===l.catch&&(a[l.error]=o),l.block.p(a,s)}const X={get:async l=>{const e=typeof window<"u"&&window.location.port!=="4173"&&window.location.port!=="5173"?`http://localhost:${parseInt(window.location.port)-1}/api/logsv2`:"http://localhost:3333/api/logsv2";return fetch(e).then(s=>s.ok?s.json():Promise.reject(s)).then(s=>s).catch(s=>({error:s}))}};function Q(l,e,s){const a=l.slice();return a[8]=e[s],a}function ve(l){return{c:g,l:g,m:g,p:g,d:g}}function ge(l){let e,s,a='<tr><th class="svelte-8d8f5u">Time</th> <th class="svelte-8d8f5u">Type</th> <th class="message svelte-8d8f5u">Message</th></tr>',o,n,u=J(l[7].body.hits),t=[];for(let r=0;r<u.length;r+=1)t[r]=Y(Q(l,u,r));return{c(){e=f("table"),s=f("thead"),s.innerHTML=a,o=w(),n=f("tbody");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=p(r,"TABLE",{class:!0});var h=v(e);s=p(h,"THEAD",{"data-svelte-h":!0}),ne(s)!=="svelte-1hz51lg"&&(s.innerHTML=a),o=T(h),n=p(h,"TBODY",{});var c=v(n);for(let d=0;d<t.length;d+=1)t[d].l(c);c.forEach(_),h.forEach(_),this.h()},h(){m(e,"class","svelte-8d8f5u")},m(r,h){S(r,e,h),i(e,s),i(e,o),i(e,n);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(n,null)},p(r,h){if(h&0){u=J(r[7].body.hits);let c;for(c=0;c<u.length;c+=1){const d=Q(r,u,c);t[c]?t[c].p(d,h):(t[c]=Y(d),t[c].c(),t[c].m(n,null))}for(;c<t.length;c+=1)t[c].d(1);t.length=u.length}},d(r){r&&_(e),ue(t,r)}}}function Y(l){let e,s,a,o=new Date(l[8].options_at/1e3).toLocaleString()+"",n,u,t,r,h=l[8].type+"",c,d,b,E,y,O=l[8].message+"",j,I;return{c(){e=f("tr"),s=f("td"),a=f("a"),n=M(o),u=w(),t=f("td"),r=f("a"),c=M(h),d=w(),b=f("td"),E=f("a"),y=f("div"),j=M(O),I=w(),this.h()},l(D){e=p(D,"TR",{class:!0});var k=v(e);s=p(k,"TD",{class:!0});var z=v(s);a=p(z,"A",{href:!0});var B=v(a);n=H(B,o),B.forEach(_),z.forEach(_),u=T(k),t=p(k,"TD",{class:!0});var N=v(t);r=p(N,"A",{href:!0});var R=v(r);c=H(R,h),R.forEach(_),N.forEach(_),d=T(k),b=p(k,"TD",{class:!0});var V=v(b);E=p(V,"A",{href:!0,class:!0});var q=v(E);y=p(q,"DIV",{class:!0});var F=v(y);j=H(F,O),F.forEach(_),q.forEach(_),V.forEach(_),I=T(k),k.forEach(_),this.h()},h(){m(a,"href","/logsv2/"+l[8]._timestamp),m(s,"class","time svelte-8d8f5u"),m(r,"href","/logsv2/"+l[8]._timestamp),m(t,"class","type svelte-8d8f5u"),m(y,"class","svelte-8d8f5u"),m(E,"href","/logsv2/"+l[8]._timestamp),m(E,"class","svelte-8d8f5u"),m(b,"class","message svelte-8d8f5u"),m(e,"class","svelte-8d8f5u"),he(e,"error",l[8].type.match(/error/i))},m(D,k){S(D,e,k),i(e,s),i(s,a),i(a,n),i(e,u),i(e,t),i(t,r),i(r,c),i(e,d),i(e,b),i(b,E),i(E,y),i(y,j),i(e,I)},p:g,d(D){D&&_(e)}}}function be(l){return{c:g,l:g,m:g,p:g,d:g}}function K(l){let e;const s=l[4].default,a=se(s,l,l[3],null);return{c(){a&&a.c()},l(o){a&&a.l(o)},m(o,n){a&&a.m(o,n),e=!0},p(o,n){a&&a.p&&(!e||n&8)&&ae(a,s,o,o[3],e?ce(s,o[3],n,null):re(o[3]),null)},i(o){e||(A(a,o),e=!0)},o(o){C(a,o),e=!1},d(o){a&&a.d(o)}}}function ke(l){let e,s,a,o,n,u={ctx:l,current:null,token:null,hasCatch:!1,pending:be,then:ge,catch:ve,value:7};pe(X.get(),u);let t=l[0].params.id&&K(l);return{c(){e=w(),s=f("div"),a=f("section"),u.block.c(),o=w(),t&&t.c(),this.h()},l(r){te("svelte-1xj5d21",document.head).forEach(_),e=T(r),s=p(r,"DIV",{class:!0});var c=v(s);a=p(c,"SECTION",{class:!0});var d=v(a);u.block.l(d),d.forEach(_),o=T(c),t&&t.l(c),c.forEach(_),this.h()},h(){document.title="Logs | platformOS",m(a,"class","logs svelte-8d8f5u"),m(s,"class","container svelte-8d8f5u")},m(r,h){S(r,e,h),S(r,s,h),i(s,a),u.block.m(a,u.anchor=null),u.mount=()=>a,u.anchor=null,i(s,o),t&&t.m(s,null),l[5](s),n=!0},p(r,[h]){l=r,me(u,l,h),l[0].params.id?t?(t.p(l,h),h&1&&A(t,1)):(t=K(l),t.c(),A(t,1),t.m(s,null)):t&&(U(),C(t,1,1,()=>{t=null}),W())},i(r){n||(A(t),n=!0)},o(r){C(t),n=!1},d(r){r&&(_(e),_(s)),u.block.d(),u.token=null,u=null,t&&t.d(),l[5](null)}}}function Ee(l,e,s){let a,o;G(l,fe,c=>s(0,a=c)),G(l,P,c=>s(6,o=c));let{$$slots:n={},$$scope:u}=e,t,r;le(async()=>{s(2,r=await X.get())});function h(c){oe[c?"unshift":"push"](()=>{t=c,s(1,t)})}return l.$$set=c=>{"$$scope"in c&&s(3,u=c.$$scope)},l.$$.update=()=>{l.$$.dirty&5&&a.params.id&&ie(P,o.logv2=r==null?void 0:r.body.hits.find(c=>c._timestamp==a.params.id),o)},[a,t,r,u,n,h]}class Le extends de{constructor(e){super(),_e(this,e,Ee,ke,ee,{})}}export{Le as component};
