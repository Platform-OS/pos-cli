import{s as Ze,a as D,f as p,J as xe,d as _,c as y,g,h as $,r as le,j as d,i as A,u as f,K as Ie,x as te,y as Ke,v as et,o as tt,A as pe,X as lt,b as st,z as ge,N as Xe,l as R,m as q,w as ne,R as nt,n as Q,B as at,t as rt,p as ot,e as Ee}from"../chunks/scheduler.897e742f.js";import{S as it,i as ut,b as oe,d as ie,m as ue,a as T,t as B,c as ae,e as fe,g as re,j as ft}from"../chunks/index.dbb1a760.js";import{g as ct}from"../chunks/globals.7f7f1b26.js";import{e as Te}from"../chunks/each.7879f7b3.js";import{f as dt}from"../chunks/index.bae063de.js";import{s as he}from"../chunks/state.67fbed0a.js";import{t as Ge}from"../chunks/tryParseJSON.f125f883.js";import{J as Qe}from"../chunks/JSONTree.2830c131.js";import{I as ve}from"../chunks/Icon.db5b5802.js";import{A as _t}from"../chunks/Aside.6e1822d0.js";const mt={get:async a=>{const t=typeof window<"u"&&window.location.port!=="4173"&&window.location.port!=="5173"?`http://localhost:${parseInt(window.location.port)}/api/logs`:"http://localhost:3333/api/logs",s=a.last??null;return fetch(`${t}?lastId=`+s).then(e=>e.ok?e.json():Promise.reject(e)).then(e=>(e.logs.forEach(l=>{l.downloaded_at=Date.now()}),e)).catch(e=>({error:e}))}};const{document:Ne}=ct;function Oe(a,t,s){const e=a.slice();e[23]=t[s],e[25]=t,e[26]=s;const l=e[23].message.length<262144&&Ge(e[23].message);return e[24]=l,e}function Pe(a,t,s){const e=a.slice();e[23]=t[s],e[27]=t,e[28]=s;const l=e[23].message.length<262144&&Ge(e[23].message);return e[24]=l,e}function Ue(a){let t,s,e="Clear filter",l,r,n,o,i;return r=new ve({props:{icon:"x",size:"12"}}),{c(){t=p("button"),s=p("span"),s.textContent=e,l=D(),oe(r.$$.fragment),this.h()},l(u){t=g(u,"BUTTON",{class:!0});var v=$(t);s=g(v,"SPAN",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-1bu6mgu"&&(s.textContent=e),l=y(v),ie(r.$$.fragment,v),v.forEach(_),this.h()},h(){d(s,"class","label svelte-1psu8mw"),d(t,"class","clearFilter svelte-1psu8mw")},m(u,v){A(u,t,v),f(t,s),f(t,l),ue(r,t,null),n=!0,o||(i=te(t,"click",a[9]),o=!0)},p:ge,i(u){n||(T(r.$$.fragment,u),n=!0)},o(u){B(r.$$.fragment,u),n=!1},d(u){u&&_(t),fe(r),o=!1,i()}}}function Be(a){let t,s,e=Te(a[4].logs.logs),l=[];for(let n=0;n<e.length;n+=1)l[n]=Fe(Pe(a,e,n));const r=n=>B(l[n],1,1,()=>{l[n]=null});return{c(){t=p("table");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){t=g(n,"TABLE",{class:!0});var o=$(t);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(_),this.h()},h(){d(t,"class","svelte-1psu8mw")},m(n,o){A(n,t,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,null);s=!0},p(n,o){if(o&118){e=Te(n[4].logs.logs);let i;for(i=0;i<e.length;i+=1){const u=Pe(n,e,i);l[i]?(l[i].p(u,o),T(l[i],1)):(l[i]=Fe(u),l[i].c(),T(l[i],1),l[i].m(t,null))}for(re(),i=e.length;i<l.length;i+=1)r(i);ae()}},i(n){if(!s){for(let o=0;o<e.length;o+=1)T(l[o]);s=!0}},o(n){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)B(l[o]);s=!1},d(n){n&&_(t),Xe(l,n)}}}function ht(a){let t;function s(r,n){return r[23].showFull?vt:gt}let e=s(a),l=e(a);return{c(){t=p("div"),l.c(),this.h()},l(r){t=g(r,"DIV",{class:!0});var n=$(t);l.l(n),n.forEach(_),this.h()},h(){d(t,"class","pre svelte-1psu8mw")},m(r,n){A(r,t,n),l.m(t,null)},p(r,n){e===(e=s(r))&&l?l.p(r,n):(l.d(1),l=e(r),l&&(l.c(),l.m(t,null)))},i:ge,o:ge,d(r){r&&_(t),l.d()}}}function pt(a){let t,s;return t=new Qe({props:{value:a[24],showFullLines:!0}}),{c(){oe(t.$$.fragment)},l(e){ie(t.$$.fragment,e)},m(e,l){ue(t,e,l),s=!0},p(e,l){const r={};l&16&&(r.value=e[24]),t.$set(r)},i(e){s||(T(t.$$.fragment,e),s=!0)},o(e){B(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function gt(a){let t=a[23].message.substr(0,x)+"",s,e,l,r=a[23].message.length>x&&Ae(a);return{c(){s=R(t),e=D(),r&&r.c(),l=Ee()},l(n){s=q(n,t),e=y(n),r&&r.l(n),l=Ee()},m(n,o){A(n,s,o),A(n,e,o),r&&r.m(n,o),A(n,l,o)},p(n,o){o&16&&t!==(t=n[23].message.substr(0,x)+"")&&Q(s,t),n[23].message.length>x?r?r.p(n,o):(r=Ae(n),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(n){n&&(_(s),_(e),_(l)),r&&r.d(n)}}}function vt(a){let t=a[23].message+"",s;return{c(){s=R(t)},l(e){s=q(e,t)},m(e,l){A(e,s,l)},p(e,l){l&16&&t!==(t=e[23].message+"")&&Q(s,t)},d(e){e&&_(s)}}}function Ae(a){let t,s,e=a[23].message.length-x+"",l,r,n,o;function i(){return a[11](a[23],a[27],a[28])}return{c(){t=p("div"),s=p("button"),l=R(e),r=R(" more characters"),this.h()},l(u){t=g(u,"DIV",{class:!0});var v=$(t);s=g(v,"BUTTON",{type:!0,class:!0});var w=$(s);l=q(w,e),r=q(w," more characters"),w.forEach(_),v.forEach(_),this.h()},h(){d(s,"type","button"),d(s,"class","svelte-1psu8mw"),d(t,"class","longStringInfo svelte-1psu8mw")},m(u,v){A(u,t,v),f(t,s),f(s,l),f(s,r),n||(o=te(s,"click",i),n=!0)},p(u,v){a=u,v&16&&e!==(e=a[23].message.length-x+"")&&Q(l,e)},d(u){u&&_(t),n=!1,o()}}}function Ve(a){let t,s,e,l=a[23].data.url+"",r,n,o=a[23].data.user&&je(a);return{c(){t=p("ul"),s=p("li"),e=R("Page: "),r=R(l),n=D(),o&&o.c(),this.h()},l(i){t=g(i,"UL",{class:!0});var u=$(t);s=g(u,"LI",{});var v=$(s);e=q(v,"Page: "),r=q(v,l),v.forEach(_),n=y(u),o&&o.l(u),u.forEach(_),this.h()},h(){d(t,"class","info svelte-1psu8mw")},m(i,u){A(i,t,u),f(t,s),f(s,e),f(s,r),f(t,n),o&&o.m(t,null)},p(i,u){u&16&&l!==(l=i[23].data.url+"")&&Q(r,l),i[23].data.user?o?o.p(i,u):(o=je(i),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(i){i&&_(t),o&&o.d()}}}function je(a){let t,s,e,l=a[23].data.user.id+"",r,n;return{c(){t=p("li"),s=R("User ID: "),e=p("a"),r=R(l),this.h()},l(o){t=g(o,"LI",{});var i=$(t);s=q(i,"User ID: "),e=g(i,"A",{href:!0,class:!0});var u=$(e);r=q(u,l),u.forEach(_),i.forEach(_),this.h()},h(){d(e,"href",n="/users/"+a[23].data.user.id),d(e,"class","svelte-1psu8mw")},m(o,i){A(o,t,i),f(t,s),f(t,e),f(e,r)},p(o,i){i&16&&l!==(l=o[23].data.user.id+"")&&Q(r,l),i&16&&n!==(n="/users/"+o[23].data.user.id)&&d(e,"href",n)},d(o){o&&_(t)}}}function Fe(a){var Se;let t,s,e,l=new Date(a[23].created_at).toLocaleDateString(void 0,{})+"",r,n,o=new Date(a[23].created_at).toLocaleTimeString(void 0,{})+"",i,u,v,w,I=a[23].error_type+"",F,Y,P,E,N,H,V,C,z,O,K,Z="Copy message",ee,c,h,m,L,S="Pin this log",b,k,X,J,j,W,ce;const de=[pt,ht],se=[];function Ce(M,U){return M[24]?0:1}E=Ce(a),N=se[E]=de[E](a);let G=((Se=a[23].data)==null?void 0:Se.url)&&Ve(a);c=new ve({props:{icon:"copy"}});function We(...M){return a[12](a[23],...M)}k=new ve({props:{icon:"pin"}});function Ye(){return a[13](a[23])}function Le(...M){return a[14](a[23],...M)}return{c(){t=p("tr"),s=p("td"),e=p("time"),r=R(l),n=D(),i=R(o),v=D(),w=p("td"),F=R(I),Y=D(),P=p("td"),N.c(),H=D(),G&&G.c(),V=D(),C=p("td"),z=p("div"),O=p("button"),K=p("span"),K.textContent=Z,ee=D(),oe(c.$$.fragment),h=D(),m=p("button"),L=p("span"),L.textContent=S,b=D(),oe(k.$$.fragment),X=D(),this.h()},l(M){t=g(M,"TR",{class:!0});var U=$(t);s=g(U,"TD",{class:!0});var me=$(s);e=g(me,"TIME",{datetime:!0,class:!0});var _e=$(e);r=q(_e,l),n=y(_e),i=q(_e,o),_e.forEach(_),me.forEach(_),v=y(U),w=g(U,"TD",{class:!0});var De=$(w);F=q(De,I),De.forEach(_),Y=y(U),P=g(U,"TD",{class:!0});var be=$(P);N.l(be),H=y(be),G&&G.l(be),be.forEach(_),V=y(U),C=g(U,"TD",{class:!0});var ye=$(C);z=g(ye,"DIV",{class:!0});var we=$(z);O=g(we,"BUTTON",{type:!0,class:!0,title:!0});var ke=$(O);K=g(ke,"SPAN",{class:!0,"data-svelte-h":!0}),le(K)!=="svelte-1qjln59"&&(K.textContent=Z),ee=y(ke),ie(c.$$.fragment,ke),ke.forEach(_),h=y(we),m=g(we,"BUTTON",{type:!0,class:!0,title:!0});var $e=$(m);L=g($e,"SPAN",{class:!0,"data-svelte-h":!0}),le(L)!=="svelte-yzd8i4"&&(L.textContent=S),b=y($e),ie(k.$$.fragment,$e),$e.forEach(_),we.forEach(_),ye.forEach(_),X=y(U),U.forEach(_),this.h()},h(){d(e,"datetime",u=a[23].created_at),d(e,"class","svelte-1psu8mw"),d(s,"class","date svelte-1psu8mw"),d(w,"class","logType svelte-1psu8mw"),d(P,"class","message svelte-1psu8mw"),d(K,"class","label"),d(O,"type","button"),d(O,"class","button svelte-1psu8mw"),d(O,"title","Copy message"),d(L,"class","label"),d(m,"type","button"),d(m,"class","button svelte-1psu8mw"),d(m,"title","Pin this log"),ne(m,"active",a[2].find(Le)),d(z,"class","svelte-1psu8mw"),d(C,"class","actions svelte-1psu8mw"),d(t,"class","svelte-1psu8mw"),ne(t,"hidden",a[1]&&a[5](a[23])||a[23].hidden),ne(t,"error",a[23].error_type.match(/error/i)),ne(t,"fresh",a[23].downloaded_at>a[4].logs.downloaded_at[0])},m(M,U){A(M,t,U),f(t,s),f(s,e),f(e,r),f(e,n),f(e,i),f(t,v),f(t,w),f(w,F),f(t,Y),f(t,P),se[E].m(P,null),f(P,H),G&&G.m(P,null),f(t,V),f(t,C),f(C,z),f(z,O),f(O,K),f(O,ee),ue(c,O,null),f(z,h),f(z,m),f(m,L),f(m,b),ue(k,m,null),f(t,X),j=!0,W||(ce=[te(O,"click",We),te(m,"click",nt(Ye))],W=!0)},p(M,U){var _e;a=M,(!j||U&16)&&l!==(l=new Date(a[23].created_at).toLocaleDateString(void 0,{})+"")&&Q(r,l),(!j||U&16)&&o!==(o=new Date(a[23].created_at).toLocaleTimeString(void 0,{})+"")&&Q(i,o),(!j||U&16&&u!==(u=a[23].created_at))&&d(e,"datetime",u),(!j||U&16)&&I!==(I=a[23].error_type+"")&&Q(F,I);let me=E;E=Ce(a),E===me?se[E].p(a,U):(re(),B(se[me],1,1,()=>{se[me]=null}),ae(),N=se[E],N?N.p(a,U):(N=se[E]=de[E](a),N.c()),T(N,1),N.m(P,H)),(_e=a[23].data)!=null&&_e.url?G?G.p(a,U):(G=Ve(a),G.c(),G.m(P,null)):G&&(G.d(1),G=null),(!j||U&20)&&ne(m,"active",a[2].find(Le)),(!j||U&50)&&ne(t,"hidden",a[1]&&a[5](a[23])||a[23].hidden),(!j||U&16)&&ne(t,"error",a[23].error_type.match(/error/i)),(!j||U&16)&&ne(t,"fresh",a[23].downloaded_at>a[4].logs.downloaded_at[0])},i(M){j||(T(N),T(c.$$.fragment,M),T(k.$$.fragment,M),M&&(J||at(()=>{J=ft(t,dt,{duration:200}),J.start()})),j=!0)},o(M){B(N),B(c.$$.fragment,M),B(k.$$.fragment,M),j=!1},d(M){M&&_(t),se[E].d(),G&&G.d(),fe(c),fe(k),W=!1,Ke(ce)}}}function Me(a){let t,s="No newer logs to show<br/>Checking every 3 seconds";return{c(){t=p("footer"),t.innerHTML=s,this.h()},l(e){t=g(e,"FOOTER",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-akhvzo"&&(t.innerHTML=s),this.h()},h(){d(t,"class","svelte-1psu8mw")},m(e,l){A(e,t,l)},d(e){e&&_(t)}}}function ze(a){let t,s;return t=new _t({props:{$$slots:{default:[Et]},$$scope:{ctx:a}}}),{c(){oe(t.$$.fragment)},l(e){ie(t.$$.fragment,e)},m(e,l){ue(t,e,l),s=!0},p(e,l){const r={};l&536870916&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){s||(T(t.$$.fragment,e),s=!0)},o(e){B(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function Je(a){let t,s,e=Te(a[2]),l=[];for(let n=0;n<e.length;n+=1)l[n]=He(Oe(a,e,n));const r=n=>B(l[n],1,1,()=>{l[n]=null});return{c(){t=p("ul");for(let n=0;n<l.length;n+=1)l[n].c()},l(n){t=g(n,"UL",{});var o=$(t);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(_)},m(n,o){A(n,t,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,null);s=!0},p(n,o){if(o&68){e=Te(n[2]);let i;for(i=0;i<e.length;i+=1){const u=Oe(n,e,i);l[i]?(l[i].p(u,o),T(l[i],1)):(l[i]=He(u),l[i].c(),T(l[i],1),l[i].m(t,null))}for(re(),i=e.length;i<l.length;i+=1)r(i);ae()}},i(n){if(!s){for(let o=0;o<e.length;o+=1)T(l[o]);s=!0}},o(n){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)B(l[o]);s=!1},d(n){n&&_(t),Xe(l,n)}}}function Re(a){let t,s=a[23].data.url+"",e;return{c(){t=p("div"),e=R(s),this.h()},l(l){t=g(l,"DIV",{class:!0});var r=$(t);e=q(r,s),r.forEach(_),this.h()},h(){d(t,"class","url svelte-1psu8mw")},m(l,r){A(l,t,r),f(t,e)},p(l,r){r&4&&s!==(s=l[23].data.url+"")&&Q(e,s)},d(l){l&&_(t)}}}function bt(a){let t;function s(r,n){return r[23].showFull?$t:kt}let e=s(a),l=e(a);return{c(){t=p("div"),l.c(),this.h()},l(r){t=g(r,"DIV",{class:!0});var n=$(t);l.l(n),n.forEach(_),this.h()},h(){d(t,"class","pre svelte-1psu8mw")},m(r,n){A(r,t,n),l.m(t,null)},p(r,n){e===(e=s(r))&&l?l.p(r,n):(l.d(1),l=e(r),l&&(l.c(),l.m(t,null)))},i:ge,o:ge,d(r){r&&_(t),l.d()}}}function wt(a){let t,s;return t=new Qe({props:{value:a[24],showFullLines:!0}}),{c(){oe(t.$$.fragment)},l(e){ie(t.$$.fragment,e)},m(e,l){ue(t,e,l),s=!0},p(e,l){const r={};l&4&&(r.value=e[24]),t.$set(r)},i(e){s||(T(t.$$.fragment,e),s=!0)},o(e){B(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function kt(a){let t=a[23].message.substr(0,x)+"",s,e,l,r=a[23].message.length>x&&qe(a);return{c(){s=R(t),e=D(),r&&r.c(),l=Ee()},l(n){s=q(n,t),e=y(n),r&&r.l(n),l=Ee()},m(n,o){A(n,s,o),A(n,e,o),r&&r.m(n,o),A(n,l,o)},p(n,o){o&4&&t!==(t=n[23].message.substr(0,x)+"")&&Q(s,t),n[23].message.length>x?r?r.p(n,o):(r=qe(n),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(n){n&&(_(s),_(e),_(l)),r&&r.d(n)}}}function $t(a){let t=a[23].message+"",s;return{c(){s=R(t)},l(e){s=q(e,t)},m(e,l){A(e,s,l)},p(e,l){l&4&&t!==(t=e[23].message+"")&&Q(s,t)},d(e){e&&_(s)}}}function qe(a){let t,s=a[23].message.length-x+"",e,l,r,n;function o(){return a[17](a[23],a[25],a[26])}return{c(){t=p("button"),e=R(s),l=R(" more characters"),this.h()},l(i){t=g(i,"BUTTON",{type:!0,class:!0});var u=$(t);e=q(u,s),l=q(u," more characters"),u.forEach(_),this.h()},h(){d(t,"type","button"),d(t,"class","svelte-1psu8mw")},m(i,u){A(i,t,u),f(t,e),f(t,l),r||(n=te(t,"click",o),r=!0)},p(i,u){a=i,u&4&&s!==(s=a[23].message.length-x+"")&&Q(e,s)},d(i){i&&_(t),r=!1,n()}}}function He(a){var S;let t,s,e,l=new Date(a[23].created_at).toLocaleDateString(void 0,{})+"",r,n,o=new Date(a[23].created_at).toLocaleTimeString(void 0,{})+"",i,u,v,w,I,F="Remove log from pinned panel",Y,P,E,N,H,V,C,z,O,K,Z;P=new ve({props:{icon:"trash",size:"18"}});function ee(){return a[16](a[23])}let c=((S=a[23].data)==null?void 0:S.url)&&Re(a);const h=[wt,bt],m=[];function L(b,k){return b[24]?0:1}return V=L(a),C=m[V]=h[V](a),{c(){t=p("li"),s=p("div"),e=p("time"),r=R(l),n=D(),i=R(o),v=D(),w=p("button"),I=p("span"),I.textContent=F,Y=D(),oe(P.$$.fragment),E=D(),c&&c.c(),N=D(),H=p("div"),C.c(),z=D(),this.h()},l(b){t=g(b,"LI",{class:!0});var k=$(t);s=g(k,"DIV",{class:!0});var X=$(s);e=g(X,"TIME",{class:!0,datetime:!0});var J=$(e);r=q(J,l),n=y(J),i=q(J,o),J.forEach(_),v=y(X),w=g(X,"BUTTON",{type:!0,title:!0,class:!0});var j=$(w);I=g(j,"SPAN",{class:!0,"data-svelte-h":!0}),le(I)!=="svelte-flzfhp"&&(I.textContent=F),Y=y(j),ie(P.$$.fragment,j),j.forEach(_),X.forEach(_),E=y(k),c&&c.l(k),N=y(k),H=g(k,"DIV",{class:!0});var W=$(H);C.l(W),W.forEach(_),z=y(k),k.forEach(_),this.h()},h(){d(e,"class","date svelte-1psu8mw"),d(e,"datetime",u=a[23].created_at),d(I,"class","label"),d(w,"type","button"),d(w,"title","Remove log from pinned panel"),d(w,"class","svelte-1psu8mw"),d(s,"class","info svelte-1psu8mw"),d(H,"class","message svelte-1psu8mw"),d(t,"class","svelte-1psu8mw")},m(b,k){A(b,t,k),f(t,s),f(s,e),f(e,r),f(e,n),f(e,i),f(s,v),f(s,w),f(w,I),f(w,Y),ue(P,w,null),f(t,E),c&&c.m(t,null),f(t,N),f(t,H),m[V].m(H,null),f(t,z),O=!0,K||(Z=te(w,"click",ee),K=!0)},p(b,k){var J;a=b,(!O||k&4)&&l!==(l=new Date(a[23].created_at).toLocaleDateString(void 0,{})+"")&&Q(r,l),(!O||k&4)&&o!==(o=new Date(a[23].created_at).toLocaleTimeString(void 0,{})+"")&&Q(i,o),(!O||k&4&&u!==(u=a[23].created_at))&&d(e,"datetime",u),(J=a[23].data)!=null&&J.url?c?c.p(a,k):(c=Re(a),c.c(),c.m(t,N)):c&&(c.d(1),c=null);let X=V;V=L(a),V===X?m[V].p(a,k):(re(),B(m[X],1,1,()=>{m[X]=null}),ae(),C=m[V],C?C.p(a,k):(C=m[V]=h[V](a),C.c()),T(C,1),C.m(H,null))},i(b){O||(T(P.$$.fragment,b),T(C),O=!0)},o(b){B(P.$$.fragment,b),B(C),O=!1},d(b){b&&_(t),fe(P),c&&c.d(),m[V].d(),K=!1,Z()}}}function Et(a){let t,s,e,l="Clear pinned logs",r,n,o,i,u=a[2]&&Je(a);return{c(){t=p("div"),s=p("nav"),e=p("button"),e.textContent=l,r=D(),u&&u.c(),this.h()},l(v){t=g(v,"DIV",{class:!0});var w=$(t);s=g(w,"NAV",{class:!0});var I=$(s);e=g(I,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),le(e)!=="svelte-eeid91"&&(e.textContent=l),I.forEach(_),r=y(w),u&&u.l(w),w.forEach(_),this.h()},h(){d(e,"type","button"),d(e,"class","button svelte-1psu8mw"),d(s,"class","asideNav svelte-1psu8mw"),d(t,"class","pins svelte-1psu8mw")},m(v,w){A(v,t,w),f(t,s),f(s,e),f(t,r),u&&u.m(t,null),n=!0,o||(i=te(e,"click",a[15]),o=!0)},p(v,w){v[2]?u?(u.p(v,w),w&4&&T(u,1)):(u=Je(v),u.c(),T(u,1),u.m(t,null)):u&&(re(),B(u,1,1,()=>{u=null}),ae())},i(v){n||(T(u),n=!0)},o(v){B(u),n=!1},d(v){v&&_(t),u&&u.d(),o=!1,i()}}}function Tt(a){let t,s,e,l,r,n,o="Filter:",i,u,v,w,I,F,Y="Clear screen",P,E,N,H="Toggle pinned logs panel",V,C,z,O,K,Z,ee,c,h=a[1]&&Ue(a);C=new ve({props:{icon:"pin"}});let m=a[4].logs.logs&&Be(a),L=!a[1]&&Me(),S=a[3]&&ze(a);return{c(){t=D(),s=p("div"),e=p("section"),l=p("nav"),r=p("form"),n=p("label"),n.textContent=o,i=D(),u=p("input"),v=D(),h&&h.c(),w=D(),I=p("div"),F=p("button"),F.textContent=Y,P=D(),E=p("button"),N=p("span"),N.textContent=H,V=D(),oe(C.$$.fragment),z=D(),m&&m.c(),O=D(),L&&L.c(),K=D(),S&&S.c(),this.h()},l(b){xe("svelte-1xj5d21",Ne.head).forEach(_),t=y(b),s=g(b,"DIV",{class:!0});var X=$(s);e=g(X,"SECTION",{class:!0});var J=$(e);l=g(J,"NAV",{class:!0});var j=$(l);r=g(j,"FORM",{});var W=$(r);n=g(W,"LABEL",{for:!0,"data-svelte-h":!0}),le(n)!=="svelte-kf6j7o"&&(n.textContent=o),i=y(W),u=g(W,"INPUT",{type:!0,id:!0,class:!0}),v=y(W),h&&h.l(W),W.forEach(_),w=y(j),I=g(j,"DIV",{class:!0});var ce=$(I);F=g(ce,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),le(F)!=="svelte-1hlqgjb"&&(F.textContent=Y),P=y(ce),E=g(ce,"BUTTON",{type:!0,title:!0,class:!0});var de=$(E);N=g(de,"SPAN",{class:!0,"data-svelte-h":!0}),le(N)!=="svelte-1o6petk"&&(N.textContent=H),V=y(de),ie(C.$$.fragment,de),de.forEach(_),ce.forEach(_),j.forEach(_),z=y(J),m&&m.l(J),O=y(J),L&&L.l(J),J.forEach(_),K=y(X),S&&S.l(X),X.forEach(_),this.h()},h(){Ne.title="Logs | platformOS",d(n,"for","filter"),d(u,"type","text"),d(u,"id","filter"),d(u,"class","svelte-1psu8mw"),d(F,"type","button"),d(F,"class","button"),d(N,"class","label"),d(E,"type","button"),d(E,"title","Toggle pinned logs panel"),d(E,"class","button"),d(I,"class","svelte-1psu8mw"),d(l,"class","svelte-1psu8mw"),d(e,"class","logs svelte-1psu8mw"),d(s,"class","container svelte-1psu8mw")},m(b,k){A(b,t,k),A(b,s,k),f(s,e),f(e,l),f(l,r),f(r,n),f(r,i),f(r,u),Ie(u,a[1]),f(r,v),h&&h.m(r,null),f(l,w),f(l,I),f(I,F),f(I,P),f(I,E),f(E,N),f(E,V),ue(C,E,null),f(e,z),m&&m.m(e,null),f(e,O),L&&L.m(e,null),f(s,K),S&&S.m(s,null),a[18](s),Z=!0,ee||(c=[te(u,"input",a[8]),te(F,"click",a[10]),te(E,"click",a[7])],ee=!0)},p(b,[k]){k&2&&u.value!==b[1]&&Ie(u,b[1]),b[1]?h?(h.p(b,k),k&2&&T(h,1)):(h=Ue(b),h.c(),T(h,1),h.m(r,null)):h&&(re(),B(h,1,1,()=>{h=null}),ae()),b[4].logs.logs?m?(m.p(b,k),k&16&&T(m,1)):(m=Be(b),m.c(),T(m,1),m.m(e,O)):m&&(re(),B(m,1,1,()=>{m=null}),ae()),b[1]?L&&(L.d(1),L=null):L||(L=Me(),L.c(),L.m(e,null)),b[3]?S?(S.p(b,k),k&8&&T(S,1)):(S=ze(b),S.c(),T(S,1),S.m(s,null)):S&&(re(),B(S,1,1,()=>{S=null}),ae())},i(b){Z||(T(h),T(C.$$.fragment,b),T(m),T(S),Z=!0)},o(b){B(h),B(C.$$.fragment,b),B(m),B(S),Z=!1},d(b){b&&(_(t),_(s)),h&&h.d(),fe(C),m&&m.d(),L&&L.d(),S&&S.d(),a[18](null),ee=!1,Ke(c)}}}let x=262144;function Ct(a,t,s){let e;et(a,he,c=>s(4,e=c));let l,r="",n=[],o,i;tt(()=>(u(),I(),i=setInterval(u,3e3),()=>clearInterval(i)));const u=async()=>{var m,L,S;const c=((L=(m=e.logs.logs)==null?void 0:m.at(-1))==null?void 0:L.id)??null,h=await mt.get({last:c});c?(S=h.logs)!=null&&S.length&&(pe(he,e.logs.logs=[...e.logs.logs,...h.logs],e),e.logs.downloaded_at.push(Date.now()),e.logs.downloaded_at.length>2&&e.logs.downloaded_at.splice(0,1)):e.logs.logs||(pe(he,e.logs=h,e),e.logs.downloaded_at||pe(he,e.logs.downloaded_at=[Date.now()],e))},v=c=>c.hidden===!0||c.error_type.toLowerCase().indexOf(r)===-1&&c.message.toLowerCase().indexOf(r)===-1;let w=!1;lt(()=>{{const c=document.querySelector(".logs");c&&Math.abs(c.scrollHeight-c.scrollTop-c.clientHeight)<10&&(w=!1)}}),st(async()=>{var c;w||(await rt(),document.querySelector("footer").scrollIntoView(),(c=e.logs.logs)!=null&&c.length&&(w=!0))});const I=()=>{s(3,o=localStorage.pinnedPanel==="true"),s(2,n=localStorage.pinnedLogs?JSON.parse(localStorage.pinnedLogs):[])},F=c=>{n.find(h=>h.id===c.id)?s(2,n=n.filter(h=>h.id!==c.id)):s(2,n=[...n,c]),localStorage.pinnedLogs=JSON.stringify(n)},Y=()=>{o?(s(3,o=!1),localStorage.pinnedPanel=!1):(s(3,o=!0),localStorage.pinnedPanel=!0)};function P(){r=this.value,s(1,r)}const E=()=>s(1,r=""),N=()=>e.logs.logs.forEach((c,h)=>pe(he,e.logs.logs[h].hidden=!0,e)),H=(c,h,m)=>pe(he,h[m].showFull=!0,e),V=(c,h)=>navigator.clipboard.writeText(c.message).then(()=>{h.target.classList.add("confirmation"),setTimeout(()=>h.target.classList.remove("confirmation"),1e3)}),C=c=>F(c),z=(c,h)=>h.id===c.id,O=()=>{localStorage.pinnedLogs=[],s(2,n=[])},K=c=>F(c),Z=(c,h,m)=>s(2,h[m].showFull=!0,n);function ee(c){ot[c?"unshift":"push"](()=>{l=c,s(0,l)})}return[l,r,n,o,e,v,F,Y,P,E,N,H,V,C,z,O,K,Z,ee]}class At extends it{constructor(t){super(),ut(this,t,Ct,Tt,Ze,{})}}export{At as component};
