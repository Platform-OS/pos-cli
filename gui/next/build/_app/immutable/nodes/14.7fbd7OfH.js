import{S as Ze,i as Ge,s as Qe,d as h,o as R,p as D,R as ge,H as $e,b as A,J as le,V as _t,e as g,f as I,j as $,l as Pe,O as Ke,y as Ae,N as Fe,ag as gt,C as rt,x as st,ae as Ye,F as re,c,z as _,X as dt,K as ne,h as L,k as F,a as _e,g as W,t as X,E as se,I as ie,L as oe,M as ue,n as Ue,W as Tt,a9 as hl,ai as At,Q as ke,Y as Rt,a5 as bl,P as gl,D as $l,ab as wl,G as yl,v as kl,ac as El}from"../chunks/n7YEDvJi.js";import{g as Tl}from"../chunks/D0QH3NT1.js";import"../chunks/IHki7fMi.js";import{p as wt}from"../chunks/C6Nbyvij.js";import{s as H}from"../chunks/Bp_ajb_u.js";import{g as ut}from"../chunks/BD1m7lx9.js";import{b as Ut,c as Cl}from"../chunks/BkeFH9yg.js";import{I as Se}from"../chunks/DHO4ENnJ.js";import{e as Ee,u as Nl,o as Sl}from"../chunks/DMhVG_ro.js";import{p as ml}from"../chunks/6Lnq5zID.js";import{c as Ol,T as Il}from"../chunks/B9_cNKsK.js";import{J as Dl}from"../chunks/CMNnzBs7.js";import{q as Ll}from"../chunks/iVSWiVfi.js";import{t as Fl}from"../chunks/x4PJc0Qf.js";import{N as Pl}from"../chunks/CYamOUSl.js";const Al=(r=[])=>{let e="",l={},t="";const n={int:["value_int","not_value_int"],float:["not_value_float","value_float"],bool:["exists","not_value_boolean","value_boolean"],range:["range"],array:["value_array","not_value_array","value_in","not_value_in","array_overlaps","not_array_overlaps"]};for(const a of r){if(!a.minFilterValue&&!a.maxFilterValue&&!a.value)break;let s="",o="";n.int.includes(a.operation)?(s="integer",o=parseInt(a.value)):n.float.includes(a.operation)?(s="float",o=parseFloat(a.value)):n.bool.includes(a.operation)?(s="boolean",o=a.value==="true"):n.range.includes(a.operation)?(s="range",o={},o[a.minFilter]=a.minFilterValue,o[a.maxFilter]=a.maxFilterValue):n.array.includes(a.operation)?(s="array",o=JSON.parse(a.value)):(s="string",o=a.value),a.name!=="id"&&(e+=`, $${a.name}: ${Cl[s]||"String"}`,l[a.name]=o,t+=`{
        name: "${a.name}",
        ${a.operation}: $${a.name}
      }`)}return e.length&&(e=e.slice(2),e=`(${e})`),t=`
    properties: [${t}]
  `,{variablesDefinition:e,variables:l,propertiesFilter:t}},Ne={get:r=>{var d,f,m;const l={...{deleted:!1,filters:{page:1}},...r},t=l.table?`table_id: { value: ${l.table} }`:"",n=(f=(d=l.filters)==null?void 0:d.attributes)==null?void 0:f.findIndex(b=>b.name==="id");let a="";n>=0&&l.filters.attributes[n].value&&(a=`id: { ${l.filters.attributes[n].operation}: ${l.filters.attributes[n].value} }`);let s="";l.sort?l.sort.by==="id"||l.sort.by==="created_at"||l.sort.by==="updated_at"?s=`${l.sort.by}: { order: ${l.sort.order} }`:s=`properties: { name: "${l.sort.by}", order: ${l.sort.order} }`:s="created_at: { order: DESC }";const o=l.deleted==="true"?"deleted_at: { exists: true }":"",i=Al((m=l.filters)==null?void 0:m.attributes),u=`
      query${i.variablesDefinition} {
        records(
          page: ${l.filters.page}
          per_page: 20,
          sort: { ${s} },
          filter: {
            ${t}
            ${a}
            ${o}
            ${i.propertiesFilter}
          }
        ) {
          current_page
          total_pages
          results {
            id
            created_at
            updated_at
            deleted_at
            properties
          }
        }
      }`;return ut({query:u,variables:i.variables}).then(b=>{H.data("records",b.records)})},create:r=>{const l=Object.fromEntries(r.properties.entries()).tableName,t=Ut(r.properties),n=`
      mutation${t.variablesDefinition} {
        record_create(record: {
          table: "${l}",
          properties: [${t.properties}]
        }) {
          id
        }
      }`;return ut({query:n,variables:t.variables})},edit:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=Ut(r.properties),a=`
      mutation${n.variablesDefinition} {
        record_update(
          id: ${t},
          record: {
            table: "${l}"
            properties: [${n.properties}]
          }
        ) {
          id
        }
      }`;return ut({query:a,variables:n.variables})},delete:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=`
      mutation {
        record_delete(table: "${l}", id: ${t}) {
          id
        }
      }`;return ut({query:n})},restore:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,n=`
      mutation {
        record_update(
          id: ${e.recordId},
          record: {
            table: "${l}",
            deleted_at: null
          }
        ) {
          id
        }
      }`;return ut({query:n})}};function Vt(r,e,l){const t=r.slice();return t[10]=e[l],t[11]=e,t[12]=l,t}function jt(r,e,l){const t=r.slice();return t[13]=e[l],t}function zt(r,e,l){const t=r.slice();return t[16]=e[l],t}function Bt(r){let e,l,t=Ee(r[1].filters.attributes),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ht(Vt(r,t,s));const a=s=>R(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Ae()},l(s){for(let o=0;o<n.length;o+=1)n[o].l(s);e=Ae()},m(s,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,o);A(s,e,o),l=!0},p(s,o){if(o&6){t=Ee(s[1].filters.attributes);let i;for(i=0;i<t.length;i+=1){const u=Vt(s,t,i);n[i]?(n[i].p(u,o),D(n[i],1)):(n[i]=Ht(u),n[i].c(),D(n[i],1),n[i].m(e.parentNode,e))}for(ge(),i=t.length;i<n.length;i+=1)a(i);$e()}},i(s){if(!l){for(let o=0;o<t.length;o+=1)D(n[o]);l=!0}},o(s){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)R(n[o]);l=!1},d(s){s&&h(e),Ke(n,s)}}}function Mt(r){let e,l=r[16].name+"",t,n,a;return{c(){e=$("option"),t=X(l),n=F(),this.h()},l(s){e=g(s,"OPTION",{});var o=I(e);t=W(o,l),n=L(o),o.forEach(h),this.h()},h(){e.__value=a=r[16].name,re(e,e.__value)},m(s,o){A(s,e,o),c(e,t),c(e,n)},p(s,o){o&2&&l!==(l=s[16].name+"")&&_e(t,l),o&2&&a!==(a=s[16].name)&&(e.__value=a,re(e,e.__value))},d(s){s&&h(e)}}}function Rl(r){let e,l,t=r[10].attribute_type+"",n;return{c(){e=X("Unknow property type: "),l=$("code"),n=X(t)},l(a){e=W(a,"Unknow property type: "),l=g(a,"CODE",{});var s=I(l);n=W(s,t),s.forEach(h)},m(a,s){A(a,e,s),A(a,l,s),c(l,n)},p(a,s){s&2&&t!==(t=a[10].attribute_type+"")&&_e(n,t)},i:Ue,o:Ue,d(a){a&&(h(e),h(l))}}}function Ul(r){let e,l,t,n,a,s="Apply filters",o,i,u,d,f,m=Ee(r[2][r[10].attribute_type]),b=[];for(let p=0;p<m.length;p+=1)b[p]=qt(jt(r,m,p));function C(){r[7].call(e,r[11],r[12])}function E(p,y){return p[10].operation==="exists"?zl:p[10].operation==="range"?jl:Vl}let v=E(r),k=v(r);return i=new Se({props:{icon:"arrowRight"}}),{c(){e=$("select");for(let p=0;p<b.length;p+=1)b[p].c();l=F(),k.c(),t=F(),n=$("button"),a=$("span"),a.textContent=s,o=F(),ue(i.$$.fragment),this.h()},l(p){e=g(p,"SELECT",{name:!0,class:!0});var y=I(e);for(let z=0;z<b.length;z+=1)b[z].l(y);y.forEach(h),l=L(p),k.l(p),t=L(p),n=g(p,"BUTTON",{type:!0,class:!0});var T=I(n);a=g(T,"SPAN",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-6jbkuq"&&(a.textContent=s),o=L(T),oe(i.$$.fragment,T),T.forEach(h),this.h()},h(){_(e,"name","operation"),_(e,"class","svelte-y4u12o"),r[10].operation===void 0&&dt(C),_(a,"class","label"),_(n,"type","submit"),_(n,"class","button svelte-y4u12o")},m(p,y){A(p,e,y);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(e,null);Ye(e,r[10].operation,!0),A(p,l,y),k.m(p,y),A(p,t,y),A(p,n,y),c(n,a),c(n,o),ie(i,n,null),u=!0,d||(f=le(e,"change",C),d=!0)},p(p,y){if(r=p,y&6){m=Ee(r[2][r[10].attribute_type]);let T;for(T=0;T<m.length;T+=1){const z=jt(r,m,T);b[T]?b[T].p(z,y):(b[T]=qt(z),b[T].c(),b[T].m(e,null))}for(;T<b.length;T+=1)b[T].d(1);b.length=m.length}y&2&&Ye(e,r[10].operation),v===(v=E(r))&&k?k.p(r,y):(k.d(1),k=v(r),k&&(k.c(),k.m(t.parentNode,t)))},i(p){u||(D(i.$$.fragment,p),u=!0)},o(p){R(i.$$.fragment,p),u=!1},d(p){p&&(h(e),h(l),h(t),h(n)),Ke(b,p),k.d(p),se(i),d=!1,f()}}}function qt(r){let e,l=r[13]+"",t,n;return{c(){e=$("option"),t=X(l),this.h()},l(a){e=g(a,"OPTION",{});var s=I(e);t=W(s,l),s.forEach(h),this.h()},h(){e.__value=n=r[13],re(e,e.__value)},m(a,s){A(a,e,s),c(e,t)},p(a,s){s&2&&l!==(l=a[13]+"")&&_e(t,l),s&2&&n!==(n=a[13])&&(e.__value=n,re(e,e.__value))},d(a){a&&h(e)}}}function Vl(r){let e,l,t;function n(){r[8].call(e,r[11],r[12])}return{c(){e=$("input"),this.h()},l(a){e=g(a,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){_(e,"type","text"),_(e,"name","value"),_(e,"placeholder","filter value"),_(e,"class","svelte-y4u12o")},m(a,s){A(a,e,s),re(e,r[10].value),l||(t=le(e,"input",n),l=!0)},p(a,s){r=a,s&2&&e.value!==r[10].value&&re(e,r[10].value)},d(a){a&&h(e),l=!1,t()}}}function jl(r){let e,l,t=">",n,a="≥",s,o,i,u,d,f,m="<",b,C="≤",E,v,k;return{c(){e=$("select"),l=$("option"),l.textContent=t,n=$("option"),n.textContent=a,s=F(),o=$("input"),u=F(),d=$("select"),f=$("option"),f.textContent=m,b=$("option"),b.textContent=C,E=F(),v=$("input"),this.h()},l(p){e=g(p,"SELECT",{name:!0,class:!0});var y=I(e);l=g(y,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-1xj81f9"&&(l.textContent=t),n=g(y,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-w6lec5"&&(n.textContent=a),y.forEach(h),s=L(p),o=g(p,"INPUT",{type:!0,name:!0,class:!0}),u=L(p),d=g(p,"SELECT",{name:!0,class:!0});var T=I(d);f=g(T,"OPTION",{"data-svelte-h":!0}),ne(f)!=="svelte-1kxptxj"&&(f.textContent=m),b=g(T,"OPTION",{"data-svelte-h":!0}),ne(b)!=="svelte-1juwqhl"&&(b.textContent=C),T.forEach(h),E=L(p),v=g(p,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){l.__value="gt",re(l,l.__value),n.__value="gte",re(n,n.__value),_(e,"name","maxFilter"),_(e,"class","svelte-y4u12o"),_(o,"type","number"),_(o,"name","maxFilterValue"),o.value=i=r[10].maxFilterValue,_(o,"class","svelte-y4u12o"),f.__value="lt",re(f,f.__value),b.__value="lte",re(b,b.__value),_(d,"name","minFilter"),_(d,"class","svelte-y4u12o"),_(v,"type","number"),_(v,"name","minFilterValue"),v.value=k=r[10].minFilterValue,_(v,"class","svelte-y4u12o")},m(p,y){A(p,e,y),c(e,l),c(e,n),A(p,s,y),A(p,o,y),A(p,u,y),A(p,d,y),c(d,f),c(d,b),A(p,E,y),A(p,v,y)},p(p,y){y&2&&i!==(i=p[10].maxFilterValue)&&o.value!==i&&(o.value=i),y&2&&k!==(k=p[10].minFilterValue)&&v.value!==k&&(v.value=k)},d(p){p&&(h(e),h(s),h(o),h(u),h(d),h(E),h(v))}}}function zl(r){let e,l,t="true",n,a="false";return{c(){e=$("select"),l=$("option"),l.textContent=t,n=$("option"),n.textContent=a,this.h()},l(s){e=g(s,"SELECT",{name:!0,class:!0});var o=I(e);l=g(o,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-ogzxji"&&(l.textContent=t),n=g(o,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-gyv02o"&&(n.textContent=a),o.forEach(h),this.h()},h(){l.__value="true",re(l,l.__value),n.__value="false",re(n,n.__value),_(e,"name","value"),_(e,"class","svelte-y4u12o")},m(s,o){A(s,e,o),c(e,l),c(e,n)},p:Ue,d(s){s&&h(e)}}}function Ht(r){let e,l,t="Filter by:",n,a,s,o="id",i,u,d,f,m,b,C,E,v,k=Ee(r[1].table.properties),p=[];for(let N=0;N<k.length;N+=1)p[N]=Mt(zt(r,k,N));function y(){r[4].call(a,r[11],r[12])}function T(){return r[5](r[10],r[11],r[12])}function z(){r[6].call(u,r[11],r[12])}const q=[Ul,Rl],S=[];function j(N,w){return N[2][N[10].attribute_type]?0:1}return f=j(r),m=S[f]=q[f](r),{c(){e=$("fieldset"),l=$("label"),l.textContent=t,n=F(),a=$("select"),s=$("option"),s.textContent=o;for(let N=0;N<p.length;N+=1)p[N].c();i=F(),u=$("input"),d=F(),m.c(),b=F(),this.h()},l(N){e=g(N,"FIELDSET",{class:!0});var w=I(e);l=g(w,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ne(l)!=="svelte-1adf875"&&(l.textContent=t),n=L(w),a=g(w,"SELECT",{name:!0,class:!0});var O=I(a);s=g(O,"OPTION",{"data-svelte-h":!0}),ne(s)!=="svelte-ns3pfu"&&(s.textContent=o);for(let P=0;P<p.length;P+=1)p[P].l(O);O.forEach(h),i=L(w),u=g(w,"INPUT",{type:!0,name:!0}),d=L(w),m.l(w),b=L(w),w.forEach(h),this.h()},h(){_(l,"for",""),_(l,"class","svelte-y4u12o"),s.__value="id",re(s,s.__value),_(a,"name","name"),_(a,"class","svelte-y4u12o"),r[10].name===void 0&&dt(y),_(u,"type","hidden"),_(u,"name","attribute_type"),_(e,"class","svelte-y4u12o")},m(N,w){A(N,e,w),c(e,l),c(e,n),c(e,a),c(a,s);for(let O=0;O<p.length;O+=1)p[O]&&p[O].m(a,null);Ye(a,r[10].name,!0),c(e,i),c(e,u),re(u,r[10].attribute_type),c(e,d),S[f].m(e,null),c(e,b),C=!0,E||(v=[le(a,"change",y),le(a,"change",T),le(u,"input",z)],E=!0)},p(N,w){if(r=N,w&2){k=Ee(r[1].table.properties);let P;for(P=0;P<k.length;P+=1){const M=zt(r,k,P);p[P]?p[P].p(M,w):(p[P]=Mt(M),p[P].c(),p[P].m(a,null))}for(;P<p.length;P+=1)p[P].d(1);p.length=k.length}w&2&&Ye(a,r[10].name),w&2&&re(u,r[10].attribute_type);let O=f;f=j(r),f===O?S[f].p(r,w):(ge(),R(S[O],1,1,()=>{S[O]=null}),$e(),m=S[f],m?m.p(r,w):(m=S[f]=q[f](r),m.c()),D(m,1),m.m(e,b))},i(N){C||(D(m),C=!0)},o(N){R(m),C=!1},d(N){N&&h(e),Ke(p,N),S[f].d(),E=!1,st(v)}}}function Bl(r){var s;let e,l,t,n,a=((s=r[1].table)==null?void 0:s.properties)&&Bt(r);return{c(){e=$("form"),a&&a.c()},l(o){e=g(o,"FORM",{});var i=I(e);a&&a.l(i),i.forEach(h)},m(o,i){A(o,e,i),a&&a.m(e,null),r[9](e),l=!0,t||(n=le(e,"submit",_t(r[3])),t=!0)},p(o,[i]){var u;(u=o[1].table)!=null&&u.properties?a?(a.p(o,i),i&2&&D(a,1)):(a=Bt(o),a.c(),D(a,1),a.m(e,null)):a&&(ge(),R(a,1,1,()=>{a=null}),$e())},i(o){l||(D(a),l=!0)},o(o){R(a),l=!1},d(o){o&&h(e),a&&a.d(),r[9](null),t=!1,n()}}}function Ml(r,e,l){let t;Pe(r,H,b=>l(1,t=b));let n;const a={id:["value"],string:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"],text:["value","exists","not_value"],array:["array_contains","value_array","value_in","exists","array_overlaps","not_array_contains","not_array_overlaps","not_value_array","not_value_in"],boolean:["value_boolean","exists","not_value_boolean"],integer:["value_int","exists","not_value_int","range"],float:["value_float","exists","not_value_float","range"],upload:["value","exists","not_value"],datetime:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"],date:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"]},s=()=>{Fe(H,t.filters={page:1,attributes:[Object.fromEntries(new FormData(n).entries())],deleted:t.filters.deleted},t),Ne.get({table:t.table.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function o(b,C){b[C].name=gt(this),H.set(t)}const i=(b,C,E)=>{var v;Fe(H,C[E].attribute_type=((v=t.table.properties.find(k=>k.name===b.name))==null?void 0:v.attribute_type)||"id",t)};function u(b,C){b[C].attribute_type=this.value,H.set(t)}function d(b,C){b[C].operation=gt(this),H.set(t)}function f(b,C){b[C].value=this.value,H.set(t)}function m(b){rt[b?"unshift":"push"](()=>{n=b,l(0,n)})}return[n,t,a,s,o,i,u,d,f,m]}class ql extends Ze{constructor(e){super(),Ge(this,e,Ml,Bl,Qe,{})}}function Jt(r,e,l){const t=r.slice();return t[8]=e[l],t}function Wt(r){let e,l,t="created at",n,a="updated at",s,o="id",i,u,d,f="DESC [Z→A]",m,b="ASC [A→Z]",C,E,v,k,p,y,T,z=Ee(r[1].table.properties),q=[];for(let w=0;w<z.length;w+=1)q[w]=Xt(Jt(r,z,w));const S=[Jl,Hl],j=[];function N(w,O){return w[1].sort.order==="DESC"?0:1}return v=N(r),k=j[v]=S[v](r),{c(){e=$("select"),l=$("option"),l.textContent=t,n=$("option"),n.textContent=a,s=$("option"),s.textContent=o;for(let w=0;w<q.length;w+=1)q[w].c();i=F(),u=$("select"),d=$("option"),d.textContent=f,m=$("option"),m.textContent=b,C=F(),E=$("label"),k.c(),this.h()},l(w){e=g(w,"SELECT",{name:!0,id:!0,class:!0});var O=I(e);l=g(O,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-waq5ct"&&(l.textContent=t),n=g(O,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-msojyp"&&(n.textContent=a),s=g(O,"OPTION",{"data-svelte-h":!0}),ne(s)!=="svelte-ns3pfu"&&(s.textContent=o);for(let Z=0;Z<q.length;Z+=1)q[Z].l(O);O.forEach(h),i=L(w),u=g(w,"SELECT",{name:!0,id:!0,class:!0});var P=I(u);d=g(P,"OPTION",{"data-svelte-h":!0}),ne(d)!=="svelte-1soe6tv"&&(d.textContent=f),m=g(P,"OPTION",{"data-svelte-h":!0}),ne(m)!=="svelte-ih5v4p"&&(m.textContent=b),P.forEach(h),C=L(w),E=g(w,"LABEL",{for:!0,class:!0});var M=I(E);k.l(M),M.forEach(h),this.h()},h(){l.__value="created_at",re(l,l.__value),n.__value="updated_at",re(n,n.__value),s.__value="id",re(s,s.__value),_(e,"name","by"),_(e,"id","sort_by"),_(e,"class","svelte-yzlk61"),r[1].sort.by===void 0&&dt(()=>r[3].call(e)),d.__value="DESC",re(d,d.__value),m.__value="ASC",re(m,m.__value),_(u,"name","order"),_(u,"id","sort_order"),_(u,"class","svelte-yzlk61"),r[1].sort.order===void 0&&dt(()=>r[5].call(u)),_(E,"for","sort_order"),_(E,"class","button svelte-yzlk61")},m(w,O){A(w,e,O),c(e,l),c(e,n),c(e,s);for(let P=0;P<q.length;P+=1)q[P]&&q[P].m(e,null);Ye(e,r[1].sort.by,!0),A(w,i,O),A(w,u,O),c(u,d),c(u,m),Ye(u,r[1].sort.order,!0),A(w,C,O),A(w,E,O),j[v].m(E,null),p=!0,y||(T=[le(e,"change",r[3]),le(e,"change",r[4]),le(u,"change",r[5]),le(u,"change",r[6])],y=!0)},p(w,O){if(O&2){z=Ee(w[1].table.properties);let M;for(M=0;M<z.length;M+=1){const Z=Jt(w,z,M);q[M]?q[M].p(Z,O):(q[M]=Xt(Z),q[M].c(),q[M].m(e,null))}for(;M<q.length;M+=1)q[M].d(1);q.length=z.length}O&2&&Ye(e,w[1].sort.by),O&2&&Ye(u,w[1].sort.order);let P=v;v=N(w),v!==P&&(ge(),R(j[P],1,1,()=>{j[P]=null}),$e(),k=j[v],k||(k=j[v]=S[v](w),k.c()),D(k,1),k.m(E,null))},i(w){p||(D(k),p=!0)},o(w){R(k),p=!1},d(w){w&&(h(e),h(i),h(u),h(C),h(E)),Ke(q,w),j[v].d(),y=!1,st(T)}}}function Xt(r){let e,l=r[8].name+"",t,n,a;return{c(){e=$("option"),t=X(l),n=F(),this.h()},l(s){e=g(s,"OPTION",{});var o=I(e);t=W(o,l),n=L(o),o.forEach(h),this.h()},h(){e.__value=a=r[8].name,re(e,e.__value)},m(s,o){A(s,e,o),c(e,t),c(e,n)},p(s,o){o&2&&l!==(l=s[8].name+"")&&_e(t,l),o&2&&a!==(a=s[8].name)&&(e.__value=a,re(e,e.__value))},d(s){s&&h(e)}}}function Hl(r){let e,l;return e=new Se({props:{icon:"sortAZ"}}),{c(){ue(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function Jl(r){let e,l;return e=new Se({props:{icon:"sortZA"}}),{c(){ue(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function Wl(r){var s;let e,l,t,n,a=((s=r[1].table)==null?void 0:s.properties)&&Wt(r);return{c(){e=$("form"),a&&a.c(),this.h()},l(o){e=g(o,"FORM",{class:!0});var i=I(e);a&&a.l(i),i.forEach(h),this.h()},h(){_(e,"class","svelte-yzlk61")},m(o,i){A(o,e,i),a&&a.m(e,null),r[7](e),l=!0,t||(n=le(e,"submit",_t(r[2])),t=!0)},p(o,[i]){var u;(u=o[1].table)!=null&&u.properties?a?(a.p(o,i),i&2&&D(a,1)):(a=Wt(o),a.c(),D(a,1),a.m(e,null)):a&&(ge(),R(a,1,1,()=>{a=null}),$e())},i(o){l||(D(a),l=!0)},o(o){R(a),l=!1},d(o){o&&h(e),a&&a.d(),r[7](null),t=!1,n()}}}function Xl(r,e,l){let t;Pe(r,H,f=>l(1,t=f));let n;const a=()=>{Fe(H,t.filters.page=1,t),Ne.get({table:t.table.id,filters:t.filters,sort:Object.fromEntries(new FormData(n).entries()),deleted:t.filters.deleted})};function s(){t.sort.by=gt(this),H.set(t)}const o=()=>n.requestSubmit();function i(){t.sort.order=gt(this),H.set(t)}const u=()=>n.requestSubmit();function d(f){rt[f?"unshift":"push"](()=>{n=f,l(0,n)})}return[n,t,a,s,o,i,u,d]}class Yl extends Ze{constructor(e){super(),Ge(this,e,Xl,Wl,Qe,{})}}function Kl(r){let e,l,t,n,a,s,o,i,u,d,f,m,b;return u=new Se({props:{icon:"x",size:"22"}}),{c(){e=$("form"),l=$("input"),n=F(),a=$("input"),s=F(),o=$("button"),i=$("i"),ue(u.$$.fragment),d=X(`
    Delete record`),this.h()},l(C){e=g(C,"FORM",{});var E=I(e);l=g(E,"INPUT",{type:!0,name:!0}),n=L(E),a=g(E,"INPUT",{type:!0,name:!0}),s=L(E),o=g(E,"BUTTON",{class:!0});var v=I(o);i=g(v,"I",{class:!0});var k=I(i);oe(u.$$.fragment,k),k.forEach(h),d=W(v,`
    Delete record`),v.forEach(h),E.forEach(h),this.h()},h(){_(l,"type","hidden"),_(l,"name","tableName"),l.value=t=r[0].name,_(a,"type","hidden"),_(a,"name","recordId"),a.value=r[1],_(i,"class","svelte-ooaugn"),_(o,"class","danger")},m(C,E){A(C,e,E),c(e,l),c(e,n),c(e,a),c(e,s),c(e,o),c(o,i),ie(u,i,null),c(o,d),r[4](e),f=!0,m||(b=le(e,"submit",r[3]),m=!0)},p(C,[E]){(!f||E&1&&t!==(t=C[0].name))&&(l.value=t),(!f||E&2)&&(a.value=C[1])},i(C){f||(D(u.$$.fragment,C),f=!0)},o(C){R(u.$$.fragment,C),f=!1},d(C){C&&h(e),se(u),r[4](null),m=!1,b()}}}function Zl(r,e,l){let t,n;Pe(r,H,f=>l(5,t=f)),Pe(r,wt,f=>l(6,n=f));let{table:a}=e,{id:s}=e,o,i=Tt();const u=async f=>{if(f.preventDefault(),confirm("Are you sure you want to delete this record?")){i("success");const m=await Ne.delete({table:a.name,properties:new FormData(o)});m.errors?H.notification.create("error",`Record ${m.record_delete.id} could not be deleted`):(Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.notification.create("success",`Record ${m.record_delete.id} deleted`))}};function d(f){rt[f?"unshift":"push"](()=>{o=f,l(2,o)})}return r.$$set=f=>{"table"in f&&l(0,a=f.table),"id"in f&&l(1,s=f.id)},[a,s,o,u,d]}class Gl extends Ze{constructor(e){super(),Ge(this,e,Zl,Kl,Qe,{table:0,id:1})}}function Ql(r){let e,l,t,n,a,s,o,i,u,d,f,m,b;return u=new Se({props:{icon:"recycleRefresh"}}),{c(){e=$("form"),l=$("input"),n=F(),a=$("input"),s=F(),o=$("button"),i=$("i"),ue(u.$$.fragment),d=X(`
    Restore record`),this.h()},l(C){e=g(C,"FORM",{});var E=I(e);l=g(E,"INPUT",{type:!0,name:!0}),n=L(E),a=g(E,"INPUT",{type:!0,name:!0}),s=L(E),o=g(E,"BUTTON",{});var v=I(o);i=g(v,"I",{});var k=I(i);oe(u.$$.fragment,k),k.forEach(h),d=W(v,`
    Restore record`),v.forEach(h),E.forEach(h),this.h()},h(){_(l,"type","hidden"),_(l,"name","tableName"),l.value=t=r[0].name,_(a,"type","hidden"),_(a,"name","recordId"),a.value=r[1]},m(C,E){A(C,e,E),c(e,l),c(e,n),c(e,a),c(e,s),c(e,o),c(o,i),ie(u,i,null),c(o,d),r[4](e),f=!0,m||(b=le(e,"submit",r[3]),m=!0)},p(C,[E]){(!f||E&1&&t!==(t=C[0].name))&&(l.value=t),(!f||E&2)&&(a.value=C[1])},i(C){f||(D(u.$$.fragment,C),f=!0)},o(C){R(u.$$.fragment,C),f=!1},d(C){C&&h(e),se(u),r[4](null),m=!1,b()}}}function xl(r,e,l){let t,n;Pe(r,H,f=>l(5,t=f)),Pe(r,wt,f=>l(6,n=f));let{table:a}=e,{id:s}=e,o,i=Tt();const u=async f=>{f.preventDefault(),i("success");const m=await Ne.restore({table:a.name,properties:new FormData(o)});m.errors?H.notification.create("error",`Record ${m.record_update.id} could not be restored`):(Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.notification.create("success",`Record ${m.record_update.id} restored`))};function d(f){rt[f?"unshift":"push"](()=>{o=f,l(2,o)})}return r.$$set=f=>{"table"in f&&l(0,a=f.table),"id"in f&&l(1,s=f.id)},[a,s,o,u,d]}class er extends Ze{constructor(e){super(),Ge(this,e,xl,Ql,Qe,{table:0,id:1})}}function tr(r){let e,l;return e=new Gl({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[6]),{c(){ue(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function lr(r){let e,l;return e=new er({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[5]),{c(){ue(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function rr(r){let e,l,t,n,a,s,o,i,u,d,f,m,b;a=new Se({props:{icon:"copy",size:"22"}});const C=[lr,tr],E=[];function v(k,p){return k[1].filters.deleted==="true"?0:1}return u=v(r),d=E[u]=C[u](r),{c(){e=$("menu"),l=$("ul"),t=$("li"),n=$("button"),ue(a.$$.fragment),s=X(`
        Copy record`),o=F(),i=$("li"),d.c(),this.h()},l(k){e=g(k,"MENU",{class:!0});var p=I(e);l=g(p,"UL",{});var y=I(l);t=g(y,"LI",{class:!0});var T=I(t);n=g(T,"BUTTON",{type:!0});var z=I(n);oe(a.$$.fragment,z),s=W(z,`
        Copy record`),z.forEach(h),T.forEach(h),o=L(y),i=g(y,"LI",{class:!0});var q=I(i);d.l(q),q.forEach(h),y.forEach(h),p.forEach(h),this.h()},h(){_(n,"type","button"),_(t,"class","svelte-1tht2a1"),_(i,"class","svelte-1tht2a1"),_(e,"class","content-context svelte-1tht2a1")},m(k,p){A(k,e,p),c(e,l),c(l,t),c(t,n),ie(a,n,null),c(n,s),c(l,o),c(l,i),E[u].m(i,null),f=!0,m||(b=[le(window,"keyup",r[3]),le(n,"click",r[4]),hl(Ol.call(null,e,r[7]))],m=!0)},p(k,[p]){let y=u;u=v(k),u===y?E[u].p(k,p):(ge(),R(E[y],1,1,()=>{E[y]=null}),$e(),d=E[u],d?d.p(k,p):(d=E[u]=C[u](k),d.c()),D(d,1),d.m(i,null))},i(k){f||(D(a.$$.fragment,k),D(d),f=!0)},o(k){R(a.$$.fragment,k),R(d),f=!1},d(k){k&&h(e),se(a),E[u].d(),m=!1,st(b)}}}function nr(r,e,l){let t;Pe(r,H,f=>l(1,t=f));let{record:n}=e;const a=Tt(),s=f=>{f.key==="Escape"&&a("close")},o=()=>{a("close"),Fe(H,t.record={...n},t),Fe(H,t.record.id=null,t)},i=()=>a("close"),u=()=>a("close"),d=()=>a("close");return r.$$set=f=>{"record"in f&&l(0,n=f.record)},[n,t,a,s,o,i,u,d]}class ar extends Ze{constructor(e){super(),Ge(this,e,nr,rr,Qe,{record:0})}}function Yt(r,e,l){const t=r.slice();return t[5]=e[l],t}function Kt(r,e,l){const t=r.slice();t[8]=e[l];const n=ml(t[5].properties[t[8].name],t[8].attribute_type);return t[9]=n,t}function Zt(r,e,l){const t=r.slice();return t[8]=e[l],t}function Gt(r){var z,q;let e,l,t,n,a="id",s,o,i,u="created at",d,f,m="updated at",b,C,E,v,k=Ee(r[1].table.properties),p=[];for(let S=0;S<k.length;S+=1)p[S]=Qt(Zt(r,k,S));let y=r[1].filters.deleted==="true"&&xt(),T=((q=(z=r[1].records)==null?void 0:z.results)==null?void 0:q.length)&&el(r);return{c(){e=$("table"),l=$("thead"),t=$("tr"),n=$("th"),n.textContent=a,s=F();for(let S=0;S<p.length;S+=1)p[S].c();o=F(),i=$("th"),i.textContent=u,d=F(),f=$("th"),f.textContent=m,b=F(),y&&y.c(),C=F(),T&&T.c(),this.h()},l(S){e=g(S,"TABLE",{class:!0});var j=I(e);l=g(j,"THEAD",{class:!0});var N=I(l);t=g(N,"TR",{});var w=I(t);n=g(w,"TH",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-1i366gx"&&(n.textContent=a),s=L(w);for(let O=0;O<p.length;O+=1)p[O].l(w);o=L(w),i=g(w,"TH",{class:!0,"data-svelte-h":!0}),ne(i)!=="svelte-g832ob"&&(i.textContent=u),d=L(w),f=g(w,"TH",{class:!0,"data-svelte-h":!0}),ne(f)!=="svelte-1dvr12"&&(f.textContent=m),b=L(w),y&&y.l(w),w.forEach(h),N.forEach(h),C=L(j),T&&T.l(j),j.forEach(h),this.h()},h(){_(n,"class","id svelte-1bwwtph"),_(i,"class","svelte-1bwwtph"),_(f,"class","svelte-1bwwtph"),_(l,"class","svelte-1bwwtph"),_(e,"class",E=At(r[1].view.tableStyle)+" svelte-1bwwtph")},m(S,j){A(S,e,j),c(e,l),c(l,t),c(t,n),c(t,s);for(let N=0;N<p.length;N+=1)p[N]&&p[N].m(t,null);c(t,o),c(t,i),c(t,d),c(t,f),c(t,b),y&&y.m(t,null),c(e,C),T&&T.m(e,null),v=!0},p(S,j){var N,w;if(j&2){k=Ee(S[1].table.properties);let O;for(O=0;O<k.length;O+=1){const P=Zt(S,k,O);p[O]?p[O].p(P,j):(p[O]=Qt(P),p[O].c(),p[O].m(t,o))}for(;O<p.length;O+=1)p[O].d(1);p.length=k.length}S[1].filters.deleted==="true"?y||(y=xt(),y.c(),y.m(t,null)):y&&(y.d(1),y=null),(w=(N=S[1].records)==null?void 0:N.results)!=null&&w.length?T?(T.p(S,j),j&2&&D(T,1)):(T=el(S),T.c(),D(T,1),T.m(e,null)):T&&(ge(),R(T,1,1,()=>{T=null}),$e()),(!v||j&2&&E!==(E=At(S[1].view.tableStyle)+" svelte-1bwwtph"))&&_(e,"class",E)},i(S){v||(D(T),v=!0)},o(S){R(T),v=!1},d(S){S&&h(e),Ke(p,S),y&&y.d(),T&&T.d()}}}function Qt(r){let e,l=r[8].name+"",t,n,a,s,o=r[8].attribute_type+"",i,u;return{c(){e=$("th"),t=X(l),n=F(),a=$("small"),s=X("("),i=X(o),u=X(")"),this.h()},l(d){e=g(d,"TH",{class:!0});var f=I(e);t=W(f,l),n=L(f),a=g(f,"SMALL",{class:!0});var m=I(a);s=W(m,"("),i=W(m,o),u=W(m,")"),m.forEach(h),f.forEach(h),this.h()},h(){_(a,"class","type svelte-1bwwtph"),_(e,"class","svelte-1bwwtph")},m(d,f){A(d,e,f),c(e,t),c(e,n),c(e,a),c(a,s),c(a,i),c(a,u)},p(d,f){f&2&&l!==(l=d[8].name+"")&&_e(t,l),f&2&&o!==(o=d[8].attribute_type+"")&&_e(i,o)},d(d){d&&h(e)}}}function xt(r){let e,l="deleted at";return{c(){e=$("th"),e.textContent=l,this.h()},l(t){e=g(t,"TH",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1jwm27o"&&(e.textContent=l),this.h()},h(){_(e,"class","svelte-1bwwtph")},m(t,n){A(t,e,n)},d(t){t&&h(e)}}}function el(r){var o;let e=[],l=new Map,t,n,a=Ee((o=r[1].records)==null?void 0:o.results);const s=i=>i[5].id;for(let i=0;i<a.length;i+=1){let u=Yt(r,a,i),d=s(u);l.set(d,e[i]=al(d,u))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=Ae()},l(i){for(let u=0;u<e.length;u+=1)e[u].l(i);t=Ae()},m(i,u){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(i,u);A(i,t,u),n=!0},p(i,u){var d;u&3&&(a=Ee((d=i[1].records)==null?void 0:d.results),ge(),e=Nl(e,u,s,1,i,a,l,t.parentNode,Sl,al,t,Yt),$e())},i(i){if(!n){for(let u=0;u<a.length;u+=1)D(e[u]);n=!0}},o(i){for(let u=0;u<e.length;u+=1)R(e[u]);n=!1},d(i){i&&h(t);for(let u=0;u<e.length;u+=1)e[u].d(i)}}}function tl(r){let e,l;return e=new ar({props:{record:r[5]}}),e.$on("close",r[4]),{c(){ue(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.record=t[5]),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function ll(r){let e,l,t,n;const a=[ir,sr],s=[];function o(i,u){return i[9].type==="json"||i[9].type==="jsonEscaped"?0:1}return e=o(r),l=s[e]=a[e](r),{c(){l.c(),t=Ae()},l(i){l.l(i),t=Ae()},m(i,u){s[e].m(i,u),A(i,t,u),n=!0},p(i,u){let d=e;e=o(i),e===d?s[e].p(i,u):(ge(),R(s[d],1,1,()=>{s[d]=null}),$e(),l=s[e],l?l.p(i,u):(l=s[e]=a[e](i),l.c()),D(l,1),l.m(t.parentNode,t))},i(i){n||(D(l),n=!0)},o(i){R(l),n=!1},d(i){i&&h(t),s[e].d(i)}}}function sr(r){let e=r[9].value+"",l;return{c(){l=X(e)},l(t){l=W(t,e)},m(t,n){A(t,l,n)},p(t,n){n&2&&e!==(e=t[9].value+"")&&_e(l,e)},i:Ue,o:Ue,d(t){t&&h(l)}}}function ir(r){let e,l,t,n;const a=[ur,or],s=[];function o(i,u){return i[1].view.tableStyle==="expanded"?0:1}return e=o(r),l=s[e]=a[e](r),{c(){l.c(),t=Ae()},l(i){l.l(i),t=Ae()},m(i,u){s[e].m(i,u),A(i,t,u),n=!0},p(i,u){let d=e;e=o(i),e===d?s[e].p(i,u):(ge(),R(s[d],1,1,()=>{s[d]=null}),$e(),l=s[e],l?l.p(i,u):(l=s[e]=a[e](i),l.c()),D(l,1),l.m(t.parentNode,t))},i(i){n||(D(l),n=!0)},o(i){R(l),n=!1},d(i){i&&h(t),s[e].d(i)}}}function or(r){let e=JSON.stringify(r[9].value)+"",l;return{c(){l=X(e)},l(t){l=W(t,e)},m(t,n){A(t,l,n)},p(t,n){n&2&&e!==(e=JSON.stringify(t[9].value)+"")&&_e(l,e)},i:Ue,o:Ue,d(t){t&&h(l)}}}function ur(r){let e,l;return e=new Dl({props:{value:r[9].value}}),{c(){ue(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.value=t[9].value),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function rl(r){let e,l,t=r[9].value!==void 0&&ll(r);return{c(){e=$("td"),t&&t.c(),this.h()},l(n){e=g(n,"TD",{class:!0});var a=I(e);t&&t.l(a),a.forEach(h),this.h()},h(){_(e,"class","svelte-1bwwtph"),ke(e,"value-null",r[9].type==="null")},m(n,a){A(n,e,a),t&&t.m(e,null),l=!0},p(n,a){n[9].value!==void 0?t?(t.p(n,a),a&2&&D(t,1)):(t=ll(n),t.c(),D(t,1),t.m(e,null)):t&&(ge(),R(t,1,1,()=>{t=null}),$e()),(!l||a&2)&&ke(e,"value-null",n[9].type==="null")},i(n){l||(D(t),l=!0)},o(n){R(t),l=!1},d(n){n&&h(e),t&&t.d()}}}function nl(r){var i,u;let e,l=new Date((i=r[5])==null?void 0:i.deleted_at).toLocaleDateString(void 0,{})+"",t,n,a,s=new Date((u=r[5])==null?void 0:u.deleted_at).toLocaleTimeString(void 0,{})+"",o;return{c(){e=$("td"),t=X(l),n=F(),a=$("span"),o=X(s),this.h()},l(d){e=g(d,"TD",{class:!0});var f=I(e);t=W(f,l),n=L(f),a=g(f,"SPAN",{class:!0});var m=I(a);o=W(m,s),m.forEach(h),f.forEach(h),this.h()},h(){_(a,"class","svelte-1bwwtph"),_(e,"class","date svelte-1bwwtph")},m(d,f){A(d,e,f),c(e,t),c(e,n),c(e,a),c(a,o)},p(d,f){var m,b;f&2&&l!==(l=new Date((m=d[5])==null?void 0:m.deleted_at).toLocaleDateString(void 0,{})+"")&&_e(t,l),f&2&&s!==(s=new Date((b=d[5])==null?void 0:b.deleted_at).toLocaleTimeString(void 0,{})+"")&&_e(o,s)},d(d){d&&h(e)}}}function al(r,e){var nt,ye,ze,at;let l,t,n,a,s,o,i="More options",u,d,f,m,b,C="Edit record",E,v,k,p,y=e[5].id+"",T,z,q,S,j=new Date((nt=e[5])==null?void 0:nt.created_at).toLocaleDateString(void 0,{})+"",N,w,O,P=new Date((ye=e[5])==null?void 0:ye.created_at).toLocaleTimeString(void 0,{})+"",M,Z,G,U=new Date((ze=e[5])==null?void 0:ze.updated_at).toLocaleDateString(void 0,{})+"",K,B,ae,Ce=new Date((at=e[5])==null?void 0:at.updated_at).toLocaleTimeString(void 0,{})+"",me,ee,Oe,fe,we,Ve;d=new Se({props:{icon:"navigationMenuVertical",size:"16"}});function it(){return e[2](e[5])}v=new Se({props:{icon:"pencil",size:"16"}});function je(){return e[3](e[5])}let ce=e[0].id===e[5].id&&tl(e),De=Ee(e[1].table.properties),Q=[];for(let Y=0;Y<De.length;Y+=1)Q[Y]=rl(Kt(e,De,Y));const ot=Y=>R(Q[Y],1,1,()=>{Q[Y]=null});let pe=e[1].filters.deleted==="true"&&nl(e);return{key:r,first:null,c(){l=$("tr"),t=$("td"),n=$("div"),a=$("div"),s=$("button"),o=$("span"),o.textContent=i,u=F(),ue(d.$$.fragment),f=F(),m=$("button"),b=$("span"),b.textContent=C,E=F(),ue(v.$$.fragment),k=F(),ce&&ce.c(),p=F(),T=X(y),z=F();for(let Y=0;Y<Q.length;Y+=1)Q[Y].c();q=F(),S=$("td"),N=X(j),w=F(),O=$("span"),M=X(P),Z=F(),G=$("td"),K=X(U),B=F(),ae=$("span"),me=X(Ce),ee=F(),pe&&pe.c(),Oe=F(),this.h()},l(Y){l=g(Y,"TR",{class:!0});var J=I(l);t=g(J,"TD",{class:!0});var Te=I(t);n=g(Te,"DIV",{class:!0});var Ie=I(n);a=g(Ie,"DIV",{class:!0});var Re=I(a);s=g(Re,"BUTTON",{class:!0});var Le=I(s);o=g(Le,"SPAN",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-1agpmtc"&&(o.textContent=i),u=L(Le),oe(d.$$.fragment,Le),Le.forEach(h),f=L(Re),m=g(Re,"BUTTON",{class:!0,title:!0});var de=I(m);b=g(de,"SPAN",{class:!0,"data-svelte-h":!0}),ne(b)!=="svelte-1qpnaf4"&&(b.textContent=C),E=L(de),oe(v.$$.fragment,de),de.forEach(h),Re.forEach(h),k=L(Ie),ce&&ce.l(Ie),p=L(Ie),T=W(Ie,y),Ie.forEach(h),Te.forEach(h),z=L(J);for(let he=0;he<Q.length;he+=1)Q[he].l(J);q=L(J),S=g(J,"TD",{class:!0});var te=I(S);N=W(te,j),w=L(te),O=g(te,"SPAN",{class:!0});var xe=I(O);M=W(xe,P),xe.forEach(h),te.forEach(h),Z=L(J),G=g(J,"TD",{class:!0});var qe=I(G);K=W(qe,U),B=L(qe),ae=g(qe,"SPAN",{class:!0});var He=I(ae);me=W(He,Ce),He.forEach(h),qe.forEach(h),ee=L(J),pe&&pe.l(J),Oe=L(J),J.forEach(h),this.h()},h(){_(o,"class","label svelte-1bwwtph"),_(s,"class","button compact more svelte-1bwwtph"),ke(s,"active",e[0].id===e[5].id),_(b,"class","label svelte-1bwwtph"),_(m,"class","button compact edit svelte-1bwwtph"),_(m,"title","Edit record"),_(a,"class","combo svelte-1bwwtph"),_(n,"class","id svelte-1bwwtph"),_(t,"class","svelte-1bwwtph"),_(O,"class","svelte-1bwwtph"),_(S,"class","date svelte-1bwwtph"),_(ae,"class","svelte-1bwwtph"),_(G,"class","date svelte-1bwwtph"),_(l,"class","svelte-1bwwtph"),ke(l,"highlighted",e[1].highlighted.record===e[5].id),ke(l,"hasContextMenu",e[0].id===e[5].id),this.first=l},m(Y,J){A(Y,l,J),c(l,t),c(t,n),c(n,a),c(a,s),c(s,o),c(s,u),ie(d,s,null),c(a,f),c(a,m),c(m,b),c(m,E),ie(v,m,null),c(n,k),ce&&ce.m(n,null),c(n,p),c(n,T),c(l,z);for(let Te=0;Te<Q.length;Te+=1)Q[Te]&&Q[Te].m(l,null);c(l,q),c(l,S),c(S,N),c(S,w),c(S,O),c(O,M),c(l,Z),c(l,G),c(G,K),c(G,B),c(G,ae),c(ae,me),c(l,ee),pe&&pe.m(l,null),c(l,Oe),fe=!0,we||(Ve=[le(s,"click",it),le(m,"click",je)],we=!0)},p(Y,J){var Te,Ie,Re,Le;if(e=Y,(!fe||J&3)&&ke(s,"active",e[0].id===e[5].id),e[0].id===e[5].id?ce?(ce.p(e,J),J&3&&D(ce,1)):(ce=tl(e),ce.c(),D(ce,1),ce.m(n,p)):ce&&(ge(),R(ce,1,1,()=>{ce=null}),$e()),(!fe||J&2)&&y!==(y=e[5].id+"")&&_e(T,y),J&2){De=Ee(e[1].table.properties);let de;for(de=0;de<De.length;de+=1){const te=Kt(e,De,de);Q[de]?(Q[de].p(te,J),D(Q[de],1)):(Q[de]=rl(te),Q[de].c(),D(Q[de],1),Q[de].m(l,q))}for(ge(),de=De.length;de<Q.length;de+=1)ot(de);$e()}(!fe||J&2)&&j!==(j=new Date((Te=e[5])==null?void 0:Te.created_at).toLocaleDateString(void 0,{})+"")&&_e(N,j),(!fe||J&2)&&P!==(P=new Date((Ie=e[5])==null?void 0:Ie.created_at).toLocaleTimeString(void 0,{})+"")&&_e(M,P),(!fe||J&2)&&U!==(U=new Date((Re=e[5])==null?void 0:Re.updated_at).toLocaleDateString(void 0,{})+"")&&_e(K,U),(!fe||J&2)&&Ce!==(Ce=new Date((Le=e[5])==null?void 0:Le.updated_at).toLocaleTimeString(void 0,{})+"")&&_e(me,Ce),e[1].filters.deleted==="true"?pe?pe.p(e,J):(pe=nl(e),pe.c(),pe.m(l,Oe)):pe&&(pe.d(1),pe=null),(!fe||J&2)&&ke(l,"highlighted",e[1].highlighted.record===e[5].id),(!fe||J&3)&&ke(l,"hasContextMenu",e[0].id===e[5].id)},i(Y){if(!fe){D(d.$$.fragment,Y),D(v.$$.fragment,Y),D(ce);for(let J=0;J<De.length;J+=1)D(Q[J]);fe=!0}},o(Y){R(d.$$.fragment,Y),R(v.$$.fragment,Y),R(ce),Q=Q.filter(Boolean);for(let J=0;J<Q.length;J+=1)R(Q[J]);fe=!1},d(Y){Y&&h(l),se(d),se(v),ce&&ce.d(),Ke(Q,Y),pe&&pe.d(),we=!1,st(Ve)}}}function fr(r){var n;let e,l,t=((n=r[1].table)==null?void 0:n.properties)&&Gt(r);return{c(){t&&t.c(),e=Ae()},l(a){t&&t.l(a),e=Ae()},m(a,s){t&&t.m(a,s),A(a,e,s),l=!0},p(a,[s]){var o;(o=a[1].table)!=null&&o.properties?t?(t.p(a,s),s&2&&D(t,1)):(t=Gt(a),t.c(),D(t,1),t.m(e.parentNode,e)):t&&(ge(),R(t,1,1,()=>{t=null}),$e())},i(a){l||(D(t),l=!0)},o(a){R(t),l=!1},d(a){a&&h(e),t&&t.d(a)}}}function cr(r,e,l){let t;Pe(r,H,i=>l(1,t=i));let n={id:null};return[n,t,i=>l(0,n.id=i.id,n),i=>{Fe(H,t.record=i,t)},()=>l(0,n.id=null,n)]}class dr extends Ze{constructor(e){super(),Ge(this,e,cr,fr,Qe,{})}}var ct=new Map;function _r(r){var e=ct.get(r);e&&e.destroy()}function pr(r){var e=ct.get(r);e&&e.update()}var ft=null;typeof window>"u"?((ft=function(r){return r}).destroy=function(r){return r},ft.update=function(r){return r}):((ft=function(r,e){return r&&Array.prototype.forEach.call(r.length?r:[r],function(l){return function(t){if(t&&t.nodeName&&t.nodeName==="TEXTAREA"&&!ct.has(t)){var n,a=null,s=window.getComputedStyle(t),o=(n=t.value,function(){u({testForHeightReduction:n===""||!t.value.startsWith(n),restoreTextAlign:null}),n=t.value}),i=(function(f){t.removeEventListener("autosize:destroy",i),t.removeEventListener("autosize:update",d),t.removeEventListener("input",o),window.removeEventListener("resize",d),Object.keys(f).forEach(function(m){return t.style[m]=f[m]}),ct.delete(t)}).bind(t,{height:t.style.height,resize:t.style.resize,textAlign:t.style.textAlign,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",i),t.addEventListener("autosize:update",d),t.addEventListener("input",o),window.addEventListener("resize",d),t.style.overflowX="hidden",t.style.wordWrap="break-word",ct.set(t,{destroy:i,update:d}),d()}function u(f){var m,b,C=f.restoreTextAlign,E=C===void 0?null:C,v=f.testForHeightReduction,k=v===void 0||v,p=s.overflowY;if(t.scrollHeight!==0&&(s.resize==="vertical"?t.style.resize="none":s.resize==="both"&&(t.style.resize="horizontal"),k&&(m=function(T){for(var z=[];T&&T.parentNode&&T.parentNode instanceof Element;)T.parentNode.scrollTop&&z.push([T.parentNode,T.parentNode.scrollTop]),T=T.parentNode;return function(){return z.forEach(function(q){var S=q[0],j=q[1];S.style.scrollBehavior="auto",S.scrollTop=j,S.style.scrollBehavior=null})}}(t),t.style.height=""),b=s.boxSizing==="content-box"?t.scrollHeight-(parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)):t.scrollHeight+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),s.maxHeight!=="none"&&b>parseFloat(s.maxHeight)?(s.overflowY==="hidden"&&(t.style.overflow="scroll"),b=parseFloat(s.maxHeight)):s.overflowY!=="hidden"&&(t.style.overflow="hidden"),t.style.height=b+"px",E&&(t.style.textAlign=E),m&&m(),a!==b&&(t.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),a=b),p!==s.overflow&&!E)){var y=s.textAlign;s.overflow==="hidden"&&(t.style.textAlign=y==="start"?"end":"start"),u({restoreTextAlign:y,testForHeightReduction:!0})}}function d(){u({testForHeightReduction:!0,restoreTextAlign:null})}}(l)}),r}).destroy=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],_r),r},ft.update=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],pr),r});var $t=ft;const Ct=r=>($t(r),{destroy(){$t.destroy(r)}});Ct.update=$t.update;Ct.destroy=$t.destroy;function sl(r,e,l){const t=r.slice();return t[13]=e[l],t}function il(r,e,l){const t=r.slice();t[16]=e[l];const n=t[1].properties?ml(t[1].properties[t[16].name],t[16].attribute_type):{type:t[16].attribute_type,value:""};return t[17]=n,t}function ol(r){let e,l;return{c(){e=$("input"),this.h()},l(t){e=g(t,"INPUT",{type:!0,name:!0}),this.h()},h(){_(e,"type","hidden"),_(e,"name","recordId"),e.value=l=r[1].id},m(t,n){A(t,e,n)},p(t,n){n&2&&l!==(l=t[1].id)&&(e.value=l)},d(t){t&&h(e)}}}function hr(r){let e=r[16].attribute_type+"",l,t,n,a,s;return{c(){l=X(e),t=F(),n=$("input"),this.h()},l(o){l=W(o,e),t=L(o),n=g(o,"INPUT",{type:!0,name:!0}),this.h()},h(){_(n,"type","hidden"),_(n,"name",a=r[16].name+"[type]"),n.value=s=r[16].attribute_type},m(o,i){A(o,l,i),A(o,t,i),A(o,n,i)},p(o,i){i&1&&e!==(e=o[16].attribute_type+"")&&_e(l,e),i&1&&a!==(a=o[16].name+"[type]")&&_(n,"name",a),i&1&&s!==(s=o[16].attribute_type)&&(n.value=s)},i:Ue,o:Ue,d(o){o&&(h(l),h(t),h(n))}}}function mr(r){let e,l;return e=new Il({props:{name:r[16].name+"[type]",options:[{value:"string",label:"string"},{value:"json",label:"json"}],checked:r[17].type==="json"?"json":"string"}}),{c(){ue(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.name=t[16].name+"[type]"),n&3&&(a.checked=t[17].type==="json"?"json":"string"),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function ul(r){let e;return{c(){e=X("(non editable)")},l(l){e=W(l,"(non editable)")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function vr(r){let e,l,t,n,a,s,o;return{c(){e=$("textarea"),this.h()},l(i){e=g(i,"TEXTAREA",{rows:!0,name:!0,id:!0,class:!0}),I(e).forEach(h),this.h()},h(){_(e,"rows","1"),_(e,"name",l=r[16].name+"[value]"),_(e,"id",t="edit_"+r[16].name),e.disabled=n=r[16].attribute_type==="upload",e.value=a=r[17].type==="json"||r[17].type==="jsonEscaped"?JSON.stringify(r[17].value,void 0,2):r[17].value,_(e,"class","svelte-1udbufw")},m(i,u){A(i,e,u),s||(o=hl(Ct.call(null,e)),s=!0)},p(i,u){u&1&&l!==(l=i[16].name+"[value]")&&_(e,"name",l),u&1&&t!==(t="edit_"+i[16].name)&&_(e,"id",t),u&1&&n!==(n=i[16].attribute_type==="upload")&&(e.disabled=n),u&3&&a!==(a=i[17].type==="json"||i[17].type==="jsonEscaped"?JSON.stringify(i[17].value,void 0,2):i[17].value)&&(e.value=a)},d(i){i&&h(e),s=!1,o()}}}function br(r){let e,l,t,n,a,s,o,i,u,d;return{c(){e=$("select"),l=$("option"),t=$("option"),n=X("true"),s=$("option"),o=X("false"),this.h()},l(f){e=g(f,"SELECT",{name:!0,id:!0,class:!0});var m=I(e);l=g(m,"OPTION",{class:!0}),I(l).forEach(h),t=g(m,"OPTION",{});var b=I(t);n=W(b,"true"),b.forEach(h),s=g(m,"OPTION",{});var C=I(s);o=W(C,"false"),C.forEach(h),m.forEach(h),this.h()},h(){l.__value="",re(l,l.__value),_(l,"class","value-null"),t.__value="true",re(t,t.__value),t.selected=a=r[17].value==="true",s.__value="false",re(s,s.__value),s.selected=i=r[17].value==="false",_(e,"name",u=r[16].name+"[value]"),_(e,"id",d="edit_"+r[16].name),_(e,"class","svelte-1udbufw")},m(f,m){A(f,e,m),c(e,l),c(e,t),c(t,n),c(e,s),c(s,o)},p(f,m){m&3&&a!==(a=f[17].value==="true")&&(t.selected=a),m&3&&i!==(i=f[17].value==="false")&&(s.selected=i),m&1&&u!==(u=f[16].name+"[value]")&&_(e,"name",u),m&1&&d!==(d="edit_"+f[16].name)&&_(e,"id",d)},d(f){f&&h(e)}}}function fl(r){let e=r[5][r[16].name].message+"",l;return{c(){l=X(e)},l(t){l=W(t,e)},m(t,n){A(t,l,n)},p(t,n){n&33&&e!==(e=t[5][t[16].name].message+"")&&_e(l,e)},d(t){t&&h(l)}}}function cl(r){let e,l,t,n=r[16].name+"",a,s,o,i,u,d,f,m,b,C,E,v,k;const p=[mr,hr],y=[];function T(w,O){return w[16].attribute_type==="string"?0:1}u=T(r),d=y[u]=p[u](r);let z=r[16].attribute_type==="upload"&&ul();function q(w,O){return w[16].attribute_type==="boolean"?br:vr}let S=q(r),j=S(r),N=r[5][r[16].name]&&fl(r);return{c(){e=$("fieldset"),l=$("dir"),t=$("label"),a=X(n),s=$("br"),o=F(),i=$("div"),d.c(),f=F(),z&&z.c(),b=F(),C=$("div"),j.c(),E=F(),v=$("div"),N&&N.c(),this.h()},l(w){e=g(w,"FIELDSET",{class:!0});var O=I(e);l=g(O,"DIR",{});var P=I(l);t=g(P,"LABEL",{for:!0,class:!0});var M=I(t);a=W(M,n),s=g(M,"BR",{}),o=L(M),i=g(M,"DIV",{class:!0});var Z=I(i);d.l(Z),f=L(Z),z&&z.l(Z),Z.forEach(h),M.forEach(h),P.forEach(h),b=L(O),C=g(O,"DIV",{});var G=I(C);j.l(G),E=L(G),v=g(G,"DIV",{role:!0,class:!0});var U=I(v);N&&N.l(U),U.forEach(h),G.forEach(h),O.forEach(h),this.h()},h(){_(i,"class","type svelte-1udbufw"),_(t,"for",m="edit_"+r[16].name),_(t,"class","svelte-1udbufw"),_(v,"role","alert"),_(v,"class","svelte-1udbufw"),_(e,"class","svelte-1udbufw")},m(w,O){A(w,e,O),c(e,l),c(l,t),c(t,a),c(t,s),c(t,o),c(t,i),y[u].m(i,null),c(i,f),z&&z.m(i,null),c(e,b),c(e,C),j.m(C,null),c(C,E),c(C,v),N&&N.m(v,null),k=!0},p(w,O){(!k||O&1)&&n!==(n=w[16].name+"")&&_e(a,n);let P=u;u=T(w),u===P?y[u].p(w,O):(ge(),R(y[P],1,1,()=>{y[P]=null}),$e(),d=y[u],d?d.p(w,O):(d=y[u]=p[u](w),d.c()),D(d,1),d.m(i,f)),w[16].attribute_type==="upload"?z||(z=ul(),z.c(),z.m(i,null)):z&&(z.d(1),z=null),(!k||O&1&&m!==(m="edit_"+w[16].name))&&_(t,"for",m),S===(S=q(w))&&j?j.p(w,O):(j.d(1),j=S(w),j&&(j.c(),j.m(C,E))),w[5][w[16].name]?N?N.p(w,O):(N=fl(w),N.c(),N.m(v,null)):N&&(N.d(1),N=null)},i(w){k||(D(d),k=!0)},o(w){R(d),k=!1},d(w){w&&h(e),y[u].d(),z&&z.d(),j.d(),N&&N.d()}}}function dl(r){let e,l=JSON.stringify(r[13])+"",t,n;return{c(){e=$("li"),t=X(l),n=F(),this.h()},l(a){e=g(a,"LI",{class:!0});var s=I(e);t=W(s,l),n=L(s),s.forEach(h),this.h()},h(){_(e,"class","svelte-1udbufw")},m(a,s){A(a,e,s),c(e,t),c(e,n)},p(a,s){s&16&&l!==(l=JSON.stringify(a[13])+"")&&_e(t,l)},d(a){a&&h(e)}}}function gr(r){let e;return{c(){e=X("Create record")},l(l){e=W(l,"Create record")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function $r(r){let e;return{c(){e=X("Edit record")},l(l){e=W(l,"Edit record")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function wr(r){let e,l,t,n,a,s,o,i,u,d,f,m,b,C="Cancel",E,v,k,p,y,T,z,q,S=r[1].id&&ol(r),j=Ee(r[0]),N=[];for(let U=0;U<j.length;U+=1)N[U]=cl(il(r,j,U));const w=U=>R(N[U],1,1,()=>{N[U]=null});let O=Ee(r[4]),P=[];for(let U=0;U<O.length;U+=1)P[U]=dl(sl(r,O,U));function M(U,K){return U[1].id?$r:gr}let Z=M(r),G=Z(r);return p=new Se({props:{icon:"arrowRight"}}),{c(){e=$("dialog"),l=$("div"),t=$("form"),n=$("input"),s=F(),S&&S.c(),o=F();for(let U=0;U<N.length;U+=1)N[U].c();i=F(),u=$("div"),d=$("ul");for(let U=0;U<P.length;U+=1)P[U].c();f=F(),m=$("fieldset"),b=$("button"),b.textContent=C,E=F(),v=$("button"),G.c(),k=F(),ue(p.$$.fragment),this.h()},l(U){e=g(U,"DIALOG",{class:!0});var K=I(e);l=g(K,"DIV",{class:!0});var B=I(l);t=g(B,"FORM",{class:!0});var ae=I(t);n=g(ae,"INPUT",{type:!0,name:!0}),s=L(ae),S&&S.l(ae),o=L(ae);for(let fe=0;fe<N.length;fe+=1)N[fe].l(ae);i=L(ae),u=g(ae,"DIV",{class:!0});var Ce=I(u);d=g(Ce,"UL",{class:!0,"aria-live":!0});var me=I(d);for(let fe=0;fe<P.length;fe+=1)P[fe].l(me);me.forEach(h),f=L(Ce),m=g(Ce,"FIELDSET",{class:!0});var ee=I(m);b=g(ee,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ne(b)!=="svelte-1oq6ax6"&&(b.textContent=C),E=L(ee),v=g(ee,"BUTTON",{type:!0,class:!0});var Oe=I(v);G.l(Oe),k=L(Oe),oe(p.$$.fragment,Oe),Oe.forEach(h),ee.forEach(h),Ce.forEach(h),ae.forEach(h),B.forEach(h),K.forEach(h),this.h()},h(){_(n,"type","hidden"),_(n,"name","tableName"),n.value=a=r[6].table.name,_(d,"class","error svelte-1udbufw"),_(d,"aria-live","assertive"),_(b,"type","button"),_(b,"class","button"),_(v,"type","submit"),_(v,"class","button"),_(m,"class","actions svelte-1udbufw"),_(u,"class","footer svelte-1udbufw"),_(t,"class","svelte-1udbufw"),_(l,"class","content content-context svelte-1udbufw"),_(e,"class","svelte-1udbufw")},m(U,K){A(U,e,K),c(e,l),c(l,t),c(t,n),c(t,s),S&&S.m(t,null),c(t,o);for(let B=0;B<N.length;B+=1)N[B]&&N[B].m(t,null);c(t,i),c(t,u),c(u,d);for(let B=0;B<P.length;B+=1)P[B]&&P[B].m(d,null);c(u,f),c(u,m),c(m,b),c(m,E),c(m,v),G.m(v,null),c(v,k),ie(p,v,null),r[10](t),r[11](e),T=!0,z||(q=[le(b,"click",r[9]),le(t,"submit",_t(r[8]))],z=!0)},p(U,[K]){if((!T||K&64&&a!==(a=U[6].table.name))&&(n.value=a),U[1].id?S?S.p(U,K):(S=ol(U),S.c(),S.m(t,o)):S&&(S.d(1),S=null),K&35){j=Ee(U[0]);let B;for(B=0;B<j.length;B+=1){const ae=il(U,j,B);N[B]?(N[B].p(ae,K),D(N[B],1)):(N[B]=cl(ae),N[B].c(),D(N[B],1),N[B].m(t,i))}for(ge(),B=j.length;B<N.length;B+=1)w(B);$e()}if(K&16){O=Ee(U[4]);let B;for(B=0;B<O.length;B+=1){const ae=sl(U,O,B);P[B]?P[B].p(ae,K):(P[B]=dl(ae),P[B].c(),P[B].m(d,null))}for(;B<P.length;B+=1)P[B].d(1);P.length=O.length}Z!==(Z=M(U))&&(G.d(1),G=Z(U),G&&(G.c(),G.m(v,k)))},i(U){if(!T){for(let K=0;K<j.length;K+=1)D(N[K]);D(p.$$.fragment,U),U&&dt(()=>{T&&(y||(y=Rt(e,r[7],{},!0)),y.run(1))}),T=!0}},o(U){N=N.filter(Boolean);for(let K=0;K<N.length;K+=1)R(N[K]);R(p.$$.fragment,U),U&&(y||(y=Rt(e,r[7],{},!1)),y.run(0)),T=!1},d(U){U&&h(e),S&&S.d(),Ke(N,U),Ke(P,U),G.d(),se(p),r[10](null),r[11](null),U&&y&&y.end(),z=!1,st(q)}}}function yr(r,e,l){let t,n;Pe(r,H,v=>l(6,t=v)),Pe(r,wt,v=>l(12,n=v));let{properties:a}=e,{editing:s}=e,o,i,u=[],d={};const f=function(v,{delay:k=0,duration:p=150}){return{delay:k,duration:p,css:y=>{const T=Ll(y);return`opacity: ${T}; transform: scale(${T});`}}};bl(()=>{setTimeout(()=>{o.showModal()},10)}),document.addEventListener("keydown",v=>{v.key==="Escape"&&(v.preventDefault(),Fe(H,t.record=null,t))},{once:!0});const m=async v=>{v.preventDefault();const k=new FormData(i);l(5,d={});for(const p of k.entries())if(p[0].endsWith("[type]")&&(p[1]==="json"||p[1]==="array")){const y=p[0].replace("[type]",""),T=k.get(y+"[value]");T!==""&&!Fl(T)&&l(5,d[y]={property:y,message:`Not a valid ${p[1]}`},d)}if(Object.keys(d).length)await gl(),document.querySelector('[role="alert"]:not(:empty)').scrollIntoView({behavior:"smooth",block:"center"});else if(t.record.id){const p=await Ne.edit({table:t.table.name,id:t.record.id,properties:k});p.errors?l(4,u=p.errors):(Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.highlight("record",p.record_update.id),H.notification.create("success",`Record ${p.record_update.id} updated`),Fe(H,t.record=null,t))}else{const p=await Ne.create({table:t.table.name,properties:k});p.errors?l(4,u=p.errors):(H.clearFilters(),Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.highlight("record",p.record_create.id),H.notification.create("success",`Record ${p.record_create.id} created`),Fe(H,t.record=null,t))}},b=()=>Fe(H,t.record=null,t);function C(v){rt[v?"unshift":"push"](()=>{i=v,l(3,i)})}function E(v){rt[v?"unshift":"push"](()=>{o=v,l(2,o)})}return r.$$set=v=>{"properties"in v&&l(0,a=v.properties),"editing"in v&&l(1,s=v.editing)},[a,s,o,i,u,d,t,f,m,b,C,E]}class kr extends Ze{constructor(e){super(),Ge(this,e,yr,wr,Qe,{properties:0,editing:1})}}const{document:Et}=Tl;function Er(r){let e;return{c(){e=X("Work in progress :)")},l(l){e=W(l,"Work in progress :)")},m(l,t){A(l,e,t)},i:Ue,o:Ue,d(l){l&&h(e)}}}function Tr(r){let e,l;return e=new dr({}),{c(){ue(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function _l(r){let e,l,t,n,a,s,o;const i=[Nr,Cr],u=[];function d(f,m){return f[0].view.tableStyle==="collapsed"?0:1}return l=d(r),t=u[l]=i[l](r),{c(){e=$("button"),t.c(),this.h()},l(f){e=g(f,"BUTTON",{class:!0,title:!0});var m=I(e);t.l(m),m.forEach(h),this.h()},h(){_(e,"class","button"),_(e,"title",n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values")},m(f,m){A(f,e,m),u[l].m(e,null),a=!0,s||(o=le(e,"click",_t(function(){El(r[0].view.tableStyle==="collapsed"?H.setView({tableStyle:"expanded"}):H.setView({tableStyle:"collapsed"}))&&(r[0].view.tableStyle==="collapsed"?H.setView({tableStyle:"expanded"}):H.setView({tableStyle:"collapsed"})).apply(this,arguments)})),s=!0)},p(f,m){r=f;let b=l;l=d(r),l!==b&&(ge(),R(u[b],1,1,()=>{u[b]=null}),$e(),t=u[l],t||(t=u[l]=i[l](r),t.c()),D(t,1),t.m(e,null)),(!a||m&1&&n!==(n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values"))&&_(e,"title",n)},i(f){a||(D(t),a=!0)},o(f){R(t),a=!1},d(f){f&&h(e),u[l].d(),s=!1,o()}}}function Cr(r){let e,l="Collapse values",t,n,a;return n=new Se({props:{icon:"collapse"}}),{c(){e=$("span"),e.textContent=l,t=F(),ue(n.$$.fragment),this.h()},l(s){e=g(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-jserey"&&(e.textContent=l),t=L(s),oe(n.$$.fragment,s),this.h()},h(){_(e,"class","label")},m(s,o){A(s,e,o),A(s,t,o),ie(n,s,o),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){R(n.$$.fragment,s),a=!1},d(s){s&&(h(e),h(t)),se(n,s)}}}function Nr(r){let e,l="Expand values",t,n,a;return n=new Se({props:{icon:"expand"}}),{c(){e=$("span"),e.textContent=l,t=F(),ue(n.$$.fragment),this.h()},l(s){e=g(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1tvmrgx"&&(e.textContent=l),t=L(s),oe(n.$$.fragment,s),this.h()},h(){_(e,"class","label")},m(s,o){A(s,e,o),A(s,t,o),ie(n,s,o),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){R(n.$$.fragment,s),a=!1},d(s){s&&(h(e),h(t)),se(n,s)}}}function pl(r){let e,l;return e=new kr({props:{properties:r[0].table.properties,editing:r[0].record}}),{c(){ue(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){ie(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.properties=t[0].table.properties),n&1&&(a.editing=t[0].record),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function Sr(r){var Dt,Lt,Ft,Pt;let e,l,t,n,a,s,o,i,u,d,f="Refresh current view",m,b,C,E,v,k,p,y,T,z="Page:",q,S,j,N,w=(((Dt=r[0].records)==null?void 0:Dt.total_pages)||1)+"",O,P,M,Z,G,U,K,B="Create new record",ae,Ce,me,ee,Oe,fe,we,Ve,it,je,ce,De=r[0].filters.deleted==="false"?"ing":"",Q,ot,pe,nt,ye,ze,at,Y,J,Te=r[0].filters.deleted==="true"?"ing":"",Ie,Re,Le,de,te,xe,qe,He,he,yt,kt,Nt;Et.title=e=(((Lt=r[0].table)==null?void 0:Lt.name)||"Loading…")+((Ft=r[0].online)!=null&&Ft.MPKIT_URL?": "+r[0].online.MPKIT_URL.replace("https://",""):""),a=new ql({}),o=new Yl({}),b=new Se({props:{icon:"refresh"}});const St=[Tr,Er],et=[];function Ot(V,x){return V[0].view.database!=="tiles"?0:1}E=Ot(r),v=et[E]=St[E](r);function vl(V){r[5](V)}let It={name:"page",min:1,max:(Pt=r[0].records)==null?void 0:Pt.total_pages,step:1,decreaseLabel:"Previous page",increaseLabel:"Next page",style:"navigation"};r[0].filters.page!==void 0&&(It.value=r[0].filters.page),S=new Pl({props:It}),rt.push(()=>$l(S,"value",vl)),S.$on("input",r[6]),G=new Se({props:{icon:"plus"}});let ve=r[0].view.database!=="tiles"&&_l(r);Ve=new Se({props:{icon:"leaf"}}),ze=new Se({props:{icon:"recycle"}});let be=r[0].record!==null&&pl(r);return yt=wl(r[9][0]),{c(){l=F(),t=$("section"),n=$("nav"),ue(a.$$.fragment),s=F(),ue(o.$$.fragment),i=F(),u=$("button"),d=$("span"),d.textContent=f,m=F(),ue(b.$$.fragment),C=F(),v.c(),k=F(),p=$("nav"),y=$("div"),T=$("label"),T.textContent=z,q=F(),ue(S.$$.fragment),N=X(`
      of `),O=X(w),P=F(),M=$("div"),Z=$("button"),ue(G.$$.fragment),U=F(),K=$("span"),K.textContent=B,ae=F(),ve&&ve.c(),Ce=F(),me=$("div"),ee=$("input"),fe=F(),we=$("label"),ue(Ve.$$.fragment),it=F(),je=$("span"),ce=X("Show"),Q=X(De),ot=X(" current database state"),nt=F(),ye=$("label"),ue(ze.$$.fragment),at=F(),Y=$("span"),J=X("Show"),Ie=X(Te),Re=X(" deleted records"),de=F(),te=$("input"),qe=F(),be&&be.c(),He=Ae(),this.h()},l(V){kl("svelte-1ke6alb",Et.head).forEach(h),l=L(V),t=g(V,"SECTION",{class:!0});var Be=I(t);n=g(Be,"NAV",{class:!0});var Me=I(n);oe(a.$$.fragment,Me),s=L(Me),oe(o.$$.fragment,Me),i=L(Me),u=g(Me,"BUTTON",{class:!0,title:!0});var tt=I(u);d=g(tt,"SPAN",{class:!0,"data-svelte-h":!0}),ne(d)!=="svelte-iqo23s"&&(d.textContent=f),m=L(tt),oe(b.$$.fragment,tt),tt.forEach(h),Me.forEach(h),C=L(Be),v.l(Be),k=L(Be),p=g(Be,"NAV",{class:!0});var lt=I(p);y=g(lt,"DIV",{});var Je=I(y);T=g(Je,"LABEL",{for:!0,"data-svelte-h":!0}),ne(T)!=="svelte-1r8oyu6"&&(T.textContent=z),q=L(Je),oe(S.$$.fragment,Je),N=W(Je,`
      of `),O=W(Je,w),Je.forEach(h),P=L(lt),M=g(lt,"DIV",{id:!0,class:!0});var We=I(M);Z=g(We,"BUTTON",{class:!0,title:!0});var pt=I(Z);oe(G.$$.fragment,pt),U=L(pt),K=g(pt,"SPAN",{class:!0,"data-svelte-h":!0}),ne(K)!=="svelte-19x6y3e"&&(K.textContent=B),pt.forEach(h),ae=L(We),ve&&ve.l(We),Ce=L(We),me=g(We,"DIV",{class:!0});var Xe=I(me);ee=g(Xe,"INPUT",{type:!0,name:!0,id:!0,class:!0}),fe=L(Xe),we=g(Xe,"LABEL",{for:!0,class:!0,title:!0});var ht=I(we);oe(Ve.$$.fragment,ht),it=L(ht),je=g(ht,"SPAN",{class:!0});var mt=I(je);ce=W(mt,"Show"),Q=W(mt,De),ot=W(mt," current database state"),mt.forEach(h),ht.forEach(h),nt=L(Xe),ye=g(Xe,"LABEL",{for:!0,class:!0,title:!0});var vt=I(ye);oe(ze.$$.fragment,vt),at=L(vt),Y=g(vt,"SPAN",{class:!0});var bt=I(Y);J=W(bt,"Show"),Ie=W(bt,Te),Re=W(bt," deleted records"),bt.forEach(h),vt.forEach(h),de=L(Xe),te=g(Xe,"INPUT",{type:!0,name:!0,id:!0,class:!0}),Xe.forEach(h),We.forEach(h),lt.forEach(h),Be.forEach(h),qe=L(V),be&&be.l(V),He=Ae(),this.h()},h(){_(d,"class","label"),_(u,"class","button svelte-afbo94"),_(u,"title","Refresh current view (R)"),ke(u,"refreshing",r[2]),_(n,"class","svelte-afbo94"),_(T,"for","page"),_(K,"class","label"),_(Z,"class","button"),_(Z,"title","Create new record"),_(ee,"type","radio"),_(ee,"name","deleted"),_(ee,"id","deletedTrue"),ee.__value="false",re(ee,ee.__value),ee.disabled=Oe=r[0].filters.deleted==="false",_(ee,"class","svelte-afbo94"),_(je,"class","label"),_(we,"for","deletedTrue"),_(we,"class","button"),_(we,"title",pe="Show"+(r[0].filters.deleted==="false"?"ing":"")+" current database state"),ke(we,"active",r[0].filters.deleted==="false"),ke(we,"disabled",r[0].filters.deleted==="false"),_(Y,"class","label"),_(ye,"for","deletedFalse"),_(ye,"class","button"),_(ye,"title",Le="Show"+(r[0].filters.deleted==="true"?"ing":"")+" deleted records"),ke(ye,"active",r[0].filters.deleted==="true"),ke(ye,"disabled",r[0].filters.deleted==="true"),_(te,"type","radio"),_(te,"name","deleted"),_(te,"id","deletedFalse"),te.__value="true",re(te,te.__value),te.disabled=xe=r[0].filters.deleted==="true",_(te,"class","svelte-afbo94"),_(me,"class","combo svelte-afbo94"),_(M,"id","viewOptions"),_(M,"class","svelte-afbo94"),_(p,"class","pagination svelte-afbo94"),_(t,"class","svelte-afbo94"),yt.p(ee,te)},m(V,x){A(V,l,x),A(V,t,x),c(t,n),ie(a,n,null),c(n,s),ie(o,n,null),c(n,i),c(n,u),c(u,d),c(u,m),ie(b,u,null),c(t,C),et[E].m(t,null),c(t,k),c(t,p),c(p,y),c(y,T),c(y,q),ie(S,y,null),c(y,N),c(y,O),c(p,P),c(p,M),c(M,Z),ie(G,Z,null),c(Z,U),c(Z,K),c(M,ae),ve&&ve.m(M,null),c(M,Ce),c(M,me),c(me,ee),ee.checked=ee.__value===r[0].filters.deleted,c(me,fe),c(me,we),ie(Ve,we,null),c(we,it),c(we,je),c(je,ce),c(je,Q),c(je,ot),c(me,nt),c(me,ye),ie(ze,ye,null),c(ye,at),c(ye,Y),c(Y,J),c(Y,Ie),c(Y,Re),c(me,de),c(me,te),te.checked=te.__value===r[0].filters.deleted,A(V,qe,x),be&&be.m(V,x),A(V,He,x),he=!0,kt||(Nt=[le(window,"keypress",r[4]),le(u,"click",r[3]),le(Z,"click",_t(r[7])),le(ee,"change",r[8]),le(ee,"change",r[10]),le(te,"change",r[11]),le(te,"change",r[12])],kt=!0)},p(V,[x]){var tt,lt,Je,We;(!he||x&1)&&e!==(e=(((tt=V[0].table)==null?void 0:tt.name)||"Loading…")+((lt=V[0].online)!=null&&lt.MPKIT_URL?": "+V[0].online.MPKIT_URL.replace("https://",""):""))&&(Et.title=e),(!he||x&4)&&ke(u,"refreshing",V[2]);let Be=E;E=Ot(V),E!==Be&&(ge(),R(et[Be],1,1,()=>{et[Be]=null}),$e(),v=et[E],v||(v=et[E]=St[E](V),v.c()),D(v,1),v.m(t,k));const Me={};x&1&&(Me.max=(Je=V[0].records)==null?void 0:Je.total_pages),!j&&x&1&&(j=!0,Me.value=V[0].filters.page,yl(()=>j=!1)),S.$set(Me),(!he||x&1)&&w!==(w=(((We=V[0].records)==null?void 0:We.total_pages)||1)+"")&&_e(O,w),V[0].view.database!=="tiles"?ve?(ve.p(V,x),x&1&&D(ve,1)):(ve=_l(V),ve.c(),D(ve,1),ve.m(M,Ce)):ve&&(ge(),R(ve,1,1,()=>{ve=null}),$e()),(!he||x&1&&Oe!==(Oe=V[0].filters.deleted==="false"))&&(ee.disabled=Oe),x&1&&(ee.checked=ee.__value===V[0].filters.deleted),(!he||x&1)&&De!==(De=V[0].filters.deleted==="false"?"ing":"")&&_e(Q,De),(!he||x&1&&pe!==(pe="Show"+(V[0].filters.deleted==="false"?"ing":"")+" current database state"))&&_(we,"title",pe),(!he||x&1)&&ke(we,"active",V[0].filters.deleted==="false"),(!he||x&1)&&ke(we,"disabled",V[0].filters.deleted==="false"),(!he||x&1)&&Te!==(Te=V[0].filters.deleted==="true"?"ing":"")&&_e(Ie,Te),(!he||x&1&&Le!==(Le="Show"+(V[0].filters.deleted==="true"?"ing":"")+" deleted records"))&&_(ye,"title",Le),(!he||x&1)&&ke(ye,"active",V[0].filters.deleted==="true"),(!he||x&1)&&ke(ye,"disabled",V[0].filters.deleted==="true"),(!he||x&1&&xe!==(xe=V[0].filters.deleted==="true"))&&(te.disabled=xe),x&1&&(te.checked=te.__value===V[0].filters.deleted),V[0].record!==null?be?(be.p(V,x),x&1&&D(be,1)):(be=pl(V),be.c(),D(be,1),be.m(He.parentNode,He)):be&&(ge(),R(be,1,1,()=>{be=null}),$e())},i(V){he||(D(a.$$.fragment,V),D(o.$$.fragment,V),D(b.$$.fragment,V),D(v),D(S.$$.fragment,V),D(G.$$.fragment,V),D(ve),D(Ve.$$.fragment,V),D(ze.$$.fragment,V),D(be),he=!0)},o(V){R(a.$$.fragment,V),R(o.$$.fragment,V),R(b.$$.fragment,V),R(v),R(S.$$.fragment,V),R(G.$$.fragment,V),R(ve),R(Ve.$$.fragment,V),R(ze.$$.fragment,V),R(be),he=!1},d(V){V&&(h(l),h(t),h(qe),h(He)),se(a),se(o),se(b),et[E].d(),se(S),se(G),ve&&ve.d(),se(Ve),se(ze),be&&be.d(V),yt.r(),kt=!1,st(Nt)}}}function Or(r,e,l){let t,n;Pe(r,H,v=>l(0,t=v)),Pe(r,wt,v=>l(1,n=v));let a=!1;const s=()=>{l(2,a=!0),Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}).then(()=>l(2,a=!1))},o=v=>{document.activeElement===document.body&&!v.target.matches("input, textarea")&&v.key==="r"&&s()},i=[[]];function u(v){r.$$.not_equal(t.filters.page,v)&&(t.filters.page=v,H.set(t))}const d=()=>{Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})},f=()=>Fe(H,t.record={},t);function m(){t.filters.deleted=this.__value,H.set(t)}const b=()=>{Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function C(){t.filters.deleted=this.__value,H.set(t)}const E=()=>{Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};return r.$$.update=()=>{r.$$.dirty&3&&Fe(H,t.table=t.tables.filter(v=>v.id===n.params.id)[0],t),r.$$.dirty&2&&n.params.id&&Ne.get({table:n.params.id})&&H.clearFilters()},[t,n,a,s,o,u,d,f,m,i,b,C,E]}class Jr extends Ze{constructor(e){super(),Ge(this,e,Or,Sr,Qe,{})}}export{Jr as component};
