import{s as De,a as S,e as m,t as be,p as Me,f as N,g as F,c as _,b as O,z as se,d as ge,y as l,i as ce,h as n,A as Te,B as te,N as Ee,D as Pe,r as Ie,k as Ae,n as Be,E as Q,j as Ce,H as He}from"../chunks/scheduler.DKECArhd.js";import{S as Re,i as qe,c as de,b as me,m as _e,t as j,a as X,d as Le,e as he,j as Ve,g as Ne}from"../chunks/index.BK4W4vmG.js";import{e as ke}from"../chunks/each.QSj0VSvD.js";import{f as je}from"../chunks/index.0jdLtwBp.js";import{g as ve}from"../chunks/graphql.BD1m7lx9.js";import{s as K}from"../chunks/state.CBfhdSmd.js";import{I as pe}from"../chunks/Icon.BOakochj.js";const ne={get:()=>ve({query:`
      query {
        constants(
          per_page: 100
        ) {
          results {
            name,
            value,
            updated_at
          }
        }
      }`}).then(t=>t.constants.results),edit:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_set(name: "${e.name}", value: "${e.value}"){
          name,
          value
        }
      }`;return ve({query:t})},delete:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_unset(name: "${e.name}"){
          name
        }
      }
    `;return ve({query:t})}};function ye(e,t,a){const o=e.slice();return o[13]=t[a],o[14]=t,o[15]=a,o}function Se(e){let t,a,o="Clear filter",E,i,h,y,B;return i=new pe({props:{icon:"x",size:"12"}}),{c(){t=m("button"),a=m("span"),a.textContent=o,E=S(),de(i.$$.fragment),this.h()},l(f){t=_(f,"BUTTON",{class:!0});var k=O(t);a=_(k,"SPAN",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-1bu6mgu"&&(a.textContent=o),E=F(k),me(i.$$.fragment,k),k.forEach(N),this.h()},h(){l(a,"class","label svelte-9flr1b"),l(t,"class","clearFilter svelte-9flr1b")},m(f,k){ce(f,t,k),n(t,a),n(t,E),_e(i,t,null),h=!0,y||(B=te(t,"click",e[8]),y=!0)},p:Be,i(f){h||(j(i.$$.fragment,f),h=!0)},o(f){X(i.$$.fragment,f),h=!1},d(f){f&&N(t),he(i),y=!1,B()}}}function Fe(e){let t,a,o,E,i,h,y,B="Delete constant",f,k,z,T,C,D=e[13].name+"",W,r,c,v,Y,R,H,g,G,M,V,Z,U,d,P=e[13].exposed?"Hide value":"Show value",u,ae,q,s,$,p,L="Save",A,le,b,x,re;k=new pe({props:{icon:"x",size:"14"}});function oe(){return e[10](e[13],e[14],e[15])}q=new pe({props:{icon:e[13].exposed?"eyeStriked":"eye"}});function Oe(){return e[11](e[13],e[14],e[15])}function Ue(...I){return e[12](e[15],...I)}return{c(){t=m("li"),a=m("form"),o=m("input"),i=S(),h=m("button"),y=m("span"),y.textContent=B,f=S(),de(k.$$.fragment),z=S(),T=m("form"),C=m("label"),W=be(D),c=S(),v=m("input"),R=S(),H=m("fieldset"),g=m("input"),Z=S(),U=m("button"),d=m("span"),u=be(P),ae=S(),de(q.$$.fragment),$=S(),p=m("button"),p.textContent=L,A=S(),this.h()},l(I){t=_(I,"LI",{class:!0});var w=O(t);a=_(w,"FORM",{class:!0});var ee=O(a);o=_(ee,"INPUT",{type:!0,name:!0,class:!0}),i=F(ee),h=_(ee,"BUTTON",{type:!0,title:!0,class:!0});var ie=O(h);y=_(ie,"SPAN",{class:!0,"data-svelte-h":!0}),se(y)!=="svelte-1p7u8ms"&&(y.textContent=B),f=F(ie),me(k.$$.fragment,ie),ie.forEach(N),ee.forEach(N),z=F(w),T=_(w,"FORM",{class:!0});var J=O(T);C=_(J,"LABEL",{for:!0,class:!0});var $e=O(C);W=ge($e,D),$e.forEach(N),c=F(J),v=_(J,"INPUT",{type:!0,name:!0,class:!0}),R=F(J),H=_(J,"FIELDSET",{class:!0});var ue=O(H);g=_(ue,"INPUT",{name:!0,id:!0,class:!0}),Z=F(ue),U=_(ue,"BUTTON",{type:!0,class:!0,title:!0});var fe=O(U);d=_(fe,"SPAN",{class:!0});var we=O(d);u=ge(we,P),we.forEach(N),ae=F(fe),me(q.$$.fragment,fe),fe.forEach(N),ue.forEach(N),$=F(J),p=_(J,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),se(p)!=="svelte-1g3xn8h"&&(p.textContent=L),J.forEach(N),A=F(w),w.forEach(N),this.h()},h(){l(o,"type","hidden"),l(o,"name","name"),o.value=E=e[13].name,l(o,"class","svelte-9flr1b"),l(y,"class","label svelte-9flr1b"),l(h,"type","submit"),l(h,"title","Delete constant"),l(h,"class","svelte-9flr1b"),l(a,"class","delete svelte-9flr1b"),l(C,"for",r=e[13].name),l(C,"class","svelte-9flr1b"),l(v,"type","hidden"),l(v,"name","name"),v.value=Y=e[13].name,l(v,"class","svelte-9flr1b"),g.disabled=G=!e[13].exposed,l(g,"name","value"),g.value=M=e[13].value,l(g,"id",V=e[13].name),l(g,"class","svelte-9flr1b"),Q(g,"exposed",e[13].exposed),l(d,"class","label svelte-9flr1b"),l(U,"type","button"),l(U,"class","toggleExposition svelte-9flr1b"),l(U,"title",s=e[13].exposed?"Hide value":"Show value"),l(H,"class","svelte-9flr1b"),l(p,"type","submit"),l(p,"class","button svelte-9flr1b"),Q(p,"needed",e[1][e[15]].changed),l(T,"class","edit svelte-9flr1b"),l(t,"class","svelte-9flr1b"),Q(t,"hidden",e[0]&&e[3](e[13])),Q(t,"highlighted",e[2].highlighted.constant===e[13].name)},m(I,w){ce(I,t,w),n(t,a),n(a,o),n(a,i),n(a,h),n(h,y),n(h,f),_e(k,h,null),n(t,z),n(t,T),n(T,C),n(C,W),n(T,c),n(T,v),n(T,R),n(T,H),n(H,g),n(H,Z),n(H,U),n(U,d),n(d,u),n(U,ae),_e(q,U,null),n(T,$),n(T,p),n(t,A),b=!0,x||(re=[te(a,"submit",Ee(e[9])),te(g,"input",oe),te(U,"click",Oe),te(T,"submit",Ee(Ue))],x=!0)},p(I,w){e=I,(!b||w&2&&E!==(E=e[13].name))&&(o.value=E),(!b||w&2)&&D!==(D=e[13].name+"")&&Ce(W,D),(!b||w&2&&r!==(r=e[13].name))&&l(C,"for",r),(!b||w&2&&Y!==(Y=e[13].name))&&(v.value=Y),(!b||w&2&&G!==(G=!e[13].exposed))&&(g.disabled=G),(!b||w&2&&M!==(M=e[13].value)&&g.value!==M)&&(g.value=M),(!b||w&2&&V!==(V=e[13].name))&&l(g,"id",V),(!b||w&2)&&Q(g,"exposed",e[13].exposed),(!b||w&2)&&P!==(P=e[13].exposed?"Hide value":"Show value")&&Ce(u,P);const ee={};w&2&&(ee.icon=e[13].exposed?"eyeStriked":"eye"),q.$set(ee),(!b||w&2&&s!==(s=e[13].exposed?"Hide value":"Show value"))&&l(U,"title",s),(!b||w&2)&&Q(p,"needed",e[1][e[15]].changed),(!b||w&11)&&Q(t,"hidden",e[0]&&e[3](e[13])),(!b||w&6)&&Q(t,"highlighted",e[2].highlighted.constant===e[13].name)},i(I){b||(j(k.$$.fragment,I),j(q.$$.fragment,I),I&&(le||He(()=>{le=Ve(t,je,{duration:100,delay:10*e[15]}),le.start()})),b=!0)},o(I){X(k.$$.fragment,I),X(q.$$.fragment,I),b=!1},d(I){I&&N(t),he(k),he(q),x=!1,Ie(re)}}}function Ke(e){var q;let t,a,o,E,i,h,y="Find:",B,f,k,z,T,C,D,W='<label for="newName" class="svelte-9flr1b">Name</label> <input type="text" name="name" id="newName" placeholder="MY_NEW_CONSTANT" class="svelte-9flr1b"/>',r,c,v='<label for="newValue" class="svelte-9flr1b">Value</label> <input type="text" name="value" id="newValue" class="svelte-9flr1b"/>',Y,R,H,g,G,M,V,Z,U;document.title=t="Constants"+((q=e[2].online)!=null&&q.MPKIT_URL?": "+e[2].online.MPKIT_URL.replace("https://",""):"");let d=e[0]&&Se(e);g=new pe({props:{icon:"arrowRight"}});let P=ke(e[1]),u=[];for(let s=0;s<P.length;s+=1)u[s]=Fe(ye(e,P,s));const ae=s=>X(u[s],1,1,()=>{u[s]=null});return{c(){a=S(),o=m("div"),E=m("nav"),i=m("form"),h=m("label"),h.textContent=y,B=S(),f=m("input"),k=S(),d&&d.c(),z=S(),T=m("section"),C=m("form"),D=m("fieldset"),D.innerHTML=W,r=S(),c=m("fieldset"),c.innerHTML=v,Y=S(),R=m("button"),H=be(`Add\r
        `),de(g.$$.fragment),G=S(),M=m("ul");for(let s=0;s<u.length;s+=1)u[s].c();this.h()},l(s){Me("svelte-2x07wh",document.head).forEach(N),a=F(s),o=_(s,"DIV",{class:!0});var p=O(o);E=_(p,"NAV",{class:!0});var L=O(E);i=_(L,"FORM",{});var A=O(i);h=_(A,"LABEL",{for:!0,"data-svelte-h":!0}),se(h)!=="svelte-1otrvr9"&&(h.textContent=y),B=F(A),f=_(A,"INPUT",{type:!0,id:!0,class:!0}),k=F(A),d&&d.l(A),A.forEach(N),L.forEach(N),z=F(p),T=_(p,"SECTION",{class:!0});var le=O(T);C=_(le,"FORM",{class:!0});var b=O(C);D=_(b,"FIELDSET",{class:!0,"data-svelte-h":!0}),se(D)!=="svelte-1pelkcv"&&(D.innerHTML=W),r=F(b),c=_(b,"FIELDSET",{class:!0,"data-svelte-h":!0}),se(c)!=="svelte-t20vqf"&&(c.innerHTML=v),Y=F(b),R=_(b,"BUTTON",{class:!0});var x=O(R);H=ge(x,`Add\r
        `),me(g.$$.fragment,x),x.forEach(N),b.forEach(N),le.forEach(N),G=F(p),M=_(p,"UL",{class:!0});var re=O(M);for(let oe=0;oe<u.length;oe+=1)u[oe].l(re);re.forEach(N),p.forEach(N),this.h()},h(){l(h,"for","filter"),l(f,"type","text"),l(f,"id","filter"),f.autofocus=!0,l(f,"class","svelte-9flr1b"),l(E,"class","svelte-9flr1b"),l(D,"class","svelte-9flr1b"),l(c,"class","svelte-9flr1b"),l(R,"class","button svelte-9flr1b"),l(C,"class","svelte-9flr1b"),l(T,"class","create svelte-9flr1b"),l(M,"class","svelte-9flr1b"),l(o,"class","container")},m(s,$){ce(s,a,$),ce(s,o,$),n(o,E),n(E,i),n(i,h),n(i,B),n(i,f),Te(f,e[0]),n(i,k),d&&d.m(i,null),n(o,z),n(o,T),n(T,C),n(C,D),n(C,r),n(C,c),n(C,Y),n(C,R),n(R,H),_e(g,R,null),n(o,G),n(o,M);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(M,null);V=!0,f.focus(),Z||(U=[te(f,"input",e[7]),te(C,"submit",Ee(e[6]))],Z=!0)},p(s,[$]){var p;if((!V||$&4)&&t!==(t="Constants"+((p=s[2].online)!=null&&p.MPKIT_URL?": "+s[2].online.MPKIT_URL.replace("https://",""):""))&&(document.title=t),$&1&&f.value!==s[0]&&Te(f,s[0]),s[0]?d?(d.p(s,$),$&1&&j(d,1)):(d=Se(s),d.c(),j(d,1),d.m(i,null)):d&&(Ne(),X(d,1,1,()=>{d=null}),Le()),$&63){P=ke(s[1]);let L;for(L=0;L<P.length;L+=1){const A=ye(s,P,L);u[L]?(u[L].p(A,$),j(u[L],1)):(u[L]=Fe(A),u[L].c(),j(u[L],1),u[L].m(M,null))}for(Ne(),L=P.length;L<u.length;L+=1)ae(L);Le()}},i(s){if(!V){j(d),j(g.$$.fragment,s);for(let $=0;$<P.length;$+=1)j(u[$]);V=!0}},o(s){X(d),X(g.$$.fragment,s),u=u.filter(Boolean);for(let $=0;$<u.length;$+=1)X(u[$]);V=!1},d(s){s&&(N(a),N(o)),d&&d.d(),he(g),Pe(u,s),Z=!1,Ie(U)}}}function ze(e,t,a){let o;Ae(e,K,r=>a(2,o=r));let E="",i=[];(async()=>await ne.get())().then(r=>{a(1,i=r)});const h=r=>r.name.toLowerCase().indexOf(E.toLowerCase())===-1&&r.value.toLowerCase().indexOf(E.toLowerCase())===-1,y=async(r,c)=>{r.preventDefault();const v=await ne.edit(new FormData(r.target));v.errors?K.notification.create("error",`Failed to update ${v.constant_set.name} constant`):(a(1,i[c].changed=!1,i),K.highlight("constant",v.constant_set.name),K.notification.create("success",`Constant ${v.constant_set.name} updated`))},B=async r=>{if(r.preventDefault(),confirm("Are you sure you want to delete this constant?")){const c=await ne.delete(new FormData(r.target));c.errors?K.notification.create("success",`Failed to delete ${c.constant_unset.name} constant`):(K.notification.create("success",`Constant ${c.constant_unset.name} deleted`),await ne.get().then(v=>{a(1,i=v)}))}},f=async r=>{r.preventDefault();const c=await ne.edit(new FormData(r.target));c.errors?K.notification.create("error",`Failed to create ${c.constant_set.name} constant`):(r.target.reset(),K.notification.create("success",`Constant ${c.constant_set.name} created`),await ne.get().then(v=>{a(1,i=v),K.highlight("constant",c.constant_set.name)}))};function k(){E=this.value,a(0,E)}return[E,i,o,h,y,B,f,k,()=>a(0,E=""),r=>B(r),(r,c,v)=>a(1,c[v].changed=!0,i),(r,c,v)=>a(1,c[v].exposed=!r.exposed,i),(r,c)=>y(c,r)]}class xe extends Re{constructor(t){super(),qe(this,t,ze,Ke,De,{})}}export{xe as component};
