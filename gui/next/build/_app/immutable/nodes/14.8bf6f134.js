import{s as Ze,a as L,f as p,J as xe,d as _,c as C,g,h as w,r as ne,j as d,i as A,v as u,K as Ne,x as le,y as He,w as et,o as tt,A as ge,X as lt,b as st,z as ve,N as Xe,l as X,m as G,u as ae,R as nt,n as W,B as at,t as ot,p as rt,e as Ee}from"../chunks/scheduler.771e17c8.js";import{S as it,i as ft,b as ie,d as fe,m as ue,a as E,t as B,c as oe,e as ce,g as re,j as ut}from"../chunks/index.25a56fcb.js";import{g as ct}from"../chunks/globals.7f7f1b26.js";import{e as Le}from"../chunks/each.066ee579.js";import{f as dt}from"../chunks/index.f511f030.js";import{s as pe}from"../chunks/state.2c4ca62b.js";import{t as Ge}from"../chunks/tryParseJSON.f125f883.js";import{J as Qe}from"../chunks/JSONTree.35d1fb08.js";import{I as be}from"../chunks/Icon.34c6ba11.js";import{A as _t}from"../chunks/Aside.8e0bae60.js";const ht={get:async n=>{const t=typeof window<"u"&&window.location.port!=="4173"&&window.location.port!=="5173"?`http://localhost:${parseInt(window.location.port)}/api/logs`:"http://localhost:3333/api/logs",a=n.last??null;return fetch(`${t}?lastId=`+a).then(e=>e.ok?e.json():Promise.reject(e)).then(e=>(e.logs.forEach(l=>{l.downloaded_at=Date.now()}),e)).catch(e=>({error:e}))}};const{document:Ce}=ct;function Pe(n,t,a){const e=n.slice();e[23]=t[a],e[25]=t,e[26]=a;const l=e[23].message.length<262144&&Ge(e[23].message);return e[24]=l,e}function Ue(n,t,a){const e=n.slice();e[23]=t[a],e[27]=t,e[28]=a;const l=e[23].message.length<262144&&Ge(e[23].message);return e[24]=l,e}function Oe(n){let t,a,e="Clear filter",l,o,s,r,i;return o=new be({props:{icon:"x",size:"12"}}),{c(){t=p("button"),a=p("span"),a.textContent=e,l=L(),ie(o.$$.fragment),this.h()},l(f){t=g(f,"BUTTON",{class:!0});var h=w(t);a=g(h,"SPAN",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-1bu6mgu"&&(a.textContent=e),l=C(h),fe(o.$$.fragment,h),h.forEach(_),this.h()},h(){d(a,"class","label svelte-8fkf35"),d(t,"class","clearFilter svelte-8fkf35")},m(f,h){A(f,t,h),u(t,a),u(t,l),ue(o,t,null),s=!0,r||(i=le(t,"click",n[9]),r=!0)},p:ve,i(f){s||(E(o.$$.fragment,f),s=!0)},o(f){B(o.$$.fragment,f),s=!1},d(f){f&&_(t),ce(o),r=!1,i()}}}function Be(n){let t,a,e=Le(n[4].logs.logs),l=[];for(let s=0;s<e.length;s+=1)l[s]=je(Ue(n,e,s));const o=s=>B(l[s],1,1,()=>{l[s]=null});return{c(){t=p("table");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=g(s,"TABLE",{class:!0});var r=w(t);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(_),this.h()},h(){d(t,"class","svelte-8fkf35")},m(s,r){A(s,t,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,null);a=!0},p(s,r){if(r&118){e=Le(s[4].logs.logs);let i;for(i=0;i<e.length;i+=1){const f=Ue(s,e,i);l[i]?(l[i].p(f,r),E(l[i],1)):(l[i]=je(f),l[i].c(),E(l[i],1),l[i].m(t,null))}for(re(),i=e.length;i<l.length;i+=1)o(i);oe()}},i(s){if(!a){for(let r=0;r<e.length;r+=1)E(l[r]);a=!0}},o(s){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)B(l[r]);a=!1},d(s){s&&_(t),Xe(l,s)}}}function mt(n){let t;function a(o,s){return o[23].showFull?vt:gt}let e=a(n),l=e(n);return{c(){t=p("div"),l.c(),this.h()},l(o){t=g(o,"DIV",{class:!0});var s=w(t);l.l(s),s.forEach(_),this.h()},h(){d(t,"class","pre svelte-8fkf35")},m(o,s){A(o,t,s),l.m(t,null)},p(o,s){e===(e=a(o))&&l?l.p(o,s):(l.d(1),l=e(o),l&&(l.c(),l.m(t,null)))},i:ve,o:ve,d(o){o&&_(t),l.d()}}}function pt(n){let t,a;return t=new Qe({props:{value:n[24],showFullLines:!0}}),{c(){ie(t.$$.fragment)},l(e){fe(t.$$.fragment,e)},m(e,l){ue(t,e,l),a=!0},p(e,l){const o={};l&16&&(o.value=e[24]),t.$set(o)},i(e){a||(E(t.$$.fragment,e),a=!0)},o(e){B(t.$$.fragment,e),a=!1},d(e){ce(t,e)}}}function gt(n){let t=n[23].message.substr(0,ee)+"",a,e,l,o=n[23].message.length>ee&&Ae(n);return{c(){a=X(t),e=L(),o&&o.c(),l=Ee()},l(s){a=G(s,t),e=C(s),o&&o.l(s),l=Ee()},m(s,r){A(s,a,r),A(s,e,r),o&&o.m(s,r),A(s,l,r)},p(s,r){r&16&&t!==(t=s[23].message.substr(0,ee)+"")&&W(a,t),s[23].message.length>ee?o?o.p(s,r):(o=Ae(s),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},d(s){s&&(_(a),_(e),_(l)),o&&o.d(s)}}}function vt(n){let t=n[23].message+"",a;return{c(){a=X(t)},l(e){a=G(e,t)},m(e,l){A(e,a,l)},p(e,l){l&16&&t!==(t=e[23].message+"")&&W(a,t)},d(e){e&&_(a)}}}function Ae(n){let t,a,e=n[23].message.length-ee+"",l,o,s,r;function i(){return n[11](n[23],n[27],n[28])}return{c(){t=p("div"),a=p("button"),l=X(e),o=X(" more characters"),this.h()},l(f){t=g(f,"DIV",{class:!0});var h=w(t);a=g(h,"BUTTON",{type:!0,class:!0});var v=w(a);l=G(v,e),o=G(v," more characters"),v.forEach(_),h.forEach(_),this.h()},h(){d(a,"type","button"),d(a,"class","svelte-8fkf35"),d(t,"class","longStringInfo svelte-8fkf35")},m(f,h){A(f,t,h),u(t,a),u(a,l),u(a,o),s||(r=le(a,"click",i),s=!0)},p(f,h){n=f,h&16&&e!==(e=n[23].message.length-ee+"")&&W(l,e)},d(f){f&&_(t),s=!1,r()}}}function Ve(n){let t,a,e,l=n[23].data.url+"",o,s,r=n[23].data.user&&Me(n);return{c(){t=p("ul"),a=p("li"),e=X("Page: "),o=X(l),s=L(),r&&r.c(),this.h()},l(i){t=g(i,"UL",{class:!0});var f=w(t);a=g(f,"LI",{});var h=w(a);e=G(h,"Page: "),o=G(h,l),h.forEach(_),s=C(f),r&&r.l(f),f.forEach(_),this.h()},h(){d(t,"class","info svelte-8fkf35")},m(i,f){A(i,t,f),u(t,a),u(a,e),u(a,o),u(t,s),r&&r.m(t,null)},p(i,f){f&16&&l!==(l=i[23].data.url+"")&&W(o,l),i[23].data.user?r?r.p(i,f):(r=Me(i),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(i){i&&_(t),r&&r.d()}}}function Me(n){let t,a,e,l=n[23].data.user.id+"",o,s;return{c(){t=p("li"),a=X("User ID: "),e=p("a"),o=X(l),this.h()},l(r){t=g(r,"LI",{});var i=w(t);a=G(i,"User ID: "),e=g(i,"A",{href:!0,class:!0});var f=w(e);o=G(f,l),f.forEach(_),i.forEach(_),this.h()},h(){d(e,"href",s="/users/"+n[23].data.user.id),d(e,"class","svelte-8fkf35")},m(r,i){A(r,t,i),u(t,a),u(t,e),u(e,o)},p(r,i){i&16&&l!==(l=r[23].data.user.id+"")&&W(o,l),i&16&&s!==(s="/users/"+r[23].data.user.id)&&d(e,"href",s)},d(r){r&&_(t)}}}function je(n){var Se;let t,a,e,l=new Date(n[23].created_at).toLocaleDateString(void 0,{})+"",o,s,r=new Date(n[23].created_at).toLocaleTimeString(void 0,{})+"",i,f,h,v,M=n[23].error_type+"",z,K,V,j,T,F,q,D,R,y,H,te="Copy message",Y,c,I,m,$,P="Pin this log",k,S,b,U,N,Z,de;const se=[pt,mt],x=[];function _e(J,O){return J[24]?0:1}j=_e(n),T=x[j]=se[j](n);let Q=((Se=n[23].data)==null?void 0:Se.url)&&Ve(n);c=new be({props:{icon:"copy"}});function We(...J){return n[12](n[23],...J)}S=new be({props:{icon:"pin"}});function Ye(){return n[13](n[23])}function Ie(...J){return n[14](n[23],...J)}return{c(){t=p("tr"),a=p("td"),e=p("time"),o=X(l),s=L(),i=X(r),h=L(),v=p("td"),z=X(M),K=L(),V=p("td"),T.c(),F=L(),Q&&Q.c(),q=L(),D=p("td"),R=p("div"),y=p("button"),H=p("span"),H.textContent=te,Y=L(),ie(c.$$.fragment),I=L(),m=p("button"),$=p("span"),$.textContent=P,k=L(),ie(S.$$.fragment),b=L(),this.h()},l(J){t=g(J,"TR",{class:!0});var O=w(t);a=g(O,"TD",{class:!0});var me=w(a);e=g(me,"TIME",{datetime:!0,class:!0});var he=w(e);o=G(he,l),s=C(he),i=G(he,r),he.forEach(_),me.forEach(_),h=C(O),v=g(O,"TD",{class:!0});var De=w(v);z=G(De,M),De.forEach(_),K=C(O),V=g(O,"TD",{class:!0});var ke=w(V);T.l(ke),F=C(ke),Q&&Q.l(ke),ke.forEach(_),q=C(O),D=g(O,"TD",{class:!0});var ye=w(D);R=g(ye,"DIV",{class:!0});var we=w(R);y=g(we,"BUTTON",{type:!0,class:!0,title:!0});var $e=w(y);H=g($e,"SPAN",{class:!0,"data-svelte-h":!0}),ne(H)!=="svelte-1qjln59"&&(H.textContent=te),Y=C($e),fe(c.$$.fragment,$e),$e.forEach(_),I=C(we),m=g(we,"BUTTON",{type:!0,class:!0,title:!0});var Te=w(m);$=g(Te,"SPAN",{class:!0,"data-svelte-h":!0}),ne($)!=="svelte-yzd8i4"&&($.textContent=P),k=C(Te),fe(S.$$.fragment,Te),Te.forEach(_),we.forEach(_),ye.forEach(_),b=C(O),O.forEach(_),this.h()},h(){d(e,"datetime",f=n[23].created_at),d(e,"class","svelte-8fkf35"),d(a,"class","date svelte-8fkf35"),d(v,"class","logType svelte-8fkf35"),d(V,"class","message svelte-8fkf35"),d(H,"class","label"),d(y,"type","button"),d(y,"class","button svelte-8fkf35"),d(y,"title","Copy message"),d($,"class","label"),d(m,"type","button"),d(m,"class","button svelte-8fkf35"),d(m,"title","Pin this log"),ae(m,"active",n[2].find(Ie)),d(R,"class","svelte-8fkf35"),d(D,"class","actions svelte-8fkf35"),d(t,"class","svelte-8fkf35"),ae(t,"hidden",n[1]&&n[5](n[23])||n[23].hidden),ae(t,"error",n[23].error_type.match(/error/i)),ae(t,"fresh",n[23].downloaded_at>n[4].logs.downloaded_at[0])},m(J,O){A(J,t,O),u(t,a),u(a,e),u(e,o),u(e,s),u(e,i),u(t,h),u(t,v),u(v,z),u(t,K),u(t,V),x[j].m(V,null),u(V,F),Q&&Q.m(V,null),u(t,q),u(t,D),u(D,R),u(R,y),u(y,H),u(y,Y),ue(c,y,null),u(R,I),u(R,m),u(m,$),u(m,k),ue(S,m,null),u(t,b),N=!0,Z||(de=[le(y,"click",We),le(m,"click",nt(Ye))],Z=!0)},p(J,O){var he;n=J,(!N||O&16)&&l!==(l=new Date(n[23].created_at).toLocaleDateString(void 0,{})+"")&&W(o,l),(!N||O&16)&&r!==(r=new Date(n[23].created_at).toLocaleTimeString(void 0,{})+"")&&W(i,r),(!N||O&16&&f!==(f=n[23].created_at))&&d(e,"datetime",f),(!N||O&16)&&M!==(M=n[23].error_type+"")&&W(z,M);let me=j;j=_e(n),j===me?x[j].p(n,O):(re(),B(x[me],1,1,()=>{x[me]=null}),oe(),T=x[j],T?T.p(n,O):(T=x[j]=se[j](n),T.c()),E(T,1),T.m(V,F)),(he=n[23].data)!=null&&he.url?Q?Q.p(n,O):(Q=Ve(n),Q.c(),Q.m(V,null)):Q&&(Q.d(1),Q=null),(!N||O&20)&&ae(m,"active",n[2].find(Ie)),(!N||O&50)&&ae(t,"hidden",n[1]&&n[5](n[23])||n[23].hidden),(!N||O&16)&&ae(t,"error",n[23].error_type.match(/error/i)),(!N||O&16)&&ae(t,"fresh",n[23].downloaded_at>n[4].logs.downloaded_at[0])},i(J){N||(E(T),E(c.$$.fragment,J),E(S.$$.fragment,J),J&&(U||at(()=>{U=ut(t,dt,{duration:200}),U.start()})),N=!0)},o(J){B(T),B(c.$$.fragment,J),B(S.$$.fragment,J),N=!1},d(J){J&&_(t),x[j].d(),Q&&Q.d(),ce(c),ce(S),Z=!1,He(de)}}}function Fe(n){let t,a="No newer logs to show<br/>Checking every 3 seconds";return{c(){t=p("footer"),t.innerHTML=a,this.h()},l(e){t=g(e,"FOOTER",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-akhvzo"&&(t.innerHTML=a),this.h()},h(){d(t,"class","svelte-8fkf35")},m(e,l){A(e,t,l)},d(e){e&&_(t)}}}function Re(n){let t,a;return t=new _t({props:{$$slots:{default:[Tt]},$$scope:{ctx:n}}}),{c(){ie(t.$$.fragment)},l(e){fe(t.$$.fragment,e)},m(e,l){ue(t,e,l),a=!0},p(e,l){const o={};l&536870916&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){a||(E(t.$$.fragment,e),a=!0)},o(e){B(t.$$.fragment,e),a=!1},d(e){ce(t,e)}}}function qe(n){let t,a,e=Le(n[2]),l=[];for(let s=0;s<e.length;s+=1)l[s]=Ke(Pe(n,e,s));const o=s=>B(l[s],1,1,()=>{l[s]=null});return{c(){t=p("ul");for(let s=0;s<l.length;s+=1)l[s].c()},l(s){t=g(s,"UL",{});var r=w(t);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(_)},m(s,r){A(s,t,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,null);a=!0},p(s,r){if(r&68){e=Le(s[2]);let i;for(i=0;i<e.length;i+=1){const f=Pe(s,e,i);l[i]?(l[i].p(f,r),E(l[i],1)):(l[i]=Ke(f),l[i].c(),E(l[i],1),l[i].m(t,null))}for(re(),i=e.length;i<l.length;i+=1)o(i);oe()}},i(s){if(!a){for(let r=0;r<e.length;r+=1)E(l[r]);a=!0}},o(s){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)B(l[r]);a=!1},d(s){s&&_(t),Xe(l,s)}}}function ze(n){let t,a=n[23].data.url+"",e;return{c(){t=p("div"),e=X(a),this.h()},l(l){t=g(l,"DIV",{class:!0});var o=w(t);e=G(o,a),o.forEach(_),this.h()},h(){d(t,"class","url svelte-8fkf35")},m(l,o){A(l,t,o),u(t,e)},p(l,o){o&4&&a!==(a=l[23].data.url+"")&&W(e,a)},d(l){l&&_(t)}}}function bt(n){let t;function a(o,s){return o[23].showFull?$t:wt}let e=a(n),l=e(n);return{c(){t=p("div"),l.c(),this.h()},l(o){t=g(o,"DIV",{class:!0});var s=w(t);l.l(s),s.forEach(_),this.h()},h(){d(t,"class","pre svelte-8fkf35")},m(o,s){A(o,t,s),l.m(t,null)},p(o,s){e===(e=a(o))&&l?l.p(o,s):(l.d(1),l=e(o),l&&(l.c(),l.m(t,null)))},i:ve,o:ve,d(o){o&&_(t),l.d()}}}function kt(n){let t,a;return t=new Qe({props:{value:n[24],showFullLines:!0}}),{c(){ie(t.$$.fragment)},l(e){fe(t.$$.fragment,e)},m(e,l){ue(t,e,l),a=!0},p(e,l){const o={};l&4&&(o.value=e[24]),t.$set(o)},i(e){a||(E(t.$$.fragment,e),a=!0)},o(e){B(t.$$.fragment,e),a=!1},d(e){ce(t,e)}}}function wt(n){let t=n[23].message.substr(0,ee)+"",a,e,l,o=n[23].message.length>ee&&Je(n);return{c(){a=X(t),e=L(),o&&o.c(),l=Ee()},l(s){a=G(s,t),e=C(s),o&&o.l(s),l=Ee()},m(s,r){A(s,a,r),A(s,e,r),o&&o.m(s,r),A(s,l,r)},p(s,r){r&4&&t!==(t=s[23].message.substr(0,ee)+"")&&W(a,t),s[23].message.length>ee?o?o.p(s,r):(o=Je(s),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},d(s){s&&(_(a),_(e),_(l)),o&&o.d(s)}}}function $t(n){let t=n[23].message+"",a;return{c(){a=X(t)},l(e){a=G(e,t)},m(e,l){A(e,a,l)},p(e,l){l&4&&t!==(t=e[23].message+"")&&W(a,t)},d(e){e&&_(a)}}}function Je(n){let t,a=n[23].message.length-ee+"",e,l,o,s;function r(){return n[17](n[23],n[25],n[26])}return{c(){t=p("button"),e=X(a),l=X(" more characters"),this.h()},l(i){t=g(i,"BUTTON",{type:!0,class:!0});var f=w(t);e=G(f,a),l=G(f," more characters"),f.forEach(_),this.h()},h(){d(t,"type","button"),d(t,"class","svelte-8fkf35")},m(i,f){A(i,t,f),u(t,e),u(t,l),o||(s=le(t,"click",r),o=!0)},p(i,f){n=i,f&4&&a!==(a=n[23].message.length-ee+"")&&W(e,a)},d(i){i&&_(t),o=!1,s()}}}function Ke(n){var P;let t,a,e,l=new Date(n[23].created_at).toLocaleDateString(void 0,{})+"",o,s,r=new Date(n[23].created_at).toLocaleTimeString(void 0,{})+"",i,f,h,v,M,z="Remove log from pinned panel",K,V,j,T,F,q,D,R,y,H,te;V=new be({props:{icon:"trash",size:"18"}});function Y(){return n[16](n[23])}let c=((P=n[23].data)==null?void 0:P.url)&&ze(n);const I=[kt,bt],m=[];function $(k,S){return k[24]?0:1}return q=$(n),D=m[q]=I[q](n),{c(){t=p("li"),a=p("div"),e=p("time"),o=X(l),s=L(),i=X(r),h=L(),v=p("button"),M=p("span"),M.textContent=z,K=L(),ie(V.$$.fragment),j=L(),c&&c.c(),T=L(),F=p("div"),D.c(),R=L(),this.h()},l(k){t=g(k,"LI",{class:!0});var S=w(t);a=g(S,"DIV",{class:!0});var b=w(a);e=g(b,"TIME",{class:!0,datetime:!0});var U=w(e);o=G(U,l),s=C(U),i=G(U,r),U.forEach(_),h=C(b),v=g(b,"BUTTON",{type:!0,title:!0,class:!0});var N=w(v);M=g(N,"SPAN",{class:!0,"data-svelte-h":!0}),ne(M)!=="svelte-flzfhp"&&(M.textContent=z),K=C(N),fe(V.$$.fragment,N),N.forEach(_),b.forEach(_),j=C(S),c&&c.l(S),T=C(S),F=g(S,"DIV",{class:!0});var Z=w(F);D.l(Z),Z.forEach(_),R=C(S),S.forEach(_),this.h()},h(){d(e,"class","date svelte-8fkf35"),d(e,"datetime",f=n[23].created_at),d(M,"class","label"),d(v,"type","button"),d(v,"title","Remove log from pinned panel"),d(v,"class","svelte-8fkf35"),d(a,"class","info svelte-8fkf35"),d(F,"class","message svelte-8fkf35"),d(t,"class","svelte-8fkf35")},m(k,S){A(k,t,S),u(t,a),u(a,e),u(e,o),u(e,s),u(e,i),u(a,h),u(a,v),u(v,M),u(v,K),ue(V,v,null),u(t,j),c&&c.m(t,null),u(t,T),u(t,F),m[q].m(F,null),u(t,R),y=!0,H||(te=le(v,"click",Y),H=!0)},p(k,S){var U;n=k,(!y||S&4)&&l!==(l=new Date(n[23].created_at).toLocaleDateString(void 0,{})+"")&&W(o,l),(!y||S&4)&&r!==(r=new Date(n[23].created_at).toLocaleTimeString(void 0,{})+"")&&W(i,r),(!y||S&4&&f!==(f=n[23].created_at))&&d(e,"datetime",f),(U=n[23].data)!=null&&U.url?c?c.p(n,S):(c=ze(n),c.c(),c.m(t,T)):c&&(c.d(1),c=null);let b=q;q=$(n),q===b?m[q].p(n,S):(re(),B(m[b],1,1,()=>{m[b]=null}),oe(),D=m[q],D?D.p(n,S):(D=m[q]=I[q](n),D.c()),E(D,1),D.m(F,null))},i(k){y||(E(V.$$.fragment,k),E(D),y=!0)},o(k){B(V.$$.fragment,k),B(D),y=!1},d(k){k&&_(t),ce(V),c&&c.d(),m[q].d(),H=!1,te()}}}function Tt(n){let t,a,e,l="Clear pinned logs",o,s,r,i,f=n[2]&&qe(n);return{c(){t=p("div"),a=p("nav"),e=p("button"),e.textContent=l,o=L(),f&&f.c(),this.h()},l(h){t=g(h,"DIV",{class:!0});var v=w(t);a=g(v,"NAV",{class:!0});var M=w(a);e=g(M,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-eeid91"&&(e.textContent=l),M.forEach(_),o=C(v),f&&f.l(v),v.forEach(_),this.h()},h(){d(e,"type","button"),d(e,"class","button svelte-8fkf35"),d(a,"class","asideNav svelte-8fkf35"),d(t,"class","pins svelte-8fkf35")},m(h,v){A(h,t,v),u(t,a),u(a,e),u(t,o),f&&f.m(t,null),s=!0,r||(i=le(e,"click",n[15]),r=!0)},p(h,v){h[2]?f?(f.p(h,v),v&4&&E(f,1)):(f=qe(h),f.c(),E(f,1),f.m(t,null)):f&&(re(),B(f,1,1,()=>{f=null}),oe())},i(h){s||(E(f),s=!0)},o(h){B(f),s=!1},d(h){h&&_(t),f&&f.d(),r=!1,i()}}}function Et(n){var S;let t,a,e,l,o,s,r,i="Filter:",f,h,v,M,z,K,V="Clear screen",j,T,F,q="Toggle pinned logs panel",D,R,y,H,te,Y,c,I;Ce.title=t="Logs"+((S=n[4].online)!=null&&S.MPKIT_URL?": "+n[4].online.MPKIT_URL.replace("https://",""):"");let m=n[1]&&Oe(n);R=new be({props:{icon:"pin"}});let $=n[4].logs.logs&&Be(n),P=!n[1]&&Fe(),k=n[3]&&Re(n);return{c(){a=L(),e=p("div"),l=p("section"),o=p("nav"),s=p("form"),r=p("label"),r.textContent=i,f=L(),h=p("input"),v=L(),m&&m.c(),M=L(),z=p("div"),K=p("button"),K.textContent=V,j=L(),T=p("button"),F=p("span"),F.textContent=q,D=L(),ie(R.$$.fragment),y=L(),$&&$.c(),H=L(),P&&P.c(),te=L(),k&&k.c(),this.h()},l(b){xe("svelte-dfdkqr",Ce.head).forEach(_),a=C(b),e=g(b,"DIV",{class:!0});var N=w(e);l=g(N,"SECTION",{class:!0});var Z=w(l);o=g(Z,"NAV",{class:!0});var de=w(o);s=g(de,"FORM",{});var se=w(s);r=g(se,"LABEL",{for:!0,"data-svelte-h":!0}),ne(r)!=="svelte-kf6j7o"&&(r.textContent=i),f=C(se),h=g(se,"INPUT",{type:!0,id:!0,class:!0}),v=C(se),m&&m.l(se),se.forEach(_),M=C(de),z=g(de,"DIV",{class:!0});var x=w(z);K=g(x,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ne(K)!=="svelte-1hlqgjb"&&(K.textContent=V),j=C(x),T=g(x,"BUTTON",{type:!0,title:!0,class:!0});var _e=w(T);F=g(_e,"SPAN",{class:!0,"data-svelte-h":!0}),ne(F)!=="svelte-1o6petk"&&(F.textContent=q),D=C(_e),fe(R.$$.fragment,_e),_e.forEach(_),x.forEach(_),de.forEach(_),y=C(Z),$&&$.l(Z),H=C(Z),P&&P.l(Z),Z.forEach(_),te=C(N),k&&k.l(N),N.forEach(_),this.h()},h(){d(r,"for","filter"),d(h,"type","text"),d(h,"id","filter"),d(h,"class","svelte-8fkf35"),d(K,"type","button"),d(K,"class","button"),d(F,"class","label"),d(T,"type","button"),d(T,"title","Toggle pinned logs panel"),d(T,"class","button"),d(z,"class","svelte-8fkf35"),d(o,"class","svelte-8fkf35"),d(l,"class","logs svelte-8fkf35"),d(e,"class","container svelte-8fkf35")},m(b,U){A(b,a,U),A(b,e,U),u(e,l),u(l,o),u(o,s),u(s,r),u(s,f),u(s,h),Ne(h,n[1]),u(s,v),m&&m.m(s,null),u(o,M),u(o,z),u(z,K),u(z,j),u(z,T),u(T,F),u(T,D),ue(R,T,null),u(l,y),$&&$.m(l,null),u(l,H),P&&P.m(l,null),u(e,te),k&&k.m(e,null),n[18](e),Y=!0,c||(I=[le(h,"input",n[8]),le(K,"click",n[10]),le(T,"click",n[7])],c=!0)},p(b,[U]){var N;(!Y||U&16)&&t!==(t="Logs"+((N=b[4].online)!=null&&N.MPKIT_URL?": "+b[4].online.MPKIT_URL.replace("https://",""):""))&&(Ce.title=t),U&2&&h.value!==b[1]&&Ne(h,b[1]),b[1]?m?(m.p(b,U),U&2&&E(m,1)):(m=Oe(b),m.c(),E(m,1),m.m(s,null)):m&&(re(),B(m,1,1,()=>{m=null}),oe()),b[4].logs.logs?$?($.p(b,U),U&16&&E($,1)):($=Be(b),$.c(),E($,1),$.m(l,H)):$&&(re(),B($,1,1,()=>{$=null}),oe()),b[1]?P&&(P.d(1),P=null):P||(P=Fe(),P.c(),P.m(l,null)),b[3]?k?(k.p(b,U),U&8&&E(k,1)):(k=Re(b),k.c(),E(k,1),k.m(e,null)):k&&(re(),B(k,1,1,()=>{k=null}),oe())},i(b){Y||(E(m),E(R.$$.fragment,b),E($),E(k),Y=!0)},o(b){B(m),B(R.$$.fragment,b),B($),B(k),Y=!1},d(b){b&&(_(a),_(e)),m&&m.d(),ce(R),$&&$.d(),P&&P.d(),k&&k.d(),n[18](null),c=!1,He(I)}}}let ee=262144;function Lt(n,t,a){let e;et(n,pe,c=>a(4,e=c));let l,o="",s=[],r,i;tt(()=>(f(),M(),i=setInterval(()=>{document.visibilityState!=="hidden"&&f()},3e3),()=>clearInterval(i)));const f=async()=>{var m,$,P;const c=(($=(m=e.logs.logs)==null?void 0:m.at(-1))==null?void 0:$.id)??null,I=await ht.get({last:c});c?(P=I.logs)!=null&&P.length&&(ge(pe,e.logs.logs=[...e.logs.logs,...I.logs],e),e.logs.downloaded_at.push(Date.now()),e.logs.downloaded_at.length>2&&e.logs.downloaded_at.splice(0,1)):e.logs.logs||(ge(pe,e.logs=I,e),e.logs.downloaded_at||ge(pe,e.logs.downloaded_at=[Date.now()],e))},h=c=>c.hidden===!0||c.error_type.toLowerCase().indexOf(o)===-1&&c.message.toLowerCase().indexOf(o)===-1;let v=!1;lt(()=>{{const c=document.querySelector(".logs");c&&Math.abs(c.scrollHeight-c.scrollTop-c.clientHeight)<10&&(v=!1)}}),st(async()=>{var c;v||(await ot(),document.querySelector("footer").scrollIntoView(),(c=e.logs.logs)!=null&&c.length&&(v=!0))});const M=()=>{a(3,r=localStorage.pinnedPanel==="true"),a(2,s=localStorage.pinnedLogs?JSON.parse(localStorage.pinnedLogs):[])},z=c=>{s.find(I=>I.id===c.id)?a(2,s=s.filter(I=>I.id!==c.id)):a(2,s=[...s,c]),localStorage.pinnedLogs=JSON.stringify(s)},K=()=>{r?(a(3,r=!1),localStorage.pinnedPanel=!1):(a(3,r=!0),localStorage.pinnedPanel=!0)};function V(){o=this.value,a(1,o)}const j=()=>a(1,o=""),T=()=>e.logs.logs.forEach((c,I)=>ge(pe,e.logs.logs[I].hidden=!0,e)),F=(c,I,m)=>ge(pe,I[m].showFull=!0,e),q=(c,I)=>navigator.clipboard.writeText(c.message).then(()=>{I.target.classList.add("confirmation"),setTimeout(()=>I.target.classList.remove("confirmation"),1e3)}),D=c=>z(c),R=(c,I)=>I.id===c.id,y=()=>{localStorage.pinnedLogs=[],a(2,s=[])},H=c=>z(c),te=(c,I,m)=>a(2,I[m].showFull=!0,s);function Y(c){rt[c?"unshift":"push"](()=>{l=c,a(0,l)})}return[l,o,s,r,e,h,z,K,V,j,T,F,q,D,R,y,H,te,Y]}class At extends it{constructor(t){super(),ft(this,t,Lt,Et,Ze,{})}}export{At as component};
