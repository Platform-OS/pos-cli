import{s as Me,a as S,f as m,l as be,J as De,d as N,c as F,g as _,h as O,r as se,m as ge,j as l,i as ce,v as n,K as Te,x as te,R as Ee,N as Pe,y as Ie,w as Ae,z as Re,u as Q,n as Ce,B as Be}from"../chunks/scheduler.771e17c8.js";import{S as qe,i as He,b as de,d as me,m as _e,a as V,t as X,c as Le,e as he,j as Ke,g as Ne}from"../chunks/index.25a56fcb.js";import{e as ye}from"../chunks/each.066ee579.js";import{f as Ve}from"../chunks/index.f511f030.js";import{g as ve}from"../chunks/graphql.6ce9eb6f.js";import{s as j}from"../chunks/state.2c4ca62b.js";import{I as pe}from"../chunks/Icon.34c6ba11.js";const ne={get:()=>ve({query:`
      query {
        constants(
          per_page: 100
        ) {
          results {
            name,
            value,
            updated_at
          }
        }
      }`}).then(t=>t.constants.results),edit:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_set(name: "${e.name}", value: "${e.value}"){
          name,
          value
        }
      }`;return ve({query:t})},delete:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_unset(name: "${e.name}"){
          name
        }
      }
    `;return ve({query:t})}};function ke(e,t,a){const o=e.slice();return o[13]=t[a],o[14]=t,o[15]=a,o}function Se(e){let t,a,o="Clear filter",E,i,h,k,R;return i=new pe({props:{icon:"x",size:"12"}}),{c(){t=m("button"),a=m("span"),a.textContent=o,E=S(),de(i.$$.fragment),this.h()},l(f){t=_(f,"BUTTON",{class:!0});var y=O(t);a=_(y,"SPAN",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-1bu6mgu"&&(a.textContent=o),E=F(y),me(i.$$.fragment,y),y.forEach(N),this.h()},h(){l(a,"class","label svelte-9flr1b"),l(t,"class","clearFilter svelte-9flr1b")},m(f,y){ce(f,t,y),n(t,a),n(t,E),_e(i,t,null),h=!0,k||(R=te(t,"click",e[8]),k=!0)},p:Re,i(f){h||(V(i.$$.fragment,f),h=!0)},o(f){X(i.$$.fragment,f),h=!1},d(f){f&&N(t),he(i),k=!1,R()}}}function Fe(e){let t,a,o,E,i,h,k,R="Delete constant",f,y,z,T,C,M=e[13].name+"",J,r,c,v,W,q,B,g,Y,D,K,Z,U,d,P=e[13].exposed?"Hide value":"Show value",u,ae,H,s,w,p,L="Save",A,le,b,x,re;y=new pe({props:{icon:"x",size:"14"}});function oe(){return e[10](e[13],e[14],e[15])}H=new pe({props:{icon:e[13].exposed?"eyeStriked":"eye"}});function Oe(){return e[11](e[13],e[14],e[15])}function Ue(...I){return e[12](e[15],...I)}return{c(){t=m("li"),a=m("form"),o=m("input"),i=S(),h=m("button"),k=m("span"),k.textContent=R,f=S(),de(y.$$.fragment),z=S(),T=m("form"),C=m("label"),J=be(M),c=S(),v=m("input"),q=S(),B=m("fieldset"),g=m("input"),Z=S(),U=m("button"),d=m("span"),u=be(P),ae=S(),de(H.$$.fragment),w=S(),p=m("button"),p.textContent=L,A=S(),this.h()},l(I){t=_(I,"LI",{class:!0});var $=O(t);a=_($,"FORM",{class:!0});var ee=O(a);o=_(ee,"INPUT",{type:!0,name:!0,class:!0}),i=F(ee),h=_(ee,"BUTTON",{type:!0,title:!0,class:!0});var ie=O(h);k=_(ie,"SPAN",{class:!0,"data-svelte-h":!0}),se(k)!=="svelte-1p7u8ms"&&(k.textContent=R),f=F(ie),me(y.$$.fragment,ie),ie.forEach(N),ee.forEach(N),z=F($),T=_($,"FORM",{class:!0});var G=O(T);C=_(G,"LABEL",{for:!0,class:!0});var we=O(C);J=ge(we,M),we.forEach(N),c=F(G),v=_(G,"INPUT",{type:!0,name:!0,class:!0}),q=F(G),B=_(G,"FIELDSET",{class:!0});var ue=O(B);g=_(ue,"INPUT",{name:!0,id:!0,class:!0}),Z=F(ue),U=_(ue,"BUTTON",{type:!0,class:!0,title:!0});var fe=O(U);d=_(fe,"SPAN",{class:!0});var $e=O(d);u=ge($e,P),$e.forEach(N),ae=F(fe),me(H.$$.fragment,fe),fe.forEach(N),ue.forEach(N),w=F(G),p=_(G,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),se(p)!=="svelte-1g3xn8h"&&(p.textContent=L),G.forEach(N),A=F($),$.forEach(N),this.h()},h(){l(o,"type","hidden"),l(o,"name","name"),o.value=E=e[13].name,l(o,"class","svelte-9flr1b"),l(k,"class","label svelte-9flr1b"),l(h,"type","submit"),l(h,"title","Delete constant"),l(h,"class","svelte-9flr1b"),l(a,"class","delete svelte-9flr1b"),l(C,"for",r=e[13].name),l(C,"class","svelte-9flr1b"),l(v,"type","hidden"),l(v,"name","name"),v.value=W=e[13].name,l(v,"class","svelte-9flr1b"),g.disabled=Y=!e[13].exposed,l(g,"name","value"),g.value=D=e[13].value,l(g,"id",K=e[13].name),l(g,"class","svelte-9flr1b"),Q(g,"exposed",e[13].exposed),l(d,"class","label svelte-9flr1b"),l(U,"type","button"),l(U,"class","toggleExposition svelte-9flr1b"),l(U,"title",s=e[13].exposed?"Hide value":"Show value"),l(B,"class","svelte-9flr1b"),l(p,"type","submit"),l(p,"class","button svelte-9flr1b"),Q(p,"needed",e[1][e[15]].changed),l(T,"class","edit svelte-9flr1b"),l(t,"class","svelte-9flr1b"),Q(t,"hidden",e[0]&&e[3](e[13])),Q(t,"highlighted",e[2].highlighted.constant===e[13].name)},m(I,$){ce(I,t,$),n(t,a),n(a,o),n(a,i),n(a,h),n(h,k),n(h,f),_e(y,h,null),n(t,z),n(t,T),n(T,C),n(C,J),n(T,c),n(T,v),n(T,q),n(T,B),n(B,g),n(B,Z),n(B,U),n(U,d),n(d,u),n(U,ae),_e(H,U,null),n(T,w),n(T,p),n(t,A),b=!0,x||(re=[te(a,"submit",Ee(e[9])),te(g,"input",oe),te(U,"click",Oe),te(T,"submit",Ee(Ue))],x=!0)},p(I,$){e=I,(!b||$&2&&E!==(E=e[13].name))&&(o.value=E),(!b||$&2)&&M!==(M=e[13].name+"")&&Ce(J,M),(!b||$&2&&r!==(r=e[13].name))&&l(C,"for",r),(!b||$&2&&W!==(W=e[13].name))&&(v.value=W),(!b||$&2&&Y!==(Y=!e[13].exposed))&&(g.disabled=Y),(!b||$&2&&D!==(D=e[13].value)&&g.value!==D)&&(g.value=D),(!b||$&2&&K!==(K=e[13].name))&&l(g,"id",K),(!b||$&2)&&Q(g,"exposed",e[13].exposed),(!b||$&2)&&P!==(P=e[13].exposed?"Hide value":"Show value")&&Ce(u,P);const ee={};$&2&&(ee.icon=e[13].exposed?"eyeStriked":"eye"),H.$set(ee),(!b||$&2&&s!==(s=e[13].exposed?"Hide value":"Show value"))&&l(U,"title",s),(!b||$&2)&&Q(p,"needed",e[1][e[15]].changed),(!b||$&11)&&Q(t,"hidden",e[0]&&e[3](e[13])),(!b||$&6)&&Q(t,"highlighted",e[2].highlighted.constant===e[13].name)},i(I){b||(V(y.$$.fragment,I),V(H.$$.fragment,I),I&&(le||Be(()=>{le=Ke(t,Ve,{duration:100,delay:10*e[15]}),le.start()})),b=!0)},o(I){X(y.$$.fragment,I),X(H.$$.fragment,I),b=!1},d(I){I&&N(t),he(y),he(H),x=!1,Ie(re)}}}function je(e){var H;let t,a,o,E,i,h,k="Find:",R,f,y,z,T,C,M,J='<label for="newName" class="svelte-9flr1b">Name</label> <input type="text" name="name" id="newName" placeholder="MY_NEW_CONSTANT" class="svelte-9flr1b"/>',r,c,v='<label for="newValue" class="svelte-9flr1b">Value</label> <input type="text" name="value" id="newValue" class="svelte-9flr1b"/>',W,q,B,g,Y,D,K,Z,U;document.title=t="Constants"+((H=e[2].online)!=null&&H.MPKIT_URL?": "+e[2].online.MPKIT_URL.replace("https://",""):"");let d=e[0]&&Se(e);g=new pe({props:{icon:"arrowRight"}});let P=ye(e[1]),u=[];for(let s=0;s<P.length;s+=1)u[s]=Fe(ke(e,P,s));const ae=s=>X(u[s],1,1,()=>{u[s]=null});return{c(){a=S(),o=m("div"),E=m("nav"),i=m("form"),h=m("label"),h.textContent=k,R=S(),f=m("input"),y=S(),d&&d.c(),z=S(),T=m("section"),C=m("form"),M=m("fieldset"),M.innerHTML=J,r=S(),c=m("fieldset"),c.innerHTML=v,W=S(),q=m("button"),B=be(`Add
        `),de(g.$$.fragment),Y=S(),D=m("ul");for(let s=0;s<u.length;s+=1)u[s].c();this.h()},l(s){De("svelte-2x07wh",document.head).forEach(N),a=F(s),o=_(s,"DIV",{class:!0});var p=O(o);E=_(p,"NAV",{class:!0});var L=O(E);i=_(L,"FORM",{});var A=O(i);h=_(A,"LABEL",{for:!0,"data-svelte-h":!0}),se(h)!=="svelte-1otrvr9"&&(h.textContent=k),R=F(A),f=_(A,"INPUT",{type:!0,id:!0,class:!0}),y=F(A),d&&d.l(A),A.forEach(N),L.forEach(N),z=F(p),T=_(p,"SECTION",{class:!0});var le=O(T);C=_(le,"FORM",{class:!0});var b=O(C);M=_(b,"FIELDSET",{class:!0,"data-svelte-h":!0}),se(M)!=="svelte-1pelkcv"&&(M.innerHTML=J),r=F(b),c=_(b,"FIELDSET",{class:!0,"data-svelte-h":!0}),se(c)!=="svelte-t20vqf"&&(c.innerHTML=v),W=F(b),q=_(b,"BUTTON",{class:!0});var x=O(q);B=ge(x,`Add
        `),me(g.$$.fragment,x),x.forEach(N),b.forEach(N),le.forEach(N),Y=F(p),D=_(p,"UL",{class:!0});var re=O(D);for(let oe=0;oe<u.length;oe+=1)u[oe].l(re);re.forEach(N),p.forEach(N),this.h()},h(){l(h,"for","filter"),l(f,"type","text"),l(f,"id","filter"),f.autofocus=!0,l(f,"class","svelte-9flr1b"),l(E,"class","svelte-9flr1b"),l(M,"class","svelte-9flr1b"),l(c,"class","svelte-9flr1b"),l(q,"class","button svelte-9flr1b"),l(C,"class","svelte-9flr1b"),l(T,"class","create svelte-9flr1b"),l(D,"class","svelte-9flr1b"),l(o,"class","container")},m(s,w){ce(s,a,w),ce(s,o,w),n(o,E),n(E,i),n(i,h),n(i,R),n(i,f),Te(f,e[0]),n(i,y),d&&d.m(i,null),n(o,z),n(o,T),n(T,C),n(C,M),n(C,r),n(C,c),n(C,W),n(C,q),n(q,B),_e(g,q,null),n(o,Y),n(o,D);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(D,null);K=!0,f.focus(),Z||(U=[te(f,"input",e[7]),te(C,"submit",Ee(e[6]))],Z=!0)},p(s,[w]){var p;if((!K||w&4)&&t!==(t="Constants"+((p=s[2].online)!=null&&p.MPKIT_URL?": "+s[2].online.MPKIT_URL.replace("https://",""):""))&&(document.title=t),w&1&&f.value!==s[0]&&Te(f,s[0]),s[0]?d?(d.p(s,w),w&1&&V(d,1)):(d=Se(s),d.c(),V(d,1),d.m(i,null)):d&&(Ne(),X(d,1,1,()=>{d=null}),Le()),w&63){P=ye(s[1]);let L;for(L=0;L<P.length;L+=1){const A=ke(s,P,L);u[L]?(u[L].p(A,w),V(u[L],1)):(u[L]=Fe(A),u[L].c(),V(u[L],1),u[L].m(D,null))}for(Ne(),L=P.length;L<u.length;L+=1)ae(L);Le()}},i(s){if(!K){V(d),V(g.$$.fragment,s);for(let w=0;w<P.length;w+=1)V(u[w]);K=!0}},o(s){X(d),X(g.$$.fragment,s),u=u.filter(Boolean);for(let w=0;w<u.length;w+=1)X(u[w]);K=!1},d(s){s&&(N(a),N(o)),d&&d.d(),he(g),Pe(u,s),Z=!1,Ie(U)}}}function ze(e,t,a){let o;Ae(e,j,r=>a(2,o=r));let E="",i=[];(async()=>await ne.get())().then(r=>{a(1,i=r)});const h=r=>r.name.toLowerCase().indexOf(E.toLowerCase())===-1&&r.value.toLowerCase().indexOf(E.toLowerCase())===-1,k=async(r,c)=>{r.preventDefault();const v=await ne.edit(new FormData(r.target));v.errors?j.notification.create("error",`Failed to update ${v.constant_set.name} constant`):(a(1,i[c].changed=!1,i),j.highlight("constant",v.constant_set.name),j.notification.create("success",`Constant ${v.constant_set.name} updated`))},R=async r=>{if(r.preventDefault(),confirm("Are you sure you want to delete this constant?")){const c=await ne.delete(new FormData(r.target));c.errors?j.notification.create("success",`Failed to delete ${c.constant_unset.name} constant`):(j.notification.create("success",`Constant ${c.constant_unset.name} deleted`),await ne.get().then(v=>{a(1,i=v)}))}},f=async r=>{r.preventDefault();const c=await ne.edit(new FormData(r.target));c.errors?j.notification.create("error",`Failed to create ${c.constant_set.name} constant`):(r.target.reset(),j.notification.create("success",`Constant ${c.constant_set.name} created`),await ne.get().then(v=>{a(1,i=v),j.highlight("constant",c.constant_set.name)}))};function y(){E=this.value,a(0,E)}return[E,i,o,h,k,R,f,y,()=>a(0,E=""),r=>R(r),(r,c,v)=>a(1,c[v].changed=!0,i),(r,c,v)=>a(1,c[v].exposed=!r.exposed,i),(r,c)=>k(c,r)]}class xe extends qe{constructor(t){super(),He(this,t,ze,je,Me,{})}}export{xe as component};
