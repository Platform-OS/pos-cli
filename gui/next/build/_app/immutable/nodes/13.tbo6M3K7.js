import{s as Me,f as g,g as $,h as O,d as h,i as A,x as Q,R as ut,w as Fe,e as Pe,N as Xe,a as F,r as ae,c as P,j as f,K as ne,B as ot,v as c,L as Ke,y as Ge,A as Le,P as gt,p as Ze,l as Y,m as Z,n as de,z as De,H as Ct,S as pl,T as Lt,u as ke,U as hl,o as gl,t as $l,J as yl,M as kl,I as wl}from"../chunks/scheduler.sKKhyktU.js";import{S as qe,i as He,a as D,g as be,t as V,c as ge,b as se,d as ie,m as oe,e as ue,f as Ft,h as El}from"../chunks/index.LYVpS7Hw.js";import{g as Tl}from"../chunks/globals.0cDDIVm6.js";import{p as yt}from"../chunks/stores.ZObswPcT.js";import{s as W}from"../chunks/state.u3CNLQkb.js";import{g as at}from"../chunks/graphql.vANW7X3L.js";import{I as Ce}from"../chunks/Icon.rkznIECp.js";import{e as we,u as Cl,o as Nl}from"../chunks/each.3GYeTQvW.js";import{t as Tt}from"../chunks/tryParseJSON.KtkvGy73.js";import{J as Sl}from"../chunks/JSONTree.k3p57Rl8.js";import{q as Ol}from"../chunks/index.yKNLBoKC.js";import{N as Il}from"../chunks/Number.AOsc1o8j.js";const Dl={array:"value_array",boolean:"value_boolean",date:"value",datetime:"value",float:"value_float",integer:"value_int",string:"value",text:"value",upload:"value",json:"value_json"},vl={string:"String",integer:"Int",float:"Float",boolean:"Boolean",array:"[String!]",json:"JSONPayload",range:"RangeFilter"},Ll=(r=[])=>{let e="",l={},t="";const n={string:["array_contains","not_array_contains","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with","value"],int:["value_int","not_value_int"],float:["not_value_float","value_float"],bool:["exists","not_value_boolean","value_boolean"],range:["range"],array:["value_array","not_value_array","value_in","not_value_in","array_overlaps","not_array_overlaps"]};for(const a of r){if(!a.minFilterValue&&!a.maxFilterValue&&!a.value)break;let s="",i="";n.int.includes(a.operation)?(s="integer",i=parseInt(a.value)):n.float.includes(a.operation)?(s="float",i=parseFloat(a.value)):n.bool.includes(a.operation)?(s="boolean",i=a.value==="true"):n.range.includes(a.operation)?(s="range",i={},i[a.minFilter]=a.minFilterValue,i[a.maxFilter]=a.maxFilterValue):n.array.includes(a.operation)?(s="array",i=JSON.parse(a.value)):(s="string",i=a.value),a.name!=="id"&&(e+=`, $${a.name}: ${vl[s]}`,l[a.name]=i,t+=`{
        name: "${a.name}",
        ${a.operation}: $${a.name}
      }`)}return e.length&&(e=e.slice(2),e=`(${e})`),t=`
    properties: [${t}]
  `,{variablesDefinition:e,variables:l,propertiesFilter:t}},Pt=r=>{const e=r.entries();let l="",t={},n="",a={};function s(i,o){return o===""?null:i==="integer"?parseInt(o):i==="float"?parseFloat(o):i==="boolean"?o==="true":i==="array"||i==="json"?JSON.parse(o):o}for(const[i,o]of e)if(i.indexOf("[")>=0){let u=i.slice(0,i.indexOf("[")),p=i.slice(i.indexOf("[")+1,i.indexOf("]"));(a[u]??={})[p]=o}for(const i in a)l+=`, $${i}: ${vl[a[i].type]}`,t[i]=s(a[i].type,a[i].value),n+=`{ name: "${i}", ${Dl[a[i].type]}: $${i} }`;return l.length&&(l=l.slice(2),l=`(${l})`),{variablesDefinition:l,variables:t,properties:n}},Te={get:r=>{const l={...{deleted:!1,filters:{page:1}},...r},t=l.table?`table_id: { value: ${l.table} }`:"",n=l.filters?.attributes?.findIndex(p=>p.name==="id");let a="";n>=0&&l.filters.attributes[n].value&&(a=`id: { ${l.filters.attributes[n].operation}: ${l.filters.attributes[n].value} }`);let s="";l.sort?l.sort.by==="id"||l.sort.by==="created_at"||l.sort.by==="updated_at"?s=`${l.sort.by}: { order: ${l.sort.order} }`:s=`properties: { name: "${l.sort.by}", order: ${l.sort.order} }`:s="created_at: { order: DESC }";const i=l.deleted==="true"?"deleted_at: { exists: true }":"",o=Ll(l.filters?.attributes),u=`
      query${o.variablesDefinition} {
        records(
          page: ${l.filters.page}
          per_page: 20,
          sort: { ${s} },
          filter: {
            ${t}
            ${a}
            ${i}
            ${o.propertiesFilter}
          }
        ) {
          current_page
          total_pages
          results {
            id
            created_at
            updated_at
            deleted_at
            properties
          }
        }
      }`;return at({query:u,variables:o.variables}).then(p=>{W.data("records",p.records)})},create:r=>{const l=Object.fromEntries(r.properties.entries()).tableName,t=Pt(r.properties),n=`
      mutation${t.variablesDefinition} {
        record_create(record: {
          table: "${l}",
          properties: [${t.properties}]
        }) {
          id
        }
      }`;return at({query:n,variables:t.variables})},edit:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=Pt(r.properties),a=`
      mutation${n.variablesDefinition} {
        record_update(
          id: ${t},
          record: {
            table: "${l}"
            properties: [${n.properties}]
          }
        ) {
          id
        }
      }`;return at({query:a,variables:n.variables})},delete:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=`
      mutation {
        record_delete(table: "${l}", id: ${t}) {
          id
        }
      }`;return at({query:n})},restore:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,n=`
      mutation {
        record_update(
          id: ${e.recordId},
          record: {
            table: "${l}",
            deleted_at: null
          }
        ) {
          id
        }
      }`;return at({query:n})}};function At(r,e,l){const t=r.slice();return t[10]=e[l],t[11]=e,t[12]=l,t}function jt(r,e,l){const t=r.slice();return t[13]=e[l],t}function Rt(r,e,l){const t=r.slice();return t[16]=e[l],t}function Ut(r){let e,l,t=we(r[1].filters.attributes),n=[];for(let s=0;s<t.length;s+=1)n[s]=zt(At(r,t,s));const a=s=>V(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Pe()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);e=Pe()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);A(s,e,i),l=!0},p(s,i){if(i&6){t=we(s[1].filters.attributes);let o;for(o=0;o<t.length;o+=1){const u=At(s,t,o);n[o]?(n[o].p(u,i),D(n[o],1)):(n[o]=zt(u),n[o].c(),D(n[o],1),n[o].m(e.parentNode,e))}for(be(),o=t.length;o<n.length;o+=1)a(o);ge()}},i(s){if(!l){for(let i=0;i<t.length;i+=1)D(n[i]);l=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)V(n[i]);l=!1},d(s){s&&h(e),Xe(n,s)}}}function Vt(r){let e,l=r[16].name+"",t,n,a;return{c(){e=g("option"),t=Y(l),n=F(),this.h()},l(s){e=$(s,"OPTION",{});var i=O(e);t=Z(i,l),n=P(i),i.forEach(h),this.h()},h(){e.__value=a=r[16].name,ne(e,e.__value)},m(s,i){A(s,e,i),c(e,t),c(e,n)},p(s,i){i&2&&l!==(l=s[16].name+"")&&de(t,l),i&2&&a!==(a=s[16].name)&&(e.__value=a,ne(e,e.__value))},d(s){s&&h(e)}}}function Fl(r){let e,l,t=r[10].attribute_type+"",n;return{c(){e=Y("Unknow property type: "),l=g("code"),n=Y(t)},l(a){e=Z(a,"Unknow property type: "),l=$(a,"CODE",{});var s=O(l);n=Z(s,t),s.forEach(h)},m(a,s){A(a,e,s),A(a,l,s),c(l,n)},p(a,s){s&2&&t!==(t=a[10].attribute_type+"")&&de(n,t)},i:De,o:De,d(a){a&&(h(e),h(l))}}}function Pl(r){let e,l,t,n,a,s="Apply filters",i,o,u,p,d,v=we(r[2][r[10].attribute_type]),y=[];for(let _=0;_<v.length;_+=1)y[_]=Bt(jt(r,v,_));function E(){r[7].call(e,r[11],r[12])}function k(_,w){return _[10].operation==="exists"?Rl:_[10].operation==="range"?jl:Al}let m=k(r),T=m(r);return o=new Ce({props:{icon:"arrowRight"}}),{c(){e=g("select");for(let _=0;_<y.length;_+=1)y[_].c();l=F(),T.c(),t=F(),n=g("button"),a=g("span"),a.textContent=s,i=F(),se(o.$$.fragment),this.h()},l(_){e=$(_,"SELECT",{name:!0,class:!0});var w=O(e);for(let L=0;L<y.length;L+=1)y[L].l(w);w.forEach(h),l=P(_),T.l(_),t=P(_),n=$(_,"BUTTON",{type:!0,class:!0});var C=O(n);a=$(C,"SPAN",{class:!0,"data-svelte-h":!0}),ae(a)!=="svelte-6jbkuq"&&(a.textContent=s),i=P(C),ie(o.$$.fragment,C),C.forEach(h),this.h()},h(){f(e,"name","operation"),f(e,"class","svelte-y4u12o"),r[10].operation===void 0&&ot(E),f(a,"class","label"),f(n,"type","submit"),f(n,"class","button svelte-y4u12o")},m(_,w){A(_,e,w);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(e,null);Ke(e,r[10].operation,!0),A(_,l,w),T.m(_,w),A(_,t,w),A(_,n,w),c(n,a),c(n,i),oe(o,n,null),u=!0,p||(d=Q(e,"change",E),p=!0)},p(_,w){if(r=_,w&6){v=we(r[2][r[10].attribute_type]);let C;for(C=0;C<v.length;C+=1){const L=jt(r,v,C);y[C]?y[C].p(L,w):(y[C]=Bt(L),y[C].c(),y[C].m(e,null))}for(;C<y.length;C+=1)y[C].d(1);y.length=v.length}w&2&&Ke(e,r[10].operation),m===(m=k(r))&&T?T.p(r,w):(T.d(1),T=m(r),T&&(T.c(),T.m(t.parentNode,t)))},i(_){u||(D(o.$$.fragment,_),u=!0)},o(_){V(o.$$.fragment,_),u=!1},d(_){_&&(h(e),h(l),h(t),h(n)),Xe(y,_),T.d(_),ue(o),p=!1,d()}}}function Bt(r){let e,l=r[13]+"",t,n;return{c(){e=g("option"),t=Y(l),this.h()},l(a){e=$(a,"OPTION",{});var s=O(e);t=Z(s,l),s.forEach(h),this.h()},h(){e.__value=n=r[13],ne(e,e.__value)},m(a,s){A(a,e,s),c(e,t)},p(a,s){s&2&&l!==(l=a[13]+"")&&de(t,l),s&2&&n!==(n=a[13])&&(e.__value=n,ne(e,e.__value))},d(a){a&&h(e)}}}function Al(r){let e,l,t;function n(){r[8].call(e,r[11],r[12])}return{c(){e=g("input"),this.h()},l(a){e=$(a,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){f(e,"type","text"),f(e,"name","value"),f(e,"placeholder","filter value"),f(e,"class","svelte-y4u12o")},m(a,s){A(a,e,s),ne(e,r[10].value),l||(t=Q(e,"input",n),l=!0)},p(a,s){r=a,s&2&&e.value!==r[10].value&&ne(e,r[10].value)},d(a){a&&h(e),l=!1,t()}}}function jl(r){let e,l,t=">",n,a="≥",s,i,o,u,p,d,v="<",y,E="≤",k,m,T;return{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,s=F(),i=g("input"),u=F(),p=g("select"),d=g("option"),d.textContent=v,y=g("option"),y.textContent=E,k=F(),m=g("input"),this.h()},l(_){e=$(_,"SELECT",{name:!0,class:!0});var w=O(e);l=$(w,"OPTION",{"data-svelte-h":!0}),ae(l)!=="svelte-1xj81f9"&&(l.textContent=t),n=$(w,"OPTION",{"data-svelte-h":!0}),ae(n)!=="svelte-w6lec5"&&(n.textContent=a),w.forEach(h),s=P(_),i=$(_,"INPUT",{type:!0,name:!0,class:!0}),u=P(_),p=$(_,"SELECT",{name:!0,class:!0});var C=O(p);d=$(C,"OPTION",{"data-svelte-h":!0}),ae(d)!=="svelte-1kxptxj"&&(d.textContent=v),y=$(C,"OPTION",{"data-svelte-h":!0}),ae(y)!=="svelte-1juwqhl"&&(y.textContent=E),C.forEach(h),k=P(_),m=$(_,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){l.__value="gt",ne(l,l.__value),n.__value="gte",ne(n,n.__value),f(e,"name","maxFilter"),f(e,"class","svelte-y4u12o"),f(i,"type","number"),f(i,"name","maxFilterValue"),i.value=o=r[10].maxFilterValue,f(i,"class","svelte-y4u12o"),d.__value="lt",ne(d,d.__value),y.__value="lte",ne(y,y.__value),f(p,"name","minFilter"),f(p,"class","svelte-y4u12o"),f(m,"type","number"),f(m,"name","minFilterValue"),m.value=T=r[10].minFilterValue,f(m,"class","svelte-y4u12o")},m(_,w){A(_,e,w),c(e,l),c(e,n),A(_,s,w),A(_,i,w),A(_,u,w),A(_,p,w),c(p,d),c(p,y),A(_,k,w),A(_,m,w)},p(_,w){w&2&&o!==(o=_[10].maxFilterValue)&&i.value!==o&&(i.value=o),w&2&&T!==(T=_[10].minFilterValue)&&m.value!==T&&(m.value=T)},d(_){_&&(h(e),h(s),h(i),h(u),h(p),h(k),h(m))}}}function Rl(r){let e,l,t="true",n,a="false";return{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,this.h()},l(s){e=$(s,"SELECT",{name:!0,class:!0});var i=O(e);l=$(i,"OPTION",{"data-svelte-h":!0}),ae(l)!=="svelte-ogzxji"&&(l.textContent=t),n=$(i,"OPTION",{"data-svelte-h":!0}),ae(n)!=="svelte-gyv02o"&&(n.textContent=a),i.forEach(h),this.h()},h(){l.__value="true",ne(l,l.__value),n.__value="false",ne(n,n.__value),f(e,"name","value"),f(e,"class","svelte-y4u12o")},m(s,i){A(s,e,i),c(e,l),c(e,n)},p:De,d(s){s&&h(e)}}}function zt(r){let e,l,t="Filter by:",n,a,s,i="id",o,u,p,d,v,y,E,k,m,T=we(r[1].table.properties),_=[];for(let j=0;j<T.length;j+=1)_[j]=Vt(Rt(r,T,j));function w(){r[4].call(a,r[11],r[12])}function C(){return r[5](r[10],r[11],r[12])}function L(){r[6].call(u,r[11],r[12])}const R=[Pl,Fl],N=[];function H(j,b){return j[2][j[10].attribute_type]?0:1}return d=H(r),v=N[d]=R[d](r),{c(){e=g("fieldset"),l=g("label"),l.textContent=t,n=F(),a=g("select"),s=g("option"),s.textContent=i;for(let j=0;j<_.length;j+=1)_[j].c();o=F(),u=g("input"),p=F(),v.c(),y=F(),this.h()},l(j){e=$(j,"FIELDSET",{class:!0});var b=O(e);l=$(b,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ae(l)!=="svelte-1adf875"&&(l.textContent=t),n=P(b),a=$(b,"SELECT",{name:!0,class:!0});var S=O(a);s=$(S,"OPTION",{"data-svelte-h":!0}),ae(s)!=="svelte-ns3pfu"&&(s.textContent=i);for(let I=0;I<_.length;I+=1)_[I].l(S);S.forEach(h),o=P(b),u=$(b,"INPUT",{type:!0,name:!0}),p=P(b),v.l(b),y=P(b),b.forEach(h),this.h()},h(){f(l,"for",""),f(l,"class","svelte-y4u12o"),s.__value="id",ne(s,s.__value),f(a,"name","name"),f(a,"class","svelte-y4u12o"),r[10].name===void 0&&ot(w),f(u,"type","hidden"),f(u,"name","attribute_type"),f(e,"class","svelte-y4u12o")},m(j,b){A(j,e,b),c(e,l),c(e,n),c(e,a),c(a,s);for(let S=0;S<_.length;S+=1)_[S]&&_[S].m(a,null);Ke(a,r[10].name,!0),c(e,o),c(e,u),ne(u,r[10].attribute_type),c(e,p),N[d].m(e,null),c(e,y),E=!0,k||(m=[Q(a,"change",w),Q(a,"change",C),Q(u,"input",L)],k=!0)},p(j,b){if(r=j,b&2){T=we(r[1].table.properties);let I;for(I=0;I<T.length;I+=1){const z=Rt(r,T,I);_[I]?_[I].p(z,b):(_[I]=Vt(z),_[I].c(),_[I].m(a,null))}for(;I<_.length;I+=1)_[I].d(1);_.length=T.length}b&2&&Ke(a,r[10].name),b&2&&ne(u,r[10].attribute_type);let S=d;d=H(r),d===S?N[d].p(r,b):(be(),V(N[S],1,1,()=>{N[S]=null}),ge(),v=N[d],v?v.p(r,b):(v=N[d]=R[d](r),v.c()),D(v,1),v.m(e,y))},i(j){E||(D(v),E=!0)},o(j){V(v),E=!1},d(j){j&&h(e),Xe(_,j),N[d].d(),k=!1,Ge(m)}}}function Ul(r){let e,l,t,n,a=r[1].table?.properties&&Ut(r);return{c(){e=g("form"),a&&a.c()},l(s){e=$(s,"FORM",{});var i=O(e);a&&a.l(i),i.forEach(h)},m(s,i){A(s,e,i),a&&a.m(e,null),r[9](e),l=!0,t||(n=Q(e,"submit",ut(r[3])),t=!0)},p(s,[i]){s[1].table?.properties?a?(a.p(s,i),i&2&&D(a,1)):(a=Ut(s),a.c(),D(a,1),a.m(e,null)):a&&(be(),V(a,1,1,()=>{a=null}),ge())},i(s){l||(D(a),l=!0)},o(s){V(a),l=!1},d(s){s&&h(e),a&&a.d(),r[9](null),t=!1,n()}}}function Vl(r,e,l){let t;Fe(r,W,y=>l(1,t=y));let n;const a={id:["value"],string:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"],text:["value","exists","not_value"],array:["array_contains","value_array","value_in","exists","array_overlaps","not_array_contains","not_array_overlaps","not_value_array","not_value_in"],boolean:["value_boolean","exists","not_value_boolean"],integer:["value_int","exists","not_value_int","range"],float:["value_float","exists","not_value_float","range"],upload:["value","exists","not_value"],datetime:["value","exists","not_value"],date:["value","exists","not_value"]},s=()=>{Le(W,t.filters={page:1,attributes:[Object.fromEntries(new FormData(n).entries())],deleted:t.filters.deleted},t),Te.get({table:t.table.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function i(y,E){y[E].name=gt(this),W.set(t)}const o=(y,E,k)=>{Le(W,E[k].attribute_type=t.table.properties.find(m=>m.name===y.name)?.attribute_type||"id",t)};function u(y,E){y[E].attribute_type=this.value,W.set(t)}function p(y,E){y[E].operation=gt(this),W.set(t)}function d(y,E){y[E].value=this.value,W.set(t)}function v(y){Ze[y?"unshift":"push"](()=>{n=y,l(0,n)})}return[n,t,a,s,i,o,u,p,d,v]}class Bl extends qe{constructor(e){super(),He(this,e,Vl,Ul,Me,{})}}function Mt(r,e,l){const t=r.slice();return t[8]=e[l],t}function qt(r){let e,l,t="created at",n,a="updated at",s,i="id",o,u,p,d="DESC [Z→A]",v,y="ASC [A→Z]",E,k,m,T,_,w,C,L=we(r[1].table.properties),R=[];for(let b=0;b<L.length;b+=1)R[b]=Ht(Mt(r,L,b));const N=[Ml,zl],H=[];function j(b,S){return b[1].sort.order==="DESC"?0:1}return m=j(r),T=H[m]=N[m](r),{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,s=g("option"),s.textContent=i;for(let b=0;b<R.length;b+=1)R[b].c();o=F(),u=g("select"),p=g("option"),p.textContent=d,v=g("option"),v.textContent=y,E=F(),k=g("label"),T.c(),this.h()},l(b){e=$(b,"SELECT",{name:!0,id:!0,class:!0});var S=O(e);l=$(S,"OPTION",{"data-svelte-h":!0}),ae(l)!=="svelte-waq5ct"&&(l.textContent=t),n=$(S,"OPTION",{"data-svelte-h":!0}),ae(n)!=="svelte-msojyp"&&(n.textContent=a),s=$(S,"OPTION",{"data-svelte-h":!0}),ae(s)!=="svelte-ns3pfu"&&(s.textContent=i);for(let M=0;M<R.length;M+=1)R[M].l(S);S.forEach(h),o=P(b),u=$(b,"SELECT",{name:!0,id:!0,class:!0});var I=O(u);p=$(I,"OPTION",{"data-svelte-h":!0}),ae(p)!=="svelte-1soe6tv"&&(p.textContent=d),v=$(I,"OPTION",{"data-svelte-h":!0}),ae(v)!=="svelte-ih5v4p"&&(v.textContent=y),I.forEach(h),E=P(b),k=$(b,"LABEL",{for:!0,class:!0});var z=O(k);T.l(z),z.forEach(h),this.h()},h(){l.__value="created_at",ne(l,l.__value),n.__value="updated_at",ne(n,n.__value),s.__value="id",ne(s,s.__value),f(e,"name","by"),f(e,"id","sort_by"),f(e,"class","svelte-yzlk61"),r[1].sort.by===void 0&&ot(()=>r[3].call(e)),p.__value="DESC",ne(p,p.__value),v.__value="ASC",ne(v,v.__value),f(u,"name","order"),f(u,"id","sort_order"),f(u,"class","svelte-yzlk61"),r[1].sort.order===void 0&&ot(()=>r[5].call(u)),f(k,"for","sort_order"),f(k,"class","button svelte-yzlk61")},m(b,S){A(b,e,S),c(e,l),c(e,n),c(e,s);for(let I=0;I<R.length;I+=1)R[I]&&R[I].m(e,null);Ke(e,r[1].sort.by,!0),A(b,o,S),A(b,u,S),c(u,p),c(u,v),Ke(u,r[1].sort.order,!0),A(b,E,S),A(b,k,S),H[m].m(k,null),_=!0,w||(C=[Q(e,"change",r[3]),Q(e,"change",r[4]),Q(u,"change",r[5]),Q(u,"change",r[6])],w=!0)},p(b,S){if(S&2){L=we(b[1].table.properties);let z;for(z=0;z<L.length;z+=1){const M=Mt(b,L,z);R[z]?R[z].p(M,S):(R[z]=Ht(M),R[z].c(),R[z].m(e,null))}for(;z<R.length;z+=1)R[z].d(1);R.length=L.length}S&2&&Ke(e,b[1].sort.by),S&2&&Ke(u,b[1].sort.order);let I=m;m=j(b),m!==I&&(be(),V(H[I],1,1,()=>{H[I]=null}),ge(),T=H[m],T||(T=H[m]=N[m](b),T.c()),D(T,1),T.m(k,null))},i(b){_||(D(T),_=!0)},o(b){V(T),_=!1},d(b){b&&(h(e),h(o),h(u),h(E),h(k)),Xe(R,b),H[m].d(),w=!1,Ge(C)}}}function Ht(r){let e,l=r[8].name+"",t,n,a;return{c(){e=g("option"),t=Y(l),n=F(),this.h()},l(s){e=$(s,"OPTION",{});var i=O(e);t=Z(i,l),n=P(i),i.forEach(h),this.h()},h(){e.__value=a=r[8].name,ne(e,e.__value)},m(s,i){A(s,e,i),c(e,t),c(e,n)},p(s,i){i&2&&l!==(l=s[8].name+"")&&de(t,l),i&2&&a!==(a=s[8].name)&&(e.__value=a,ne(e,e.__value))},d(s){s&&h(e)}}}function zl(r){let e,l;return e=new Ce({props:{icon:"sortAZ"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Ml(r){let e,l;return e=new Ce({props:{icon:"sortZA"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function ql(r){let e,l,t,n,a=r[1].table?.properties&&qt(r);return{c(){e=g("form"),a&&a.c(),this.h()},l(s){e=$(s,"FORM",{class:!0});var i=O(e);a&&a.l(i),i.forEach(h),this.h()},h(){f(e,"class","svelte-yzlk61")},m(s,i){A(s,e,i),a&&a.m(e,null),r[7](e),l=!0,t||(n=Q(e,"submit",ut(r[2])),t=!0)},p(s,[i]){s[1].table?.properties?a?(a.p(s,i),i&2&&D(a,1)):(a=qt(s),a.c(),D(a,1),a.m(e,null)):a&&(be(),V(a,1,1,()=>{a=null}),ge())},i(s){l||(D(a),l=!0)},o(s){V(a),l=!1},d(s){s&&h(e),a&&a.d(),r[7](null),t=!1,n()}}}function Hl(r,e,l){let t;Fe(r,W,d=>l(1,t=d));let n;const a=()=>{Le(W,t.filters.page=1,t),Te.get({table:t.table.id,filters:t.filters,sort:Object.fromEntries(new FormData(n).entries()),deleted:t.filters.deleted})};function s(){t.sort.by=gt(this),W.set(t)}const i=()=>n.requestSubmit();function o(){t.sort.order=gt(this),W.set(t)}const u=()=>n.requestSubmit();function p(d){Ze[d?"unshift":"push"](()=>{n=d,l(0,n)})}return[n,t,a,s,i,o,u,p]}class Jl extends qe{constructor(e){super(),He(this,e,Hl,ql,Me,{})}}const ml=(r,e)=>{let l={value:r,type:e};return e!=="boolean"&&r===null?(l.value=null,l.type="null",{...l}):(e==="boolean"&&(r===!0?l.value="true":r===void 0?(l.value=null,l.type="null"):l.value="false"),typeof r=="object"?(l.value=r,l.type="json",{...l}):Tt(r)?(l.value=Tt(r),l.type="jsonEscaped",{...l}):{...l})},Wl=(r,e)=>{const l=t=>{t.composedPath().includes(r)||e()};return document.addEventListener("mousedown",l),{destroy(){document.removeEventListener("mousedown",l)}}};function Kl(r){let e,l,t,n,a,s,i,o,u,p,d,v,y;return u=new Ce({props:{icon:"x",size:"22"}}),{c(){e=g("form"),l=g("input"),n=F(),a=g("input"),s=F(),i=g("button"),o=g("i"),se(u.$$.fragment),p=Y(`\r
    Delete record`),this.h()},l(E){e=$(E,"FORM",{});var k=O(e);l=$(k,"INPUT",{type:!0,name:!0}),n=P(k),a=$(k,"INPUT",{type:!0,name:!0}),s=P(k),i=$(k,"BUTTON",{class:!0});var m=O(i);o=$(m,"I",{class:!0});var T=O(o);ie(u.$$.fragment,T),T.forEach(h),p=Z(m,`\r
    Delete record`),m.forEach(h),k.forEach(h),this.h()},h(){f(l,"type","hidden"),f(l,"name","tableName"),l.value=t=r[0].name,f(a,"type","hidden"),f(a,"name","recordId"),a.value=r[1],f(o,"class","svelte-ooaugn"),f(i,"class","danger")},m(E,k){A(E,e,k),c(e,l),c(e,n),c(e,a),c(e,s),c(e,i),c(i,o),oe(u,o,null),c(i,p),r[4](e),d=!0,v||(y=Q(e,"submit",r[3]),v=!0)},p(E,[k]){(!d||k&1&&t!==(t=E[0].name))&&(l.value=t),(!d||k&2)&&(a.value=E[1])},i(E){d||(D(u.$$.fragment,E),d=!0)},o(E){V(u.$$.fragment,E),d=!1},d(E){E&&h(e),ue(u),r[4](null),v=!1,y()}}}function Xl(r,e,l){let t,n;Fe(r,W,d=>l(5,t=d)),Fe(r,yt,d=>l(6,n=d));let{table:a}=e,{id:s}=e,i,o=Ct();const u=async d=>{if(d.preventDefault(),confirm("Are you sure you want to delete this record?")){o("success");const v=await Te.delete({table:a.name,properties:new FormData(i)});v.errors?W.notification.create("error",`Record ${v.record_delete.id} could not be deleted`):(Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),W.notification.create("success",`Record ${v.record_delete.id} deleted`))}};function p(d){Ze[d?"unshift":"push"](()=>{i=d,l(2,i)})}return r.$$set=d=>{"table"in d&&l(0,a=d.table),"id"in d&&l(1,s=d.id)},[a,s,i,u,p]}class Yl extends qe{constructor(e){super(),He(this,e,Xl,Kl,Me,{table:0,id:1})}}function Zl(r){let e,l,t,n,a,s,i,o,u,p,d,v,y;return u=new Ce({props:{icon:"recycleRefresh"}}),{c(){e=g("form"),l=g("input"),n=F(),a=g("input"),s=F(),i=g("button"),o=g("i"),se(u.$$.fragment),p=Y(`\r
    Restore record`),this.h()},l(E){e=$(E,"FORM",{});var k=O(e);l=$(k,"INPUT",{type:!0,name:!0}),n=P(k),a=$(k,"INPUT",{type:!0,name:!0}),s=P(k),i=$(k,"BUTTON",{});var m=O(i);o=$(m,"I",{});var T=O(o);ie(u.$$.fragment,T),T.forEach(h),p=Z(m,`\r
    Restore record`),m.forEach(h),k.forEach(h),this.h()},h(){f(l,"type","hidden"),f(l,"name","tableName"),l.value=t=r[0].name,f(a,"type","hidden"),f(a,"name","recordId"),a.value=r[1]},m(E,k){A(E,e,k),c(e,l),c(e,n),c(e,a),c(e,s),c(e,i),c(i,o),oe(u,o,null),c(i,p),r[4](e),d=!0,v||(y=Q(e,"submit",r[3]),v=!0)},p(E,[k]){(!d||k&1&&t!==(t=E[0].name))&&(l.value=t),(!d||k&2)&&(a.value=E[1])},i(E){d||(D(u.$$.fragment,E),d=!0)},o(E){V(u.$$.fragment,E),d=!1},d(E){E&&h(e),ue(u),r[4](null),v=!1,y()}}}function Gl(r,e,l){let t,n;Fe(r,W,d=>l(5,t=d)),Fe(r,yt,d=>l(6,n=d));let{table:a}=e,{id:s}=e,i,o=Ct();const u=async d=>{d.preventDefault(),o("success");const v=await Te.restore({table:a.name,properties:new FormData(i)});v.errors?W.notification.create("error",`Record ${v.record_update.id} could not be restored`):(Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),W.notification.create("success",`Record ${v.record_update.id} restored`))};function p(d){Ze[d?"unshift":"push"](()=>{i=d,l(2,i)})}return r.$$set=d=>{"table"in d&&l(0,a=d.table),"id"in d&&l(1,s=d.id)},[a,s,i,u,p]}class Ql extends qe{constructor(e){super(),He(this,e,Gl,Zl,Me,{table:0,id:1})}}function xl(r){let e,l;return e=new Yl({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[6]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function er(r){let e,l;return e=new Ql({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[5]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function tr(r){let e,l,t,n,a,s,i,o,u,p,d,v,y;a=new Ce({props:{icon:"copy",size:"22"}});const E=[er,xl],k=[];function m(T,_){return T[1].filters.deleted==="true"?0:1}return u=m(r),p=k[u]=E[u](r),{c(){e=g("menu"),l=g("ul"),t=g("li"),n=g("button"),se(a.$$.fragment),s=Y(`\r
        Copy record`),i=F(),o=g("li"),p.c(),this.h()},l(T){e=$(T,"MENU",{class:!0});var _=O(e);l=$(_,"UL",{});var w=O(l);t=$(w,"LI",{class:!0});var C=O(t);n=$(C,"BUTTON",{type:!0});var L=O(n);ie(a.$$.fragment,L),s=Z(L,`\r
        Copy record`),L.forEach(h),C.forEach(h),i=P(w),o=$(w,"LI",{class:!0});var R=O(o);p.l(R),R.forEach(h),w.forEach(h),_.forEach(h),this.h()},h(){f(n,"type","button"),f(t,"class","svelte-1tht2a1"),f(o,"class","svelte-1tht2a1"),f(e,"class","content-context svelte-1tht2a1")},m(T,_){A(T,e,_),c(e,l),c(l,t),c(t,n),oe(a,n,null),c(n,s),c(l,i),c(l,o),k[u].m(o,null),d=!0,v||(y=[Q(window,"keyup",r[3]),Q(n,"click",r[4]),pl(Wl.call(null,e,r[7]))],v=!0)},p(T,[_]){let w=u;u=m(T),u===w?k[u].p(T,_):(be(),V(k[w],1,1,()=>{k[w]=null}),ge(),p=k[u],p?p.p(T,_):(p=k[u]=E[u](T),p.c()),D(p,1),p.m(o,null))},i(T){d||(D(a.$$.fragment,T),D(p),d=!0)},o(T){V(a.$$.fragment,T),V(p),d=!1},d(T){T&&h(e),ue(a),k[u].d(),v=!1,Ge(y)}}}function lr(r,e,l){let t;Fe(r,W,d=>l(1,t=d));let{record:n}=e;const a=Ct(),s=d=>{d.key==="Escape"&&a("close")},i=()=>{a("close"),Le(W,t.record={...n},t),Le(W,t.record.id=null,t)},o=()=>a("close"),u=()=>a("close"),p=()=>a("close");return r.$$set=d=>{"record"in d&&l(0,n=d.record)},[n,t,a,s,i,o,u,p]}class rr extends qe{constructor(e){super(),He(this,e,lr,tr,Me,{record:0})}}function Jt(r,e,l){const t=r.slice();return t[5]=e[l],t}function Wt(r,e,l){const t=r.slice();t[8]=e[l];const n=ml(t[5].properties[t[8].name],t[8].attribute_type);return t[9]=n,t}function Kt(r,e,l){const t=r.slice();return t[8]=e[l],t}function Xt(r){let e,l,t,n,a="id",s,i,o,u="created at",p,d,v="updated at",y,E,k,m,T=we(r[1].table.properties),_=[];for(let L=0;L<T.length;L+=1)_[L]=Yt(Kt(r,T,L));let w=r[1].filters.deleted==="true"&&Zt(),C=r[1].records?.results?.length&&Gt(r);return{c(){e=g("table"),l=g("thead"),t=g("tr"),n=g("th"),n.textContent=a,s=F();for(let L=0;L<_.length;L+=1)_[L].c();i=F(),o=g("th"),o.textContent=u,p=F(),d=g("th"),d.textContent=v,y=F(),w&&w.c(),E=F(),C&&C.c(),this.h()},l(L){e=$(L,"TABLE",{class:!0});var R=O(e);l=$(R,"THEAD",{class:!0});var N=O(l);t=$(N,"TR",{});var H=O(t);n=$(H,"TH",{class:!0,"data-svelte-h":!0}),ae(n)!=="svelte-1i366gx"&&(n.textContent=a),s=P(H);for(let j=0;j<_.length;j+=1)_[j].l(H);i=P(H),o=$(H,"TH",{class:!0,"data-svelte-h":!0}),ae(o)!=="svelte-g832ob"&&(o.textContent=u),p=P(H),d=$(H,"TH",{class:!0,"data-svelte-h":!0}),ae(d)!=="svelte-1dvr12"&&(d.textContent=v),y=P(H),w&&w.l(H),H.forEach(h),N.forEach(h),E=P(R),C&&C.l(R),R.forEach(h),this.h()},h(){f(n,"class","id svelte-1bwwtph"),f(o,"class","svelte-1bwwtph"),f(d,"class","svelte-1bwwtph"),f(l,"class","svelte-1bwwtph"),f(e,"class",k=Lt(r[1].view.tableStyle)+" svelte-1bwwtph")},m(L,R){A(L,e,R),c(e,l),c(l,t),c(t,n),c(t,s);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(t,null);c(t,i),c(t,o),c(t,p),c(t,d),c(t,y),w&&w.m(t,null),c(e,E),C&&C.m(e,null),m=!0},p(L,R){if(R&2){T=we(L[1].table.properties);let N;for(N=0;N<T.length;N+=1){const H=Kt(L,T,N);_[N]?_[N].p(H,R):(_[N]=Yt(H),_[N].c(),_[N].m(t,i))}for(;N<_.length;N+=1)_[N].d(1);_.length=T.length}L[1].filters.deleted==="true"?w||(w=Zt(),w.c(),w.m(t,null)):w&&(w.d(1),w=null),L[1].records?.results?.length?C?(C.p(L,R),R&2&&D(C,1)):(C=Gt(L),C.c(),D(C,1),C.m(e,null)):C&&(be(),V(C,1,1,()=>{C=null}),ge()),(!m||R&2&&k!==(k=Lt(L[1].view.tableStyle)+" svelte-1bwwtph"))&&f(e,"class",k)},i(L){m||(D(C),m=!0)},o(L){V(C),m=!1},d(L){L&&h(e),Xe(_,L),w&&w.d(),C&&C.d()}}}function Yt(r){let e,l=r[8].name+"",t,n,a,s,i=r[8].attribute_type+"",o,u;return{c(){e=g("th"),t=Y(l),n=F(),a=g("small"),s=Y("("),o=Y(i),u=Y(")"),this.h()},l(p){e=$(p,"TH",{class:!0});var d=O(e);t=Z(d,l),n=P(d),a=$(d,"SMALL",{class:!0});var v=O(a);s=Z(v,"("),o=Z(v,i),u=Z(v,")"),v.forEach(h),d.forEach(h),this.h()},h(){f(a,"class","type svelte-1bwwtph"),f(e,"class","svelte-1bwwtph")},m(p,d){A(p,e,d),c(e,t),c(e,n),c(e,a),c(a,s),c(a,o),c(a,u)},p(p,d){d&2&&l!==(l=p[8].name+"")&&de(t,l),d&2&&i!==(i=p[8].attribute_type+"")&&de(o,i)},d(p){p&&h(e)}}}function Zt(r){let e,l="deleted at";return{c(){e=g("th"),e.textContent=l,this.h()},l(t){e=$(t,"TH",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1jwm27o"&&(e.textContent=l),this.h()},h(){f(e,"class","svelte-1bwwtph")},m(t,n){A(t,e,n)},d(t){t&&h(e)}}}function Gt(r){let e=[],l=new Map,t,n,a=we(r[1].records?.results);const s=i=>i[5].id;for(let i=0;i<a.length;i+=1){let o=Jt(r,a,i),u=s(o);l.set(u,e[i]=ll(u,o))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=Pe()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);t=Pe()},m(i,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(i,o);A(i,t,o),n=!0},p(i,o){o&3&&(a=we(i[1].records?.results),be(),e=Cl(e,o,s,1,i,a,l,t.parentNode,Nl,ll,t,Jt),ge())},i(i){if(!n){for(let o=0;o<a.length;o+=1)D(e[o]);n=!0}},o(i){for(let o=0;o<e.length;o+=1)V(e[o]);n=!1},d(i){i&&h(t);for(let o=0;o<e.length;o+=1)e[o].d(i)}}}function Qt(r){let e,l;return e=new rr({props:{record:r[5]}}),e.$on("close",r[4]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.record=t[5]),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function xt(r){let e,l,t,n;const a=[ar,nr],s=[];function i(o,u){return o[9].type==="json"||o[9].type==="jsonEscaped"?0:1}return e=i(r),l=s[e]=a[e](r),{c(){l.c(),t=Pe()},l(o){l.l(o),t=Pe()},m(o,u){s[e].m(o,u),A(o,t,u),n=!0},p(o,u){let p=e;e=i(o),e===p?s[e].p(o,u):(be(),V(s[p],1,1,()=>{s[p]=null}),ge(),l=s[e],l?l.p(o,u):(l=s[e]=a[e](o),l.c()),D(l,1),l.m(t.parentNode,t))},i(o){n||(D(l),n=!0)},o(o){V(l),n=!1},d(o){o&&h(t),s[e].d(o)}}}function nr(r){let e=r[9].value+"",l;return{c(){l=Y(e)},l(t){l=Z(t,e)},m(t,n){A(t,l,n)},p(t,n){n&2&&e!==(e=t[9].value+"")&&de(l,e)},i:De,o:De,d(t){t&&h(l)}}}function ar(r){let e,l,t,n;const a=[ir,sr],s=[];function i(o,u){return o[1].view.tableStyle==="expanded"?0:1}return e=i(r),l=s[e]=a[e](r),{c(){l.c(),t=Pe()},l(o){l.l(o),t=Pe()},m(o,u){s[e].m(o,u),A(o,t,u),n=!0},p(o,u){let p=e;e=i(o),e===p?s[e].p(o,u):(be(),V(s[p],1,1,()=>{s[p]=null}),ge(),l=s[e],l?l.p(o,u):(l=s[e]=a[e](o),l.c()),D(l,1),l.m(t.parentNode,t))},i(o){n||(D(l),n=!0)},o(o){V(l),n=!1},d(o){o&&h(t),s[e].d(o)}}}function sr(r){let e=JSON.stringify(r[9].value)+"",l;return{c(){l=Y(e)},l(t){l=Z(t,e)},m(t,n){A(t,l,n)},p(t,n){n&2&&e!==(e=JSON.stringify(t[9].value)+"")&&de(l,e)},i:De,o:De,d(t){t&&h(l)}}}function ir(r){let e,l;return e=new Sl({props:{value:r[9].value}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.value=t[9].value),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function el(r){let e,l,t=r[9].value!==void 0&&xt(r);return{c(){e=g("td"),t&&t.c(),this.h()},l(n){e=$(n,"TD",{class:!0});var a=O(e);t&&t.l(a),a.forEach(h),this.h()},h(){f(e,"class","svelte-1bwwtph"),ke(e,"value-null",r[9].type==="null")},m(n,a){A(n,e,a),t&&t.m(e,null),l=!0},p(n,a){n[9].value!==void 0?t?(t.p(n,a),a&2&&D(t,1)):(t=xt(n),t.c(),D(t,1),t.m(e,null)):t&&(be(),V(t,1,1,()=>{t=null}),ge()),(!l||a&2)&&ke(e,"value-null",n[9].type==="null")},i(n){l||(D(t),l=!0)},o(n){V(t),l=!1},d(n){n&&h(e),t&&t.d()}}}function tl(r){let e,l=new Date(r[5]?.deleted_at).toLocaleDateString(void 0,{})+"",t,n,a,s=new Date(r[5]?.deleted_at).toLocaleTimeString(void 0,{})+"",i;return{c(){e=g("td"),t=Y(l),n=F(),a=g("span"),i=Y(s),this.h()},l(o){e=$(o,"TD",{class:!0});var u=O(e);t=Z(u,l),n=P(u),a=$(u,"SPAN",{class:!0});var p=O(a);i=Z(p,s),p.forEach(h),u.forEach(h),this.h()},h(){f(a,"class","svelte-1bwwtph"),f(e,"class","date svelte-1bwwtph")},m(o,u){A(o,e,u),c(e,t),c(e,n),c(e,a),c(a,i)},p(o,u){u&2&&l!==(l=new Date(o[5]?.deleted_at).toLocaleDateString(void 0,{})+"")&&de(t,l),u&2&&s!==(s=new Date(o[5]?.deleted_at).toLocaleTimeString(void 0,{})+"")&&de(i,s)},d(o){o&&h(e)}}}function ll(r,e){let l,t,n,a,s,i,o="More options",u,p,d,v,y,E="Edit record",k,m,T,_,w=e[5].id+"",C,L,R,N,H=new Date(e[5]?.created_at).toLocaleDateString(void 0,{})+"",j,b,S,I=new Date(e[5]?.created_at).toLocaleTimeString(void 0,{})+"",z,M,K,U=new Date(e[5]?.updated_at).toLocaleDateString(void 0,{})+"",X,q,x,ye=new Date(e[5]?.updated_at).toLocaleTimeString(void 0,{})+"",he,re,Ne,fe,$e,Ae;p=new Ce({props:{icon:"navigationMenuVertical",size:"16"}});function rt(){return e[2](e[5])}m=new Ce({props:{icon:"pencil",size:"16"}});function je(){return e[3](e[5])}let ce=e[0].id===e[5].id&&Qt(e),Se=we(e[1].table.properties),te=[];for(let ee=0;ee<Se.length;ee+=1)te[ee]=el(Wt(e,Se,ee));const nt=ee=>V(te[ee],1,1,()=>{te[ee]=null});let pe=e[1].filters.deleted==="true"&&tl(e);return{key:r,first:null,c(){l=g("tr"),t=g("td"),n=g("div"),a=g("div"),s=g("button"),i=g("span"),i.textContent=o,u=F(),se(p.$$.fragment),d=F(),v=g("button"),y=g("span"),y.textContent=E,k=F(),se(m.$$.fragment),T=F(),ce&&ce.c(),_=F(),C=Y(w),L=F();for(let ee=0;ee<te.length;ee+=1)te[ee].c();R=F(),N=g("td"),j=Y(H),b=F(),S=g("span"),z=Y(I),M=F(),K=g("td"),X=Y(U),q=F(),x=g("span"),he=Y(ye),re=F(),pe&&pe.c(),Ne=F(),this.h()},l(ee){l=$(ee,"TR",{class:!0});var J=O(l);t=$(J,"TD",{class:!0});var G=O(t);n=$(G,"DIV",{class:!0});var Oe=O(n);a=$(Oe,"DIV",{class:!0});var Ie=O(a);s=$(Ie,"BUTTON",{class:!0});var Je=O(s);i=$(Je,"SPAN",{class:!0,"data-svelte-h":!0}),ae(i)!=="svelte-1agpmtc"&&(i.textContent=o),u=P(Je),ie(p.$$.fragment,Je),Je.forEach(h),d=P(Ie),v=$(Ie,"BUTTON",{class:!0,title:!0});var Re=O(v);y=$(Re,"SPAN",{class:!0,"data-svelte-h":!0}),ae(y)!=="svelte-1qpnaf4"&&(y.textContent=E),k=P(Re),ie(m.$$.fragment,Re),Re.forEach(h),Ie.forEach(h),T=P(Oe),ce&&ce.l(Oe),_=P(Oe),C=Z(Oe,w),Oe.forEach(h),G.forEach(h),L=P(J);for(let _e=0;_e<te.length;_e+=1)te[_e].l(J);R=P(J),N=$(J,"TD",{class:!0});var Be=O(N);j=Z(Be,H),b=P(Be),S=$(Be,"SPAN",{class:!0});var Qe=O(S);z=Z(Qe,I),Qe.forEach(h),Be.forEach(h),M=P(J),K=$(J,"TD",{class:!0});var ze=O(K);X=Z(ze,U),q=P(ze),x=$(ze,"SPAN",{class:!0});var xe=O(x);he=Z(xe,ye),xe.forEach(h),ze.forEach(h),re=P(J),pe&&pe.l(J),Ne=P(J),J.forEach(h),this.h()},h(){f(i,"class","label svelte-1bwwtph"),f(s,"class","button compact more svelte-1bwwtph"),ke(s,"active",e[0].id===e[5].id),f(y,"class","label svelte-1bwwtph"),f(v,"class","button compact edit svelte-1bwwtph"),f(v,"title","Edit record"),f(a,"class","combo svelte-1bwwtph"),f(n,"class","id svelte-1bwwtph"),f(t,"class","svelte-1bwwtph"),f(S,"class","svelte-1bwwtph"),f(N,"class","date svelte-1bwwtph"),f(x,"class","svelte-1bwwtph"),f(K,"class","date svelte-1bwwtph"),f(l,"class","svelte-1bwwtph"),ke(l,"highlighted",e[1].highlighted.record===e[5].id),ke(l,"hasContextMenu",e[0].id===e[5].id),this.first=l},m(ee,J){A(ee,l,J),c(l,t),c(t,n),c(n,a),c(a,s),c(s,i),c(s,u),oe(p,s,null),c(a,d),c(a,v),c(v,y),c(v,k),oe(m,v,null),c(n,T),ce&&ce.m(n,null),c(n,_),c(n,C),c(l,L);for(let G=0;G<te.length;G+=1)te[G]&&te[G].m(l,null);c(l,R),c(l,N),c(N,j),c(N,b),c(N,S),c(S,z),c(l,M),c(l,K),c(K,X),c(K,q),c(K,x),c(x,he),c(l,re),pe&&pe.m(l,null),c(l,Ne),fe=!0,$e||(Ae=[Q(s,"click",rt),Q(v,"click",je)],$e=!0)},p(ee,J){if(e=ee,(!fe||J&3)&&ke(s,"active",e[0].id===e[5].id),e[0].id===e[5].id?ce?(ce.p(e,J),J&3&&D(ce,1)):(ce=Qt(e),ce.c(),D(ce,1),ce.m(n,_)):ce&&(be(),V(ce,1,1,()=>{ce=null}),ge()),(!fe||J&2)&&w!==(w=e[5].id+"")&&de(C,w),J&2){Se=we(e[1].table.properties);let G;for(G=0;G<Se.length;G+=1){const Oe=Wt(e,Se,G);te[G]?(te[G].p(Oe,J),D(te[G],1)):(te[G]=el(Oe),te[G].c(),D(te[G],1),te[G].m(l,R))}for(be(),G=Se.length;G<te.length;G+=1)nt(G);ge()}(!fe||J&2)&&H!==(H=new Date(e[5]?.created_at).toLocaleDateString(void 0,{})+"")&&de(j,H),(!fe||J&2)&&I!==(I=new Date(e[5]?.created_at).toLocaleTimeString(void 0,{})+"")&&de(z,I),(!fe||J&2)&&U!==(U=new Date(e[5]?.updated_at).toLocaleDateString(void 0,{})+"")&&de(X,U),(!fe||J&2)&&ye!==(ye=new Date(e[5]?.updated_at).toLocaleTimeString(void 0,{})+"")&&de(he,ye),e[1].filters.deleted==="true"?pe?pe.p(e,J):(pe=tl(e),pe.c(),pe.m(l,Ne)):pe&&(pe.d(1),pe=null),(!fe||J&2)&&ke(l,"highlighted",e[1].highlighted.record===e[5].id),(!fe||J&3)&&ke(l,"hasContextMenu",e[0].id===e[5].id)},i(ee){if(!fe){D(p.$$.fragment,ee),D(m.$$.fragment,ee),D(ce);for(let J=0;J<Se.length;J+=1)D(te[J]);fe=!0}},o(ee){V(p.$$.fragment,ee),V(m.$$.fragment,ee),V(ce),te=te.filter(Boolean);for(let J=0;J<te.length;J+=1)V(te[J]);fe=!1},d(ee){ee&&h(l),ue(p),ue(m),ce&&ce.d(),Xe(te,ee),pe&&pe.d(),$e=!1,Ge(Ae)}}}function or(r){let e,l,t=r[1].table?.properties&&Xt(r);return{c(){t&&t.c(),e=Pe()},l(n){t&&t.l(n),e=Pe()},m(n,a){t&&t.m(n,a),A(n,e,a),l=!0},p(n,[a]){n[1].table?.properties?t?(t.p(n,a),a&2&&D(t,1)):(t=Xt(n),t.c(),D(t,1),t.m(e.parentNode,e)):t&&(be(),V(t,1,1,()=>{t=null}),ge())},i(n){l||(D(t),l=!0)},o(n){V(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function ur(r,e,l){let t;Fe(r,W,o=>l(1,t=o));let n={id:null};return[n,t,o=>l(0,n.id=o.id,n),o=>{Le(W,t.record=o,t)},()=>l(0,n.id=null,n)]}class fr extends qe{constructor(e){super(),He(this,e,ur,or,Me,{})}}var it=new Map;function cr(r){var e=it.get(r);e&&e.destroy()}function dr(r){var e=it.get(r);e&&e.update()}var st=null;typeof window>"u"?((st=function(r){return r}).destroy=function(r){return r},st.update=function(r){return r}):((st=function(r,e){return r&&Array.prototype.forEach.call(r.length?r:[r],function(l){return function(t){if(t&&t.nodeName&&t.nodeName==="TEXTAREA"&&!it.has(t)){var n,a=null,s=window.getComputedStyle(t),i=(n=t.value,function(){u({testForHeightReduction:n===""||!t.value.startsWith(n),restoreTextAlign:null}),n=t.value}),o=function(d){t.removeEventListener("autosize:destroy",o),t.removeEventListener("autosize:update",p),t.removeEventListener("input",i),window.removeEventListener("resize",p),Object.keys(d).forEach(function(v){return t.style[v]=d[v]}),it.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,textAlign:t.style.textAlign,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",o),t.addEventListener("autosize:update",p),t.addEventListener("input",i),window.addEventListener("resize",p),t.style.overflowX="hidden",t.style.wordWrap="break-word",it.set(t,{destroy:o,update:p}),p()}function u(d){var v,y,E=d.restoreTextAlign,k=E===void 0?null:E,m=d.testForHeightReduction,T=m===void 0||m,_=s.overflowY;if(t.scrollHeight!==0&&(s.resize==="vertical"?t.style.resize="none":s.resize==="both"&&(t.style.resize="horizontal"),T&&(v=function(C){for(var L=[];C&&C.parentNode&&C.parentNode instanceof Element;)C.parentNode.scrollTop&&L.push([C.parentNode,C.parentNode.scrollTop]),C=C.parentNode;return function(){return L.forEach(function(R){var N=R[0],H=R[1];N.style.scrollBehavior="auto",N.scrollTop=H,N.style.scrollBehavior=null})}}(t),t.style.height=""),y=s.boxSizing==="content-box"?t.scrollHeight-(parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)):t.scrollHeight+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),s.maxHeight!=="none"&&y>parseFloat(s.maxHeight)?(s.overflowY==="hidden"&&(t.style.overflow="scroll"),y=parseFloat(s.maxHeight)):s.overflowY!=="hidden"&&(t.style.overflow="hidden"),t.style.height=y+"px",k&&(t.style.textAlign=k),v&&v(),a!==y&&(t.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),a=y),_!==s.overflow&&!k)){var w=s.textAlign;s.overflow==="hidden"&&(t.style.textAlign=w==="start"?"end":"start"),u({restoreTextAlign:w,testForHeightReduction:!0})}}function p(){u({testForHeightReduction:!0,restoreTextAlign:null})}}(l)}),r}).destroy=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],cr),r},st.update=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],dr),r});var $t=st;const Nt=r=>($t(r),{destroy(){$t.destroy(r)}});Nt.update=$t.update;Nt.destroy=$t.destroy;function rl(r){let e,l,t=!1,n,a,s,i=r[1][0].label+"",o,u,p,d,v,y,E,k,m=!1,T,_,w,C=r[1][1].label+"",L,R,N,H,j;return N=hl(r[5][0]),{c(){e=g("input"),a=F(),s=g("label"),o=Y(i),p=F(),d=g("label"),y=F(),E=g("input"),_=F(),w=g("label"),L=Y(C),this.h()},l(b){e=$(b,"INPUT",{type:!0,name:!0,id:!0,class:!0}),a=P(b),s=$(b,"LABEL",{for:!0,class:!0});var S=O(s);o=Z(S,i),S.forEach(h),p=P(b),d=$(b,"LABEL",{for:!0,class:!0}),O(d).forEach(h),y=P(b),E=$(b,"INPUT",{type:!0,name:!0,id:!0,class:!0}),_=P(b),w=$(b,"LABEL",{for:!0,class:!0});var I=O(w);L=Z(I,C),I.forEach(h),this.h()},h(){f(e,"type","radio"),f(e,"name",r[0]),e.__value=l=r[1][0].value,ne(e,e.__value),f(e,"id",n="toggle-"+r[0]+"-"+r[1][0].value),f(e,"class","svelte-1dpe1av"),f(s,"for",u="toggle-"+r[0]+"-"+r[1][0].value),f(s,"class","svelte-1dpe1av"),f(d,"for",v="toggle-"+r[0]+"-"+(r[2]===r[1][0].value?r[1][1].value:r[1][0].value)),f(d,"class","switcher svelte-1dpe1av"),f(E,"type","radio"),f(E,"name",r[0]),E.__value=k=r[1][1].value,ne(E,E.__value),f(E,"id",T="toggle-"+r[0]+"-"+r[1][1].value),f(E,"class","svelte-1dpe1av"),f(w,"for",R="toggle-"+r[0]+"-"+r[1][1].value),f(w,"class","svelte-1dpe1av"),N.p(e,E)},m(b,S){A(b,e,S),e.checked=e.__value===r[2],A(b,a,S),A(b,s,S),c(s,o),A(b,p,S),A(b,d,S),A(b,y,S),A(b,E,S),E.checked=E.__value===r[2],A(b,_,S),A(b,w,S),c(w,L),H||(j=[Q(e,"change",r[4]),Q(e,"keydown",r[6]),Q(E,"change",r[7]),Q(E,"keydown",r[8])],H=!0)},p(b,S){S&1&&f(e,"name",b[0]),S&2&&l!==(l=b[1][0].value)&&(e.__value=l,ne(e,e.__value),t=!0),S&3&&n!==(n="toggle-"+b[0]+"-"+b[1][0].value)&&f(e,"id",n),(t||S&4)&&(e.checked=e.__value===b[2]),S&2&&i!==(i=b[1][0].label+"")&&de(o,i),S&3&&u!==(u="toggle-"+b[0]+"-"+b[1][0].value)&&f(s,"for",u),S&7&&v!==(v="toggle-"+b[0]+"-"+(b[2]===b[1][0].value?b[1][1].value:b[1][0].value))&&f(d,"for",v),S&1&&f(E,"name",b[0]),S&2&&k!==(k=b[1][1].value)&&(E.__value=k,ne(E,E.__value),m=!0),S&3&&T!==(T="toggle-"+b[0]+"-"+b[1][1].value)&&f(E,"id",T),(m||S&4)&&(E.checked=E.__value===b[2]),S&2&&C!==(C=b[1][1].label+"")&&de(L,C),S&3&&R!==(R="toggle-"+b[0]+"-"+b[1][1].value)&&f(w,"for",R)},d(b){b&&(h(e),h(a),h(s),h(p),h(d),h(y),h(E),h(_),h(w)),N.r(),H=!1,Ge(j)}}}function _r(r){let e,l=r[1].length===2&&rl(r);return{c(){e=g("div"),l&&l.c(),this.h()},l(t){e=$(t,"DIV",{class:!0});var n=O(e);l&&l.l(n),n.forEach(h),this.h()},h(){f(e,"class","toggle svelte-1dpe1av")},m(t,n){A(t,e,n),l&&l.m(e,null)},p(t,[n]){t[1].length===2?l?l.p(t,n):(l=rl(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:De,o:De,d(t){t&&h(e),l&&l.d()}}}function pr(r,e,l){let{name:t}=e,{options:n=[]}=e,{checked:a=n[0].value}=e,s=(" "+a).slice(1);const i=[[]];function o(){s=this.__value,l(2,s)}const u=v=>{v.code==="Space"&&(v.preventDefault(),l(2,s=s===n[0].value?n[1].value:n[0].value))};function p(){s=this.__value,l(2,s)}const d=v=>{v.code==="Space"&&(v.preventDefault(),l(2,s=s===n[0].value?n[1].value:n[0].value))};return r.$$set=v=>{"name"in v&&l(0,t=v.name),"options"in v&&l(1,n=v.options),"checked"in v&&l(3,a=v.checked)},[t,n,s,a,o,i,u,p,d]}class hr extends qe{constructor(e){super(),He(this,e,pr,_r,Me,{name:0,options:1,checked:3})}}function nl(r,e,l){const t=r.slice();return t[13]=e[l],t}function al(r,e,l){const t=r.slice();t[16]=e[l];const n=t[1].properties?ml(t[1].properties[t[16].name],t[16].attribute_type):{type:t[16].attribute_type,value:""};return t[17]=n,t}function sl(r){let e,l;return{c(){e=g("input"),this.h()},l(t){e=$(t,"INPUT",{type:!0,name:!0}),this.h()},h(){f(e,"type","hidden"),f(e,"name","recordId"),e.value=l=r[1].id},m(t,n){A(t,e,n)},p(t,n){n&2&&l!==(l=t[1].id)&&(e.value=l)},d(t){t&&h(e)}}}function vr(r){let e=r[16].attribute_type+"",l,t,n,a,s;return{c(){l=Y(e),t=F(),n=g("input"),this.h()},l(i){l=Z(i,e),t=P(i),n=$(i,"INPUT",{type:!0,name:!0}),this.h()},h(){f(n,"type","hidden"),f(n,"name",a=r[16].name+"[type]"),n.value=s=r[16].attribute_type},m(i,o){A(i,l,o),A(i,t,o),A(i,n,o)},p(i,o){o&1&&e!==(e=i[16].attribute_type+"")&&de(l,e),o&1&&a!==(a=i[16].name+"[type]")&&f(n,"name",a),o&1&&s!==(s=i[16].attribute_type)&&(n.value=s)},i:De,o:De,d(i){i&&(h(l),h(t),h(n))}}}function mr(r){let e,l;return e=new hr({props:{name:r[16].name+"[type]",options:[{value:"string",label:"string"},{value:"json",label:"json"}],checked:r[17].type==="json"?"json":"string"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.name=t[16].name+"[type]"),n&3&&(a.checked=t[17].type==="json"?"json":"string"),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function il(r){let e;return{c(){e=Y("(non editable)")},l(l){e=Z(l,"(non editable)")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function ol(r){let e=r[5][r[16].name].message+"",l;return{c(){l=Y(e)},l(t){l=Z(t,e)},m(t,n){A(t,l,n)},p(t,n){n&33&&e!==(e=t[5][t[16].name].message+"")&&de(l,e)},d(t){t&&h(l)}}}function ul(r){let e,l,t,n=r[16].name+"",a,s,i,o,u,p,d,v,y,E,k,m,T,_,w,C,L,R,N,H;const j=[mr,vr],b=[];function S(M,K){return M[16].attribute_type==="string"?0:1}u=S(r),p=b[u]=j[u](r);let I=r[16].attribute_type==="upload"&&il(),z=r[5][r[16].name]&&ol(r);return{c(){e=g("fieldset"),l=g("dir"),t=g("label"),a=Y(n),s=g("br"),i=F(),o=g("div"),p.c(),d=F(),I&&I.c(),y=F(),E=g("div"),k=g("textarea"),C=F(),L=g("div"),z&&z.c(),this.h()},l(M){e=$(M,"FIELDSET",{class:!0});var K=O(e);l=$(K,"DIR",{});var U=O(l);t=$(U,"LABEL",{for:!0,class:!0});var X=O(t);a=Z(X,n),s=$(X,"BR",{}),i=P(X),o=$(X,"DIV",{class:!0});var q=O(o);p.l(q),d=P(q),I&&I.l(q),q.forEach(h),X.forEach(h),U.forEach(h),y=P(K),E=$(K,"DIV",{});var x=O(E);k=$(x,"TEXTAREA",{rows:!0,name:!0,id:!0,class:!0}),O(k).forEach(h),C=P(x),L=$(x,"DIV",{role:!0,class:!0});var ye=O(L);z&&z.l(ye),ye.forEach(h),x.forEach(h),K.forEach(h),this.h()},h(){f(o,"class","type svelte-yslxja"),f(t,"for",v="edit_"+r[16].name),f(t,"class","svelte-yslxja"),f(k,"rows","1"),f(k,"name",m=r[16].name+"[value]"),f(k,"id",T="edit_"+r[16].name),k.disabled=_=r[16].attribute_type==="upload",k.value=w=r[17].type==="json"||r[17].type==="jsonEscaped"&&!cl?JSON.stringify(r[17].value,void 0,2):r[17].value,f(k,"class","svelte-yslxja"),f(L,"role","alert"),f(L,"class","svelte-yslxja"),f(e,"class","svelte-yslxja")},m(M,K){A(M,e,K),c(e,l),c(l,t),c(t,a),c(t,s),c(t,i),c(t,o),b[u].m(o,null),c(o,d),I&&I.m(o,null),c(e,y),c(e,E),c(E,k),c(E,C),c(E,L),z&&z.m(L,null),R=!0,N||(H=pl(Nt.call(null,k)),N=!0)},p(M,K){(!R||K&1)&&n!==(n=M[16].name+"")&&de(a,n);let U=u;u=S(M),u===U?b[u].p(M,K):(be(),V(b[U],1,1,()=>{b[U]=null}),ge(),p=b[u],p?p.p(M,K):(p=b[u]=j[u](M),p.c()),D(p,1),p.m(o,d)),M[16].attribute_type==="upload"?I||(I=il(),I.c(),I.m(o,null)):I&&(I.d(1),I=null),(!R||K&1&&v!==(v="edit_"+M[16].name))&&f(t,"for",v),(!R||K&1&&m!==(m=M[16].name+"[value]"))&&f(k,"name",m),(!R||K&1&&T!==(T="edit_"+M[16].name))&&f(k,"id",T),(!R||K&1&&_!==(_=M[16].attribute_type==="upload"))&&(k.disabled=_),(!R||K&3&&w!==(w=M[17].type==="json"||M[17].type==="jsonEscaped"&&!cl?JSON.stringify(M[17].value,void 0,2):M[17].value))&&(k.value=w),M[5][M[16].name]?z?z.p(M,K):(z=ol(M),z.c(),z.m(L,null)):z&&(z.d(1),z=null)},i(M){R||(D(p),R=!0)},o(M){V(p),R=!1},d(M){M&&h(e),b[u].d(),I&&I.d(),z&&z.d(),N=!1,H()}}}function fl(r){let e,l=JSON.stringify(r[4])+"",t,n;return{c(){e=g("li"),t=Y(l),n=F(),this.h()},l(a){e=$(a,"LI",{class:!0});var s=O(e);t=Z(s,l),n=P(s),s.forEach(h),this.h()},h(){f(e,"class","svelte-yslxja")},m(a,s){A(a,e,s),c(e,t),c(e,n)},p(a,s){s&16&&l!==(l=JSON.stringify(a[4])+"")&&de(t,l)},d(a){a&&h(e)}}}function br(r){let e;return{c(){e=Y("Create record")},l(l){e=Z(l,"Create record")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function gr(r){let e;return{c(){e=Y("Edit record")},l(l){e=Z(l,"Edit record")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function $r(r){let e,l,t,n,a,s,i,o,u,p,d,v,y,E="Cancel",k,m,T,_,w,C,L,R,N=r[1].id&&sl(r),H=we(r[0]),j=[];for(let U=0;U<H.length;U+=1)j[U]=ul(al(r,H,U));const b=U=>V(j[U],1,1,()=>{j[U]=null});let S=we(r[4]),I=[];for(let U=0;U<S.length;U+=1)I[U]=fl(nl(r,S,U));function z(U,X){return U[1].id?gr:br}let M=z(r),K=M(r);return _=new Ce({props:{icon:"arrowRight"}}),{c(){e=g("dialog"),l=g("div"),t=g("form"),n=g("input"),s=F(),N&&N.c(),i=F();for(let U=0;U<j.length;U+=1)j[U].c();o=F(),u=g("div"),p=g("ul");for(let U=0;U<I.length;U+=1)I[U].c();d=F(),v=g("fieldset"),y=g("button"),y.textContent=E,k=F(),m=g("button"),K.c(),T=F(),se(_.$$.fragment),this.h()},l(U){e=$(U,"DIALOG",{class:!0});var X=O(e);l=$(X,"DIV",{class:!0});var q=O(l);t=$(q,"FORM",{class:!0});var x=O(t);n=$(x,"INPUT",{type:!0,name:!0}),s=P(x),N&&N.l(x),i=P(x);for(let fe=0;fe<j.length;fe+=1)j[fe].l(x);o=P(x),u=$(x,"DIV",{class:!0});var ye=O(u);p=$(ye,"UL",{class:!0,"aria-live":!0});var he=O(p);for(let fe=0;fe<I.length;fe+=1)I[fe].l(he);he.forEach(h),d=P(ye),v=$(ye,"FIELDSET",{class:!0});var re=O(v);y=$(re,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ae(y)!=="svelte-1oq6ax6"&&(y.textContent=E),k=P(re),m=$(re,"BUTTON",{type:!0,class:!0});var Ne=O(m);K.l(Ne),T=P(Ne),ie(_.$$.fragment,Ne),Ne.forEach(h),re.forEach(h),ye.forEach(h),x.forEach(h),q.forEach(h),X.forEach(h),this.h()},h(){f(n,"type","hidden"),f(n,"name","tableName"),n.value=a=r[6].table.name,f(p,"class","error svelte-yslxja"),f(p,"aria-live","assertive"),f(y,"type","button"),f(y,"class","button"),f(m,"type","submit"),f(m,"class","button"),f(v,"class","actions svelte-yslxja"),f(u,"class","footer svelte-yslxja"),f(t,"class","svelte-yslxja"),f(l,"class","content content-context svelte-yslxja"),f(e,"class","svelte-yslxja")},m(U,X){A(U,e,X),c(e,l),c(l,t),c(t,n),c(t,s),N&&N.m(t,null),c(t,i);for(let q=0;q<j.length;q+=1)j[q]&&j[q].m(t,null);c(t,o),c(t,u),c(u,p);for(let q=0;q<I.length;q+=1)I[q]&&I[q].m(p,null);c(u,d),c(u,v),c(v,y),c(v,k),c(v,m),K.m(m,null),c(m,T),oe(_,m,null),r[10](t),r[11](e),C=!0,L||(R=[Q(y,"click",r[9]),Q(t,"submit",ut(r[8]))],L=!0)},p(U,[X]){if((!C||X&64&&a!==(a=U[6].table.name))&&(n.value=a),U[1].id?N?N.p(U,X):(N=sl(U),N.c(),N.m(t,i)):N&&(N.d(1),N=null),X&35){H=we(U[0]);let q;for(q=0;q<H.length;q+=1){const x=al(U,H,q);j[q]?(j[q].p(x,X),D(j[q],1)):(j[q]=ul(x),j[q].c(),D(j[q],1),j[q].m(t,o))}for(be(),q=H.length;q<j.length;q+=1)b(q);ge()}if(X&16){S=we(U[4]);let q;for(q=0;q<S.length;q+=1){const x=nl(U,S,q);I[q]?I[q].p(x,X):(I[q]=fl(x),I[q].c(),I[q].m(p,null))}for(;q<I.length;q+=1)I[q].d(1);I.length=S.length}M!==(M=z(U))&&(K.d(1),K=M(U),K&&(K.c(),K.m(m,T)))},i(U){if(!C){for(let X=0;X<H.length;X+=1)D(j[X]);D(_.$$.fragment,U),U&&ot(()=>{C&&(w||(w=Ft(e,r[7],{},!0)),w.run(1))}),C=!0}},o(U){j=j.filter(Boolean);for(let X=0;X<j.length;X+=1)V(j[X]);V(_.$$.fragment,U),U&&(w||(w=Ft(e,r[7],{},!1)),w.run(0)),C=!1},d(U){U&&h(e),N&&N.d(),Xe(j,U),Xe(I,U),K.d(),ue(_),r[10](null),r[11](null),U&&w&&w.end(),L=!1,Ge(R)}}}let cl=!1;function yr(r,e,l){let t,n;Fe(r,W,m=>l(6,t=m)),Fe(r,yt,m=>l(12,n=m));let{properties:a}=e,{editing:s}=e,i,o,u=[],p={};const d=function(m,{delay:T=0,duration:_=150}){return{delay:T,duration:_,css:w=>{const C=Ol(w);return`opacity: ${C}; transform: scale(${C});`}}};gl(()=>{setTimeout(()=>{i.showModal()},10)}),document.addEventListener("keydown",m=>{m.key==="Escape"&&(m.preventDefault(),Le(W,t.record=null,t))},{once:!0});const v=async m=>{m.preventDefault();const T=new FormData(o);l(5,p={});for(const _ of T.entries())if(_[0].endsWith("[type]")&&_[1]==="json"){const w=_[0].replace("[type]","");Tt(T.get(w+"[value]"))||l(5,p[w]={property:w,message:"Not a valid JSON"},p)}if(Object.keys(p).length)await $l(),document.querySelector('[role="alert"]:not(:empty)').scrollIntoView({behavior:"smooth",block:"center"});else if(t.record.id){const _=await Te.edit({table:t.table.name,id:t.record.id,properties:T});_.errors?l(4,u=_.errors):(Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),W.highlight("record",_.record_update.id),W.notification.create("success",`Record ${_.record_update.id} updated`),Le(W,t.record=null,t))}else{const _=await Te.create({table:t.table.name,properties:T});_.errors?l(4,u=_.errors):(W.clearFilters(),Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),W.highlight("record",_.record_create.id),W.notification.create("success",`Record ${_.record_create.id} created`),Le(W,t.record=null,t))}},y=()=>Le(W,t.record=null,t);function E(m){Ze[m?"unshift":"push"](()=>{o=m,l(3,o)})}function k(m){Ze[m?"unshift":"push"](()=>{i=m,l(2,i)})}return r.$$set=m=>{"properties"in m&&l(0,a=m.properties),"editing"in m&&l(1,s=m.editing)},[a,s,i,o,u,p,t,d,v,y,E,k]}class kr extends qe{constructor(e){super(),He(this,e,yr,$r,Me,{properties:0,editing:1})}}const{document:Et}=Tl;function wr(r){let e;return{c(){e=Y("Work in progress :)")},l(l){e=Z(l,"Work in progress :)")},m(l,t){A(l,e,t)},i:De,o:De,d(l){l&&h(e)}}}function Er(r){let e,l;return e=new fr({}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function dl(r){let e,l,t,n,a,s,i;const o=[Cr,Tr],u=[];function p(d,v){return d[0].view.tableStyle==="collapsed"?0:1}return l=p(r),t=u[l]=o[l](r),{c(){e=g("button"),t.c(),this.h()},l(d){e=$(d,"BUTTON",{class:!0,title:!0});var v=O(e);t.l(v),v.forEach(h),this.h()},h(){f(e,"class","button"),f(e,"title",n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values")},m(d,v){A(d,e,v),u[l].m(e,null),a=!0,s||(i=Q(e,"click",ut(function(){wl(r[0].view.tableStyle==="collapsed"?W.setView({tableStyle:"expanded"}):W.setView({tableStyle:"collapsed"}))&&(r[0].view.tableStyle==="collapsed"?W.setView({tableStyle:"expanded"}):W.setView({tableStyle:"collapsed"})).apply(this,arguments)})),s=!0)},p(d,v){r=d;let y=l;l=p(r),l!==y&&(be(),V(u[y],1,1,()=>{u[y]=null}),ge(),t=u[l],t||(t=u[l]=o[l](r),t.c()),D(t,1),t.m(e,null)),(!a||v&1&&n!==(n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values"))&&f(e,"title",n)},i(d){a||(D(t),a=!0)},o(d){V(t),a=!1},d(d){d&&h(e),u[l].d(),s=!1,i()}}}function Tr(r){let e,l="Collapse values",t,n,a;return n=new Ce({props:{icon:"collapse"}}),{c(){e=g("span"),e.textContent=l,t=F(),se(n.$$.fragment),this.h()},l(s){e=$(s,"SPAN",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-jserey"&&(e.textContent=l),t=P(s),ie(n.$$.fragment,s),this.h()},h(){f(e,"class","label")},m(s,i){A(s,e,i),A(s,t,i),oe(n,s,i),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){V(n.$$.fragment,s),a=!1},d(s){s&&(h(e),h(t)),ue(n,s)}}}function Cr(r){let e,l="Expand values",t,n,a;return n=new Ce({props:{icon:"expand"}}),{c(){e=g("span"),e.textContent=l,t=F(),se(n.$$.fragment),this.h()},l(s){e=$(s,"SPAN",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1tvmrgx"&&(e.textContent=l),t=P(s),ie(n.$$.fragment,s),this.h()},h(){f(e,"class","label")},m(s,i){A(s,e,i),A(s,t,i),oe(n,s,i),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){V(n.$$.fragment,s),a=!1},d(s){s&&(h(e),h(t)),ue(n,s)}}}function _l(r){let e,l;return e=new kr({props:{properties:r[0].table.properties,editing:r[0].record}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.properties=t[0].table.properties),n&1&&(a.editing=t[0].record),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Nr(r){let e,l,t,n,a,s,i,o,u,p,d="Refresh current view",v,y,E,k,m,T,_,w,C,L="Page:",R,N,H,j,b=(r[0].records?.total_pages||1)+"",S,I,z,M,K,U,X,q="Create new record",x,ye,he,re,Ne,fe,$e,Ae,rt,je,ce,Se=r[0].filters.deleted==="false"?"ing":"",te,nt,pe,ee,J,G,Oe,Ie,Je,Re=r[0].filters.deleted==="true"?"ing":"",Be,Qe,ze,xe,_e,ft,ct,et,Ee,kt,wt,St;Et.title=e=(r[0].table?.name||"Loading…")+(r[0].online?.MPKIT_URL?": "+r[0].online.MPKIT_URL.replace("https://",""):""),a=new Bl({}),i=new Jl({}),y=new Ce({props:{icon:"refresh"}});const Ot=[Er,wr],Ye=[];function It(B,le){return B[0].view.database!=="tiles"?0:1}k=It(r),m=Ye[k]=Ot[k](r);function bl(B){r[5](B)}let Dt={name:"page",min:1,max:r[0].records?.total_pages,step:1,decreaseLabel:"Previous page",increaseLabel:"Next page",style:"navigation"};r[0].filters.page!==void 0&&(Dt.value=r[0].filters.page),N=new Il({props:Dt}),Ze.push(()=>El(N,"value",bl)),N.$on("input",r[6]),K=new Ce({props:{icon:"plus"}});let ve=r[0].view.database!=="tiles"&&dl(r);Ae=new Ce({props:{icon:"leaf"}}),G=new Ce({props:{icon:"recycle"}});let me=r[0].record!==null&&_l(r);return kt=hl(r[9][0]),{c(){l=F(),t=g("section"),n=g("nav"),se(a.$$.fragment),s=F(),se(i.$$.fragment),o=F(),u=g("button"),p=g("span"),p.textContent=d,v=F(),se(y.$$.fragment),E=F(),m.c(),T=F(),_=g("nav"),w=g("div"),C=g("label"),C.textContent=L,R=F(),se(N.$$.fragment),j=Y(`\r
      of `),S=Y(b),I=F(),z=g("div"),M=g("button"),se(K.$$.fragment),U=F(),X=g("span"),X.textContent=q,x=F(),ve&&ve.c(),ye=F(),he=g("div"),re=g("input"),fe=F(),$e=g("label"),se(Ae.$$.fragment),rt=F(),je=g("span"),ce=Y("Show"),te=Y(Se),nt=Y(" current database state"),ee=F(),J=g("label"),se(G.$$.fragment),Oe=F(),Ie=g("span"),Je=Y("Show"),Be=Y(Re),Qe=Y(" deleted records"),xe=F(),_e=g("input"),ct=F(),me&&me.c(),et=Pe(),this.h()},l(B){yl("svelte-1ke6alb",Et.head).forEach(h),l=P(B),t=$(B,"SECTION",{class:!0});var Ue=O(t);n=$(Ue,"NAV",{class:!0});var Ve=O(n);ie(a.$$.fragment,Ve),s=P(Ve),ie(i.$$.fragment,Ve),o=P(Ve),u=$(Ve,"BUTTON",{class:!0,title:!0});var dt=O(u);p=$(dt,"SPAN",{class:!0,"data-svelte-h":!0}),ae(p)!=="svelte-iqo23s"&&(p.textContent=d),v=P(dt),ie(y.$$.fragment,dt),dt.forEach(h),Ve.forEach(h),E=P(Ue),m.l(Ue),T=P(Ue),_=$(Ue,"NAV",{class:!0});var _t=O(_);w=$(_t,"DIV",{});var tt=O(w);C=$(tt,"LABEL",{for:!0,"data-svelte-h":!0}),ae(C)!=="svelte-1r8oyu6"&&(C.textContent=L),R=P(tt),ie(N.$$.fragment,tt),j=Z(tt,`\r
      of `),S=Z(tt,b),tt.forEach(h),I=P(_t),z=$(_t,"DIV",{id:!0,class:!0});var lt=O(z);M=$(lt,"BUTTON",{class:!0,title:!0});var pt=O(M);ie(K.$$.fragment,pt),U=P(pt),X=$(pt,"SPAN",{class:!0,"data-svelte-h":!0}),ae(X)!=="svelte-19x6y3e"&&(X.textContent=q),pt.forEach(h),x=P(lt),ve&&ve.l(lt),ye=P(lt),he=$(lt,"DIV",{class:!0});var We=O(he);re=$(We,"INPUT",{type:!0,name:!0,id:!0,class:!0}),fe=P(We),$e=$(We,"LABEL",{for:!0,class:!0,title:!0});var ht=O($e);ie(Ae.$$.fragment,ht),rt=P(ht),je=$(ht,"SPAN",{class:!0});var vt=O(je);ce=Z(vt,"Show"),te=Z(vt,Se),nt=Z(vt," current database state"),vt.forEach(h),ht.forEach(h),ee=P(We),J=$(We,"LABEL",{for:!0,class:!0,title:!0});var mt=O(J);ie(G.$$.fragment,mt),Oe=P(mt),Ie=$(mt,"SPAN",{class:!0});var bt=O(Ie);Je=Z(bt,"Show"),Be=Z(bt,Re),Qe=Z(bt," deleted records"),bt.forEach(h),mt.forEach(h),xe=P(We),_e=$(We,"INPUT",{type:!0,name:!0,id:!0,class:!0}),We.forEach(h),lt.forEach(h),_t.forEach(h),Ue.forEach(h),ct=P(B),me&&me.l(B),et=Pe(),this.h()},h(){f(p,"class","label"),f(u,"class","button svelte-afbo94"),f(u,"title","Refresh current view (R)"),ke(u,"refreshing",r[2]),f(n,"class","svelte-afbo94"),f(C,"for","page"),f(X,"class","label"),f(M,"class","button"),f(M,"title","Create new record"),f(re,"type","radio"),f(re,"name","deleted"),f(re,"id","deletedTrue"),re.__value="false",ne(re,re.__value),re.disabled=Ne=r[0].filters.deleted==="false",f(re,"class","svelte-afbo94"),f(je,"class","label"),f($e,"for","deletedTrue"),f($e,"class","button"),f($e,"title",pe="Show"+(r[0].filters.deleted==="false"?"ing":"")+" current database state"),ke($e,"active",r[0].filters.deleted==="false"),ke($e,"disabled",r[0].filters.deleted==="false"),f(Ie,"class","label"),f(J,"for","deletedFalse"),f(J,"class","button"),f(J,"title",ze="Show"+(r[0].filters.deleted==="true"?"ing":"")+" deleted records"),ke(J,"active",r[0].filters.deleted==="true"),ke(J,"disabled",r[0].filters.deleted==="true"),f(_e,"type","radio"),f(_e,"name","deleted"),f(_e,"id","deletedFalse"),_e.__value="true",ne(_e,_e.__value),_e.disabled=ft=r[0].filters.deleted==="true",f(_e,"class","svelte-afbo94"),f(he,"class","combo svelte-afbo94"),f(z,"id","viewOptions"),f(z,"class","svelte-afbo94"),f(_,"class","pagination svelte-afbo94"),f(t,"class","svelte-afbo94"),kt.p(re,_e)},m(B,le){A(B,l,le),A(B,t,le),c(t,n),oe(a,n,null),c(n,s),oe(i,n,null),c(n,o),c(n,u),c(u,p),c(u,v),oe(y,u,null),c(t,E),Ye[k].m(t,null),c(t,T),c(t,_),c(_,w),c(w,C),c(w,R),oe(N,w,null),c(w,j),c(w,S),c(_,I),c(_,z),c(z,M),oe(K,M,null),c(M,U),c(M,X),c(z,x),ve&&ve.m(z,null),c(z,ye),c(z,he),c(he,re),re.checked=re.__value===r[0].filters.deleted,c(he,fe),c(he,$e),oe(Ae,$e,null),c($e,rt),c($e,je),c(je,ce),c(je,te),c(je,nt),c(he,ee),c(he,J),oe(G,J,null),c(J,Oe),c(J,Ie),c(Ie,Je),c(Ie,Be),c(Ie,Qe),c(he,xe),c(he,_e),_e.checked=_e.__value===r[0].filters.deleted,A(B,ct,le),me&&me.m(B,le),A(B,et,le),Ee=!0,wt||(St=[Q(window,"keypress",r[4]),Q(u,"click",r[3]),Q(M,"click",ut(r[7])),Q(re,"change",r[8]),Q(re,"change",r[10]),Q(_e,"change",r[11]),Q(_e,"change",r[12])],wt=!0)},p(B,[le]){(!Ee||le&1)&&e!==(e=(B[0].table?.name||"Loading…")+(B[0].online?.MPKIT_URL?": "+B[0].online.MPKIT_URL.replace("https://",""):""))&&(Et.title=e),(!Ee||le&4)&&ke(u,"refreshing",B[2]);let Ue=k;k=It(B),k!==Ue&&(be(),V(Ye[Ue],1,1,()=>{Ye[Ue]=null}),ge(),m=Ye[k],m||(m=Ye[k]=Ot[k](B),m.c()),D(m,1),m.m(t,T));const Ve={};le&1&&(Ve.max=B[0].records?.total_pages),!H&&le&1&&(H=!0,Ve.value=B[0].filters.page,kl(()=>H=!1)),N.$set(Ve),(!Ee||le&1)&&b!==(b=(B[0].records?.total_pages||1)+"")&&de(S,b),B[0].view.database!=="tiles"?ve?(ve.p(B,le),le&1&&D(ve,1)):(ve=dl(B),ve.c(),D(ve,1),ve.m(z,ye)):ve&&(be(),V(ve,1,1,()=>{ve=null}),ge()),(!Ee||le&1&&Ne!==(Ne=B[0].filters.deleted==="false"))&&(re.disabled=Ne),le&1&&(re.checked=re.__value===B[0].filters.deleted),(!Ee||le&1)&&Se!==(Se=B[0].filters.deleted==="false"?"ing":"")&&de(te,Se),(!Ee||le&1&&pe!==(pe="Show"+(B[0].filters.deleted==="false"?"ing":"")+" current database state"))&&f($e,"title",pe),(!Ee||le&1)&&ke($e,"active",B[0].filters.deleted==="false"),(!Ee||le&1)&&ke($e,"disabled",B[0].filters.deleted==="false"),(!Ee||le&1)&&Re!==(Re=B[0].filters.deleted==="true"?"ing":"")&&de(Be,Re),(!Ee||le&1&&ze!==(ze="Show"+(B[0].filters.deleted==="true"?"ing":"")+" deleted records"))&&f(J,"title",ze),(!Ee||le&1)&&ke(J,"active",B[0].filters.deleted==="true"),(!Ee||le&1)&&ke(J,"disabled",B[0].filters.deleted==="true"),(!Ee||le&1&&ft!==(ft=B[0].filters.deleted==="true"))&&(_e.disabled=ft),le&1&&(_e.checked=_e.__value===B[0].filters.deleted),B[0].record!==null?me?(me.p(B,le),le&1&&D(me,1)):(me=_l(B),me.c(),D(me,1),me.m(et.parentNode,et)):me&&(be(),V(me,1,1,()=>{me=null}),ge())},i(B){Ee||(D(a.$$.fragment,B),D(i.$$.fragment,B),D(y.$$.fragment,B),D(m),D(N.$$.fragment,B),D(K.$$.fragment,B),D(ve),D(Ae.$$.fragment,B),D(G.$$.fragment,B),D(me),Ee=!0)},o(B){V(a.$$.fragment,B),V(i.$$.fragment,B),V(y.$$.fragment,B),V(m),V(N.$$.fragment,B),V(K.$$.fragment,B),V(ve),V(Ae.$$.fragment,B),V(G.$$.fragment,B),V(me),Ee=!1},d(B){B&&(h(l),h(t),h(ct),h(et)),ue(a),ue(i),ue(y),Ye[k].d(),ue(N),ue(K),ve&&ve.d(),ue(Ae),ue(G),me&&me.d(B),kt.r(),wt=!1,Ge(St)}}}function Sr(r,e,l){let t,n;Fe(r,W,m=>l(0,t=m)),Fe(r,yt,m=>l(1,n=m));let a=!1;const s=()=>{l(2,a=!0),Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}).then(()=>l(2,a=!1))},i=m=>{document.activeElement===document.body&&!m.target.matches("input, textarea")&&m.key==="r"&&s()},o=[[]];function u(m){r.$$.not_equal(t.filters.page,m)&&(t.filters.page=m,W.set(t))}const p=()=>{Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})},d=()=>Le(W,t.record={},t);function v(){t.filters.deleted=this.__value,W.set(t)}const y=()=>{Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function E(){t.filters.deleted=this.__value,W.set(t)}const k=()=>{Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};return r.$$.update=()=>{r.$$.dirty&3&&Le(W,t.table=t.tables.filter(m=>m.id===n.params.id)[0],t),r.$$.dirty&2&&n.params.id&&Te.get({table:n.params.id})&&W.clearFilters(),r.$$.dirty&2&&n.params.id&&W.clearFilters()},[t,n,a,s,i,u,p,d,v,o,y,E,k]}class zr extends qe{constructor(e){super(),He(this,e,Sr,Nr,Me,{})}}export{zr as component};
