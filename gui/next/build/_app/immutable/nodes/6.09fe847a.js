import{s as x,a as L,f as g,J as ee,d,c as w,g as k,h as S,r as te,j as m,i as q,u as _,K,x as U,y as se,v as ae,N as le,l as C,m as H,w as j,n as V,D as re,E as ie,F as ne,G as oe,I as fe,p as Y}from"../chunks/scheduler.897e742f.js";import{S as he,i as ue,a as N,t as B,c as _e,g as me}from"../chunks/index.dbb1a760.js";import{e as Q}from"../chunks/each.7879f7b3.js";import{p as ce}from"../chunks/stores.cd2bcd1d.js";import{l as pe}from"../chunks/logsv2.907c1e5b.js";function W(t,a,r){const e=t.slice();return e[12]=a[r],e}function X(t){let a,r=Q(t[3].hits),e=[];for(let s=0;s<r.length;s+=1)e[s]=Z(W(t,r,s));return{c(){a=g("tbody");for(let s=0;s<e.length;s+=1)e[s].c()},l(s){a=k(s,"TBODY",{});var i=S(a);for(let l=0;l<e.length;l+=1)e[l].l(i);i.forEach(d)},m(s,i){q(s,a,i);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,null)},p(s,i){if(i&25){r=Q(s[3].hits);let l;for(l=0;l<r.length;l+=1){const b=W(s,r,l);e[l]?e[l].p(b,i):(e[l]=Z(b),e[l].c(),e[l].m(a,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=r.length}},d(s){s&&d(a),le(e,s)}}}function Z(t){let a,r,e,s=new Date(t[12].options_at/1e3).toLocaleString()+"",i,l,b,c,p,D=t[12].type+"",E,O,P,y,f,h,n=t[12].message+"",v,T,I;return{c(){a=g("tr"),r=g("td"),e=g("a"),i=C(s),b=L(),c=g("td"),p=g("a"),E=C(D),P=L(),y=g("td"),f=g("a"),h=g("div"),v=C(n),I=L(),this.h()},l(o){a=k(o,"TR",{class:!0});var u=S(a);r=k(u,"TD",{class:!0});var M=S(r);e=k(M,"A",{href:!0});var A=S(e);i=H(A,s),A.forEach(d),M.forEach(d),b=w(u),c=k(u,"TD",{class:!0});var F=S(c);p=k(F,"A",{href:!0});var R=S(p);E=H(R,D),R.forEach(d),F.forEach(d),P=w(u),y=k(u,"TD",{class:!0});var z=S(y);f=k(z,"A",{href:!0,class:!0});var G=S(f);h=k(G,"DIV",{class:!0});var J=S(h);v=H(J,n),J.forEach(d),G.forEach(d),z.forEach(d),I=w(u),u.forEach(d),this.h()},h(){m(e,"href",l="/logsv2/"+t[12]._timestamp+"?"+t[0].url.searchParams.toString()),m(r,"class","time svelte-2hk8kr"),m(p,"href",O="/logsv2/"+t[12]._timestamp+"?"+t[0].url.searchParams.toString()),m(c,"class","type svelte-2hk8kr"),m(h,"class","svelte-2hk8kr"),m(f,"href",T="/logsv2/"+t[12]._timestamp+"?"+t[0].url.searchParams.toString()),m(f,"class","svelte-2hk8kr"),m(y,"class","message svelte-2hk8kr"),m(a,"class","svelte-2hk8kr"),j(a,"error",t[12].type.match(/error/i)),j(a,"highlight",t[4].key==t[12]._timestamp),j(a,"active",t[0].params.id==t[12]._timestamp)},m(o,u){q(o,a,u),_(a,r),_(r,e),_(e,i),_(a,b),_(a,c),_(c,p),_(p,E),_(a,P),_(a,y),_(y,f),_(f,h),_(h,v),_(a,I)},p(o,u){u&8&&s!==(s=new Date(o[12].options_at/1e3).toLocaleString()+"")&&V(i,s),u&9&&l!==(l="/logsv2/"+o[12]._timestamp+"?"+o[0].url.searchParams.toString())&&m(e,"href",l),u&8&&D!==(D=o[12].type+"")&&V(E,D),u&9&&O!==(O="/logsv2/"+o[12]._timestamp+"?"+o[0].url.searchParams.toString())&&m(p,"href",O),u&8&&n!==(n=o[12].message+"")&&V(v,n),u&9&&T!==(T="/logsv2/"+o[12]._timestamp+"?"+o[0].url.searchParams.toString())&&m(f,"href",T),u&8&&j(a,"error",o[12].type.match(/error/i)),u&24&&j(a,"highlight",o[4].key==o[12]._timestamp),u&9&&j(a,"active",o[0].params.id==o[12]._timestamp)},d(o){o&&d(a)}}}function $(t){let a;const r=t[8].default,e=re(r,t,t[7],null);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,i){e&&e.m(s,i),a=!0},p(s,i){e&&e.p&&(!a||i&128)&&ie(e,r,s,s[7],a?oe(r,s[7],i,null):ne(s[7]),null)},i(s){a||(N(e,s),a=!0)},o(s){B(e,s),a=!1},d(s){e&&e.d(s)}}}function de(t){let a,r,e,s,i,l,b,c,p,D='<tr><th class="svelte-2hk8kr">Time</th> <th class="svelte-2hk8kr">Type</th> <th class="message svelte-2hk8kr">Message</th></tr>',E,O,P,y,f,h=t[3]&&X(t),n=t[0].params.id&&$(t);return{c(){a=L(),r=g("div"),e=g("section"),s=g("nav"),i=g("form"),l=g("input"),b=L(),c=g("table"),p=g("thead"),p.innerHTML=D,E=L(),h&&h.c(),O=L(),n&&n.c(),this.h()},l(v){ee("svelte-1xj5d21",document.head).forEach(d),a=w(v),r=k(v,"DIV",{class:!0});var I=S(r);e=k(I,"SECTION",{class:!0});var o=S(e);s=k(o,"NAV",{class:!0});var u=S(s);i=k(u,"FORM",{action:!0});var M=S(i);l=k(M,"INPUT",{type:!0,name:!0,min:!0,max:!0}),M.forEach(d),u.forEach(d),b=w(o),c=k(o,"TABLE",{class:!0});var A=S(c);p=k(A,"THEAD",{class:!0,"data-svelte-h":!0}),te(p)!=="svelte-1hz51lg"&&(p.innerHTML=D),E=w(A),h&&h.l(A),A.forEach(d),o.forEach(d),O=w(I),n&&n.l(I),I.forEach(d),this.h()},h(){document.title="Logs | platformOS",m(l,"type","date"),m(l,"name","start_time"),m(l,"min",t[6].toISOString().split("T")[0]),m(l,"max",t[5].toISOString().split("T")[0]),m(i,"action",""),m(s,"class","filters svelte-2hk8kr"),m(p,"class","svelte-2hk8kr"),m(c,"class","svelte-2hk8kr"),m(e,"class","content svelte-2hk8kr"),m(r,"class","container svelte-2hk8kr")},m(v,T){q(v,a,T),q(v,r,T),_(r,e),_(e,s),_(s,i),_(i,l),K(l,t[4].start_time),t[10](i),_(e,b),_(e,c),_(c,p),_(c,E),h&&h.m(c,null),_(r,O),n&&n.m(r,null),t[11](r),P=!0,y||(f=[U(l,"input",t[9]),U(l,"change",function(){fe(t[2].requestSubmit())&&t[2].requestSubmit().apply(this,arguments)})],y=!0)},p(v,[T]){t=v,T&16&&K(l,t[4].start_time),t[3]?h?h.p(t,T):(h=X(t),h.c(),h.m(c,null)):h&&(h.d(1),h=null),t[0].params.id?n?(n.p(t,T),T&1&&N(n,1)):(n=$(t),n.c(),N(n,1),n.m(r,null)):n&&(me(),B(n,1,1,()=>{n=null}),_e())},i(v){P||(N(n),P=!0)},o(v){B(n),P=!1},d(v){v&&(d(a),d(r)),t[10](null),h&&h.d(),n&&n.d(),t[11](null),y=!1,se(f)}}}function ve(t,a,r){let e;ae(t,ce,f=>r(0,e=f));let{$$slots:s={},$$scope:i}=a,l,b,c;const p=new Date,D=new Date(p-1e3*60*60*24*3);let E=Object.fromEntries(e.url.searchParams);E.start_time||(E.start_time=p.toISOString().split("T")[0]);function O(){E.start_time=this.value,r(4,E)}function P(f){Y[f?"unshift":"push"](()=>{b=f,r(2,b)})}function y(f){Y[f?"unshift":"push"](()=>{l=f,r(1,l)})}return t.$$set=f=>{"$$scope"in f&&r(7,i=f.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&pe.get(Object.fromEntries(e.url.searchParams)).then(f=>r(3,c=f))},[e,l,b,c,E,p,D,i,s,O,P,y]}class Te extends he{constructor(a){super(),ue(this,a,ve,de,x,{})}}export{Te as component};
