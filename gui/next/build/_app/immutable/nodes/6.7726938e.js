import{Q as Z,R as $,S as L,T as x,s as ee,a as w,f,J as te,d as _,c as T,g as p,h as v,j as m,i as S,u as i,v as G,o as le,D as se,E as ae,F as re,G as ce,p as oe,A as g,r as ne,N as ue,l as M,m as H,w as he,z as ie}from"../chunks/scheduler.bed694a1.js";import{g as U,t as C,c as W,a as A,S as de,i as _e}from"../chunks/index.606d5641.js";import{e as J}from"../chunks/each.177d9825.js";import{p as fe}from"../chunks/stores.f5d1a634.js";import{s as P}from"../chunks/state.88bbaa31.js";function pe(l,e){const a=e.token={};function r(o,n,u,t){if(e.token!==a)return;e.resolved=t;let s=e.ctx;u!==void 0&&(s=s.slice(),s[u]=t);const h=o&&(e.current=o)(s);let c=!1;e.block&&(e.blocks?e.blocks.forEach((d,b)=>{b!==n&&d&&(U(),C(d,1,1,()=>{e.blocks[b]===d&&(e.blocks[b]=null)}),W())}):e.block.d(1),h.c(),A(h,1),h.m(e.mount(),e.anchor),c=!0),e.block=h,e.blocks&&(e.blocks[n]=h),c&&x()}if(Z(l)){const o=$();if(l.then(n=>{L(o),r(e.then,1,e.value,n),L(null)},n=>{if(L(o),r(e.catch,2,e.error,n),L(null),!e.hasCatch)throw n}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,l),!0;e.resolved=l}}function me(l,e,a){const r=e.slice(),{resolved:o}=l;l.current===l.then&&(r[l.value]=o),l.current===l.catch&&(r[l.error]=o),l.block.p(r,a)}const X={get:async l=>{const e=typeof window<"u"&&window.location.port!=="4173"&&window.location.port!=="5173"?`http://localhost:${parseInt(window.location.port)-1}/api/logsv2`:"http://localhost:3333/api/logsv2";return fetch(e).then(a=>a.ok?a.json():Promise.reject(a)).then(a=>a).catch(a=>({error:a}))}};function Q(l,e,a){const r=l.slice();return r[8]=e[a],r}function ve(l){return{c:g,l:g,m:g,p:g,d:g}}function ge(l){let e,a,r='<tr><th class="svelte-8d8f5u">Time</th> <th class="svelte-8d8f5u">Type</th> <th class="message svelte-8d8f5u">Message</th></tr>',o,n,u=J(l[7].body.hits),t=[];for(let s=0;s<u.length;s+=1)t[s]=Y(Q(l,u,s));return{c(){e=f("table"),a=f("thead"),a.innerHTML=r,o=w(),n=f("tbody");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=p(s,"TABLE",{class:!0});var h=v(e);a=p(h,"THEAD",{"data-svelte-h":!0}),ne(a)!=="svelte-1hz51lg"&&(a.innerHTML=r),o=T(h),n=p(h,"TBODY",{});var c=v(n);for(let d=0;d<t.length;d+=1)t[d].l(c);c.forEach(_),h.forEach(_),this.h()},h(){m(e,"class","svelte-8d8f5u")},m(s,h){S(s,e,h),i(e,a),i(e,o),i(e,n);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(n,null)},p(s,h){if(h&0){u=J(s[7].body.hits);let c;for(c=0;c<u.length;c+=1){const d=Q(s,u,c);t[c]?t[c].p(d,h):(t[c]=Y(d),t[c].c(),t[c].m(n,null))}for(;c<t.length;c+=1)t[c].d(1);t.length=u.length}},d(s){s&&_(e),ue(t,s)}}}function Y(l){let e,a,r,o=new Date(l[8].options_at/1e3).toLocaleString()+"",n,u,t,s,h=l[8].type+"",c,d,b,y,E,O=l[8].message+"",j,I;return{c(){e=f("tr"),a=f("td"),r=f("a"),n=M(o),u=w(),t=f("td"),s=f("a"),c=M(h),d=w(),b=f("td"),y=f("a"),E=f("div"),j=M(O),I=w(),this.h()},l(D){e=p(D,"TR",{class:!0});var k=v(e);a=p(k,"TD",{class:!0});var z=v(a);r=p(z,"A",{href:!0});var B=v(r);n=H(B,o),B.forEach(_),z.forEach(_),u=T(k),t=p(k,"TD",{class:!0});var N=v(t);s=p(N,"A",{href:!0});var R=v(s);c=H(R,h),R.forEach(_),N.forEach(_),d=T(k),b=p(k,"TD",{class:!0});var V=v(b);y=p(V,"A",{href:!0,class:!0});var q=v(y);E=p(q,"DIV",{class:!0});var F=v(E);j=H(F,O),F.forEach(_),q.forEach(_),V.forEach(_),I=T(k),k.forEach(_),this.h()},h(){m(r,"href","/logsv2/"+l[8]._timestamp),m(a,"class","time svelte-8d8f5u"),m(s,"href","/logsv2/"+l[8]._timestamp),m(t,"class","type svelte-8d8f5u"),m(E,"class","svelte-8d8f5u"),m(y,"href","/logsv2/"+l[8]._timestamp),m(y,"class","svelte-8d8f5u"),m(b,"class","message svelte-8d8f5u"),m(e,"class","svelte-8d8f5u"),he(e,"error",l[8].type.match(/error/i))},m(D,k){S(D,e,k),i(e,a),i(a,r),i(r,n),i(e,u),i(e,t),i(t,s),i(s,c),i(e,d),i(e,b),i(b,y),i(y,E),i(E,j),i(e,I)},p:g,d(D){D&&_(e)}}}function be(l){return{c:g,l:g,m:g,p:g,d:g}}function K(l){let e;const a=l[4].default,r=se(a,l,l[3],null);return{c(){r&&r.c()},l(o){r&&r.l(o)},m(o,n){r&&r.m(o,n),e=!0},p(o,n){r&&r.p&&(!e||n&8)&&ae(r,a,o,o[3],e?ce(a,o[3],n,null):re(o[3]),null)},i(o){e||(A(r,o),e=!0)},o(o){C(r,o),e=!1},d(o){r&&r.d(o)}}}function ke(l){let e,a,r,o,n,u={ctx:l,current:null,token:null,hasCatch:!1,pending:be,then:ge,catch:ve,value:7};pe(X.get(),u);let t=l[0].params.id&&K(l);return{c(){e=w(),a=f("div"),r=f("section"),u.block.c(),o=w(),t&&t.c(),this.h()},l(s){te("svelte-1xj5d21",document.head).forEach(_),e=T(s),a=p(s,"DIV",{class:!0});var c=v(a);r=p(c,"SECTION",{class:!0});var d=v(r);u.block.l(d),d.forEach(_),o=T(c),t&&t.l(c),c.forEach(_),this.h()},h(){document.title="Logs | platformOS",m(r,"class","logs svelte-8d8f5u"),m(a,"class","container svelte-8d8f5u")},m(s,h){S(s,e,h),S(s,a,h),i(a,r),u.block.m(r,u.anchor=null),u.mount=()=>r,u.anchor=null,i(a,o),t&&t.m(a,null),l[5](a),n=!0},p(s,[h]){l=s,me(u,l,h),l[0].params.id?t?(t.p(l,h),h&1&&A(t,1)):(t=K(l),t.c(),A(t,1),t.m(a,null)):t&&(U(),C(t,1,1,()=>{t=null}),W())},i(s){n||(A(t),n=!0)},o(s){C(t),n=!1},d(s){s&&(_(e),_(a)),u.block.d(),u.token=null,u=null,t&&t.d(),l[5](null)}}}function ye(l,e,a){let r,o;G(l,fe,c=>a(0,r=c)),G(l,P,c=>a(6,o=c));let{$$slots:n={},$$scope:u}=e,t,s;le(async()=>{a(2,s=await X.get())});function h(c){oe[c?"unshift":"push"](()=>{t=c,a(1,t)})}return l.$$set=c=>{"$$scope"in c&&a(3,u=c.$$scope)},l.$$.update=()=>{l.$$.dirty&5&&r.params.id&&(ie(P,o.logv2=s==null?void 0:s.body.hits.find(c=>c._timestamp==r.params.id),o),console.log(s==null?void 0:s.body.hits))},[r,t,s,u,n,h]}class Le extends de{constructor(e){super(),_e(this,e,ye,ke,ee,{})}}export{Le as component};
