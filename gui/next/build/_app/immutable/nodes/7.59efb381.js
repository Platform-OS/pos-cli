import{S as De,i as Ue,s as Be,a as O,k as f,q as K,y as he,$ as Pe,h as o,c as I,l as d,m as N,r as Z,z as ve,n as t,b as ae,F as s,V as Se,A as be,G as re,Z as we,g as W,d as se,f as Fe,B as ge,W as qe,H as Ce,I as Ve,K as He,E as te,u as Le,L as Me,Y as Re,v as ke}from"../chunks/index.fee0118f.js";import{f as ze}from"../chunks/index.54b4c660.js";import{g as $e}from"../chunks/graphql.b64cf78b.js";import{s as G}from"../chunks/state.9b2b94f5.js";import{I as Ee}from"../chunks/Icon.3cfa8d1e.js";const fe={get:()=>$e({query:`
			query {
				constants(
					per_page: 100
				) {
					results {
						name,
						value,
						updated_at
					}
				}
			}`}).then(l=>l.constants.results),edit:e=>{e=Object.fromEntries(e.entries());const l=`
			mutation {
				constant_set(name: "${e.name}", value: "${e.value}"){
					name,
					value
				}
			}`;return $e({query:l})},delete:e=>{e=Object.fromEntries(e.entries());const l=`
			mutation {
				constant_unset(name: "${e.name}"){
					name
				}
			}
		`;return $e({query:l})}};function Oe(e,l,n){const u=e.slice();return u[13]=l[n],u[14]=l,u[15]=n,u}function Ie(e){let l,n,u,T,g,S,h,U;return g=new Ee({props:{icon:"x",size:"12"}}),{c(){l=f("button"),n=f("span"),u=K("Clear filter"),T=O(),he(g.$$.fragment),this.h()},l(F){l=d(F,"BUTTON",{class:!0});var E=N(l);n=d(E,"SPAN",{class:!0});var k=N(n);u=Z(k,"Clear filter"),k.forEach(o),T=I(E),ve(g.$$.fragment,E),E.forEach(o),this.h()},h(){t(n,"class","label svelte-1rr8axd"),t(l,"class","clearFilter svelte-1rr8axd")},m(F,E){ae(F,l,E),s(l,n),s(n,u),s(l,T),be(g,l,null),S=!0,h||(U=re(l,"click",e[8]),h=!0)},p:He,i(F){S||(W(g.$$.fragment,F),S=!0)},o(F){se(g.$$.fragment,F),S=!1},d(F){F&&o(l),ge(g),h=!1,U()}}}function Ae(e){let l,n,u,T,g,S,h,U,F,E,k,w,A,z=e[13].name+"",Y,r,$,i,P,le,q,y,J,B,Q,H,C,D,j=e[13].exposed?"Hide value":"Show value",X,oe,c,V,m,M,a,v,_,p,ue,de;E=new Ee({props:{icon:"x",size:"14"}});function x(){return e[10](e[13],e[14],e[15])}c=new Ee({props:{icon:e[13].exposed?"eyeStriked":"eye"}});function ie(){return e[11](e[13],e[14],e[15])}function me(...L){return e[12](e[15],...L)}return{c(){l=f("li"),n=f("form"),u=f("input"),g=O(),S=f("button"),h=f("span"),U=K("Delete constant"),F=O(),he(E.$$.fragment),k=O(),w=f("form"),A=f("label"),Y=K(z),$=O(),i=f("input"),le=O(),q=f("fieldset"),y=f("input"),H=O(),C=f("button"),D=f("span"),X=K(j),oe=O(),he(c.$$.fragment),m=O(),M=f("button"),a=K("Save"),v=O(),this.h()},l(L){l=d(L,"LI",{class:!0});var b=N(l);n=d(b,"FORM",{class:!0});var R=N(n);u=d(R,"INPUT",{type:!0,name:!0,class:!0}),g=I(R),S=d(R,"BUTTON",{type:!0,title:!0,class:!0});var ne=N(S);h=d(ne,"SPAN",{class:!0});var ce=N(h);U=Z(ce,"Delete constant"),ce.forEach(o),F=I(ne),ve(E.$$.fragment,ne),ne.forEach(o),R.forEach(o),k=I(b),w=d(b,"FORM",{class:!0});var ee=N(w);A=d(ee,"LABEL",{for:!0,class:!0});var ye=N(A);Y=Z(ye,z),ye.forEach(o),$=I(ee),i=d(ee,"INPUT",{type:!0,name:!0,class:!0}),le=I(ee),q=d(ee,"FIELDSET",{class:!0});var _e=N(q);y=d(_e,"INPUT",{name:!0,id:!0,class:!0}),H=I(_e),C=d(_e,"BUTTON",{type:!0,class:!0,title:!0});var pe=N(C);D=d(pe,"SPAN",{class:!0});var Ne=N(D);X=Z(Ne,j),Ne.forEach(o),oe=I(pe),ve(c.$$.fragment,pe),pe.forEach(o),_e.forEach(o),m=I(ee),M=d(ee,"BUTTON",{type:!0,class:!0});var Te=N(M);a=Z(Te,"Save"),Te.forEach(o),ee.forEach(o),v=I(b),b.forEach(o),this.h()},h(){t(u,"type","hidden"),t(u,"name","name"),u.value=T=e[13].name,t(u,"class","svelte-1rr8axd"),t(h,"class","label svelte-1rr8axd"),t(S,"type","submit"),t(S,"title","Delete constant"),t(S,"class","svelte-1rr8axd"),t(n,"class","delete svelte-1rr8axd"),t(A,"for",r=e[13].name),t(A,"class","svelte-1rr8axd"),t(i,"type","hidden"),t(i,"name","name"),i.value=P=e[13].name,t(i,"class","svelte-1rr8axd"),y.disabled=J=!e[13].exposed,t(y,"name","value"),y.value=B=e[13].value,t(y,"id",Q=e[13].name),t(y,"class","svelte-1rr8axd"),te(y,"exposed",e[13].exposed),t(D,"class","label svelte-1rr8axd"),t(C,"type","button"),t(C,"class","toggleExposition svelte-1rr8axd"),t(C,"title",V=e[13].exposed?"Hide value":"Show value"),t(q,"class","svelte-1rr8axd"),t(M,"type","submit"),t(M,"class","button svelte-1rr8axd"),te(M,"needed",e[1][e[15]].changed),t(w,"class","edit svelte-1rr8axd"),t(l,"class","svelte-1rr8axd"),te(l,"hidden",e[0]&&e[3](e[13])),te(l,"highlighted",e[2].highlighted.constant===e[13].name)},m(L,b){ae(L,l,b),s(l,n),s(n,u),s(n,g),s(n,S),s(S,h),s(h,U),s(S,F),be(E,S,null),s(l,k),s(l,w),s(w,A),s(A,Y),s(w,$),s(w,i),s(w,le),s(w,q),s(q,y),s(q,H),s(q,C),s(C,D),s(D,X),s(C,oe),be(c,C,null),s(w,m),s(w,M),s(M,a),s(l,v),p=!0,ue||(de=[re(n,"submit",we(e[9])),re(y,"input",x),re(C,"click",ie),re(w,"submit",we(me))],ue=!0)},p(L,b){e=L,(!p||b&2&&T!==(T=e[13].name))&&(u.value=T),(!p||b&2)&&z!==(z=e[13].name+"")&&Le(Y,z),(!p||b&2&&r!==(r=e[13].name))&&t(A,"for",r),(!p||b&2&&P!==(P=e[13].name))&&(i.value=P),(!p||b&2&&J!==(J=!e[13].exposed))&&(y.disabled=J),(!p||b&2&&B!==(B=e[13].value)&&y.value!==B)&&(y.value=B),(!p||b&2&&Q!==(Q=e[13].name))&&t(y,"id",Q),(!p||b&2)&&te(y,"exposed",e[13].exposed),(!p||b&2)&&j!==(j=e[13].exposed?"Hide value":"Show value")&&Le(X,j);const R={};b&2&&(R.icon=e[13].exposed?"eyeStriked":"eye"),c.$set(R),(!p||b&2&&V!==(V=e[13].exposed?"Hide value":"Show value"))&&t(C,"title",V),(!p||b&2)&&te(M,"needed",e[1][e[15]].changed),(!p||b&11)&&te(l,"hidden",e[0]&&e[3](e[13])),(!p||b&6)&&te(l,"highlighted",e[2].highlighted.constant===e[13].name)},i(L){p||(W(E.$$.fragment,L),W(c.$$.fragment,L),_||Me(()=>{_=Re(l,ze,{duration:100,delay:10*e[15]}),_.start()}),p=!0)},o(L){se(E.$$.fragment,L),se(c.$$.fragment,L),p=!1},d(L){L&&o(l),ge(E),ge(c),ue=!1,Ce(de)}}}function je(e){let l,n,u,T,g,S,h,U,F,E,k,w,A,z,Y,r,$,i,P,le,q,y,J,B,Q,H,C,D,j,X,oe,c=e[0]&&Ie(e);H=new Ee({props:{icon:"arrowRight"}});let V=e[1],m=[];for(let a=0;a<V.length;a+=1)m[a]=Ae(Oe(e,V,a));const M=a=>se(m[a],1,1,()=>{m[a]=null});return{c(){l=O(),n=f("nav"),u=f("form"),T=f("label"),g=K("Find:"),S=O(),h=f("input"),U=O(),c&&c.c(),F=O(),E=f("section"),k=f("form"),w=f("fieldset"),A=f("label"),z=K("Name"),Y=O(),r=f("input"),$=O(),i=f("fieldset"),P=f("label"),le=K("Value"),q=O(),y=f("input"),J=O(),B=f("button"),Q=K(`Add\r
			`),he(H.$$.fragment),C=O(),D=f("ul");for(let a=0;a<m.length;a+=1)m[a].c();this.h()},l(a){Pe("svelte-1evvyn6",document.head).forEach(o),l=I(a),n=d(a,"NAV",{class:!0});var _=N(n);u=d(_,"FORM",{});var p=N(u);T=d(p,"LABEL",{for:!0});var ue=N(T);g=Z(ue,"Find:"),ue.forEach(o),S=I(p),h=d(p,"INPUT",{type:!0,id:!0,class:!0}),U=I(p),c&&c.l(p),p.forEach(o),_.forEach(o),F=I(a),E=d(a,"SECTION",{class:!0});var de=N(E);k=d(de,"FORM",{class:!0});var x=N(k);w=d(x,"FIELDSET",{class:!0});var ie=N(w);A=d(ie,"LABEL",{for:!0,class:!0});var me=N(A);z=Z(me,"Name"),me.forEach(o),Y=I(ie),r=d(ie,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),ie.forEach(o),$=I(x),i=d(x,"FIELDSET",{class:!0});var L=N(i);P=d(L,"LABEL",{for:!0,class:!0});var b=N(P);le=Z(b,"Value"),b.forEach(o),q=I(L),y=d(L,"INPUT",{type:!0,name:!0,id:!0,class:!0}),L.forEach(o),J=I(x),B=d(x,"BUTTON",{class:!0});var R=N(B);Q=Z(R,`Add\r
			`),ve(H.$$.fragment,R),R.forEach(o),x.forEach(o),de.forEach(o),C=I(a),D=d(a,"UL",{class:!0});var ne=N(D);for(let ce=0;ce<m.length;ce+=1)m[ce].l(ne);ne.forEach(o),this.h()},h(){document.title="Constants | platformOS",t(T,"for","filter"),t(h,"type","text"),t(h,"id","filter"),h.autofocus=!0,t(h,"class","svelte-1rr8axd"),t(n,"class","svelte-1rr8axd"),t(A,"for","newName"),t(A,"class","svelte-1rr8axd"),t(r,"type","text"),t(r,"name","name"),t(r,"id","newName"),t(r,"placeholder","MY_NEW_CONSTANT"),t(r,"class","svelte-1rr8axd"),t(w,"class","svelte-1rr8axd"),t(P,"for","newValue"),t(P,"class","svelte-1rr8axd"),t(y,"type","text"),t(y,"name","value"),t(y,"id","newValue"),t(y,"class","svelte-1rr8axd"),t(i,"class","svelte-1rr8axd"),t(B,"class","button svelte-1rr8axd"),t(k,"class","svelte-1rr8axd"),t(E,"class","create svelte-1rr8axd"),t(D,"class","svelte-1rr8axd")},m(a,v){ae(a,l,v),ae(a,n,v),s(n,u),s(u,T),s(T,g),s(u,S),s(u,h),Se(h,e[0]),s(u,U),c&&c.m(u,null),ae(a,F,v),ae(a,E,v),s(E,k),s(k,w),s(w,A),s(A,z),s(w,Y),s(w,r),s(k,$),s(k,i),s(i,P),s(P,le),s(i,q),s(i,y),s(k,J),s(k,B),s(B,Q),be(H,B,null),ae(a,C,v),ae(a,D,v);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(D,null);j=!0,h.focus(),X||(oe=[re(h,"input",e[7]),re(k,"submit",we(e[6]))],X=!0)},p(a,[v]){if(v&1&&h.value!==a[0]&&Se(h,a[0]),a[0]?c?(c.p(a,v),v&1&&W(c,1)):(c=Ie(a),c.c(),W(c,1),c.m(u,null)):c&&(ke(),se(c,1,1,()=>{c=null}),Fe()),v&63){V=a[1];let _;for(_=0;_<V.length;_+=1){const p=Oe(a,V,_);m[_]?(m[_].p(p,v),W(m[_],1)):(m[_]=Ae(p),m[_].c(),W(m[_],1),m[_].m(D,null))}for(ke(),_=V.length;_<m.length;_+=1)M(_);Fe()}},i(a){if(!j){W(c),W(H.$$.fragment,a);for(let v=0;v<V.length;v+=1)W(m[v]);j=!0}},o(a){se(c),se(H.$$.fragment,a),m=m.filter(Boolean);for(let v=0;v<m.length;v+=1)se(m[v]);j=!1},d(a){a&&o(l),a&&o(n),c&&c.d(),a&&o(F),a&&o(E),ge(H),a&&o(C),a&&o(D),qe(m,a),X=!1,Ce(oe)}}}function We(e,l,n){let u;Ve(e,G,r=>n(2,u=r));let T="",g=[];(async()=>await fe.get())().then(r=>{n(1,g=r)});const S=r=>r.name.toLowerCase().indexOf(T.toLowerCase())===-1&&r.value.toLowerCase().indexOf(T.toLowerCase())===-1,h=async(r,$)=>{r.preventDefault();const i=await fe.edit(new FormData(r.target));i.errors?G.notification.create("error",`Failed to update ${i.constant_set.name} constant`):(n(1,g[$].changed=!1,g),G.highlight("constant",i.constant_set.name),G.notification.create("success",`Constant ${i.constant_set.name} updated`))},U=async r=>{if(r.preventDefault(),confirm("Are you sure you want to delete this constant?")){const $=await fe.delete(new FormData(r.target));$.errors?G.notification.create("success",`Failed to delete ${$.constant_unset.name} constant`):(G.notification.create("success",`Constant ${$.constant_unset.name} deleted`),await fe.get().then(i=>{n(1,g=i)}))}},F=async r=>{r.preventDefault();const $=await fe.edit(new FormData(r.target));$.errors?G.notification.create("error",`Failed to create ${$.constant_set.name} constant`):(r.target.reset(),G.notification.create("success",`Constant ${$.constant_set.name} created`),await fe.get().then(i=>{n(1,g=i),G.highlight("constant",$.constant_set.name)}))};function E(){T=this.value,n(0,T)}return[T,g,u,S,h,U,F,E,()=>n(0,T=""),r=>U(r),(r,$,i)=>n(1,$[i].changed=!0,g),(r,$,i)=>n(1,$[i].exposed=!r.exposed,g),(r,$)=>h($,r)]}class Qe extends De{constructor(l){super(),Ue(this,l,We,je,Be,{})}}export{Qe as component};
