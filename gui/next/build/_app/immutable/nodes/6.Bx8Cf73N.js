import{s as Le,a as C,e as h,p as Ie,f as d,g as w,c as p,b,z as se,y as n,i as ee,h as r,A as x,B as ae,r as ke,k as me,C as Pe,D as De,t as le,d as ne,E as j,j as re,l as Ae,u as Ce,m as we,o as Me,F as Oe,G as ce}from"../chunks/scheduler.DdW0MO6w.js";import{S as Re,i as Ue,c as _e,b as he,m as pe,t as H,a as Y,d as Ne,e as de,g as $e}from"../chunks/index.BTckFgzM.js";import{e as ve}from"../chunks/each.urgsHadt.js";import{p as Be}from"../chunks/stores.H_aYtV1e.js";import{l as Fe}from"../chunks/logsv2.Coq-SBgL.js";import{s as ge}from"../chunks/state.mwpI3R5m.js";import{I as ye}from"../chunks/Icon.DnHrMBiR.js";function be(e,a,o){const t=e.slice();return t[15]=a[o],t}function Ee(e){let a,o=ve(e[4].logsv2.hits),t=[];for(let s=0;s<o.length;s+=1)t[s]=Te(be(e,o,s));return{c(){a=h("tbody");for(let s=0;s<t.length;s+=1)t[s].c()},l(s){a=p(s,"TBODY",{});var f=b(a);for(let l=0;l<t.length;l+=1)t[l].l(f);f.forEach(d)},m(s,f){ee(s,a,f);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(a,null)},p(s,f){if(f&25){o=ve(s[4].logsv2.hits);let l;for(l=0;l<o.length;l+=1){const m=be(s,o,l);t[l]?t[l].p(m,f):(t[l]=Te(m),t[l].c(),t[l].m(a,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=o.length}},d(s){s&&d(a),De(t,s)}}}function Te(e){let a,o,t,s=new Date(e[15].options_at/1e3).toLocaleString()+"",f,l,m,k,c,L=e[15].type+"",P,E,y,D,v,T,_=e[15].message+"",U,A,N;return{c(){a=h("tr"),o=h("td"),t=h("a"),f=le(s),m=C(),k=h("td"),c=h("a"),P=le(L),y=C(),D=h("td"),v=h("a"),T=h("div"),U=le(_),N=C(),this.h()},l(i){a=p(i,"TR",{class:!0});var u=b(a);o=p(u,"TD",{class:!0});var M=b(o);t=p(M,"A",{href:!0,class:!0});var V=b(t);f=ne(V,s),V.forEach(d),M.forEach(d),m=w(u),k=p(u,"TD",{class:!0});var B=b(k);c=p(B,"A",{href:!0,class:!0});var F=b(c);P=ne(F,L),F.forEach(d),B.forEach(d),y=w(u),D=p(u,"TD",{class:!0});var O=b(D);v=p(O,"A",{href:!0,class:!0});var z=b(v);T=p(z,"DIV",{class:!0});var q=b(T);U=ne(q,_),q.forEach(d),z.forEach(d),O.forEach(d),N=w(u),u.forEach(d),this.h()},h(){n(t,"href",l="/logsv2/"+e[15]._timestamp+"?"+e[0].url.searchParams.toString()),n(t,"class","svelte-14nyx53"),n(o,"class","time svelte-14nyx53"),n(c,"href",E="/logsv2/"+e[15]._timestamp+"?"+e[0].url.searchParams.toString()),n(c,"class","svelte-14nyx53"),n(k,"class","type svelte-14nyx53"),n(T,"class","svelte-14nyx53"),n(v,"href",A="/logsv2/"+e[15]._timestamp+"?"+e[0].url.searchParams.toString()),n(v,"class","svelte-14nyx53"),n(D,"class","message svelte-14nyx53"),n(a,"class","svelte-14nyx53"),j(a,"error",e[15].type.match(/error/i)),j(a,"highlight",e[3].key==e[15]._timestamp),j(a,"active",e[0].params.id==e[15]._timestamp)},m(i,u){ee(i,a,u),r(a,o),r(o,t),r(t,f),r(a,m),r(a,k),r(k,c),r(c,P),r(a,y),r(a,D),r(D,v),r(v,T),r(T,U),r(a,N)},p(i,u){u&16&&s!==(s=new Date(i[15].options_at/1e3).toLocaleString()+"")&&re(f,s),u&17&&l!==(l="/logsv2/"+i[15]._timestamp+"?"+i[0].url.searchParams.toString())&&n(t,"href",l),u&16&&L!==(L=i[15].type+"")&&re(P,L),u&17&&E!==(E="/logsv2/"+i[15]._timestamp+"?"+i[0].url.searchParams.toString())&&n(c,"href",E),u&16&&_!==(_=i[15].message+"")&&re(U,_),u&17&&A!==(A="/logsv2/"+i[15]._timestamp+"?"+i[0].url.searchParams.toString())&&n(v,"href",A),u&16&&j(a,"error",i[15].type.match(/error/i)),u&24&&j(a,"highlight",i[3].key==i[15]._timestamp),u&17&&j(a,"active",i[0].params.id==i[15]._timestamp)},d(i){i&&d(a)}}}function Se(e){let a;const o=e[8].default,t=Ae(o,e,e[7],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,f){t&&t.m(s,f),a=!0},p(s,f){t&&t.p&&(!a||f&128)&&Ce(t,o,s,s[7],a?Me(o,s[7],f,null):we(s[7]),null)},i(s){a||(H(t,s),a=!0)},o(s){Y(t,s),a=!1},d(s){t&&t.d(s)}}}function qe(e){var ie;let a,o,t,s,f,l,m,k,c,L,P,E,y,D,v,T,_="Filter logs",U,A,N,i,u,M,V='<tr class="svelte-14nyx53"><th class="svelte-14nyx53">Time</th> <th class="svelte-14nyx53">Type</th> <th class="message svelte-14nyx53">Message</th></tr>',B,F,O,z="Showing latest 20 logs as Early Access limitation",q,G,te,oe;document.title=a="Logs"+((ie=e[4].online)!=null&&ie.MPKIT_URL?": "+e[4].online.MPKIT_URL.replace("https://",""):""),P=new ye({props:{icon:"search"}}),A=new ye({props:{icon:"arrowRight"}});let S=e[4].logsv2.hits&&Ee(e),g=e[0].params.id&&Se(e);return{c(){o=C(),t=h("div"),s=h("section"),f=h("nav"),l=h("form"),m=h("input"),k=C(),c=h("fieldset"),L=h("label"),_e(P.$$.fragment),E=C(),y=h("input"),D=C(),v=h("button"),T=h("span"),T.textContent=_,U=C(),_e(A.$$.fragment),N=C(),i=h("article"),u=h("table"),M=h("thead"),M.innerHTML=V,B=C(),S&&S.c(),F=C(),O=h("small"),O.textContent=z,q=C(),g&&g.c(),this.h()},l(I){Ie("svelte-dfdkqr",document.head).forEach(d),o=w(I),t=p(I,"DIV",{class:!0});var $=b(t);s=p($,"SECTION",{class:!0});var J=b(s);f=p(J,"NAV",{class:!0});var ue=b(f);l=p(ue,"FORM",{action:!0,class:!0});var Q=b(l);m=p(Q,"INPUT",{type:!0,name:!0,min:!0,max:!0,class:!0}),k=w(Q),c=p(Q,"FIELDSET",{class:!0});var K=b(c);L=p(K,"LABEL",{for:!0,class:!0});var fe=b(L);he(P.$$.fragment,fe),fe.forEach(d),E=w(K),y=p(K,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),D=w(K),v=p(K,"BUTTON",{type:!0,class:!0});var W=b(v);T=p(W,"SPAN",{class:!0,"data-svelte-h":!0}),se(T)!=="svelte-y4mewk"&&(T.textContent=_),U=w(W),he(A.$$.fragment,W),W.forEach(d),K.forEach(d),Q.forEach(d),ue.forEach(d),N=w(J),i=p(J,"ARTICLE",{class:!0});var X=b(i);u=p(X,"TABLE",{class:!0});var Z=b(u);M=p(Z,"THEAD",{class:!0,"data-svelte-h":!0}),se(M)!=="svelte-uyatsk"&&(M.innerHTML=V),B=w(Z),S&&S.l(Z),Z.forEach(d),F=w(X),O=p(X,"SMALL",{class:!0,"data-svelte-h":!0}),se(O)!=="svelte-1xkes8a"&&(O.textContent=z),X.forEach(d),J.forEach(d),q=w($),g&&g.l($),$.forEach(d),this.h()},h(){n(m,"type","date"),n(m,"name","start_time"),n(m,"min",e[6].toISOString().split("T")[0]),n(m,"max",e[5].toISOString().split("T")[0]),n(m,"class","svelte-14nyx53"),n(L,"for","filter_message"),n(L,"class","svelte-14nyx53"),n(y,"type","text"),n(y,"name","message"),n(y,"id","filter_message"),n(y,"placeholder","Find logs"),n(y,"class","svelte-14nyx53"),n(T,"class","label"),n(v,"type","submit"),n(v,"class","button svelte-14nyx53"),n(c,"class","search svelte-14nyx53"),n(l,"action",""),n(l,"class","svelte-14nyx53"),n(f,"class","filters svelte-14nyx53"),n(M,"class","svelte-14nyx53"),n(u,"class","svelte-14nyx53"),n(O,"class","svelte-14nyx53"),n(i,"class","content svelte-14nyx53"),n(s,"class","container svelte-14nyx53"),n(t,"class","page svelte-14nyx53")},m(I,R){ee(I,o,R),ee(I,t,R),r(t,s),r(s,f),r(f,l),r(l,m),x(m,e[3].start_time),r(l,k),r(l,c),r(c,L),pe(P,L,null),r(c,E),r(c,y),x(y,e[3].message),r(c,D),r(c,v),r(v,T),r(v,U),pe(A,v,null),e[11](l),r(s,N),r(s,i),r(i,u),r(u,M),r(u,B),S&&S.m(u,null),r(i,F),r(i,O),r(t,q),g&&g.m(t,null),e[12](t),G=!0,te||(oe=[ae(m,"input",e[9]),ae(m,"input",function(){Oe(e[2].requestSubmit())&&e[2].requestSubmit().apply(this,arguments)}),ae(y,"input",e[10])],te=!0)},p(I,[R]){var $;e=I,(!G||R&16)&&a!==(a="Logs"+(($=e[4].online)!=null&&$.MPKIT_URL?": "+e[4].online.MPKIT_URL.replace("https://",""):""))&&(document.title=a),R&8&&x(m,e[3].start_time),R&8&&y.value!==e[3].message&&x(y,e[3].message),e[4].logsv2.hits?S?S.p(e,R):(S=Ee(e),S.c(),S.m(u,null)):S&&(S.d(1),S=null),e[0].params.id?g?(g.p(e,R),R&1&&H(g,1)):(g=Se(e),g.c(),H(g,1),g.m(t,null)):g&&($e(),Y(g,1,1,()=>{g=null}),Ne())},i(I){G||(H(P.$$.fragment,I),H(A.$$.fragment,I),H(g),G=!0)},o(I){Y(P.$$.fragment,I),Y(A.$$.fragment,I),Y(g),G=!1},d(I){I&&(d(o),d(t)),de(P),de(A),e[11](null),S&&S.d(),g&&g.d(),e[12](null),te=!1,ke(oe)}}}function Ke(e,a,o){let t,s;me(e,ge,_=>o(4,t=_)),me(e,Be,_=>o(0,s=_));let{$$slots:f={},$$scope:l}=a,m,k;const c=new Date,L=1e3*60*60*24,P=new Date(c-L*3);let E=Object.fromEntries(s.url.searchParams);E.start_time=E.start_time||c.toISOString().split("T")[0];function y(){E.start_time=this.value,o(3,E)}function D(){E.message=this.value,o(3,E)}function v(_){ce[_?"unshift":"push"](()=>{k=_,o(2,k)})}function T(_){ce[_?"unshift":"push"](()=>{m=_,o(1,m)})}return e.$$set=_=>{"$$scope"in _&&o(7,l=_.$$scope)},e.$$.update=()=>{e.$$.dirty&1&&Fe.get(Object.fromEntries(s.url.searchParams)).then(_=>Pe(ge,t.logsv2=_,t))},[s,m,k,E,t,c,P,l,f,y,D,v,T]}class Qe extends Re{constructor(a){super(),Ue(this,a,Ke,qe,Le,{})}}export{Qe as component};
