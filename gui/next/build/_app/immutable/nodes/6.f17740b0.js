import{s as $,a as P,f as p,J as x,d as m,c as A,g as d,h as k,r as J,j as u,i as V,u as f,x as ee,v as te,N as se,l as F,m as R,w as q,n as U,D as ae,E as le,F as re,G as oe,I as ne,p as Y}from"../chunks/scheduler.a497d5ec.js";import{S as ie,i as fe,a as H,t as z,c as he,g as ue}from"../chunks/index.ca999c64.js";import{e as K}from"../chunks/each.1577bad0.js";import{p as _e}from"../chunks/stores.be7e9141.js";import{l as me}from"../chunks/logsv2.47415d4f.js";function Q(t,a,o){const e=t.slice();return e[11]=a[o],e}function W(t){let a,o=K(t[4].hits),e=[];for(let s=0;s<o.length;s+=1)e[s]=X(Q(t,o,s));return{c(){a=p("tbody");for(let s=0;s<e.length;s+=1)e[s].c()},l(s){a=d(s,"TBODY",{});var i=k(a);for(let l=0;l<e.length;l+=1)e[l].l(i);i.forEach(m)},m(s,i){V(s,a,i);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,null)},p(s,i){if(i&19){o=K(s[4].hits);let l;for(l=0;l<o.length;l+=1){const g=Q(s,o,l);e[l]?e[l].p(g,i):(e[l]=X(g),e[l].c(),e[l].m(a,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=o.length}},d(s){s&&m(a),se(e,s)}}}function X(t){let a,o,e,s=new Date(t[11].options_at/1e3).toLocaleString()+"",i,l,g,b,c,T=t[11].type+"",O,v,S,h,E,I,D=t[11].message+"",w,L,_;return{c(){a=p("tr"),o=p("td"),e=p("a"),i=F(s),g=P(),b=p("td"),c=p("a"),O=F(T),S=P(),h=p("td"),E=p("a"),I=p("div"),w=F(D),_=P(),this.h()},l(r){a=d(r,"TR",{class:!0});var n=k(a);o=d(n,"TD",{class:!0});var y=k(o);e=d(y,"A",{href:!0});var C=k(e);i=R(C,s),C.forEach(m),y.forEach(m),g=A(n),b=d(n,"TD",{class:!0});var N=k(b);c=d(N,"A",{href:!0});var B=k(c);O=R(B,T),B.forEach(m),N.forEach(m),S=A(n),h=d(n,"TD",{class:!0});var M=k(h);E=d(M,"A",{href:!0,class:!0});var j=k(E);I=d(j,"DIV",{class:!0});var G=k(I);w=R(G,D),G.forEach(m),j.forEach(m),M.forEach(m),_=A(n),n.forEach(m),this.h()},h(){u(e,"href",l="/logsv2/"+t[11]._timestamp+"?"+t[1].url.searchParams.toString()),u(o,"class","time svelte-2hk8kr"),u(c,"href",v="/logsv2/"+t[11]._timestamp+"?"+t[1].url.searchParams.toString()),u(b,"class","type svelte-2hk8kr"),u(I,"class","svelte-2hk8kr"),u(E,"href",L="/logsv2/"+t[11]._timestamp+"?"+t[1].url.searchParams.toString()),u(E,"class","svelte-2hk8kr"),u(h,"class","message svelte-2hk8kr"),u(a,"class","svelte-2hk8kr"),q(a,"error",t[11].type.match(/error/i)),q(a,"highlight",t[0].key==t[11]._timestamp),q(a,"active",t[1].params.id==t[11]._timestamp)},m(r,n){V(r,a,n),f(a,o),f(o,e),f(e,i),f(a,g),f(a,b),f(b,c),f(c,O),f(a,S),f(a,h),f(h,E),f(E,I),f(I,w),f(a,_)},p(r,n){n&16&&s!==(s=new Date(r[11].options_at/1e3).toLocaleString()+"")&&U(i,s),n&18&&l!==(l="/logsv2/"+r[11]._timestamp+"?"+r[1].url.searchParams.toString())&&u(e,"href",l),n&16&&T!==(T=r[11].type+"")&&U(O,T),n&18&&v!==(v="/logsv2/"+r[11]._timestamp+"?"+r[1].url.searchParams.toString())&&u(c,"href",v),n&16&&D!==(D=r[11].message+"")&&U(w,D),n&18&&L!==(L="/logsv2/"+r[11]._timestamp+"?"+r[1].url.searchParams.toString())&&u(E,"href",L),n&16&&q(a,"error",r[11].type.match(/error/i)),n&17&&q(a,"highlight",r[0].key==r[11]._timestamp),n&18&&q(a,"active",r[1].params.id==r[11]._timestamp)},d(r){r&&m(a)}}}function Z(t){let a;const o=t[8].default,e=ae(o,t,t[7],null);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,i){e&&e.m(s,i),a=!0},p(s,i){e&&e.p&&(!a||i&128)&&le(e,o,s,s[7],a?oe(o,s[7],i,null):re(s[7]),null)},i(s){a||(H(e,s),a=!0)},o(s){z(e,s),a=!1},d(s){e&&e.d(s)}}}function ce(t){let a,o,e,s,i,l,g,b,c,T="Submit",O,v,S,h='<tr><th class="svelte-2hk8kr">Time</th> <th class="svelte-2hk8kr">Type</th> <th class="message svelte-2hk8kr">Message</th></tr>',E,I,D,w,L,_=t[4]&&W(t),r=t[1].params.id&&Z(t);return{c(){a=P(),o=p("div"),e=p("section"),s=p("nav"),i=p("form"),l=p("input"),b=P(),c=p("button"),c.textContent=T,O=P(),v=p("table"),S=p("thead"),S.innerHTML=h,E=P(),_&&_.c(),I=P(),r&&r.c(),this.h()},l(n){x("svelte-1xj5d21",document.head).forEach(m),a=A(n),o=d(n,"DIV",{class:!0});var C=k(o);e=d(C,"SECTION",{class:!0});var N=k(e);s=d(N,"NAV",{class:!0});var B=k(s);i=d(B,"FORM",{action:!0});var M=k(i);l=d(M,"INPUT",{type:!0,name:!0,min:!0,max:!0}),b=A(M),c=d(M,"BUTTON",{"data-svelte-h":!0}),J(c)!=="svelte-gtkoxm"&&(c.textContent=T),M.forEach(m),B.forEach(m),O=A(N),v=d(N,"TABLE",{class:!0});var j=k(v);S=d(j,"THEAD",{class:!0,"data-svelte-h":!0}),J(S)!=="svelte-1hz51lg"&&(S.innerHTML=h),E=A(j),_&&_.l(j),j.forEach(m),N.forEach(m),I=A(C),r&&r.l(C),C.forEach(m),this.h()},h(){document.title="Logs | platformOS",u(l,"type","date"),u(l,"name","start_time"),u(l,"min",t[6].toISOString().split("T")[0]),u(l,"max",t[5].toISOString().split("T")[0]),l.value=g=new Date(t[0].start_time).toISOString().split("T")[0],u(i,"action",""),u(s,"class","filters svelte-2hk8kr"),u(S,"class","svelte-2hk8kr"),u(v,"class","svelte-2hk8kr"),u(e,"class","content svelte-2hk8kr"),u(o,"class","container svelte-2hk8kr")},m(n,y){V(n,a,y),V(n,o,y),f(o,e),f(e,s),f(s,i),f(i,l),f(i,b),f(i,c),t[9](i),f(e,O),f(e,v),f(v,S),f(v,E),_&&_.m(v,null),f(o,I),r&&r.m(o,null),t[10](o),D=!0,w||(L=ee(l,"change",function(){ne(t[3].requestSubmit())&&t[3].requestSubmit().apply(this,arguments)}),w=!0)},p(n,[y]){t=n,(!D||y&1&&g!==(g=new Date(t[0].start_time).toISOString().split("T")[0]))&&(l.value=g),t[4]?_?_.p(t,y):(_=W(t),_.c(),_.m(v,null)):_&&(_.d(1),_=null),t[1].params.id?r?(r.p(t,y),y&2&&H(r,1)):(r=Z(t),r.c(),H(r,1),r.m(o,null)):r&&(ue(),z(r,1,1,()=>{r=null}),he())},i(n){D||(H(r),D=!0)},o(n){z(r),D=!1},d(n){n&&(m(a),m(o)),t[9](null),_&&_.d(),r&&r.d(),t[10](null),w=!1,L()}}}function pe(t,a,o){let e;te(t,_e,h=>o(1,e=h));let{$$slots:s={},$$scope:i}=a,l,g,b,c={};const T=new Date,O=new Date(T-1e3*60*60*24*3);function v(h){Y[h?"unshift":"push"](()=>{g=h,o(3,g)})}function S(h){Y[h?"unshift":"push"](()=>{l=h,o(2,l)})}return t.$$set=h=>{"$$scope"in h&&o(7,i=h.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&o(0,c=Object.fromEntries(e.url.searchParams)),t.$$.dirty&1&&me.get(c).then(h=>o(4,b=h))},[c,e,l,g,b,T,O,i,s,v,S]}class Se extends ie{constructor(a){super(),fe(this,a,pe,ce,$,{})}}export{Se as component};
