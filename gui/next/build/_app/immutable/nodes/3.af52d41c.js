import{S as ne,i as re,s as oe,k as v,a as z,q as M,l as k,m as E,c as C,r as O,h as m,n as b,b as F,F as p,V as x,G as B,v as ue,d as V,f as fe,g as D,W as de,H as he,I as ee,J as _e,X as me,o as ie,E as G,u as pe,L as be,Y as ge,K as P,w as te,y as Q,z as R,A as W,B as X,Q as ve,R as ke,T as Ee,U as ye}from"../chunks/index.fee0118f.js";import{f as we}from"../chunks/index.54b4c660.js";import{p as Ie}from"../chunks/stores.6f2a8f43.js";import{s as se}from"../chunks/state.9b2b94f5.js";import{t as Se}from"../chunks/table.c33ea843.js";import{I as ce}from"../chunks/Icon.3cfa8d1e.js";function le(o,t,e){const l=o.slice();return l[15]=t[e],l[17]=e,l}function De(o){let t,e,l;return e=new ce({props:{icon:"search",size:"18"}}),{c(){t=v("i"),Q(e.$$.fragment),this.h()},l(n){t=k(n,"I",{class:!0});var a=E(t);R(e.$$.fragment,a),a.forEach(m),this.h()},h(){b(t,"class","svelte-1hwguf")},m(n,a){F(n,t,a),W(e,t,null),l=!0},p:P,i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){n&&m(t),X(e)}}}function $e(o){let t,e,l,n,a;return e=new ce({props:{icon:"x",size:"18"}}),{c(){t=v("button"),Q(e.$$.fragment),this.h()},l(f){t=k(f,"BUTTON",{class:!0});var s=E(t);R(e.$$.fragment,s),s.forEach(m),this.h()},h(){b(t,"class","svelte-1hwguf")},m(f,s){F(f,t,s),W(e,t,null),l=!0,n||(a=B(t,"click",o[8]),n=!0)},p:P,i(f){l||(D(e.$$.fragment,f),l=!0)},o(f){V(e.$$.fragment,f),l=!1},d(f){f&&m(t),X(e),n=!1,a()}}}function ae(o){let t,e,l=o[15].name+"",n,a,f,s;return{c(){t=v("li"),e=v("a"),n=M(l),f=z(),this.h()},l(r){t=k(r,"LI",{});var i=E(t);e=k(i,"A",{href:!0,class:!0});var y=E(e);n=O(y,l),y.forEach(m),f=C(i),i.forEach(m),this.h()},h(){b(e,"href",a="/database/table/"+o[15].id),b(e,"class","svelte-1hwguf"),G(e,"active",o[15].id===o[4].params.id)},m(r,i){F(r,t,i),p(t,e),p(e,n),p(t,f)},p(r,i){i&1&&l!==(l=r[15].name+"")&&pe(n,l),i&1&&a!==(a="/database/table/"+r[15].id)&&b(e,"href",a),i&17&&G(e,"active",r[15].id===r[4].params.id)},i(r){s||be(()=>{s=ge(t,we,{duration:100,delay:7*o[17]}),s.start()})},o:P,d(r){r&&m(t)}}}function Ke(o){let t,e,l,n,a,f,s,r,i,y,w,A,L,$,K,T,N,c;const H=[$e,De],I=[];function U(u,_){return u[3]?0:1}n=U(o),a=I[n]=H[n](o);let S=o[0],h=[];for(let u=0;u<S.length;u+=1)h[u]=ae(le(o,S,u));return{c(){t=v("aside"),e=v("div"),l=v("div"),a.c(),f=z(),s=v("input"),r=z(),i=v("kbd"),y=M("Ctrl"),w=v("kbd"),A=M("K"),L=z(),$=v("nav"),K=v("ul");for(let u=0;u<h.length;u+=1)h[u].c();this.h()},l(u){t=k(u,"ASIDE",{class:!0});var _=E(t);e=k(_,"DIV",{class:!0});var g=E(e);l=k(g,"DIV",{class:!0});var d=E(l);a.l(d),f=C(d),s=k(d,"INPUT",{type:!0,placeholder:!0,class:!0}),r=C(d),i=k(d,"KBD",{class:!0});var q=E(i);y=O(q,"Ctrl"),q.forEach(m),w=k(d,"KBD",{class:!0});var Y=E(w);A=O(Y,"K"),Y.forEach(m),d.forEach(m),g.forEach(m),L=C(_),$=k(_,"NAV",{class:!0});var j=E($);K=k(j,"UL",{});var Z=E(K);for(let J=0;J<h.length;J+=1)h[J].l(Z);Z.forEach(m),j.forEach(m),_.forEach(m),this.h()},h(){b(s,"type","text"),b(s,"placeholder","Search tables"),b(s,"class","svelte-1hwguf"),b(i,"class","svelte-1hwguf"),b(w,"class","svelte-1hwguf"),b(l,"class","filter svelte-1hwguf"),b(e,"class","filter-container svelte-1hwguf"),b($,"class","svelte-1hwguf"),b(t,"class","svelte-1hwguf")},m(u,_){F(u,t,_),p(t,e),p(e,l),I[n].m(l,null),p(l,f),p(l,s),o[9](s),x(s,o[3]),p(l,r),p(l,i),p(i,y),p(l,w),p(w,A),p(t,L),p(t,$),p($,K);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(K,null);o[11](t),T=!0,N||(c=[B(s,"input",o[10]),B(s,"input",o[5]),B(s,"keydown",o[6]),B(t,"keydown",o[7])],N=!0)},p(u,[_]){let g=n;if(n=U(u),n===g?I[n].p(u,_):(ue(),V(I[g],1,1,()=>{I[g]=null}),fe(),a=I[n],a?a.p(u,_):(a=I[n]=H[n](u),a.c()),D(a,1),a.m(l,f)),_&8&&s.value!==u[3]&&x(s,u[3]),_&17){S=u[0];let d;for(d=0;d<S.length;d+=1){const q=le(u,S,d);h[d]?(h[d].p(q,_),D(h[d],1)):(h[d]=ae(q),h[d].c(),D(h[d],1),h[d].m(K,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=S.length}},i(u){if(!T){D(a);for(let _=0;_<S.length;_+=1)D(h[_]);T=!0}},o(u){V(a),T=!1},d(u){u&&m(t),I[n].d(),o[9](null),de(h,u),o[11](null),N=!1,he(c)}}}function qe(o,t,e){let l,n;ee(o,Ie,c=>e(4,l=c)),ee(o,se,c=>e(13,n=c));let a=n.tables,f=a,s,r,i;(async()=>await Se.get())().then(c=>{a=c,e(0,f=c),_e(se,n.tables=c,n)});const y=me();ie(async()=>{r.focus(),document.addEventListener("keydown",c=>{c.ctrlKey&&c.key==="k"&&(c.preventDefault(),y("sidebarNeeded"),r.focus(),r.select())}),l.data.table&&s.querySelector(`[href$="${l.data.table.id}"]`).scrollIntoView({behavior:"smooth",block:"center"})});const w=()=>{i?e(0,f=a.filter(c=>c.name.includes(i))):e(0,f=a)},A=c=>{c.key==="Escape"&&(e(3,i=""),w()),c.key==="Enter"&&s.querySelector("li:first-child a").click()},L=c=>{var H,I,U,S,h,u,_,g,d,q;c.key==="ArrowDown"&&s.contains(document.activeElement)&&(c.preventDefault(),document.activeElement.matches("input")?(H=s.querySelector("a"))==null||H.focus():(h=(S=(U=(I=document.activeElement)==null?void 0:I.parentElement)==null?void 0:U.nextElementSibling)==null?void 0:S.querySelector("a"))==null||h.focus()),c.key==="ArrowUp"&&s.contains(document.activeElement)&&(c.preventDefault(),(u=document.activeElement)!=null&&u.matches("li:first-child a")?r.focus():(q=(d=(g=(_=document.activeElement)==null?void 0:_.parentElement)==null?void 0:g.previousElementSibling)==null?void 0:d.querySelector("a"))==null||q.focus()),c.key==="Escape"&&s.contains(document.activeElement)&&(r.focus(),e(3,i=""),w())},$=()=>{e(3,i=null),w()};function K(c){te[c?"unshift":"push"](()=>{r=c,e(2,r)})}function T(){i=this.value,e(3,i)}function N(c){te[c?"unshift":"push"](()=>{s=c,e(1,s)})}return[f,s,r,i,l,w,A,L,$,K,T,N]}class Te extends ne{constructor(t){super(),re(this,t,qe,Ke,oe,{})}}function Ve(o){let t,e,l,n,a;l=new Te({}),l.$on("sidebarNeeded",o[3]);const f=o[2].default,s=ve(f,o,o[1],null);return{c(){t=v("div"),e=v("div"),Q(l.$$.fragment),n=z(),s&&s.c(),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=E(t);e=k(i,"DIV",{class:!0});var y=E(e);R(l.$$.fragment,y),y.forEach(m),n=C(i),s&&s.l(i),i.forEach(m),this.h()},h(){b(e,"class","tables-container svelte-1eu1dsi"),b(t,"class","container svelte-1eu1dsi"),G(t,"tablesHidden",o[0])},m(r,i){F(r,t,i),p(t,e),W(l,e,null),p(t,n),s&&s.m(t,null),a=!0},p(r,[i]){s&&s.p&&(!a||i&2)&&ke(s,f,r,r[1],a?ye(f,r[1],i,null):Ee(r[1]),null),(!a||i&1)&&G(t,"tablesHidden",r[0])},i(r){a||(D(l.$$.fragment,r),D(s,r),a=!0)},o(r){V(l.$$.fragment,r),V(s,r),a=!1},d(r){r&&m(t),X(l),s&&s.d(r)}}}function Ae(o,t,e){let{$$slots:l={},$$scope:n}=t,a=!1;ie(()=>{document.addEventListener("keydown",s=>{!s.target.matches("input, textarea")&&s.key==="b"&&(e(0,a=!a),localStorage.tablesHidden=a)})});const f=()=>e(0,a=!1);return o.$$set=s=>{"$$scope"in s&&e(1,n=s.$$scope)},[a,n,l,f]}class Ce extends ne{constructor(t){super(),re(this,t,Ae,Ve,oe,{})}}export{Ce as component};
