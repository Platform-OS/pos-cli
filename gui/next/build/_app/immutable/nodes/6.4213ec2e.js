import{s as X,a as k,f as v,J as Z,d as u,c as D,g as y,h as b,r as $,j as m,i as O,u as h,v as x,o as ee,N as te,l as C,m as H,w as T,n as I,D as se,E as le,F as ae,G as re,p as oe}from"../chunks/scheduler.a497d5ec.js";import{S as ie,i as ne,a as M,t as B,c as fe,g as _e}from"../chunks/index.ca999c64.js";import{e as Y}from"../chunks/each.1577bad0.js";import{p as ce}from"../chunks/stores.0be00939.js";import{l as he}from"../chunks/logsv2.af5aa2f9.js";import"../chunks/state.59162fba.js";function K(a,s,l){const e=a.slice();return e[7]=s[l],e}function Q(a){let s,l=Y(a[2].hits),e=[];for(let t=0;t<l.length;t+=1)e[t]=U(K(a,l,t));return{c(){s=v("tbody");for(let t=0;t<e.length;t+=1)e[t].c()},l(t){s=y(t,"TBODY",{});var i=b(s);for(let r=0;r<e.length;r+=1)e[r].l(i);i.forEach(u)},m(t,i){O(t,s,i);for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(s,null)},p(t,i){if(i&13){l=Y(t[2].hits);let r;for(r=0;r<l.length;r+=1){const g=K(t,l,r);e[r]?e[r].p(g,i):(e[r]=U(g),e[r].c(),e[r].m(s,null))}for(;r<e.length;r+=1)e[r].d(1);e.length=l.length}},d(t){t&&u(s),te(e,t)}}}function U(a){let s,l,e,t=new Date(a[7].options_at/1e3).toLocaleString()+"",i,r,g,d,p,o=a[7].type+"",n,f,E,w,z,S,L=a[7].message+"",P,A,j;return{c(){s=v("tr"),l=v("td"),e=v("a"),i=C(t),g=k(),d=v("td"),p=v("a"),n=C(o),E=k(),w=v("td"),z=v("a"),S=v("div"),P=C(L),j=k(),this.h()},l(_){s=y(_,"TR",{class:!0});var c=b(s);l=y(c,"TD",{class:!0});var N=b(l);e=y(N,"A",{href:!0});var V=b(e);i=H(V,t),V.forEach(u),N.forEach(u),g=D(c),d=y(c,"TD",{class:!0});var q=b(d);p=y(q,"A",{href:!0});var F=b(p);n=H(F,o),F.forEach(u),q.forEach(u),E=D(c),w=y(c,"TD",{class:!0});var G=b(w);z=y(G,"A",{href:!0,class:!0});var J=b(z);S=y(J,"DIV",{class:!0});var R=b(S);P=H(R,L),R.forEach(u),J.forEach(u),G.forEach(u),j=D(c),c.forEach(u),this.h()},h(){m(e,"href",r="/logsv2/"+a[7]._timestamp+"?"+a[0].url.searchParams.toString()),m(l,"class","time svelte-1tltzyw"),m(p,"href",f="/logsv2/"+a[7]._timestamp+"?"+a[0].url.searchParams.toString()),m(d,"class","type svelte-1tltzyw"),m(S,"class","svelte-1tltzyw"),m(z,"href",A="/logsv2/"+a[7]._timestamp+"?"+a[0].url.searchParams.toString()),m(z,"class","svelte-1tltzyw"),m(w,"class","message svelte-1tltzyw"),m(s,"class","svelte-1tltzyw"),T(s,"error",a[7].type.match(/error/i)),T(s,"highlight",a[3].key==a[7]._timestamp),T(s,"active",a[0].params.id==a[7]._timestamp)},m(_,c){O(_,s,c),h(s,l),h(l,e),h(e,i),h(s,g),h(s,d),h(d,p),h(p,n),h(s,E),h(s,w),h(w,z),h(z,S),h(S,P),h(s,j)},p(_,c){c&4&&t!==(t=new Date(_[7].options_at/1e3).toLocaleString()+"")&&I(i,t),c&5&&r!==(r="/logsv2/"+_[7]._timestamp+"?"+_[0].url.searchParams.toString())&&m(e,"href",r),c&4&&o!==(o=_[7].type+"")&&I(n,o),c&5&&f!==(f="/logsv2/"+_[7]._timestamp+"?"+_[0].url.searchParams.toString())&&m(p,"href",f),c&4&&L!==(L=_[7].message+"")&&I(P,L),c&5&&A!==(A="/logsv2/"+_[7]._timestamp+"?"+_[0].url.searchParams.toString())&&m(z,"href",A),c&4&&T(s,"error",_[7].type.match(/error/i)),c&12&&T(s,"highlight",_[3].key==_[7]._timestamp),c&5&&T(s,"active",_[0].params.id==_[7]._timestamp)},d(_){_&&u(s)}}}function W(a){let s;const l=a[5].default,e=se(l,a,a[4],null);return{c(){e&&e.c()},l(t){e&&e.l(t)},m(t,i){e&&e.m(t,i),s=!0},p(t,i){e&&e.p&&(!s||i&16)&&le(e,l,t,t[4],s?re(l,t[4],i,null):ae(t[4]),null)},i(t){s||(M(e,t),s=!0)},o(t){B(e,t),s=!1},d(t){e&&e.d(t)}}}function ue(a){let s,l,e,t,i,r='<tr><th class="svelte-1tltzyw">Time</th> <th class="svelte-1tltzyw">Type</th> <th class="message svelte-1tltzyw">Message</th></tr>',g,d,p,o=a[2]&&Q(a),n=a[0].params.id&&W(a);return{c(){s=k(),l=v("div"),e=v("section"),t=v("table"),i=v("thead"),i.innerHTML=r,g=k(),o&&o.c(),d=k(),n&&n.c(),this.h()},l(f){Z("svelte-1xj5d21",document.head).forEach(u),s=D(f),l=y(f,"DIV",{class:!0});var w=b(l);e=y(w,"SECTION",{class:!0});var z=b(e);t=y(z,"TABLE",{class:!0});var S=b(t);i=y(S,"THEAD",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-1hz51lg"&&(i.innerHTML=r),g=D(S),o&&o.l(S),S.forEach(u),z.forEach(u),d=D(w),n&&n.l(w),w.forEach(u),this.h()},h(){document.title="Logs | platformOS",m(i,"class","svelte-1tltzyw"),m(t,"class","svelte-1tltzyw"),m(e,"class","logs svelte-1tltzyw"),m(l,"class","container svelte-1tltzyw")},m(f,E){O(f,s,E),O(f,l,E),h(l,e),h(e,t),h(t,i),h(t,g),o&&o.m(t,null),h(l,d),n&&n.m(l,null),a[6](l),p=!0},p(f,[E]){f[2]?o?o.p(f,E):(o=Q(f),o.c(),o.m(t,null)):o&&(o.d(1),o=null),f[0].params.id?n?(n.p(f,E),E&1&&M(n,1)):(n=W(f),n.c(),M(n,1),n.m(l,null)):n&&(_e(),B(n,1,1,()=>{n=null}),fe())},i(f){p||(M(n),p=!0)},o(f){B(n),p=!1},d(f){f&&(u(s),u(l)),o&&o.d(),n&&n.d(),a[6](null)}}}function me(a,s,l){let e;x(a,ce,o=>l(0,e=o));let{$$slots:t={},$$scope:i}=s,r,g,d={};ee(async()=>{l(2,g=await he.get(d))});function p(o){oe[o?"unshift":"push"](()=>{r=o,l(1,r)})}return a.$$set=o=>{"$$scope"in o&&l(4,i=o.$$scope)},a.$$.update=()=>{a.$$.dirty&1&&l(3,d=Object.fromEntries(e.url.searchParams))},[e,r,g,d,i,t,p]}class Ee extends ie{constructor(s){super(),ne(this,s,me,ue,X,{})}}export{Ee as component};
