import{s as ye,a as C,e as h,p as Ie,f as d,g as w,c as p,b as E,z as se,y as r,i as ee,h as o,A as x,B as ae,r as ke,k as fe,C as Pe,D as De,t as le,d as re,E as j,j as oe,l as Ae,u as Ce,m as we,o as Me,F as Oe,G as me}from"../chunks/scheduler.DKECArhd.js";import{S as Re,i as Ue,c as _e,b as he,m as pe,t as H,a as Y,d as Ne,e as de,g as $e}from"../chunks/index.BK4W4vmG.js";import{e as ve}from"../chunks/each.QSj0VSvD.js";import{p as Be}from"../chunks/stores.CX0CZbqg.js";import{l as Fe}from"../chunks/logsv2.Coq-SBgL.js";import{s as ge}from"../chunks/state.CBfhdSmd.js";import{I as be}from"../chunks/Icon.BOakochj.js";function Ee(e,a,n){const t=e.slice();return t[15]=a[n],t}function Te(e){let a,n=ve(e[4].logsv2.hits),t=[];for(let s=0;s<n.length;s+=1)t[s]=Se(Ee(e,n,s));return{c(){a=h("tbody");for(let s=0;s<t.length;s+=1)t[s].c()},l(s){a=p(s,"TBODY",{});var u=E(a);for(let l=0;l<t.length;l+=1)t[l].l(u);u.forEach(d)},m(s,u){ee(s,a,u);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(a,null)},p(s,u){if(u&25){n=ve(s[4].logsv2.hits);let l;for(l=0;l<n.length;l+=1){const f=Ee(s,n,l);t[l]?t[l].p(f,u):(t[l]=Se(f),t[l].c(),t[l].m(a,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},d(s){s&&d(a),De(t,s)}}}function Se(e){let a,n,t,s=new Date(e[15].options_at/1e3).toLocaleString()+"",u,l,f,k,m,y=e[15].type+"",P,T,b,D,v,S,_=e[15].message+"",U,A,N;return{c(){a=h("tr"),n=h("td"),t=h("a"),u=le(s),f=C(),k=h("td"),m=h("a"),P=le(y),b=C(),D=h("td"),v=h("a"),S=h("div"),U=le(_),N=C(),this.h()},l(i){a=p(i,"TR",{class:!0});var c=E(a);n=p(c,"TD",{class:!0});var M=E(n);t=p(M,"A",{href:!0,class:!0});var V=E(t);u=re(V,s),V.forEach(d),M.forEach(d),f=w(c),k=p(c,"TD",{class:!0});var B=E(k);m=p(B,"A",{href:!0,class:!0});var F=E(m);P=re(F,y),F.forEach(d),B.forEach(d),b=w(c),D=p(c,"TD",{class:!0});var O=E(D);v=p(O,"A",{href:!0,class:!0});var z=E(v);S=p(z,"DIV",{class:!0});var q=E(S);U=re(q,_),q.forEach(d),z.forEach(d),O.forEach(d),N=w(c),c.forEach(d),this.h()},h(){r(t,"href",l="/logsv2/"+e[15]._timestamp+"?"+e[0].url.searchParams.toString()),r(t,"class","svelte-oxcb2t"),r(n,"class","time svelte-oxcb2t"),r(m,"href",T="/logsv2/"+e[15]._timestamp+"?"+e[0].url.searchParams.toString()),r(m,"class","svelte-oxcb2t"),r(k,"class","type svelte-oxcb2t"),r(S,"class","svelte-oxcb2t"),r(v,"href",A="/logsv2/"+e[15]._timestamp+"?"+e[0].url.searchParams.toString()),r(v,"class","svelte-oxcb2t"),r(D,"class","message svelte-oxcb2t"),r(a,"class","svelte-oxcb2t"),j(a,"error",e[15].type.match(/error/i)),j(a,"highlight",e[3].key==e[15]._timestamp),j(a,"active",e[0].params.id==e[15]._timestamp)},m(i,c){ee(i,a,c),o(a,n),o(n,t),o(t,u),o(a,f),o(a,k),o(k,m),o(m,P),o(a,b),o(a,D),o(D,v),o(v,S),o(S,U),o(a,N)},p(i,c){c&16&&s!==(s=new Date(i[15].options_at/1e3).toLocaleString()+"")&&oe(u,s),c&17&&l!==(l="/logsv2/"+i[15]._timestamp+"?"+i[0].url.searchParams.toString())&&r(t,"href",l),c&16&&y!==(y=i[15].type+"")&&oe(P,y),c&17&&T!==(T="/logsv2/"+i[15]._timestamp+"?"+i[0].url.searchParams.toString())&&r(m,"href",T),c&16&&_!==(_=i[15].message+"")&&oe(U,_),c&17&&A!==(A="/logsv2/"+i[15]._timestamp+"?"+i[0].url.searchParams.toString())&&r(v,"href",A),c&16&&j(a,"error",i[15].type.match(/error/i)),c&24&&j(a,"highlight",i[3].key==i[15]._timestamp),c&17&&j(a,"active",i[0].params.id==i[15]._timestamp)},d(i){i&&d(a)}}}function Le(e){let a;const n=e[8].default,t=Ae(n,e,e[7],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,u){t&&t.m(s,u),a=!0},p(s,u){t&&t.p&&(!a||u&128)&&Ce(t,n,s,s[7],a?Me(n,s[7],u,null):we(s[7]),null)},i(s){a||(H(t,s),a=!0)},o(s){Y(t,s),a=!1},d(s){t&&t.d(s)}}}function qe(e){var ie;let a,n,t,s,u,l,f,k,m,y,P,T,b,D,v,S,_="Filter logs",U,A,N,i,c,M,V='<tr class="svelte-oxcb2t"><th class="svelte-oxcb2t">Time</th> <th class="svelte-oxcb2t">Type</th> <th class="message svelte-oxcb2t">Message</th></tr>',B,F,O,z="Showing latest 20 logs as Early Access limitation",q,G,te,ne;document.title=a="Logs"+((ie=e[4].online)!=null&&ie.MPKIT_URL?": "+e[4].online.MPKIT_URL.replace("https://",""):""),P=new be({props:{icon:"search"}}),A=new be({props:{icon:"arrowRight"}});let L=e[4].logsv2.hits&&Te(e),g=e[0].params.id&&Le(e);return{c(){n=C(),t=h("div"),s=h("section"),u=h("nav"),l=h("form"),f=h("input"),k=C(),m=h("fieldset"),y=h("label"),_e(P.$$.fragment),T=C(),b=h("input"),D=C(),v=h("button"),S=h("span"),S.textContent=_,U=C(),_e(A.$$.fragment),N=C(),i=h("article"),c=h("table"),M=h("thead"),M.innerHTML=V,B=C(),L&&L.c(),F=C(),O=h("small"),O.textContent=z,q=C(),g&&g.c(),this.h()},l(I){Ie("svelte-dfdkqr",document.head).forEach(d),n=w(I),t=p(I,"DIV",{class:!0});var $=E(t);s=p($,"SECTION",{class:!0});var J=E(s);u=p(J,"NAV",{class:!0});var ce=E(u);l=p(ce,"FORM",{action:!0,class:!0});var Q=E(l);f=p(Q,"INPUT",{type:!0,name:!0,min:!0,max:!0,class:!0}),k=w(Q),m=p(Q,"FIELDSET",{class:!0});var K=E(m);y=p(K,"LABEL",{for:!0,class:!0});var ue=E(y);he(P.$$.fragment,ue),ue.forEach(d),T=w(K),b=p(K,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),D=w(K),v=p(K,"BUTTON",{type:!0,class:!0});var W=E(v);S=p(W,"SPAN",{class:!0,"data-svelte-h":!0}),se(S)!=="svelte-y4mewk"&&(S.textContent=_),U=w(W),he(A.$$.fragment,W),W.forEach(d),K.forEach(d),Q.forEach(d),ce.forEach(d),N=w(J),i=p(J,"ARTICLE",{class:!0});var X=E(i);c=p(X,"TABLE",{class:!0});var Z=E(c);M=p(Z,"THEAD",{class:!0,"data-svelte-h":!0}),se(M)!=="svelte-uyatsk"&&(M.innerHTML=V),B=w(Z),L&&L.l(Z),Z.forEach(d),F=w(X),O=p(X,"SMALL",{class:!0,"data-svelte-h":!0}),se(O)!=="svelte-1xkes8a"&&(O.textContent=z),X.forEach(d),J.forEach(d),q=w($),g&&g.l($),$.forEach(d),this.h()},h(){r(f,"type","date"),r(f,"name","start_time"),r(f,"min",e[6].toISOString().split("T")[0]),r(f,"max",e[5].toISOString().split("T")[0]),r(f,"class","svelte-oxcb2t"),r(y,"for","filter_message"),r(y,"class","svelte-oxcb2t"),r(b,"type","text"),r(b,"name","message"),r(b,"id","filter_message"),r(b,"placeholder","Find logs"),r(b,"class","svelte-oxcb2t"),r(S,"class","label"),r(v,"type","submit"),r(v,"class","button svelte-oxcb2t"),r(m,"class","search svelte-oxcb2t"),r(l,"action",""),r(l,"class","svelte-oxcb2t"),r(u,"class","filters svelte-oxcb2t"),r(M,"class","svelte-oxcb2t"),r(c,"class","svelte-oxcb2t"),r(O,"class","svelte-oxcb2t"),r(i,"class","content svelte-oxcb2t"),r(s,"class","container svelte-oxcb2t"),r(t,"class","page svelte-oxcb2t")},m(I,R){ee(I,n,R),ee(I,t,R),o(t,s),o(s,u),o(u,l),o(l,f),x(f,e[3].start_time),o(l,k),o(l,m),o(m,y),pe(P,y,null),o(m,T),o(m,b),x(b,e[3].message),o(m,D),o(m,v),o(v,S),o(v,U),pe(A,v,null),e[11](l),o(s,N),o(s,i),o(i,c),o(c,M),o(c,B),L&&L.m(c,null),o(i,F),o(i,O),o(t,q),g&&g.m(t,null),e[12](t),G=!0,te||(ne=[ae(f,"input",e[9]),ae(f,"input",function(){Oe(e[2].requestSubmit())&&e[2].requestSubmit().apply(this,arguments)}),ae(b,"input",e[10])],te=!0)},p(I,[R]){var $;e=I,(!G||R&16)&&a!==(a="Logs"+(($=e[4].online)!=null&&$.MPKIT_URL?": "+e[4].online.MPKIT_URL.replace("https://",""):""))&&(document.title=a),R&8&&x(f,e[3].start_time),R&8&&b.value!==e[3].message&&x(b,e[3].message),e[4].logsv2.hits?L?L.p(e,R):(L=Te(e),L.c(),L.m(c,null)):L&&(L.d(1),L=null),e[0].params.id?g?(g.p(e,R),R&1&&H(g,1)):(g=Le(e),g.c(),H(g,1),g.m(t,null)):g&&($e(),Y(g,1,1,()=>{g=null}),Ne())},i(I){G||(H(P.$$.fragment,I),H(A.$$.fragment,I),H(g),G=!0)},o(I){Y(P.$$.fragment,I),Y(A.$$.fragment,I),Y(g),G=!1},d(I){I&&(d(n),d(t)),de(P),de(A),e[11](null),L&&L.d(),g&&g.d(),e[12](null),te=!1,ke(ne)}}}function Ke(e,a,n){let t,s;fe(e,ge,_=>n(4,t=_)),fe(e,Be,_=>n(0,s=_));let{$$slots:u={},$$scope:l}=a,f,k;const m=new Date,y=1e3*60*60*24,P=new Date(m-y*3);let T=Object.fromEntries(s.url.searchParams);T.start_time=T.start_time||m.toISOString().split("T")[0];function b(){T.start_time=this.value,n(3,T)}function D(){T.message=this.value,n(3,T)}function v(_){me[_?"unshift":"push"](()=>{k=_,n(2,k)})}function S(_){me[_?"unshift":"push"](()=>{f=_,n(1,f)})}return e.$$set=_=>{"$$scope"in _&&n(7,l=_.$$scope)},e.$$.update=()=>{e.$$.dirty&1&&Fe.get(Object.fromEntries(s.url.searchParams)).then(_=>Pe(ge,t.logsv2=_,t))},[s,f,k,T,t,m,P,l,u,b,D,v,S]}class Qe extends Re{constructor(a){super(),Ue(this,a,Ke,qe,ye,{})}}export{Qe as component};
