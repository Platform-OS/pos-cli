import{s as x,a as L,f as g,J as ee,d,c as w,g as p,h as S,r as te,j as f,i as H,u as _,K as U,x as Y,y as se,v as ae,N as le,l as R,m as V,w as j,n as B,D as re,E as ne,F as oe,G as ie,I as ce,p as z}from"../chunks/scheduler.897e742f.js";import{S as fe,i as ue,a as q,t as F,c as _e,g as me}from"../chunks/index.dbb1a760.js";import{e as Q}from"../chunks/each.7879f7b3.js";import{p as he}from"../chunks/stores.3e33875d.js";import{l as de}from"../chunks/logsv2.907c1e5b.js";function W(t,a,r){const e=t.slice();return e[12]=a[r],e}function X(t){let a,r=Q(t[3].hits),e=[];for(let s=0;s<r.length;s+=1)e[s]=Z(W(t,r,s));return{c(){a=g("tbody");for(let s=0;s<e.length;s+=1)e[s].c()},l(s){a=p(s,"TBODY",{});var n=S(a);for(let l=0;l<e.length;l+=1)e[l].l(n);n.forEach(d)},m(s,n){H(s,a,n);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,null)},p(s,n){if(n&25){r=Q(s[3].hits);let l;for(l=0;l<r.length;l+=1){const T=W(s,r,l);e[l]?e[l].p(T,n):(e[l]=Z(T),e[l].c(),e[l].m(a,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=r.length}},d(s){s&&d(a),le(e,s)}}}function Z(t){let a,r,e,s=new Date(t[12].options_at/1e3).toLocaleString()+"",n,l,T,v,m,E=t[12].type+"",y,I,O,D,o,P,h=t[12].message+"",i,b,k;return{c(){a=g("tr"),r=g("td"),e=g("a"),n=R(s),T=L(),v=g("td"),m=g("a"),y=R(E),O=L(),D=g("td"),o=g("a"),P=g("div"),i=R(h),k=L(),this.h()},l(c){a=p(c,"TR",{class:!0});var u=S(a);r=p(u,"TD",{class:!0});var C=S(r);e=p(C,"A",{href:!0,class:!0});var M=S(e);n=V(M,s),M.forEach(d),C.forEach(d),T=w(u),v=p(u,"TD",{class:!0});var N=S(v);m=p(N,"A",{href:!0,class:!0});var A=S(m);y=V(A,E),A.forEach(d),N.forEach(d),O=w(u),D=p(u,"TD",{class:!0});var G=S(D);o=p(G,"A",{href:!0,class:!0});var J=S(o);P=p(J,"DIV",{class:!0});var K=S(P);i=V(K,h),K.forEach(d),J.forEach(d),G.forEach(d),k=w(u),u.forEach(d),this.h()},h(){f(e,"href",l="/logsv2/"+t[12]._timestamp+"?"+t[0].url.searchParams.toString()),f(e,"class","svelte-1cong8d"),f(r,"class","time svelte-1cong8d"),f(m,"href",I="/logsv2/"+t[12]._timestamp+"?"+t[0].url.searchParams.toString()),f(m,"class","svelte-1cong8d"),f(v,"class","type svelte-1cong8d"),f(P,"class","svelte-1cong8d"),f(o,"href",b="/logsv2/"+t[12]._timestamp+"?"+t[0].url.searchParams.toString()),f(o,"class","svelte-1cong8d"),f(D,"class","message svelte-1cong8d"),f(a,"class","svelte-1cong8d"),j(a,"error",t[12].type.match(/error/i)),j(a,"highlight",t[4].key==t[12]._timestamp),j(a,"active",t[0].params.id==t[12]._timestamp)},m(c,u){H(c,a,u),_(a,r),_(r,e),_(e,n),_(a,T),_(a,v),_(v,m),_(m,y),_(a,O),_(a,D),_(D,o),_(o,P),_(P,i),_(a,k)},p(c,u){u&8&&s!==(s=new Date(c[12].options_at/1e3).toLocaleString()+"")&&B(n,s),u&9&&l!==(l="/logsv2/"+c[12]._timestamp+"?"+c[0].url.searchParams.toString())&&f(e,"href",l),u&8&&E!==(E=c[12].type+"")&&B(y,E),u&9&&I!==(I="/logsv2/"+c[12]._timestamp+"?"+c[0].url.searchParams.toString())&&f(m,"href",I),u&8&&h!==(h=c[12].message+"")&&B(i,h),u&9&&b!==(b="/logsv2/"+c[12]._timestamp+"?"+c[0].url.searchParams.toString())&&f(o,"href",b),u&8&&j(a,"error",c[12].type.match(/error/i)),u&24&&j(a,"highlight",c[4].key==c[12]._timestamp),u&9&&j(a,"active",c[0].params.id==c[12]._timestamp)},d(c){c&&d(a)}}}function $(t){let a;const r=t[8].default,e=re(r,t,t[7],null);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,n){e&&e.m(s,n),a=!0},p(s,n){e&&e.p&&(!a||n&128)&&ne(e,r,s,s[7],a?ie(r,s[7],n,null):oe(s[7]),null)},i(s){a||(q(e,s),a=!0)},o(s){F(e,s),a=!1},d(s){e&&e.d(s)}}}function ge(t){let a,r,e,s,n,l,T,v,m,E,y='<tr class="svelte-1cong8d"><th class="svelte-1cong8d">Time</th> <th class="svelte-1cong8d">Type</th> <th class="message svelte-1cong8d">Message</th></tr>',I,O,D,o,P,h=t[3]&&X(t),i=t[0].params.id&&$(t);return{c(){a=L(),r=g("div"),e=g("section"),s=g("nav"),n=g("form"),l=g("input"),T=L(),v=g("article"),m=g("table"),E=g("thead"),E.innerHTML=y,I=L(),h&&h.c(),O=L(),i&&i.c(),this.h()},l(b){ee("svelte-1xj5d21",document.head).forEach(d),a=w(b),r=p(b,"DIV",{class:!0});var c=S(r);e=p(c,"SECTION",{class:!0});var u=S(e);s=p(u,"NAV",{class:!0});var C=S(s);n=p(C,"FORM",{action:!0});var M=S(n);l=p(M,"INPUT",{type:!0,name:!0,min:!0,max:!0}),M.forEach(d),C.forEach(d),T=w(u),v=p(u,"ARTICLE",{class:!0});var N=S(v);m=p(N,"TABLE",{class:!0});var A=S(m);E=p(A,"THEAD",{class:!0,"data-svelte-h":!0}),te(E)!=="svelte-uyatsk"&&(E.innerHTML=y),I=w(A),h&&h.l(A),A.forEach(d),N.forEach(d),u.forEach(d),O=w(c),i&&i.l(c),c.forEach(d),this.h()},h(){document.title="Logs | platformOS",f(l,"type","date"),f(l,"name","start_time"),f(l,"min",t[6].toISOString().split("T")[0]),f(l,"max",t[5].toISOString().split("T")[0]),f(n,"action",""),f(s,"class","filters svelte-1cong8d"),f(E,"class","svelte-1cong8d"),f(m,"class","svelte-1cong8d"),f(v,"class","content svelte-1cong8d"),f(e,"class","container svelte-1cong8d"),f(r,"class","page svelte-1cong8d")},m(b,k){H(b,a,k),H(b,r,k),_(r,e),_(e,s),_(s,n),_(n,l),U(l,t[4].start_time),t[10](n),_(e,T),_(e,v),_(v,m),_(m,E),_(m,I),h&&h.m(m,null),_(r,O),i&&i.m(r,null),t[11](r),D=!0,o||(P=[Y(l,"input",t[9]),Y(l,"change",function(){ce(t[2].requestSubmit())&&t[2].requestSubmit().apply(this,arguments)})],o=!0)},p(b,[k]){t=b,k&16&&U(l,t[4].start_time),t[3]?h?h.p(t,k):(h=X(t),h.c(),h.m(m,null)):h&&(h.d(1),h=null),t[0].params.id?i?(i.p(t,k),k&1&&q(i,1)):(i=$(t),i.c(),q(i,1),i.m(r,null)):i&&(me(),F(i,1,1,()=>{i=null}),_e())},i(b){D||(q(i),D=!0)},o(b){F(i),D=!1},d(b){b&&(d(a),d(r)),t[10](null),h&&h.d(),i&&i.d(),t[11](null),o=!1,se(P)}}}function pe(t,a,r){let e;ae(t,he,o=>r(0,e=o));let{$$slots:s={},$$scope:n}=a,l,T,v;const m=new Date,E=new Date(m-1e3*60*60*24*3);let y=Object.fromEntries(e.url.searchParams);y.start_time=y.start_time||m.toISOString().split("T")[0];function I(){y.start_time=this.value,r(4,y)}function O(o){z[o?"unshift":"push"](()=>{T=o,r(2,T)})}function D(o){z[o?"unshift":"push"](()=>{l=o,r(1,l)})}return t.$$set=o=>{"$$scope"in o&&r(7,n=o.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&de.get(Object.fromEntries(e.url.searchParams)).then(o=>r(3,v=o))},[e,l,T,v,y,m,E,n,s,I,O,D]}class ye extends fe{constructor(a){super(),ue(this,a,pe,ge,x,{})}}export{ye as component};
