import{s as x,a as L,f as g,J as ee,d,c as w,g as p,h as S,r as te,j as c,i as H,u,K as U,x as Y,y as se,v as ae,N as le,l as R,m as V,w as j,n as B,D as re,E as ne,F as oe,G as ie,I as ce,p as z}from"../chunks/scheduler.897e742f.js";import{S as fe,i as ue,a as q,t as F,c as _e,g as me}from"../chunks/index.dbb1a760.js";import{e as Q}from"../chunks/each.7879f7b3.js";import{p as he}from"../chunks/stores.dbb8b32e.js";import{l as de}from"../chunks/logsv2.907c1e5b.js";function W(t,a,r){const e=t.slice();return e[13]=a[r],e}function X(t){let a,r=Q(t[3].hits),e=[];for(let s=0;s<r.length;s+=1)e[s]=Z(W(t,r,s));return{c(){a=g("tbody");for(let s=0;s<e.length;s+=1)e[s].c()},l(s){a=p(s,"TBODY",{});var n=S(a);for(let l=0;l<e.length;l+=1)e[l].l(n);n.forEach(d)},m(s,n){H(s,a,n);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,null)},p(s,n){if(n&25){r=Q(s[3].hits);let l;for(l=0;l<r.length;l+=1){const T=W(s,r,l);e[l]?e[l].p(T,n):(e[l]=Z(T),e[l].c(),e[l].m(a,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=r.length}},d(s){s&&d(a),le(e,s)}}}function Z(t){let a,r,e,s=new Date(t[13].options_at/1e3).toLocaleString()+"",n,l,T,v,_,E=t[13].type+"",O,y,P,k,D,m,h=t[13].message+"",o,b,I;return{c(){a=g("tr"),r=g("td"),e=g("a"),n=R(s),T=L(),v=g("td"),_=g("a"),O=R(E),P=L(),k=g("td"),D=g("a"),m=g("div"),o=R(h),I=L(),this.h()},l(i){a=p(i,"TR",{class:!0});var f=S(a);r=p(f,"TD",{class:!0});var C=S(r);e=p(C,"A",{href:!0,class:!0});var M=S(e);n=V(M,s),M.forEach(d),C.forEach(d),T=w(f),v=p(f,"TD",{class:!0});var N=S(v);_=p(N,"A",{href:!0,class:!0});var A=S(_);O=V(A,E),A.forEach(d),N.forEach(d),P=w(f),k=p(f,"TD",{class:!0});var G=S(k);D=p(G,"A",{href:!0,class:!0});var J=S(D);m=p(J,"DIV",{class:!0});var K=S(m);o=V(K,h),K.forEach(d),J.forEach(d),G.forEach(d),I=w(f),f.forEach(d),this.h()},h(){c(e,"href",l="/logsv2/"+t[13]._timestamp+"?"+t[0].url.searchParams.toString()),c(e,"class","svelte-1cong8d"),c(r,"class","time svelte-1cong8d"),c(_,"href",y="/logsv2/"+t[13]._timestamp+"?"+t[0].url.searchParams.toString()),c(_,"class","svelte-1cong8d"),c(v,"class","type svelte-1cong8d"),c(m,"class","svelte-1cong8d"),c(D,"href",b="/logsv2/"+t[13]._timestamp+"?"+t[0].url.searchParams.toString()),c(D,"class","svelte-1cong8d"),c(k,"class","message svelte-1cong8d"),c(a,"class","svelte-1cong8d"),j(a,"error",t[13].type.match(/error/i)),j(a,"highlight",t[4].key==t[13]._timestamp),j(a,"active",t[0].params.id==t[13]._timestamp)},m(i,f){H(i,a,f),u(a,r),u(r,e),u(e,n),u(a,T),u(a,v),u(v,_),u(_,O),u(a,P),u(a,k),u(k,D),u(D,m),u(m,o),u(a,I)},p(i,f){f&8&&s!==(s=new Date(i[13].options_at/1e3).toLocaleString()+"")&&B(n,s),f&9&&l!==(l="/logsv2/"+i[13]._timestamp+"?"+i[0].url.searchParams.toString())&&c(e,"href",l),f&8&&E!==(E=i[13].type+"")&&B(O,E),f&9&&y!==(y="/logsv2/"+i[13]._timestamp+"?"+i[0].url.searchParams.toString())&&c(_,"href",y),f&8&&h!==(h=i[13].message+"")&&B(o,h),f&9&&b!==(b="/logsv2/"+i[13]._timestamp+"?"+i[0].url.searchParams.toString())&&c(D,"href",b),f&8&&j(a,"error",i[13].type.match(/error/i)),f&24&&j(a,"highlight",i[4].key==i[13]._timestamp),f&9&&j(a,"active",i[0].params.id==i[13]._timestamp)},d(i){i&&d(a)}}}function $(t){let a;const r=t[8].default,e=re(r,t,t[7],null);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,n){e&&e.m(s,n),a=!0},p(s,n){e&&e.p&&(!a||n&128)&&ne(e,r,s,s[7],a?ie(r,s[7],n,null):oe(s[7]),null)},i(s){a||(q(e,s),a=!0)},o(s){F(e,s),a=!1},d(s){e&&e.d(s)}}}function ge(t){let a,r,e,s,n,l,T,v,_,E,O='<tr class="svelte-1cong8d"><th class="svelte-1cong8d">Time</th> <th class="svelte-1cong8d">Type</th> <th class="message svelte-1cong8d">Message</th></tr>',y,P,k,D,m,h=t[3]&&X(t),o=t[0].params.id&&$(t);return{c(){a=L(),r=g("div"),e=g("section"),s=g("nav"),n=g("form"),l=g("input"),T=L(),v=g("article"),_=g("table"),E=g("thead"),E.innerHTML=O,y=L(),h&&h.c(),P=L(),o&&o.c(),this.h()},l(b){ee("svelte-1xj5d21",document.head).forEach(d),a=w(b),r=p(b,"DIV",{class:!0});var i=S(r);e=p(i,"SECTION",{class:!0});var f=S(e);s=p(f,"NAV",{class:!0});var C=S(s);n=p(C,"FORM",{action:!0});var M=S(n);l=p(M,"INPUT",{type:!0,name:!0,min:!0,max:!0}),M.forEach(d),C.forEach(d),T=w(f),v=p(f,"ARTICLE",{class:!0});var N=S(v);_=p(N,"TABLE",{class:!0});var A=S(_);E=p(A,"THEAD",{class:!0,"data-svelte-h":!0}),te(E)!=="svelte-uyatsk"&&(E.innerHTML=O),y=w(A),h&&h.l(A),A.forEach(d),N.forEach(d),f.forEach(d),P=w(i),o&&o.l(i),i.forEach(d),this.h()},h(){document.title="Logs | platformOS",c(l,"type","date"),c(l,"name","start_time"),c(l,"min",t[6].toISOString().split("T")[0]),c(l,"max",t[5].toISOString().split("T")[0]),c(n,"action",""),c(s,"class","filters svelte-1cong8d"),c(E,"class","svelte-1cong8d"),c(_,"class","svelte-1cong8d"),c(v,"class","content svelte-1cong8d"),c(e,"class","container svelte-1cong8d"),c(r,"class","page svelte-1cong8d")},m(b,I){H(b,a,I),H(b,r,I),u(r,e),u(e,s),u(s,n),u(n,l),U(l,t[4].start_time),t[10](n),u(e,T),u(e,v),u(v,_),u(_,E),u(_,y),h&&h.m(_,null),u(r,P),o&&o.m(r,null),t[11](r),k=!0,D||(m=[Y(l,"input",t[9]),Y(l,"change",function(){ce(t[2].requestSubmit())&&t[2].requestSubmit().apply(this,arguments)})],D=!0)},p(b,[I]){t=b,I&16&&U(l,t[4].start_time),t[3]?h?h.p(t,I):(h=X(t),h.c(),h.m(_,null)):h&&(h.d(1),h=null),t[0].params.id?o?(o.p(t,I),I&1&&q(o,1)):(o=$(t),o.c(),q(o,1),o.m(r,null)):o&&(me(),F(o,1,1,()=>{o=null}),_e())},i(b){k||(q(o),k=!0)},o(b){F(o),k=!1},d(b){b&&(d(a),d(r)),t[10](null),h&&h.d(),o&&o.d(),t[11](null),D=!1,se(m)}}}function pe(t,a,r){let e;ae(t,he,m=>r(0,e=m));let{$$slots:s={},$$scope:n}=a,l,T,v;const _=new Date,E=1e3*60*60*24,O=new Date(_-E*3);let y=Object.fromEntries(e.url.searchParams);y.start_time=y.start_time||_.toISOString().split("T")[0];function P(){y.start_time=this.value,r(4,y)}function k(m){z[m?"unshift":"push"](()=>{T=m,r(2,T)})}function D(m){z[m?"unshift":"push"](()=>{l=m,r(1,l)})}return t.$$set=m=>{"$$scope"in m&&r(7,n=m.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&de.get(Object.fromEntries(e.url.searchParams)).then(m=>r(3,v=m))},[e,l,T,v,y,_,O,n,s,P,k,D]}class ye extends fe{constructor(a){super(),ue(this,a,pe,ge,x,{})}}export{ye as component};
