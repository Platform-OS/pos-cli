import{Q as Z,R as $,S,T as x,s as ee,a as T,f,J as te,d as _,c as D,g as m,h as v,j as p,i as w,u as i,v as G,o as se,D as le,E as ae,F as re,G as ce,p as ne,A as g,r as oe,N as ue,l as H,m as I,w as he,z as ie}from"../chunks/scheduler.bed694a1.js";import{g as U,t as C,c as W,a as L,S as de,i as _e}from"../chunks/index.606d5641.js";import{e as J}from"../chunks/each.177d9825.js";import{p as fe}from"../chunks/stores.3b820f72.js";import{s as P}from"../chunks/state.88bbaa31.js";function me(s,e){const l=e.token={};function a(n,o,u,t){if(e.token!==l)return;e.resolved=t;let r=e.ctx;u!==void 0&&(r=r.slice(),r[u]=t);const h=n&&(e.current=n)(r);let c=!1;e.block&&(e.blocks?e.blocks.forEach((d,b)=>{b!==o&&d&&(U(),C(d,1,1,()=>{e.blocks[b]===d&&(e.blocks[b]=null)}),W())}):e.block.d(1),h.c(),L(h,1),h.m(e.mount(),e.anchor),c=!0),e.block=h,e.blocks&&(e.blocks[o]=h),c&&x()}if(Z(s)){const n=$();if(s.then(o=>{S(n),a(e.then,1,e.value,o),S(null)},o=>{if(S(n),a(e.catch,2,e.error,o),S(null),!e.hasCatch)throw o}),e.current!==e.pending)return a(e.pending,0),!0}else{if(e.current!==e.then)return a(e.then,1,e.value,s),!0;e.resolved=s}}function pe(s,e,l){const a=e.slice(),{resolved:n}=s;s.current===s.then&&(a[s.value]=n),s.current===s.catch&&(a[s.error]=n),s.block.p(a,l)}const X={get:async s=>fetch("http://localhost:3333/api/logsv2").then(l=>l.ok?l.json():Promise.reject(l)).then(l=>l).catch(l=>({error:l}))};function Q(s,e,l){const a=s.slice();return a[8]=e[l],a}function ve(s){return{c:g,l:g,m:g,p:g,d:g}}function ge(s){let e,l,a='<tr><th class="svelte-8d8f5u">Time</th> <th class="svelte-8d8f5u">Type</th> <th class="message svelte-8d8f5u">Message</th></tr>',n,o,u=J(s[7].hits),t=[];for(let r=0;r<u.length;r+=1)t[r]=Y(Q(s,u,r));return{c(){e=f("table"),l=f("thead"),l.innerHTML=a,n=T(),o=f("tbody");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=m(r,"TABLE",{class:!0});var h=v(e);l=m(h,"THEAD",{"data-svelte-h":!0}),oe(l)!=="svelte-1hz51lg"&&(l.innerHTML=a),n=D(h),o=m(h,"TBODY",{});var c=v(o);for(let d=0;d<t.length;d+=1)t[d].l(c);c.forEach(_),h.forEach(_),this.h()},h(){p(e,"class","svelte-8d8f5u")},m(r,h){w(r,e,h),i(e,l),i(e,n),i(e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(o,null)},p(r,h){if(h&0){u=J(r[7].hits);let c;for(c=0;c<u.length;c+=1){const d=Q(r,u,c);t[c]?t[c].p(d,h):(t[c]=Y(d),t[c].c(),t[c].m(o,null))}for(;c<t.length;c+=1)t[c].d(1);t.length=u.length}},d(r){r&&_(e),ue(t,r)}}}function Y(s){let e,l,a,n=new Date(s[8].options_at/1e3).toLocaleString()+"",o,u,t,r,h=s[8].type+"",c,d,b,E,y,O=s[8].message+"",j,M;return{c(){e=f("tr"),l=f("td"),a=f("a"),o=H(n),u=T(),t=f("td"),r=f("a"),c=H(h),d=T(),b=f("td"),E=f("a"),y=f("div"),j=H(O),M=T(),this.h()},l(A){e=m(A,"TR",{class:!0});var k=v(e);l=m(k,"TD",{class:!0});var z=v(l);a=m(z,"A",{href:!0});var B=v(a);o=I(B,n),B.forEach(_),z.forEach(_),u=D(k),t=m(k,"TD",{class:!0});var N=v(t);r=m(N,"A",{href:!0});var R=v(r);c=I(R,h),R.forEach(_),N.forEach(_),d=D(k),b=m(k,"TD",{class:!0});var V=v(b);E=m(V,"A",{href:!0,class:!0});var q=v(E);y=m(q,"DIV",{class:!0});var F=v(y);j=I(F,O),F.forEach(_),q.forEach(_),V.forEach(_),M=D(k),k.forEach(_),this.h()},h(){p(a,"href","/logsv2/"+s[8]._timestamp),p(l,"class","time svelte-8d8f5u"),p(r,"href","/logsv2/"+s[8]._timestamp),p(t,"class","type svelte-8d8f5u"),p(y,"class","svelte-8d8f5u"),p(E,"href","/logsv2/"+s[8]._timestamp),p(E,"class","svelte-8d8f5u"),p(b,"class","message svelte-8d8f5u"),p(e,"class","svelte-8d8f5u"),he(e,"error",s[8].type.match(/error/i))},m(A,k){w(A,e,k),i(e,l),i(l,a),i(a,o),i(e,u),i(e,t),i(t,r),i(r,c),i(e,d),i(e,b),i(b,E),i(E,y),i(y,j),i(e,M)},p:g,d(A){A&&_(e)}}}function be(s){return{c:g,l:g,m:g,p:g,d:g}}function K(s){let e;const l=s[4].default,a=le(l,s,s[3],null);return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,o){a&&a.m(n,o),e=!0},p(n,o){a&&a.p&&(!e||o&8)&&ae(a,l,n,n[3],e?ce(l,n[3],o,null):re(n[3]),null)},i(n){e||(L(a,n),e=!0)},o(n){C(a,n),e=!1},d(n){a&&a.d(n)}}}function ke(s){let e,l,a,n,o,u={ctx:s,current:null,token:null,hasCatch:!1,pending:be,then:ge,catch:ve,value:7};me(X.get(),u);let t=s[0].params.id&&K(s);return{c(){e=T(),l=f("div"),a=f("section"),u.block.c(),n=T(),t&&t.c(),this.h()},l(r){te("svelte-1xj5d21",document.head).forEach(_),e=D(r),l=m(r,"DIV",{class:!0});var c=v(l);a=m(c,"SECTION",{class:!0});var d=v(a);u.block.l(d),d.forEach(_),n=D(c),t&&t.l(c),c.forEach(_),this.h()},h(){document.title="Logs | platformOS",p(a,"class","logs svelte-8d8f5u"),p(l,"class","container svelte-8d8f5u")},m(r,h){w(r,e,h),w(r,l,h),i(l,a),u.block.m(a,u.anchor=null),u.mount=()=>a,u.anchor=null,i(l,n),t&&t.m(l,null),s[5](l),o=!0},p(r,[h]){s=r,pe(u,s,h),s[0].params.id?t?(t.p(s,h),h&1&&L(t,1)):(t=K(s),t.c(),L(t,1),t.m(l,null)):t&&(U(),C(t,1,1,()=>{t=null}),W())},i(r){o||(L(t),o=!0)},o(r){C(t),o=!1},d(r){r&&(_(e),_(l)),u.block.d(),u.token=null,u=null,t&&t.d(),s[5](null)}}}function Ee(s,e,l){let a,n;G(s,fe,c=>l(0,a=c)),G(s,P,c=>l(6,n=c));let{$$slots:o={},$$scope:u}=e,t,r;se(async()=>{l(2,r=await X.get())});function h(c){ne[c?"unshift":"push"](()=>{t=c,l(1,t)})}return s.$$set=c=>{"$$scope"in c&&l(3,u=c.$$scope)},s.$$.update=()=>{s.$$.dirty&5&&a.params.id&&ie(P,n.logv2=r==null?void 0:r.hits.find(c=>c._timestamp==a.params.id),n)},[a,t,r,u,o,h]}class Se extends de{constructor(e){super(),_e(this,e,Ee,ke,ee,{})}}export{Se as component};
