import{S as ze,i as Ke,s as He,C as Be,D as Ve,d as p,E as de,x as je,o as x,p as j,F as ie,G as Ge,a as fe,z as a,H as Je,b as _e,c as n,I as be,J as me,v as Qe,h as A,e as _,f as E,K as ue,L as Ee,g as se,k as C,j as c,M as Te,t as ae,l as we,N as Ye,O as We,m as Xe,u as Ze,q as xe,r as et,P as tt,Q as Z,R as st}from"../chunks/n7YEDvJi.js";import{g as at}from"../chunks/D0QH3NT1.js";import{e as Me}from"../chunks/DMhVG_ro.js";import"../chunks/IHki7fMi.js";import{g as lt}from"../chunks/BkTZdoZE.js";import{p as rt}from"../chunks/C6Nbyvij.js";import{l as nt}from"../chunks/twsCDidx.js";import{s as ye}from"../chunks/Bp_ajb_u.js";import{I as Ne}from"../chunks/DHO4ENnJ.js";import{N as ot}from"../chunks/CYamOUSl.js";const{document:Le}=at;function Oe(t,l,i){const e=t.slice();return e[16]=l[i],e}function Re(t){let l,i=Me(t[3].logsv2.hits),e=[];for(let s=0;s<i.length;s+=1)e[s]=Ue(Oe(t,i,s));return{c(){l=c("tbody");for(let s=0;s<e.length;s+=1)e[s].c()},l(s){l=_(s,"TBODY",{});var f=E(l);for(let r=0;r<e.length;r+=1)e[r].l(f);f.forEach(p)},m(s,f){_e(s,l,f);for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(l,null)},p(s,f){if(f&13){i=Me(s[3].logsv2.hits);let r;for(r=0;r<i.length;r+=1){const g=Oe(s,i,r);e[r]?e[r].p(g,f):(e[r]=Ue(g),e[r].c(),e[r].m(l,null))}for(;r<e.length;r+=1)e[r].d(1);e.length=i.length}},d(s){s&&p(l),We(e,s)}}}function Ue(t){let l,i,e,s=new Date(t[16].options_at/1e3).toLocaleString()+"",f,r,g,w,k,v=t[16].type+"",T,L,M,S,D,d,N=t[16].message+"",P,m,q;return{c(){l=c("tr"),i=c("td"),e=c("a"),f=ae(s),g=C(),w=c("td"),k=c("a"),T=ae(v),M=C(),S=c("td"),D=c("a"),d=c("div"),P=ae(N),q=C(),this.h()},l(h){l=_(h,"TR",{class:!0});var u=E(l);i=_(u,"TD",{class:!0});var G=E(i);e=_(G,"A",{href:!0,class:!0});var B=E(e);f=se(B,s),B.forEach(p),G.forEach(p),g=A(u),w=_(u,"TD",{class:!0});var y=E(w);k=_(y,"A",{href:!0,class:!0});var O=E(k);T=se(O,v),O.forEach(p),y.forEach(p),M=A(u),S=_(u,"TD",{class:!0});var ee=E(S);D=_(ee,"A",{href:!0,class:!0});var J=E(D);d=_(J,"DIV",{class:!0});var Q=E(d);P=se(Q,N),Q.forEach(p),J.forEach(p),ee.forEach(p),q=A(u),u.forEach(p),this.h()},h(){a(e,"href",r="/logsv2/"+t[16]._timestamp+"?"+t[0].url.searchParams.toString()),a(e,"class","svelte-1mrr17l"),a(i,"class","time svelte-1mrr17l"),a(k,"href",L="/logsv2/"+t[16]._timestamp+"?"+t[0].url.searchParams.toString()),a(k,"class","svelte-1mrr17l"),a(w,"class","type svelte-1mrr17l"),a(d,"class","svelte-1mrr17l"),a(D,"href",m="/logsv2/"+t[16]._timestamp+"?"+t[0].url.searchParams.toString()),a(D,"class","svelte-1mrr17l"),a(S,"class","message svelte-1mrr17l"),a(l,"class","svelte-1mrr17l"),Z(l,"error",t[16].type.match(/error/i)),Z(l,"highlight",t[2].key==t[16]._timestamp),Z(l,"active",t[0].params.id==t[16]._timestamp)},m(h,u){_e(h,l,u),n(l,i),n(i,e),n(e,f),n(l,g),n(l,w),n(w,k),n(k,T),n(l,M),n(l,S),n(S,D),n(D,d),n(d,P),n(l,q)},p(h,u){u&8&&s!==(s=new Date(h[16].options_at/1e3).toLocaleString()+"")&&fe(f,s),u&9&&r!==(r="/logsv2/"+h[16]._timestamp+"?"+h[0].url.searchParams.toString())&&a(e,"href",r),u&8&&v!==(v=h[16].type+"")&&fe(T,v),u&9&&L!==(L="/logsv2/"+h[16]._timestamp+"?"+h[0].url.searchParams.toString())&&a(k,"href",L),u&8&&N!==(N=h[16].message+"")&&fe(P,N),u&9&&m!==(m="/logsv2/"+h[16]._timestamp+"?"+h[0].url.searchParams.toString())&&a(D,"href",m),u&8&&Z(l,"error",h[16].type.match(/error/i)),u&12&&Z(l,"highlight",h[2].key==h[16]._timestamp),u&9&&Z(l,"active",h[0].params.id==h[16]._timestamp)},d(h){h&&p(l)}}}function qe(t){let l;const i=t[7].default,e=Xe(i,t,t[6],null);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,f){e&&e.m(s,f),l=!0},p(s,f){e&&e.p&&(!l||f&64)&&Ze(e,i,s,s[6],l?et(i,s[6],f,null):xe(s[6]),null)},i(s){l||(j(e,s),l=!0)},o(s){x(e,s),l=!1},d(s){e&&e.d(s)}}}function it(t){var ke;let l,i,e,s,f,r,g,w="Time limit",k,v,T,L,M,S,D,d,N,P,m,q="Filter logs",h,u,G,B,y,O,ee='<tr class="svelte-1mrr17l"><th class="svelte-1mrr17l">Time</th> <th class="svelte-1mrr17l">Type</th> <th class="message svelte-1mrr17l">Message</th></tr>',J,Q,R,H,Se="Page:",ce,U,pe,he,z,te=(Math.ceil(t[3].logsv2.total/t[3].logsv2.size)||1)+"",le,re,ge,V,ve,Pe;Le.title=l="Logs"+((ke=t[3].online)!=null&&ke.MPKIT_URL?": "+t[3].online.MPKIT_URL.replace("https://",""):""),S=new Ne({props:{icon:"search"}}),u=new Ne({props:{icon:"arrowRight"}});let I=t[3].logsv2.hits&&Re(t);function Fe(o){t[13](o)}let Ie={form:"filters",name:"page",min:1,max:Math.ceil(t[3].logsv2.total/t[3].logsv2.size)||20,step:1,decreaseLabel:"Previous page",increaseLabel:"Next page",style:"navigation"};t[2].page!==void 0&&(Ie.value=t[2].page),U=new ot({props:Ie}),Be.push(()=>Ve(U,"value",Fe)),U.$on("input",t[14]);let b=t[0].params.id&&qe(t);return{c(){i=C(),e=c("div"),s=c("section"),f=c("nav"),r=c("form"),g=c("label"),g.textContent=w,k=C(),v=c("input"),T=C(),L=c("fieldset"),M=c("label"),Te(S.$$.fragment),D=C(),d=c("input"),N=C(),P=c("button"),m=c("span"),m.textContent=q,h=C(),Te(u.$$.fragment),G=C(),B=c("article"),y=c("table"),O=c("thead"),O.innerHTML=ee,J=C(),I&&I.c(),Q=C(),R=c("nav"),H=c("label"),H.textContent=Se,ce=C(),Te(U.$$.fragment),he=ae(`
        of `),z=c("span"),le=ae(te),ge=C(),b&&b.c(),this.h()},l(o){Qe("svelte-dfdkqr",Le.head).forEach(p),i=A(o),e=_(o,"DIV",{class:!0});var K=E(e);s=_(K,"SECTION",{class:!0});var F=E(s);f=_(F,"NAV",{class:!0});var De=E(f);r=_(De,"FORM",{action:!0,id:!0,class:!0});var Y=E(r);g=_(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(g)!=="svelte-125i4ut"&&(g.textContent=w),k=A(Y),v=_(Y,"INPUT",{type:!0,name:!0,id:!0,min:!0,max:!0,class:!0}),T=A(Y),L=_(Y,"FIELDSET",{class:!0});var W=E(L);M=_(W,"LABEL",{for:!0,class:!0});var $e=E(M);Ee(S.$$.fragment,$e),$e.forEach(p),D=A(W),d=_(W,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),N=A(W),P=_(W,"BUTTON",{type:!0,class:!0});var ne=E(P);m=_(ne,"SPAN",{class:!0,"data-svelte-h":!0}),ue(m)!=="svelte-y4mewk"&&(m.textContent=q),h=A(ne),Ee(u.$$.fragment,ne),ne.forEach(p),W.forEach(p),Y.forEach(p),De.forEach(p),G=A(F),B=_(F,"ARTICLE",{class:!0});var Ae=E(B);y=_(Ae,"TABLE",{class:!0});var oe=E(y);O=_(oe,"THEAD",{class:!0,"data-svelte-h":!0}),ue(O)!=="svelte-uyatsk"&&(O.innerHTML=ee),J=A(oe),I&&I.l(oe),oe.forEach(p),Ae.forEach(p),Q=A(F),R=_(F,"NAV",{class:!0});var X=E(R);H=_(X,"LABEL",{for:!0,"data-svelte-h":!0}),ue(H)!=="svelte-1xadase"&&(H.textContent=Se),ce=A(X),Ee(U.$$.fragment,X),he=se(X,`
        of `),z=_(X,"SPAN",{class:!0,title:!0});var Ce=E(z);le=se(Ce,te),Ce.forEach(p),X.forEach(p),F.forEach(p),ge=A(K),b&&b.l(K),K.forEach(p),this.h()},h(){a(g,"for","start_time"),a(g,"class","label svelte-1mrr17l"),a(v,"type","date"),a(v,"name","start_time"),a(v,"id","start_time"),a(v,"min",t[5].toISOString().split("T")[0]),a(v,"max",t[4].toISOString().split("T")[0]),a(v,"class","svelte-1mrr17l"),a(M,"for","filter_message"),a(M,"class","svelte-1mrr17l"),a(d,"type","text"),a(d,"name","message"),a(d,"id","filter_message"),a(d,"placeholder","Find logs"),a(d,"class","svelte-1mrr17l"),a(m,"class","label svelte-1mrr17l"),a(P,"type","submit"),a(P,"class","button svelte-1mrr17l"),a(L,"class","search svelte-1mrr17l"),a(r,"action",""),a(r,"id","filters"),a(r,"class","svelte-1mrr17l"),a(f,"class","filters svelte-1mrr17l"),a(O,"class","svelte-1mrr17l"),a(y,"class","svelte-1mrr17l"),a(B,"class","content svelte-1mrr17l"),a(H,"for","page"),a(z,"class","info svelte-1mrr17l"),a(z,"title",re=t[3].logsv2.total+" logs total"),a(R,"class","pagination svelte-1mrr17l"),a(s,"class","container svelte-1mrr17l"),a(e,"class","page svelte-1mrr17l")},m(o,$){_e(o,i,$),_e(o,e,$),n(e,s),n(s,f),n(f,r),n(r,g),n(r,k),n(r,v),ie(v,t[2].start_time),n(r,T),n(r,L),n(L,M),be(S,M,null),n(L,D),n(L,d),ie(d,t[2].message),n(L,N),n(L,P),n(P,m),n(P,h),be(u,P,null),t[11](r),n(s,G),n(s,B),n(B,y),n(y,O),n(y,J),I&&I.m(y,null),n(s,Q),n(s,R),n(R,H),n(R,ce),be(U,R,null),n(R,he),n(R,z),n(z,le),n(e,ge),b&&b.m(e,null),V=!0,ve||(Pe=[me(v,"input",t[8]),me(v,"input",t[9]),me(d,"input",t[10]),me(r,"submit",t[12])],ve=!0)},p(o,[$]){var F;(!V||$&8)&&l!==(l="Logs"+((F=o[3].online)!=null&&F.MPKIT_URL?": "+o[3].online.MPKIT_URL.replace("https://",""):""))&&(Le.title=l),$&4&&ie(v,o[2].start_time),$&4&&d.value!==o[2].message&&ie(d,o[2].message),o[3].logsv2.hits?I?I.p(o,$):(I=Re(o),I.c(),I.m(y,null)):I&&(I.d(1),I=null);const K={};$&8&&(K.max=Math.ceil(o[3].logsv2.total/o[3].logsv2.size)||20),!pe&&$&4&&(pe=!0,K.value=o[2].page,Ge(()=>pe=!1)),U.$set(K),(!V||$&8)&&te!==(te=(Math.ceil(o[3].logsv2.total/o[3].logsv2.size)||1)+"")&&fe(le,te),(!V||$&8&&re!==(re=o[3].logsv2.total+" logs total"))&&a(z,"title",re),o[0].params.id?b?(b.p(o,$),$&1&&j(b,1)):(b=qe(o),b.c(),j(b,1),b.m(e,null)):b&&(st(),x(b,1,1,()=>{b=null}),Je())},i(o){V||(j(S.$$.fragment,o),j(u.$$.fragment,o),j(U.$$.fragment,o),j(b),V=!0)},o(o){x(S.$$.fragment,o),x(u.$$.fragment,o),x(U.$$.fragment,o),x(b),V=!1},d(o){o&&(p(i),p(e)),de(S),de(u),t[11](null),I&&I.d(),de(U),b&&b.d(),ve=!1,je(Pe)}}}function mt(t,l,i){let e,s;we(t,ye,m=>i(3,e=m)),we(t,rt,m=>i(0,s=m));let{$$slots:f={},$$scope:r}=l,g;const w=new Date,k=1e3*60*60*24,v=new Date(w-k*3);let T={page:1,start_time:w.toISOString().split("T")[0],...Object.fromEntries(s.url.searchParams)};function L(){T.start_time=this.value,i(2,T)}const M=()=>g.requestSubmit();function S(){T.message=this.value,i(2,T)}function D(m){Be[m?"unshift":"push"](()=>{g=m,i(1,g)})}const d=async m=>{var q;((q=m.submitter)==null?void 0:q.dataset.action)!=="numberIncrease"&&(m.preventDefault(),i(2,T.page=1,T),await tt(),lt(document.location.pathname+"?"+new URLSearchParams(new FormData(m.target)).toString()))};function N(m){t.$$.not_equal(T.page,m)&&(T.page=m,i(2,T))}const P=m=>{g.requestSubmit(m.detail.submitter)};return t.$$set=m=>{"$$scope"in m&&i(6,r=m.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&nt.get(Object.fromEntries(s.url.searchParams)).then(m=>Ye(ye,e.logsv2=m,e))},[s,g,T,e,w,v,r,f,L,M,S,D,d,N,P]}class Et extends ze{constructor(l){super(),Ke(this,l,mt,it,He,{})}}export{Et as component};
