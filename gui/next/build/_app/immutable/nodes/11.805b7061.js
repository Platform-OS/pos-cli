import{s as Ae,a as F,f as h,l as pe,J as Ue,d as $,c as O,g as p,h as A,r as ne,m as ve,j as s,i as ue,u as n,K as we,x as ee,R as be,N as Be,y as Fe,v as Me,A as qe,w as Y,n as Ce,B as He}from"../chunks/scheduler.a497d5ec.js";import{S as Pe,i as Re,b as fe,d as ce,m as de,a as R,t as G,c as Te,e as me,j as Ve,g as ye}from"../chunks/index.ca999c64.js";import{e as Ne}from"../chunks/each.1577bad0.js";import{f as je}from"../chunks/index.13972ea2.js";import{g as he}from"../chunks/graphql.989a3e2b.js";import{s as J}from"../chunks/state.59162fba.js";import{I as _e}from"../chunks/Icon.93862610.js";const se={get:()=>he({query:`
      query {
        constants(
          per_page: 100
        ) {
          results {
            name,
            value,
            updated_at
          }
        }
      }`}).then(t=>t.constants.results),edit:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_set(name: "${e.name}", value: "${e.value}"){
          name,
          value
        }
      }`;return he({query:t})},delete:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_unset(name: "${e.name}"){
          name
        }
      }
    `;return he({query:t})}};function Se(e,t,l){const c=e.slice();return c[13]=t[l],c[14]=t,c[15]=l,c}function ke(e){let t,l,c="Clear filter",d,f,w,S,E;return f=new _e({props:{icon:"x",size:"12"}}),{c(){t=h("button"),l=h("span"),l.textContent=c,d=F(),fe(f.$$.fragment),this.h()},l(y){t=p(y,"BUTTON",{class:!0});var C=A(t);l=p(C,"SPAN",{class:!0,"data-svelte-h":!0}),ne(l)!=="svelte-1bu6mgu"&&(l.textContent=c),d=O(C),ce(f.$$.fragment,C),C.forEach($),this.h()},h(){s(l,"class","label svelte-9flr1b"),s(t,"class","clearFilter svelte-9flr1b")},m(y,C){ue(y,t,C),n(t,l),n(t,d),de(f,t,null),w=!0,S||(E=ee(t,"click",e[8]),S=!0)},p:qe,i(y){w||(R(f.$$.fragment,y),w=!0)},o(y){G(f.$$.fragment,y),w=!1},d(y){y&&$(t),me(f),S=!1,E()}}}function Le(e){let t,l,c,d,f,w,S,E="Delete constant",y,C,q,m,k,V=e[13].name+"",j,a,b,v,B,Q,D,N,M,H,K,te,o,U,u=e[13].exposed?"Hide value":"Show value",le,r,_,i,z,L,ae="Save",P,X,T,Z,ge;C=new _e({props:{icon:"x",size:"14"}});function Oe(){return e[10](e[13],e[14],e[15])}_=new _e({props:{icon:e[13].exposed?"eyeStriked":"eye"}});function De(){return e[11](e[13],e[14],e[15])}function Ie(...I){return e[12](e[15],...I)}return{c(){t=h("li"),l=h("form"),c=h("input"),f=F(),w=h("button"),S=h("span"),S.textContent=E,y=F(),fe(C.$$.fragment),q=F(),m=h("form"),k=h("label"),j=pe(V),b=F(),v=h("input"),Q=F(),D=h("fieldset"),N=h("input"),te=F(),o=h("button"),U=h("span"),le=pe(u),r=F(),fe(_.$$.fragment),z=F(),L=h("button"),L.textContent=ae,P=F(),this.h()},l(I){t=p(I,"LI",{class:!0});var g=A(t);l=p(g,"FORM",{class:!0});var x=A(l);c=p(x,"INPUT",{type:!0,name:!0,class:!0}),f=O(x),w=p(x,"BUTTON",{type:!0,title:!0,class:!0});var re=A(w);S=p(re,"SPAN",{class:!0,"data-svelte-h":!0}),ne(S)!=="svelte-1p7u8ms"&&(S.textContent=E),y=O(re),ce(C.$$.fragment,re),re.forEach($),x.forEach($),q=O(g),m=p(g,"FORM",{class:!0});var W=A(m);k=p(W,"LABEL",{for:!0,class:!0});var Ee=A(k);j=ve(Ee,V),Ee.forEach($),b=O(W),v=p(W,"INPUT",{type:!0,name:!0,class:!0}),Q=O(W),D=p(W,"FIELDSET",{class:!0});var oe=A(D);N=p(oe,"INPUT",{name:!0,id:!0,class:!0}),te=O(oe),o=p(oe,"BUTTON",{type:!0,class:!0,title:!0});var ie=A(o);U=p(ie,"SPAN",{class:!0});var $e=A(U);le=ve($e,u),$e.forEach($),r=O(ie),ce(_.$$.fragment,ie),ie.forEach($),oe.forEach($),z=O(W),L=p(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ne(L)!=="svelte-1g3xn8h"&&(L.textContent=ae),W.forEach($),P=O(g),g.forEach($),this.h()},h(){s(c,"type","hidden"),s(c,"name","name"),c.value=d=e[13].name,s(c,"class","svelte-9flr1b"),s(S,"class","label svelte-9flr1b"),s(w,"type","submit"),s(w,"title","Delete constant"),s(w,"class","svelte-9flr1b"),s(l,"class","delete svelte-9flr1b"),s(k,"for",a=e[13].name),s(k,"class","svelte-9flr1b"),s(v,"type","hidden"),s(v,"name","name"),v.value=B=e[13].name,s(v,"class","svelte-9flr1b"),N.disabled=M=!e[13].exposed,s(N,"name","value"),N.value=H=e[13].value,s(N,"id",K=e[13].name),s(N,"class","svelte-9flr1b"),Y(N,"exposed",e[13].exposed),s(U,"class","label svelte-9flr1b"),s(o,"type","button"),s(o,"class","toggleExposition svelte-9flr1b"),s(o,"title",i=e[13].exposed?"Hide value":"Show value"),s(D,"class","svelte-9flr1b"),s(L,"type","submit"),s(L,"class","button svelte-9flr1b"),Y(L,"needed",e[1][e[15]].changed),s(m,"class","edit svelte-9flr1b"),s(t,"class","svelte-9flr1b"),Y(t,"hidden",e[0]&&e[3](e[13])),Y(t,"highlighted",e[2].highlighted.constant===e[13].name)},m(I,g){ue(I,t,g),n(t,l),n(l,c),n(l,f),n(l,w),n(w,S),n(w,y),de(C,w,null),n(t,q),n(t,m),n(m,k),n(k,j),n(m,b),n(m,v),n(m,Q),n(m,D),n(D,N),n(D,te),n(D,o),n(o,U),n(U,le),n(o,r),de(_,o,null),n(m,z),n(m,L),n(t,P),T=!0,Z||(ge=[ee(l,"submit",be(e[9])),ee(N,"input",Oe),ee(o,"click",De),ee(m,"submit",be(Ie))],Z=!0)},p(I,g){e=I,(!T||g&2&&d!==(d=e[13].name))&&(c.value=d),(!T||g&2)&&V!==(V=e[13].name+"")&&Ce(j,V),(!T||g&2&&a!==(a=e[13].name))&&s(k,"for",a),(!T||g&2&&B!==(B=e[13].name))&&(v.value=B),(!T||g&2&&M!==(M=!e[13].exposed))&&(N.disabled=M),(!T||g&2&&H!==(H=e[13].value)&&N.value!==H)&&(N.value=H),(!T||g&2&&K!==(K=e[13].name))&&s(N,"id",K),(!T||g&2)&&Y(N,"exposed",e[13].exposed),(!T||g&2)&&u!==(u=e[13].exposed?"Hide value":"Show value")&&Ce(le,u);const x={};g&2&&(x.icon=e[13].exposed?"eyeStriked":"eye"),_.$set(x),(!T||g&2&&i!==(i=e[13].exposed?"Hide value":"Show value"))&&s(o,"title",i),(!T||g&2)&&Y(L,"needed",e[1][e[15]].changed),(!T||g&11)&&Y(t,"hidden",e[0]&&e[3](e[13])),(!T||g&6)&&Y(t,"highlighted",e[2].highlighted.constant===e[13].name)},i(I){T||(R(C.$$.fragment,I),R(_.$$.fragment,I),I&&(X||He(()=>{X=Ve(t,je,{duration:100,delay:10*e[15]}),X.start()})),T=!0)},o(I){G(C.$$.fragment,I),G(_.$$.fragment,I),T=!1},d(I){I&&$(t),me(C),me(_),Z=!1,Fe(ge)}}}function ze(e){let t,l,c,d,f,w="Find:",S,E,y,C,q,m,k,V='<label for="newName" class="svelte-9flr1b">Name</label> <input type="text" name="name" id="newName" placeholder="MY_NEW_CONSTANT" class="svelte-9flr1b"/>',j,a,b='<label for="newValue" class="svelte-9flr1b">Value</label> <input type="text" name="value" id="newValue" class="svelte-9flr1b"/>',v,B,Q,D,N,M,H,K,te,o=e[0]&&ke(e);D=new _e({props:{icon:"arrowRight"}});let U=Ne(e[1]),u=[];for(let r=0;r<U.length;r+=1)u[r]=Le(Se(e,U,r));const le=r=>G(u[r],1,1,()=>{u[r]=null});return{c(){t=F(),l=h("div"),c=h("nav"),d=h("form"),f=h("label"),f.textContent=w,S=F(),E=h("input"),y=F(),o&&o.c(),C=F(),q=h("section"),m=h("form"),k=h("fieldset"),k.innerHTML=V,j=F(),a=h("fieldset"),a.innerHTML=b,v=F(),B=h("button"),Q=pe(`Add
        `),fe(D.$$.fragment),N=F(),M=h("ul");for(let r=0;r<u.length;r+=1)u[r].c();this.h()},l(r){Ue("svelte-147nas7",document.head).forEach($),t=O(r),l=p(r,"DIV",{class:!0});var i=A(l);c=p(i,"NAV",{class:!0});var z=A(c);d=p(z,"FORM",{});var L=A(d);f=p(L,"LABEL",{for:!0,"data-svelte-h":!0}),ne(f)!=="svelte-1otrvr9"&&(f.textContent=w),S=O(L),E=p(L,"INPUT",{type:!0,id:!0,class:!0}),y=O(L),o&&o.l(L),L.forEach($),z.forEach($),C=O(i),q=p(i,"SECTION",{class:!0});var ae=A(q);m=p(ae,"FORM",{class:!0});var P=A(m);k=p(P,"FIELDSET",{class:!0,"data-svelte-h":!0}),ne(k)!=="svelte-1pelkcv"&&(k.innerHTML=V),j=O(P),a=p(P,"FIELDSET",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-t20vqf"&&(a.innerHTML=b),v=O(P),B=p(P,"BUTTON",{class:!0});var X=A(B);Q=ve(X,`Add
        `),ce(D.$$.fragment,X),X.forEach($),P.forEach($),ae.forEach($),N=O(i),M=p(i,"UL",{class:!0});var T=A(M);for(let Z=0;Z<u.length;Z+=1)u[Z].l(T);T.forEach($),i.forEach($),this.h()},h(){document.title="Constants | platformOS",s(f,"for","filter"),s(E,"type","text"),s(E,"id","filter"),E.autofocus=!0,s(E,"class","svelte-9flr1b"),s(c,"class","svelte-9flr1b"),s(k,"class","svelte-9flr1b"),s(a,"class","svelte-9flr1b"),s(B,"class","button svelte-9flr1b"),s(m,"class","svelte-9flr1b"),s(q,"class","create svelte-9flr1b"),s(M,"class","svelte-9flr1b"),s(l,"class","container")},m(r,_){ue(r,t,_),ue(r,l,_),n(l,c),n(c,d),n(d,f),n(d,S),n(d,E),we(E,e[0]),n(d,y),o&&o.m(d,null),n(l,C),n(l,q),n(q,m),n(m,k),n(m,j),n(m,a),n(m,v),n(m,B),n(B,Q),de(D,B,null),n(l,N),n(l,M);for(let i=0;i<u.length;i+=1)u[i]&&u[i].m(M,null);H=!0,E.focus(),K||(te=[ee(E,"input",e[7]),ee(m,"submit",be(e[6]))],K=!0)},p(r,[_]){if(_&1&&E.value!==r[0]&&we(E,r[0]),r[0]?o?(o.p(r,_),_&1&&R(o,1)):(o=ke(r),o.c(),R(o,1),o.m(d,null)):o&&(ye(),G(o,1,1,()=>{o=null}),Te()),_&63){U=Ne(r[1]);let i;for(i=0;i<U.length;i+=1){const z=Se(r,U,i);u[i]?(u[i].p(z,_),R(u[i],1)):(u[i]=Le(z),u[i].c(),R(u[i],1),u[i].m(M,null))}for(ye(),i=U.length;i<u.length;i+=1)le(i);Te()}},i(r){if(!H){R(o),R(D.$$.fragment,r);for(let _=0;_<U.length;_+=1)R(u[_]);H=!0}},o(r){G(o),G(D.$$.fragment,r),u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)G(u[_]);H=!1},d(r){r&&($(t),$(l)),o&&o.d(),me(D),Be(u,r),K=!1,Fe(te)}}}function Je(e,t,l){let c;Me(e,J,a=>l(2,c=a));let d="",f=[];(async()=>await se.get())().then(a=>{l(1,f=a)});const w=a=>a.name.toLowerCase().indexOf(d.toLowerCase())===-1&&a.value.toLowerCase().indexOf(d.toLowerCase())===-1,S=async(a,b)=>{a.preventDefault();const v=await se.edit(new FormData(a.target));v.errors?J.notification.create("error",`Failed to update ${v.constant_set.name} constant`):(l(1,f[b].changed=!1,f),J.highlight("constant",v.constant_set.name),J.notification.create("success",`Constant ${v.constant_set.name} updated`))},E=async a=>{if(a.preventDefault(),confirm("Are you sure you want to delete this constant?")){const b=await se.delete(new FormData(a.target));b.errors?J.notification.create("success",`Failed to delete ${b.constant_unset.name} constant`):(J.notification.create("success",`Constant ${b.constant_unset.name} deleted`),await se.get().then(v=>{l(1,f=v)}))}},y=async a=>{a.preventDefault();const b=await se.edit(new FormData(a.target));b.errors?J.notification.create("error",`Failed to create ${b.constant_set.name} constant`):(a.target.reset(),J.notification.create("success",`Constant ${b.constant_set.name} created`),await se.get().then(v=>{l(1,f=v),J.highlight("constant",b.constant_set.name)}))};function C(){d=this.value,l(0,d)}return[d,f,c,w,S,E,y,C,()=>l(0,d=""),a=>E(a),(a,b,v)=>l(1,b[v].changed=!0,f),(a,b,v)=>l(1,b[v].exposed=!a.exposed,f),(a,b)=>S(b,a)]}class xe extends Pe{constructor(t){super(),Re(this,t,Je,ze,Ae,{})}}export{xe as component};
