import{S as ne,i as re,s as oe,k as g,a as A,q as R,l as k,m as S,c as N,r as P,h as p,n as v,b as C,E as h,Y as x,H as z,v as fe,d as T,f as ue,g as D,_ as de,I as _e,F as ee,J as me,V as he,o as ie,G as F,u as pe,L as be,a2 as ve,K as J,w as te,y as M,z as O,A as Q,B as Y,Q as ge,R as ke,T as Ee,U as ye}from"../chunks/index.d0f8a730.js";import{f as Se}from"../chunks/index.b4e343af.js";import{p as Ie}from"../chunks/stores.51905711.js";import{s as se}from"../chunks/state.c2a70a8a.js";import{t as we}from"../chunks/table.badb5814.js";import{I as ce}from"../chunks/Icon.1de0c66c.js";function le(i,e,t){const a=i.slice();return a[15]=e[t],a[17]=t,a}function De(i){let e,t,a;return t=new ce({props:{icon:"search",size:"18"}}),{c(){e=g("i"),M(t.$$.fragment),this.h()},l(o){e=k(o,"I",{class:!0});var l=S(e);O(t.$$.fragment,l),l.forEach(p),this.h()},h(){v(e,"class","svelte-12fj0m9")},m(o,l){C(o,e,l),Q(t,e,null),a=!0},p:J,i(o){a||(D(t.$$.fragment,o),a=!0)},o(o){T(t.$$.fragment,o),a=!1},d(o){o&&p(e),Y(t)}}}function $e(i){let e,t,a,o,l,d,s,n;return l=new ce({props:{icon:"x",size:"18"}}),{c(){e=g("button"),t=g("span"),a=R("Reset filter"),o=A(),M(l.$$.fragment),this.h()},l(r){e=k(r,"BUTTON",{class:!0});var b=S(e);t=k(b,"SPAN",{class:!0});var E=S(t);a=P(E,"Reset filter"),E.forEach(p),o=N(b),O(l.$$.fragment,b),b.forEach(p),this.h()},h(){v(t,"class","label"),v(e,"class","svelte-12fj0m9")},m(r,b){C(r,e,b),h(e,t),h(t,a),h(e,o),Q(l,e,null),d=!0,s||(n=z(e,"click",i[8]),s=!0)},p:J,i(r){d||(D(l.$$.fragment,r),d=!0)},o(r){T(l.$$.fragment,r),d=!1},d(r){r&&p(e),Y(l),s=!1,n()}}}function ae(i){let e,t,a=i[15].name+"",o,l,d,s;return{c(){e=g("li"),t=g("a"),o=R(a),d=A(),this.h()},l(n){e=k(n,"LI",{});var r=S(e);t=k(r,"A",{href:!0,class:!0});var b=S(t);o=P(b,a),b.forEach(p),d=N(r),r.forEach(p),this.h()},h(){v(t,"href",l="/database/table/"+i[15].id),v(t,"class","svelte-12fj0m9"),F(t,"active",i[15].id===i[4].params.id)},m(n,r){C(n,e,r),h(e,t),h(t,o),h(e,d)},p(n,r){r&1&&a!==(a=n[15].name+"")&&pe(o,a),r&1&&l!==(l="/database/table/"+n[15].id)&&v(t,"href",l),r&17&&F(t,"active",n[15].id===n[4].params.id)},i(n){s||be(()=>{s=ve(e,Se,{duration:100,delay:7*i[17]}),s.start()})},o:J,d(n){n&&p(e)}}}function je(i){let e,t,a,o,l,d,s,n,r,b,E,V,L,$,j,q,H,c;const U=[$e,De],I=[];function B(f,m){return f[3]?0:1}o=B(i),l=I[o]=U[o](i);let w=i[0],_=[];for(let f=0;f<w.length;f+=1)_[f]=ae(le(i,w,f));return{c(){e=g("aside"),t=g("div"),a=g("div"),l.c(),d=A(),s=g("input"),n=A(),r=g("kbd"),b=R("Ctrl"),E=g("kbd"),V=R("K"),L=A(),$=g("nav"),j=g("ul");for(let f=0;f<_.length;f+=1)_[f].c();this.h()},l(f){e=k(f,"ASIDE",{class:!0});var m=S(e);t=k(m,"DIV",{class:!0});var y=S(t);a=k(y,"DIV",{class:!0});var u=S(a);l.l(u),d=N(u),s=k(u,"INPUT",{type:!0,placeholder:!0,class:!0}),n=N(u),r=k(u,"KBD",{class:!0});var K=S(r);b=P(K,"Ctrl"),K.forEach(p),E=k(u,"KBD",{class:!0});var W=S(E);V=P(W,"K"),W.forEach(p),u.forEach(p),y.forEach(p),L=N(m),$=k(m,"NAV",{class:!0});var X=S($);j=k(X,"UL",{});var Z=S(j);for(let G=0;G<_.length;G+=1)_[G].l(Z);Z.forEach(p),X.forEach(p),m.forEach(p),this.h()},h(){v(s,"type","text"),v(s,"placeholder","Search tables"),v(s,"class","svelte-12fj0m9"),v(r,"class","svelte-12fj0m9"),v(E,"class","svelte-12fj0m9"),v(a,"class","filter svelte-12fj0m9"),v(t,"class","filter-container svelte-12fj0m9"),v($,"class","svelte-12fj0m9"),v(e,"class","svelte-12fj0m9")},m(f,m){C(f,e,m),h(e,t),h(t,a),I[o].m(a,null),h(a,d),h(a,s),i[9](s),x(s,i[3]),h(a,n),h(a,r),h(r,b),h(a,E),h(E,V),h(e,L),h(e,$),h($,j);for(let y=0;y<_.length;y+=1)_[y]&&_[y].m(j,null);i[11](e),q=!0,H||(c=[z(s,"input",i[10]),z(s,"input",i[5]),z(s,"keydown",i[6]),z(e,"keydown",i[7])],H=!0)},p(f,[m]){let y=o;if(o=B(f),o===y?I[o].p(f,m):(fe(),T(I[y],1,1,()=>{I[y]=null}),ue(),l=I[o],l?l.p(f,m):(l=I[o]=U[o](f),l.c()),D(l,1),l.m(a,d)),m&8&&s.value!==f[3]&&x(s,f[3]),m&17){w=f[0];let u;for(u=0;u<w.length;u+=1){const K=le(f,w,u);_[u]?(_[u].p(K,m),D(_[u],1)):(_[u]=ae(K),_[u].c(),D(_[u],1),_[u].m(j,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=w.length}},i(f){if(!q){D(l);for(let m=0;m<w.length;m+=1)D(_[m]);q=!0}},o(f){T(l),q=!1},d(f){f&&p(e),I[o].d(),i[9](null),de(_,f),i[11](null),H=!1,_e(c)}}}function Ke(i,e,t){let a,o;ee(i,Ie,c=>t(4,a=c)),ee(i,se,c=>t(13,o=c));let l=o.tables,d=l,s,n,r;(async()=>await we.get())().then(c=>{l=c,t(0,d=c),me(se,o.tables=c,o)});const b=he();ie(async()=>{n.focus(),document.addEventListener("keydown",c=>{c.ctrlKey&&c.key==="k"&&(c.preventDefault(),b("sidebarNeeded"),n.focus(),n.select())}),a.data.table&&s.querySelector(`[href$="${a.data.table.id}"]`).scrollIntoView({behavior:"smooth",block:"center"})});const E=()=>{r?t(0,d=l.filter(c=>c.name.includes(r))):t(0,d=l)},V=c=>{c.key==="Escape"&&(t(3,r=""),E()),c.key==="Enter"&&s.querySelector("li:first-child a").click()},L=c=>{var U,I,B,w,_,f,m,y,u,K;c.key==="ArrowDown"&&s.contains(document.activeElement)&&(c.preventDefault(),document.activeElement.matches("input")?(U=s.querySelector("a"))==null||U.focus():(_=(w=(B=(I=document.activeElement)==null?void 0:I.parentElement)==null?void 0:B.nextElementSibling)==null?void 0:w.querySelector("a"))==null||_.focus()),c.key==="ArrowUp"&&s.contains(document.activeElement)&&(c.preventDefault(),(f=document.activeElement)!=null&&f.matches("li:first-child a")?n.focus():(K=(u=(y=(m=document.activeElement)==null?void 0:m.parentElement)==null?void 0:y.previousElementSibling)==null?void 0:u.querySelector("a"))==null||K.focus()),c.key==="Escape"&&s.contains(document.activeElement)&&(n.focus(),t(3,r=""),E())},$=()=>{t(3,r=null),E()};function j(c){te[c?"unshift":"push"](()=>{n=c,t(2,n)})}function q(){r=this.value,t(3,r)}function H(c){te[c?"unshift":"push"](()=>{s=c,t(1,s)})}return[d,s,n,r,a,E,V,L,$,j,q,H]}class qe extends ne{constructor(e){super(),re(this,e,Ke,je,oe,{})}}function Ae(i){let e,t,a,o,l;a=new qe({}),a.$on("sidebarNeeded",i[3]);const d=i[2].default,s=ge(d,i,i[1],null);return{c(){e=g("div"),t=g("div"),M(a.$$.fragment),o=A(),s&&s.c(),this.h()},l(n){e=k(n,"DIV",{class:!0});var r=S(e);t=k(r,"DIV",{class:!0});var b=S(t);O(a.$$.fragment,b),b.forEach(p),o=N(r),s&&s.l(r),r.forEach(p),this.h()},h(){v(t,"class","tables-container svelte-s8xmdg"),v(e,"class","container svelte-s8xmdg"),F(e,"tablesHidden",i[0])},m(n,r){C(n,e,r),h(e,t),Q(a,t,null),h(e,o),s&&s.m(e,null),l=!0},p(n,[r]){s&&s.p&&(!l||r&2)&&ke(s,d,n,n[1],l?ye(d,n[1],r,null):Ee(n[1]),null),(!l||r&1)&&F(e,"tablesHidden",n[0])},i(n){l||(D(a.$$.fragment,n),D(s,n),l=!0)},o(n){T(a.$$.fragment,n),T(s,n),l=!1},d(n){n&&p(e),Y(a),s&&s.d(n)}}}function Ne(i,e,t){let{$$slots:a={},$$scope:o}=e,l=!1;ie(()=>{document.addEventListener("keydown",s=>{!s.target.matches("input, textarea")&&s.key==="b"&&(t(0,l=!l),localStorage.tablesHidden=l)})});const d=()=>t(0,l=!1);return i.$$set=s=>{"$$scope"in s&&t(1,o=s.$$scope)},[l,o,a,d]}class ze extends ne{constructor(e){super(),re(this,e,Ne,Ae,oe,{})}}export{ze as component};
