import{s as St,k as Dt,v as Rt,i as Pt,f as _,e as d,t as c,a as Ft,c as i,b as m,z as v,d as f,g as Nt,y as V,E as st,h as s,j as w,C as Tt}from"../chunks/scheduler.CatAnzbk.js";import{S as Lt,i as yt,c as At,b as It,m as Ut,t as Mt,a as jt,e as zt}from"../chunks/index.N6gnbVk9.js";import{p as Gt}from"../chunks/stores.1wDFbM4f.js";import{n as Ht}from"../chunks/network.cqR_alpd.js";import{s as it}from"../chunks/state.5gKcL4gY.js";import{A as Bt}from"../chunks/Aside.Lf2QZhoZ.js";const $t={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};function Et(n){let t,a,e="Time",r,u=new Date(n[1].network._timestamp/1e3).toLocaleString()+"",h,k,q="Request path",C,g,N=n[1].network.http_request_path+"",K,J,b,_t="Request method",L,y=n[1].network.http_request_method+"",Q,D,ut="Request protocol",A,I=n[1].network.http_request_protocol+"",W,R,pt="Status",p,U=n[1].network.lb_status_code+"",X,nt,M=$t[n[1].network.lb_status_code]+"",Y,T,ct="Client IP",j,z=n[1].network.client+"",Z,$,ft="Client user agent",G,H=n[1].network.user_agent+"",x,E,ht="Execution duration",P,B=parseFloat(n[1].network.request_processing_time)+parseFloat(n[1].network.target_processing_time)+"",tt,at,S,mt="Response size",F,O=parseInt(n[1].network.sent_bytes)+"",et,rt;return{c(){t=d("dl"),a=d("dt"),a.textContent=e,r=d("dd"),h=c(u),k=d("dt"),k.textContent=q,C=d("dd"),g=d("a"),K=c(N),b=d("dt"),b.textContent=_t,L=d("dd"),Q=c(y),D=d("dt"),D.textContent=ut,A=d("dd"),W=c(I),R=d("dt"),R.textContent=pt,p=d("dd"),X=c(U),nt=Ft(),Y=c(M),T=d("dt"),T.textContent=ct,j=d("dd"),Z=c(z),$=d("dt"),$.textContent=ft,G=d("dd"),x=c(H),E=d("dt"),E.textContent=ht,P=d("dd"),tt=c(B),at=c("s"),S=d("dt"),S.textContent=mt,F=d("dd"),et=c(O),rt=c(" bytes"),this.h()},l(l){t=i(l,"DL",{class:!0});var o=m(t);a=i(o,"DT",{"data-svelte-h":!0}),v(a)!=="svelte-k4tc9n"&&(a.textContent=e),r=i(o,"DD",{});var wt=m(r);h=f(wt,u),wt.forEach(_),k=i(o,"DT",{"data-svelte-h":!0}),v(k)!=="svelte-1j5pznm"&&(k.textContent=q),C=i(o,"DD",{});var kt=m(C);g=i(kt,"A",{href:!0,class:!0});var vt=m(g);K=f(vt,N),vt.forEach(_),kt.forEach(_),b=i(o,"DT",{"data-svelte-h":!0}),v(b)!=="svelte-1wn7isk"&&(b.textContent=_t),L=i(o,"DD",{});var gt=m(L);Q=f(gt,y),gt.forEach(_),D=i(o,"DT",{"data-svelte-h":!0}),v(D)!=="svelte-jgi2gh"&&(D.textContent=ut),A=i(o,"DD",{});var Ct=m(A);W=f(Ct,I),Ct.forEach(_),R=i(o,"DT",{"data-svelte-h":!0}),v(R)!=="svelte-1e9eis"&&(R.textContent=pt),p=i(o,"DD",{class:!0});var ot=m(p);X=f(ot,U),nt=Nt(ot),Y=f(ot,M),ot.forEach(_),T=i(o,"DT",{"data-svelte-h":!0}),v(T)!=="svelte-1rrvc96"&&(T.textContent=ct),j=i(o,"DD",{});var qt=m(j);Z=f(qt,z),qt.forEach(_),$=i(o,"DT",{"data-svelte-h":!0}),v($)!=="svelte-on2p8j"&&($.textContent=ft),G=i(o,"DD",{});var bt=m(G);x=f(bt,H),bt.forEach(_),E=i(o,"DT",{"data-svelte-h":!0}),v(E)!=="svelte-1abn46o"&&(E.textContent=ht),P=i(o,"DD",{});var lt=m(P);tt=f(lt,B),at=f(lt,"s"),lt.forEach(_),S=i(o,"DT",{"data-svelte-h":!0}),v(S)!=="svelte-jqr426"&&(S.textContent=mt),F=i(o,"DD",{});var dt=m(F);et=f(dt,O),rt=f(dt," bytes"),dt.forEach(_),o.forEach(_),this.h()},h(){V(g,"href",J=n[1].network.http_request_url),V(g,"class","svelte-1dp09g6"),V(p,"class","svelte-1dp09g6"),st(p,"success",n[1].network.lb_status_code>=200&&n[1].network.lb_status_code<300),st(p,"error",n[1].network.http_request_protocol.lb_status_code>=400&&n[1].network.http_request_protocol.lb_status_code<600),V(t,"class","definitions")},m(l,o){Pt(l,t,o),s(t,a),s(t,r),s(r,h),s(t,k),s(t,C),s(C,g),s(g,K),s(t,b),s(t,L),s(L,Q),s(t,D),s(t,A),s(A,W),s(t,R),s(t,p),s(p,X),s(p,nt),s(p,Y),s(t,T),s(t,j),s(j,Z),s(t,$),s(t,G),s(G,x),s(t,E),s(t,P),s(P,tt),s(P,at),s(t,S),s(t,F),s(F,et),s(F,rt)},p(l,o){o&2&&u!==(u=new Date(l[1].network._timestamp/1e3).toLocaleString()+"")&&w(h,u),o&2&&N!==(N=l[1].network.http_request_path+"")&&w(K,N),o&2&&J!==(J=l[1].network.http_request_url)&&V(g,"href",J),o&2&&y!==(y=l[1].network.http_request_method+"")&&w(Q,y),o&2&&I!==(I=l[1].network.http_request_protocol+"")&&w(W,I),o&2&&U!==(U=l[1].network.lb_status_code+"")&&w(X,U),o&2&&M!==(M=$t[l[1].network.lb_status_code]+"")&&w(Y,M),o&2&&st(p,"success",l[1].network.lb_status_code>=200&&l[1].network.lb_status_code<300),o&2&&st(p,"error",l[1].network.http_request_protocol.lb_status_code>=400&&l[1].network.http_request_protocol.lb_status_code<600),o&2&&z!==(z=l[1].network.client+"")&&w(Z,z),o&2&&H!==(H=l[1].network.user_agent+"")&&w(x,H),o&2&&B!==(B=parseFloat(l[1].network.request_processing_time)+parseFloat(l[1].network.target_processing_time)+"")&&w(tt,B),o&2&&O!==(O=parseInt(l[1].network.sent_bytes)+"")&&w(et,O)},d(l){l&&_(t)}}}function Ot(n){let t,a=n[1].network._timestamp&&Et(n);return{c(){a&&a.c(),t=Rt()},l(e){a&&a.l(e),t=Rt()},m(e,r){a&&a.m(e,r),Pt(e,t,r)},p(e,r){e[1].network._timestamp?a?a.p(e,r):(a=Et(e),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(e){e&&_(t),a&&a.d(e)}}}function Vt(n){let t,a;return t=new Bt({props:{title:n[1].network.lb_status_code?`<span class="log-detail-method">${n[1].network.http_request_method}</span> ${n[1].network.http_request_path}`:"Loading…",closeUrl:"/network?"+n[0].url.searchParams.toString(),$$slots:{default:[Ot]},$$scope:{ctx:n}}}),{c(){At(t.$$.fragment)},l(e){It(t.$$.fragment,e)},m(e,r){Ut(t,e,r),a=!0},p(e,[r]){const u={};r&2&&(u.title=e[1].network.lb_status_code?`<span class="log-detail-method">${e[1].network.http_request_method}</span> ${e[1].network.http_request_path}`:"Loading…"),r&1&&(u.closeUrl="/network?"+e[0].url.searchParams.toString()),r&10&&(u.$$scope={dirty:r,ctx:e}),t.$set(u)},i(e){a||(Mt(t.$$.fragment,e),a=!0)},o(e){jt(t.$$.fragment,e),a=!1},d(e){zt(t,e)}}}function Kt(n,t,a){let e,r;Dt(n,Gt,h=>a(0,e=h)),Dt(n,it,h=>a(1,r=h));const u=async()=>{var k;const h=(k=r.networks.hits)==null?void 0:k.find(q=>q._timestamp==e.params.id);if(h)Tt(it,r.network=h,r);else{const q={size:1,sql:`select * from requests where _timestamp = ${e.params.id}`};await Ht.get(q).then(C=>{Tt(it,r.network=C.hits[0],r)})}};return n.$$.update=()=>{n.$$.dirty&1&&e.params.id&&u()},[e,r]}class xt extends Lt{constructor(t){super(),yt(this,t,Kt,Vt,St,{})}}export{xt as component};
