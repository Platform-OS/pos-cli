import{s as Se,k as De,v as Re,i as Pe,f as _,e as d,t as c,a as Fe,c as i,b as m,z as k,d as f,g as Ne,y as O,E as ne,h as n,j as w,C as Te}from"../chunks/scheduler.CatAnzbk.js";import{S as Le,i as ye,c as Ae,b as Ie,m as Ue,t as Me,a as je,e as ze}from"../chunks/index.N6gnbVk9.js";import{p as Ge}from"../chunks/stores.ApwQDeyp.js";import{n as He}from"../chunks/network.cqR_alpd.js";import{s as ie}from"../chunks/state.5gKcL4gY.js";import{A as xe}from"../chunks/Aside.Lf2QZhoZ.js";const $e={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};function Ee(s){let e,a,t="Time",r,u=new Date(s[1].network._timestamp/1e3).toLocaleString()+"",h,v,q="Request path",C,g,N=s[1].network.http_request_path+"",V,K,b,_e="Request method",L,y=s[1].network.http_request_method+"",J,D,ue="Request protocol",A,I=s[1].network.http_request_protocol+"",Q,R,pe="Status",p,U=s[1].network.lb_status_code+"",W,se,M=$e[s[1].network.lb_status_code]+"",X,T,ce="Client IP",j,z=s[1].network.client+"",Y,$,fe="Client user agent",G,H=s[1].network.user_agent+"",Z,E,he="Execution duration",P,x=parseFloat(s[1].network.request_processing_time)+parseFloat(s[1].network.target_processing_time)+"",ee,ae,S,me="Response size",F,B=parseInt(s[1].network.sent_bytes)+"",te,re;return{c(){e=d("dl"),a=d("dt"),a.textContent=t,r=d("dd"),h=c(u),v=d("dt"),v.textContent=q,C=d("dd"),g=d("a"),V=c(N),b=d("dt"),b.textContent=_e,L=d("dd"),J=c(y),D=d("dt"),D.textContent=ue,A=d("dd"),Q=c(I),R=d("dt"),R.textContent=pe,p=d("dd"),W=c(U),se=Fe(),X=c(M),T=d("dt"),T.textContent=ce,j=d("dd"),Y=c(z),$=d("dt"),$.textContent=fe,G=d("dd"),Z=c(H),E=d("dt"),E.textContent=he,P=d("dd"),ee=c(x),ae=c("s"),S=d("dt"),S.textContent=me,F=d("dd"),te=c(B),re=c(" bytes"),this.h()},l(l){e=i(l,"DL",{class:!0});var o=m(e);a=i(o,"DT",{"data-svelte-h":!0}),k(a)!=="svelte-k4tc9n"&&(a.textContent=t),r=i(o,"DD",{});var we=m(r);h=f(we,u),we.forEach(_),v=i(o,"DT",{"data-svelte-h":!0}),k(v)!=="svelte-1j5pznm"&&(v.textContent=q),C=i(o,"DD",{});var ve=m(C);g=i(ve,"A",{href:!0,class:!0});var ke=m(g);V=f(ke,N),ke.forEach(_),ve.forEach(_),b=i(o,"DT",{"data-svelte-h":!0}),k(b)!=="svelte-1wn7isk"&&(b.textContent=_e),L=i(o,"DD",{});var ge=m(L);J=f(ge,y),ge.forEach(_),D=i(o,"DT",{"data-svelte-h":!0}),k(D)!=="svelte-jgi2gh"&&(D.textContent=ue),A=i(o,"DD",{});var Ce=m(A);Q=f(Ce,I),Ce.forEach(_),R=i(o,"DT",{"data-svelte-h":!0}),k(R)!=="svelte-1e9eis"&&(R.textContent=pe),p=i(o,"DD",{class:!0});var oe=m(p);W=f(oe,U),se=Ne(oe),X=f(oe,M),oe.forEach(_),T=i(o,"DT",{"data-svelte-h":!0}),k(T)!=="svelte-1rrvc96"&&(T.textContent=ce),j=i(o,"DD",{});var qe=m(j);Y=f(qe,z),qe.forEach(_),$=i(o,"DT",{"data-svelte-h":!0}),k($)!=="svelte-on2p8j"&&($.textContent=fe),G=i(o,"DD",{});var be=m(G);Z=f(be,H),be.forEach(_),E=i(o,"DT",{"data-svelte-h":!0}),k(E)!=="svelte-1abn46o"&&(E.textContent=he),P=i(o,"DD",{});var le=m(P);ee=f(le,x),ae=f(le,"s"),le.forEach(_),S=i(o,"DT",{"data-svelte-h":!0}),k(S)!=="svelte-jqr426"&&(S.textContent=me),F=i(o,"DD",{});var de=m(F);te=f(de,B),re=f(de," bytes"),de.forEach(_),o.forEach(_),this.h()},h(){O(g,"href",K=s[1].network.http_request_url),O(g,"class","svelte-1vnx1x6"),O(p,"class","svelte-1vnx1x6"),ne(p,"success",s[1].network.lb_status_code>=200&&s[1].network.lb_status_code<300),ne(p,"error",s[1].network.http_request_protocol.lb_status_code>=400&&s[1].network.http_request_protocol.lb_status_code<600),O(e,"class","definitions svelte-1vnx1x6")},m(l,o){Pe(l,e,o),n(e,a),n(e,r),n(r,h),n(e,v),n(e,C),n(C,g),n(g,V),n(e,b),n(e,L),n(L,J),n(e,D),n(e,A),n(A,Q),n(e,R),n(e,p),n(p,W),n(p,se),n(p,X),n(e,T),n(e,j),n(j,Y),n(e,$),n(e,G),n(G,Z),n(e,E),n(e,P),n(P,ee),n(P,ae),n(e,S),n(e,F),n(F,te),n(F,re)},p(l,o){o&2&&u!==(u=new Date(l[1].network._timestamp/1e3).toLocaleString()+"")&&w(h,u),o&2&&N!==(N=l[1].network.http_request_path+"")&&w(V,N),o&2&&K!==(K=l[1].network.http_request_url)&&O(g,"href",K),o&2&&y!==(y=l[1].network.http_request_method+"")&&w(J,y),o&2&&I!==(I=l[1].network.http_request_protocol+"")&&w(Q,I),o&2&&U!==(U=l[1].network.lb_status_code+"")&&w(W,U),o&2&&M!==(M=$e[l[1].network.lb_status_code]+"")&&w(X,M),o&2&&ne(p,"success",l[1].network.lb_status_code>=200&&l[1].network.lb_status_code<300),o&2&&ne(p,"error",l[1].network.http_request_protocol.lb_status_code>=400&&l[1].network.http_request_protocol.lb_status_code<600),o&2&&z!==(z=l[1].network.client+"")&&w(Y,z),o&2&&H!==(H=l[1].network.user_agent+"")&&w(Z,H),o&2&&x!==(x=parseFloat(l[1].network.request_processing_time)+parseFloat(l[1].network.target_processing_time)+"")&&w(ee,x),o&2&&B!==(B=parseInt(l[1].network.sent_bytes)+"")&&w(te,B)},d(l){l&&_(e)}}}function Be(s){let e,a=s[1].network._timestamp&&Ee(s);return{c(){a&&a.c(),e=Re()},l(t){a&&a.l(t),e=Re()},m(t,r){a&&a.m(t,r),Pe(t,e,r)},p(t,r){t[1].network._timestamp?a?a.p(t,r):(a=Ee(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},d(t){t&&_(e),a&&a.d(t)}}}function Oe(s){let e,a;return e=new xe({props:{title:s[1].network.lb_status_code?`<span class="log-detail-method">${s[1].network.http_request_method}</span> ${s[1].network.http_request_path}`:"Loading…",closeUrl:"/network?"+s[0].url.searchParams.toString(),$$slots:{default:[Be]},$$scope:{ctx:s}}}),{c(){Ae(e.$$.fragment)},l(t){Ie(e.$$.fragment,t)},m(t,r){Ue(e,t,r),a=!0},p(t,[r]){const u={};r&2&&(u.title=t[1].network.lb_status_code?`<span class="log-detail-method">${t[1].network.http_request_method}</span> ${t[1].network.http_request_path}`:"Loading…"),r&1&&(u.closeUrl="/network?"+t[0].url.searchParams.toString()),r&10&&(u.$$scope={dirty:r,ctx:t}),e.$set(u)},i(t){a||(Me(e.$$.fragment,t),a=!0)},o(t){je(e.$$.fragment,t),a=!1},d(t){ze(e,t)}}}function Ve(s,e,a){let t,r;De(s,Ge,h=>a(0,t=h)),De(s,ie,h=>a(1,r=h));const u=async()=>{var v;const h=(v=r.networks.hits)==null?void 0:v.find(q=>q._timestamp==t.params.id);if(h)Te(ie,r.network=h,r);else{const q={size:1,sql:`select * from requests where _timestamp = ${t.params.id}`};await He.get(q).then(C=>{Te(ie,r.network=C.hits[0],r)})}};return s.$$.update=()=>{s.$$.dirty&1&&t.params.id&&u()},[t,r]}class Ze extends Le{constructor(e){super(),ye(this,e,Ve,Oe,Se,{})}}export{Ze as component};
