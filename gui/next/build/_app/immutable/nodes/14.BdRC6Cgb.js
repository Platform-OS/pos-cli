import{s as Ze,e as g,c as $,b as I,f as h,i as A,C as le,N as _t,k as Pe,v as Ae,F as Ye,a as L,A as ne,g as F,y as _,B as re,I as dt,h as c,J as Xe,r as st,E as Fe,L as gt,z as rt,t as W,d as K,j as _e,n as Re,P as Ct,_ as ml,ah as jt,G as ke,K as yl,H as wl,a0 as kl,p as El,D as Tl,$ as Cl}from"../chunks/scheduler.CzbwTKXv.js";import{S as Ge,i as Qe,t as D,g as ge,a as j,e as $e,c as se,d as ie,m as oe,f as ue,h as Rt,b as Nl}from"../chunks/index.BeBfCTAL.js";import{g as Sl}from"../chunks/globals.D0QH3NT1.js";import{p as yt}from"../chunks/stores.BhCbWEGF.js";import{s as H}from"../chunks/state.Btpmmef7.js";import{g as ut}from"../chunks/graphql.BD1m7lx9.js";import{I as Se}from"../chunks/Icon.DUfcHp8p.js";import{e as Ee,u as Ol,o as Il}from"../chunks/each.DrgEO0Ub.js";import{t as Tt}from"../chunks/tryParseJSON.x4PJc0Qf.js";import{c as Dl,T as Ll}from"../chunks/Toggle.Dc7mhB-e.js";import{J as Fl}from"../chunks/JSONTree.CmdaGQdD.js";import{q as Pl}from"../chunks/index.iVSWiVfi.js";import{N as Al}from"../chunks/Number.QcFcFCqU.js";const jl={array:"value_array",boolean:"value_boolean",date:"value",datetime:"value",float:"value_float",integer:"value_int",string:"value",text:"value",upload:"value",json:"value_json"},bl={string:"String",integer:"Int",float:"Float",boolean:"Boolean",array:"[String!]",json:"JSONPayload",range:"RangeFilter"},Rl=(r=[])=>{let e="",l={},t="";const n={string:["array_contains","not_array_contains","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with","value"],int:["value_int","not_value_int"],float:["not_value_float","value_float"],bool:["exists","not_value_boolean","value_boolean"],range:["range"],array:["value_array","not_value_array","value_in","not_value_in","array_overlaps","not_array_overlaps"]};for(const a of r){if(!a.minFilterValue&&!a.maxFilterValue&&!a.value)break;let s="",i="";n.int.includes(a.operation)?(s="integer",i=parseInt(a.value)):n.float.includes(a.operation)?(s="float",i=parseFloat(a.value)):n.bool.includes(a.operation)?(s="boolean",i=a.value==="true"):n.range.includes(a.operation)?(s="range",i={},i[a.minFilter]=a.minFilterValue,i[a.maxFilter]=a.maxFilterValue):n.array.includes(a.operation)?(s="array",i=JSON.parse(a.value)):(s="string",i=a.value),a.name!=="id"&&(e+=`, $${a.name}: ${bl[s]||"String"}`,l[a.name]=i,t+=`{
        name: "${a.name}",
        ${a.operation}: $${a.name}
      }`)}return e.length&&(e=e.slice(2),e=`(${e})`),t=`
    properties: [${t}]
  `,{variablesDefinition:e,variables:l,propertiesFilter:t}},Ut=r=>{const e=r.entries();let l="",t={},n="",a={};function s(i,o){return o===""?null:i==="integer"?parseInt(o):i==="float"?parseFloat(o):i==="boolean"?o==="true":i==="array"||i==="json"?JSON.parse(o):o}for(const[i,o]of e)if(i.indexOf("[")>=0){let u=i.slice(0,i.indexOf("[")),d=i.slice(i.indexOf("[")+1,i.indexOf("]"));(a[u]??(a[u]={}))[d]=o}for(const i in a)l+=`, $${i}: ${bl[a[i].type]||"String"}`,t[i]=s(a[i].type,a[i].value),n+=`{ name: "${i}", ${jl[a[i].type]}: $${i} }`;return l.length&&(l=l.slice(2),l=`(${l})`),{variablesDefinition:l,variables:t,properties:n}},Ne={get:r=>{var d,f,v;const l={...{deleted:!1,filters:{page:1}},...r},t=l.table?`table_id: { value: ${l.table} }`:"",n=(f=(d=l.filters)==null?void 0:d.attributes)==null?void 0:f.findIndex(b=>b.name==="id");let a="";n>=0&&l.filters.attributes[n].value&&(a=`id: { ${l.filters.attributes[n].operation}: ${l.filters.attributes[n].value} }`);let s="";l.sort?l.sort.by==="id"||l.sort.by==="created_at"||l.sort.by==="updated_at"?s=`${l.sort.by}: { order: ${l.sort.order} }`:s=`properties: { name: "${l.sort.by}", order: ${l.sort.order} }`:s="created_at: { order: DESC }";const i=l.deleted==="true"?"deleted_at: { exists: true }":"",o=Rl((v=l.filters)==null?void 0:v.attributes),u=`
      query${o.variablesDefinition} {
        records(
          page: ${l.filters.page}
          per_page: 20,
          sort: { ${s} },
          filter: {
            ${t}
            ${a}
            ${i}
            ${o.propertiesFilter}
          }
        ) {
          current_page
          total_pages
          results {
            id
            created_at
            updated_at
            deleted_at
            properties
          }
        }
      }`;return ut({query:u,variables:o.variables}).then(b=>{H.data("records",b.records)})},create:r=>{const l=Object.fromEntries(r.properties.entries()).tableName,t=Ut(r.properties),n=`
      mutation${t.variablesDefinition} {
        record_create(record: {
          table: "${l}",
          properties: [${t.properties}]
        }) {
          id
        }
      }`;return ut({query:n,variables:t.variables})},edit:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=Ut(r.properties),a=`
      mutation${n.variablesDefinition} {
        record_update(
          id: ${t},
          record: {
            table: "${l}"
            properties: [${n.properties}]
          }
        ) {
          id
        }
      }`;return ut({query:a,variables:n.variables})},delete:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=`
      mutation {
        record_delete(table: "${l}", id: ${t}) {
          id
        }
      }`;return ut({query:n})},restore:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,n=`
      mutation {
        record_update(
          id: ${e.recordId},
          record: {
            table: "${l}",
            deleted_at: null
          }
        ) {
          id
        }
      }`;return ut({query:n})}};function Vt(r,e,l){const t=r.slice();return t[10]=e[l],t[11]=e,t[12]=l,t}function Bt(r,e,l){const t=r.slice();return t[13]=e[l],t}function zt(r,e,l){const t=r.slice();return t[16]=e[l],t}function Mt(r){let e,l,t=Ee(r[1].filters.attributes),n=[];for(let s=0;s<t.length;s+=1)n[s]=Jt(Vt(r,t,s));const a=s=>j(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Ae()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);e=Ae()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);A(s,e,i),l=!0},p(s,i){if(i&6){t=Ee(s[1].filters.attributes);let o;for(o=0;o<t.length;o+=1){const u=Vt(s,t,o);n[o]?(n[o].p(u,i),D(n[o],1)):(n[o]=Jt(u),n[o].c(),D(n[o],1),n[o].m(e.parentNode,e))}for(ge(),o=t.length;o<n.length;o+=1)a(o);$e()}},i(s){if(!l){for(let i=0;i<t.length;i+=1)D(n[i]);l=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)j(n[i]);l=!1},d(s){s&&h(e),Ye(n,s)}}}function qt(r){let e,l=r[16].name+"",t,n,a;return{c(){e=g("option"),t=W(l),n=L(),this.h()},l(s){e=$(s,"OPTION",{});var i=I(e);t=K(i,l),n=F(i),i.forEach(h),this.h()},h(){e.__value=a=r[16].name,re(e,e.__value)},m(s,i){A(s,e,i),c(e,t),c(e,n)},p(s,i){i&2&&l!==(l=s[16].name+"")&&_e(t,l),i&2&&a!==(a=s[16].name)&&(e.__value=a,re(e,e.__value))},d(s){s&&h(e)}}}function Ul(r){let e,l,t=r[10].attribute_type+"",n;return{c(){e=W("Unknow property type: "),l=g("code"),n=W(t)},l(a){e=K(a,"Unknow property type: "),l=$(a,"CODE",{});var s=I(l);n=K(s,t),s.forEach(h)},m(a,s){A(a,e,s),A(a,l,s),c(l,n)},p(a,s){s&2&&t!==(t=a[10].attribute_type+"")&&_e(n,t)},i:Re,o:Re,d(a){a&&(h(e),h(l))}}}function Vl(r){let e,l,t,n,a,s="Apply filters",i,o,u,d,f,v=Ee(r[2][r[10].attribute_type]),b=[];for(let p=0;p<v.length;p+=1)b[p]=Ht(Bt(r,v,p));function C(){r[7].call(e,r[11],r[12])}function E(p,w){return p[10].operation==="exists"?Ml:p[10].operation==="range"?zl:Bl}let m=E(r),k=m(r);return o=new Se({props:{icon:"arrowRight"}}),{c(){e=g("select");for(let p=0;p<b.length;p+=1)b[p].c();l=L(),k.c(),t=L(),n=g("button"),a=g("span"),a.textContent=s,i=L(),se(o.$$.fragment),this.h()},l(p){e=$(p,"SELECT",{name:!0,class:!0});var w=I(e);for(let B=0;B<b.length;B+=1)b[B].l(w);w.forEach(h),l=F(p),k.l(p),t=F(p),n=$(p,"BUTTON",{type:!0,class:!0});var T=I(n);a=$(T,"SPAN",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-6jbkuq"&&(a.textContent=s),i=F(T),ie(o.$$.fragment,T),T.forEach(h),this.h()},h(){_(e,"name","operation"),_(e,"class","svelte-y4u12o"),r[10].operation===void 0&&dt(C),_(a,"class","label"),_(n,"type","submit"),_(n,"class","button svelte-y4u12o")},m(p,w){A(p,e,w);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(e,null);Xe(e,r[10].operation,!0),A(p,l,w),k.m(p,w),A(p,t,w),A(p,n,w),c(n,a),c(n,i),oe(o,n,null),u=!0,d||(f=le(e,"change",C),d=!0)},p(p,w){if(r=p,w&6){v=Ee(r[2][r[10].attribute_type]);let T;for(T=0;T<v.length;T+=1){const B=Bt(r,v,T);b[T]?b[T].p(B,w):(b[T]=Ht(B),b[T].c(),b[T].m(e,null))}for(;T<b.length;T+=1)b[T].d(1);b.length=v.length}w&2&&Xe(e,r[10].operation),m===(m=E(r))&&k?k.p(r,w):(k.d(1),k=m(r),k&&(k.c(),k.m(t.parentNode,t)))},i(p){u||(D(o.$$.fragment,p),u=!0)},o(p){j(o.$$.fragment,p),u=!1},d(p){p&&(h(e),h(l),h(t),h(n)),Ye(b,p),k.d(p),ue(o),d=!1,f()}}}function Ht(r){let e,l=r[13]+"",t,n;return{c(){e=g("option"),t=W(l),this.h()},l(a){e=$(a,"OPTION",{});var s=I(e);t=K(s,l),s.forEach(h),this.h()},h(){e.__value=n=r[13],re(e,e.__value)},m(a,s){A(a,e,s),c(e,t)},p(a,s){s&2&&l!==(l=a[13]+"")&&_e(t,l),s&2&&n!==(n=a[13])&&(e.__value=n,re(e,e.__value))},d(a){a&&h(e)}}}function Bl(r){let e,l,t;function n(){r[8].call(e,r[11],r[12])}return{c(){e=g("input"),this.h()},l(a){e=$(a,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){_(e,"type","text"),_(e,"name","value"),_(e,"placeholder","filter value"),_(e,"class","svelte-y4u12o")},m(a,s){A(a,e,s),re(e,r[10].value),l||(t=le(e,"input",n),l=!0)},p(a,s){r=a,s&2&&e.value!==r[10].value&&re(e,r[10].value)},d(a){a&&h(e),l=!1,t()}}}function zl(r){let e,l,t=">",n,a="≥",s,i,o,u,d,f,v="<",b,C="≤",E,m,k;return{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,s=L(),i=g("input"),u=L(),d=g("select"),f=g("option"),f.textContent=v,b=g("option"),b.textContent=C,E=L(),m=g("input"),this.h()},l(p){e=$(p,"SELECT",{name:!0,class:!0});var w=I(e);l=$(w,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-1xj81f9"&&(l.textContent=t),n=$(w,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-w6lec5"&&(n.textContent=a),w.forEach(h),s=F(p),i=$(p,"INPUT",{type:!0,name:!0,class:!0}),u=F(p),d=$(p,"SELECT",{name:!0,class:!0});var T=I(d);f=$(T,"OPTION",{"data-svelte-h":!0}),ne(f)!=="svelte-1kxptxj"&&(f.textContent=v),b=$(T,"OPTION",{"data-svelte-h":!0}),ne(b)!=="svelte-1juwqhl"&&(b.textContent=C),T.forEach(h),E=F(p),m=$(p,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){l.__value="gt",re(l,l.__value),n.__value="gte",re(n,n.__value),_(e,"name","maxFilter"),_(e,"class","svelte-y4u12o"),_(i,"type","number"),_(i,"name","maxFilterValue"),i.value=o=r[10].maxFilterValue,_(i,"class","svelte-y4u12o"),f.__value="lt",re(f,f.__value),b.__value="lte",re(b,b.__value),_(d,"name","minFilter"),_(d,"class","svelte-y4u12o"),_(m,"type","number"),_(m,"name","minFilterValue"),m.value=k=r[10].minFilterValue,_(m,"class","svelte-y4u12o")},m(p,w){A(p,e,w),c(e,l),c(e,n),A(p,s,w),A(p,i,w),A(p,u,w),A(p,d,w),c(d,f),c(d,b),A(p,E,w),A(p,m,w)},p(p,w){w&2&&o!==(o=p[10].maxFilterValue)&&i.value!==o&&(i.value=o),w&2&&k!==(k=p[10].minFilterValue)&&m.value!==k&&(m.value=k)},d(p){p&&(h(e),h(s),h(i),h(u),h(d),h(E),h(m))}}}function Ml(r){let e,l,t="true",n,a="false";return{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,this.h()},l(s){e=$(s,"SELECT",{name:!0,class:!0});var i=I(e);l=$(i,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-ogzxji"&&(l.textContent=t),n=$(i,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-gyv02o"&&(n.textContent=a),i.forEach(h),this.h()},h(){l.__value="true",re(l,l.__value),n.__value="false",re(n,n.__value),_(e,"name","value"),_(e,"class","svelte-y4u12o")},m(s,i){A(s,e,i),c(e,l),c(e,n)},p:Re,d(s){s&&h(e)}}}function Jt(r){let e,l,t="Filter by:",n,a,s,i="id",o,u,d,f,v,b,C,E,m,k=Ee(r[1].table.properties),p=[];for(let N=0;N<k.length;N+=1)p[N]=qt(zt(r,k,N));function w(){r[4].call(a,r[11],r[12])}function T(){return r[5](r[10],r[11],r[12])}function B(){r[6].call(u,r[11],r[12])}const q=[Vl,Ul],S=[];function V(N,y){return N[2][N[10].attribute_type]?0:1}return f=V(r),v=S[f]=q[f](r),{c(){e=g("fieldset"),l=g("label"),l.textContent=t,n=L(),a=g("select"),s=g("option"),s.textContent=i;for(let N=0;N<p.length;N+=1)p[N].c();o=L(),u=g("input"),d=L(),v.c(),b=L(),this.h()},l(N){e=$(N,"FIELDSET",{class:!0});var y=I(e);l=$(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ne(l)!=="svelte-1adf875"&&(l.textContent=t),n=F(y),a=$(y,"SELECT",{name:!0,class:!0});var O=I(a);s=$(O,"OPTION",{"data-svelte-h":!0}),ne(s)!=="svelte-ns3pfu"&&(s.textContent=i);for(let P=0;P<p.length;P+=1)p[P].l(O);O.forEach(h),o=F(y),u=$(y,"INPUT",{type:!0,name:!0}),d=F(y),v.l(y),b=F(y),y.forEach(h),this.h()},h(){_(l,"for",""),_(l,"class","svelte-y4u12o"),s.__value="id",re(s,s.__value),_(a,"name","name"),_(a,"class","svelte-y4u12o"),r[10].name===void 0&&dt(w),_(u,"type","hidden"),_(u,"name","attribute_type"),_(e,"class","svelte-y4u12o")},m(N,y){A(N,e,y),c(e,l),c(e,n),c(e,a),c(a,s);for(let O=0;O<p.length;O+=1)p[O]&&p[O].m(a,null);Xe(a,r[10].name,!0),c(e,o),c(e,u),re(u,r[10].attribute_type),c(e,d),S[f].m(e,null),c(e,b),C=!0,E||(m=[le(a,"change",w),le(a,"change",T),le(u,"input",B)],E=!0)},p(N,y){if(r=N,y&2){k=Ee(r[1].table.properties);let P;for(P=0;P<k.length;P+=1){const M=zt(r,k,P);p[P]?p[P].p(M,y):(p[P]=qt(M),p[P].c(),p[P].m(a,null))}for(;P<p.length;P+=1)p[P].d(1);p.length=k.length}y&2&&Xe(a,r[10].name),y&2&&re(u,r[10].attribute_type);let O=f;f=V(r),f===O?S[f].p(r,y):(ge(),j(S[O],1,1,()=>{S[O]=null}),$e(),v=S[f],v?v.p(r,y):(v=S[f]=q[f](r),v.c()),D(v,1),v.m(e,b))},i(N){C||(D(v),C=!0)},o(N){j(v),C=!1},d(N){N&&h(e),Ye(p,N),S[f].d(),E=!1,st(m)}}}function ql(r){var s;let e,l,t,n,a=((s=r[1].table)==null?void 0:s.properties)&&Mt(r);return{c(){e=g("form"),a&&a.c()},l(i){e=$(i,"FORM",{});var o=I(e);a&&a.l(o),o.forEach(h)},m(i,o){A(i,e,o),a&&a.m(e,null),r[9](e),l=!0,t||(n=le(e,"submit",_t(r[3])),t=!0)},p(i,[o]){var u;(u=i[1].table)!=null&&u.properties?a?(a.p(i,o),o&2&&D(a,1)):(a=Mt(i),a.c(),D(a,1),a.m(e,null)):a&&(ge(),j(a,1,1,()=>{a=null}),$e())},i(i){l||(D(a),l=!0)},o(i){j(a),l=!1},d(i){i&&h(e),a&&a.d(),r[9](null),t=!1,n()}}}function Hl(r,e,l){let t;Pe(r,H,b=>l(1,t=b));let n;const a={id:["value"],string:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"],text:["value","exists","not_value"],array:["array_contains","value_array","value_in","exists","array_overlaps","not_array_contains","not_array_overlaps","not_value_array","not_value_in"],boolean:["value_boolean","exists","not_value_boolean"],integer:["value_int","exists","not_value_int","range"],float:["value_float","exists","not_value_float","range"],upload:["value","exists","not_value"],datetime:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"],date:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"]},s=()=>{Fe(H,t.filters={page:1,attributes:[Object.fromEntries(new FormData(n).entries())],deleted:t.filters.deleted},t),Ne.get({table:t.table.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function i(b,C){b[C].name=gt(this),H.set(t)}const o=(b,C,E)=>{var m;Fe(H,C[E].attribute_type=((m=t.table.properties.find(k=>k.name===b.name))==null?void 0:m.attribute_type)||"id",t)};function u(b,C){b[C].attribute_type=this.value,H.set(t)}function d(b,C){b[C].operation=gt(this),H.set(t)}function f(b,C){b[C].value=this.value,H.set(t)}function v(b){rt[b?"unshift":"push"](()=>{n=b,l(0,n)})}return[n,t,a,s,i,o,u,d,f,v]}class Jl extends Ge{constructor(e){super(),Qe(this,e,Hl,ql,Ze,{})}}function Wt(r,e,l){const t=r.slice();return t[8]=e[l],t}function Kt(r){let e,l,t="created at",n,a="updated at",s,i="id",o,u,d,f="DESC [Z→A]",v,b="ASC [A→Z]",C,E,m,k,p,w,T,B=Ee(r[1].table.properties),q=[];for(let y=0;y<B.length;y+=1)q[y]=Xt(Wt(r,B,y));const S=[Kl,Wl],V=[];function N(y,O){return y[1].sort.order==="DESC"?0:1}return m=N(r),k=V[m]=S[m](r),{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,s=g("option"),s.textContent=i;for(let y=0;y<q.length;y+=1)q[y].c();o=L(),u=g("select"),d=g("option"),d.textContent=f,v=g("option"),v.textContent=b,C=L(),E=g("label"),k.c(),this.h()},l(y){e=$(y,"SELECT",{name:!0,id:!0,class:!0});var O=I(e);l=$(O,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-waq5ct"&&(l.textContent=t),n=$(O,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-msojyp"&&(n.textContent=a),s=$(O,"OPTION",{"data-svelte-h":!0}),ne(s)!=="svelte-ns3pfu"&&(s.textContent=i);for(let Z=0;Z<q.length;Z+=1)q[Z].l(O);O.forEach(h),o=F(y),u=$(y,"SELECT",{name:!0,id:!0,class:!0});var P=I(u);d=$(P,"OPTION",{"data-svelte-h":!0}),ne(d)!=="svelte-1soe6tv"&&(d.textContent=f),v=$(P,"OPTION",{"data-svelte-h":!0}),ne(v)!=="svelte-ih5v4p"&&(v.textContent=b),P.forEach(h),C=F(y),E=$(y,"LABEL",{for:!0,class:!0});var M=I(E);k.l(M),M.forEach(h),this.h()},h(){l.__value="created_at",re(l,l.__value),n.__value="updated_at",re(n,n.__value),s.__value="id",re(s,s.__value),_(e,"name","by"),_(e,"id","sort_by"),_(e,"class","svelte-yzlk61"),r[1].sort.by===void 0&&dt(()=>r[3].call(e)),d.__value="DESC",re(d,d.__value),v.__value="ASC",re(v,v.__value),_(u,"name","order"),_(u,"id","sort_order"),_(u,"class","svelte-yzlk61"),r[1].sort.order===void 0&&dt(()=>r[5].call(u)),_(E,"for","sort_order"),_(E,"class","button svelte-yzlk61")},m(y,O){A(y,e,O),c(e,l),c(e,n),c(e,s);for(let P=0;P<q.length;P+=1)q[P]&&q[P].m(e,null);Xe(e,r[1].sort.by,!0),A(y,o,O),A(y,u,O),c(u,d),c(u,v),Xe(u,r[1].sort.order,!0),A(y,C,O),A(y,E,O),V[m].m(E,null),p=!0,w||(T=[le(e,"change",r[3]),le(e,"change",r[4]),le(u,"change",r[5]),le(u,"change",r[6])],w=!0)},p(y,O){if(O&2){B=Ee(y[1].table.properties);let M;for(M=0;M<B.length;M+=1){const Z=Wt(y,B,M);q[M]?q[M].p(Z,O):(q[M]=Xt(Z),q[M].c(),q[M].m(e,null))}for(;M<q.length;M+=1)q[M].d(1);q.length=B.length}O&2&&Xe(e,y[1].sort.by),O&2&&Xe(u,y[1].sort.order);let P=m;m=N(y),m!==P&&(ge(),j(V[P],1,1,()=>{V[P]=null}),$e(),k=V[m],k||(k=V[m]=S[m](y),k.c()),D(k,1),k.m(E,null))},i(y){p||(D(k),p=!0)},o(y){j(k),p=!1},d(y){y&&(h(e),h(o),h(u),h(C),h(E)),Ye(q,y),V[m].d(),w=!1,st(T)}}}function Xt(r){let e,l=r[8].name+"",t,n,a;return{c(){e=g("option"),t=W(l),n=L(),this.h()},l(s){e=$(s,"OPTION",{});var i=I(e);t=K(i,l),n=F(i),i.forEach(h),this.h()},h(){e.__value=a=r[8].name,re(e,e.__value)},m(s,i){A(s,e,i),c(e,t),c(e,n)},p(s,i){i&2&&l!==(l=s[8].name+"")&&_e(t,l),i&2&&a!==(a=s[8].name)&&(e.__value=a,re(e,e.__value))},d(s){s&&h(e)}}}function Wl(r){let e,l;return e=new Se({props:{icon:"sortAZ"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Kl(r){let e,l;return e=new Se({props:{icon:"sortZA"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Xl(r){var s;let e,l,t,n,a=((s=r[1].table)==null?void 0:s.properties)&&Kt(r);return{c(){e=g("form"),a&&a.c(),this.h()},l(i){e=$(i,"FORM",{class:!0});var o=I(e);a&&a.l(o),o.forEach(h),this.h()},h(){_(e,"class","svelte-yzlk61")},m(i,o){A(i,e,o),a&&a.m(e,null),r[7](e),l=!0,t||(n=le(e,"submit",_t(r[2])),t=!0)},p(i,[o]){var u;(u=i[1].table)!=null&&u.properties?a?(a.p(i,o),o&2&&D(a,1)):(a=Kt(i),a.c(),D(a,1),a.m(e,null)):a&&(ge(),j(a,1,1,()=>{a=null}),$e())},i(i){l||(D(a),l=!0)},o(i){j(a),l=!1},d(i){i&&h(e),a&&a.d(),r[7](null),t=!1,n()}}}function Yl(r,e,l){let t;Pe(r,H,f=>l(1,t=f));let n;const a=()=>{Fe(H,t.filters.page=1,t),Ne.get({table:t.table.id,filters:t.filters,sort:Object.fromEntries(new FormData(n).entries()),deleted:t.filters.deleted})};function s(){t.sort.by=gt(this),H.set(t)}const i=()=>n.requestSubmit();function o(){t.sort.order=gt(this),H.set(t)}const u=()=>n.requestSubmit();function d(f){rt[f?"unshift":"push"](()=>{n=f,l(0,n)})}return[n,t,a,s,i,o,u,d]}class Zl extends Ge{constructor(e){super(),Qe(this,e,Yl,Xl,Ze,{})}}const gl=(r,e)=>{let l={value:r,type:e};return r==null?(l.value=null,l.type="null",{...l}):(e==="boolean"&&(r===!0?l.value="true":l.value="false"),typeof r=="object"?(l.value=r,l.type="json",{...l}):Tt(r)?(l.value=Tt(r),l.type="jsonEscaped",{...l}):{...l,original:{value:r,type:e}})};function Gl(r){let e,l,t,n,a,s,i,o,u,d,f,v,b;return u=new Se({props:{icon:"x",size:"22"}}),{c(){e=g("form"),l=g("input"),n=L(),a=g("input"),s=L(),i=g("button"),o=g("i"),se(u.$$.fragment),d=W(`\r
    Delete record`),this.h()},l(C){e=$(C,"FORM",{});var E=I(e);l=$(E,"INPUT",{type:!0,name:!0}),n=F(E),a=$(E,"INPUT",{type:!0,name:!0}),s=F(E),i=$(E,"BUTTON",{class:!0});var m=I(i);o=$(m,"I",{class:!0});var k=I(o);ie(u.$$.fragment,k),k.forEach(h),d=K(m,`\r
    Delete record`),m.forEach(h),E.forEach(h),this.h()},h(){_(l,"type","hidden"),_(l,"name","tableName"),l.value=t=r[0].name,_(a,"type","hidden"),_(a,"name","recordId"),a.value=r[1],_(o,"class","svelte-ooaugn"),_(i,"class","danger")},m(C,E){A(C,e,E),c(e,l),c(e,n),c(e,a),c(e,s),c(e,i),c(i,o),oe(u,o,null),c(i,d),r[4](e),f=!0,v||(b=le(e,"submit",r[3]),v=!0)},p(C,[E]){(!f||E&1&&t!==(t=C[0].name))&&(l.value=t),(!f||E&2)&&(a.value=C[1])},i(C){f||(D(u.$$.fragment,C),f=!0)},o(C){j(u.$$.fragment,C),f=!1},d(C){C&&h(e),ue(u),r[4](null),v=!1,b()}}}function Ql(r,e,l){let t,n;Pe(r,H,f=>l(5,t=f)),Pe(r,yt,f=>l(6,n=f));let{table:a}=e,{id:s}=e,i,o=Ct();const u=async f=>{if(f.preventDefault(),confirm("Are you sure you want to delete this record?")){o("success");const v=await Ne.delete({table:a.name,properties:new FormData(i)});v.errors?H.notification.create("error",`Record ${v.record_delete.id} could not be deleted`):(Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.notification.create("success",`Record ${v.record_delete.id} deleted`))}};function d(f){rt[f?"unshift":"push"](()=>{i=f,l(2,i)})}return r.$$set=f=>{"table"in f&&l(0,a=f.table),"id"in f&&l(1,s=f.id)},[a,s,i,u,d]}class xl extends Ge{constructor(e){super(),Qe(this,e,Ql,Gl,Ze,{table:0,id:1})}}function er(r){let e,l,t,n,a,s,i,o,u,d,f,v,b;return u=new Se({props:{icon:"recycleRefresh"}}),{c(){e=g("form"),l=g("input"),n=L(),a=g("input"),s=L(),i=g("button"),o=g("i"),se(u.$$.fragment),d=W(`\r
    Restore record`),this.h()},l(C){e=$(C,"FORM",{});var E=I(e);l=$(E,"INPUT",{type:!0,name:!0}),n=F(E),a=$(E,"INPUT",{type:!0,name:!0}),s=F(E),i=$(E,"BUTTON",{});var m=I(i);o=$(m,"I",{});var k=I(o);ie(u.$$.fragment,k),k.forEach(h),d=K(m,`\r
    Restore record`),m.forEach(h),E.forEach(h),this.h()},h(){_(l,"type","hidden"),_(l,"name","tableName"),l.value=t=r[0].name,_(a,"type","hidden"),_(a,"name","recordId"),a.value=r[1]},m(C,E){A(C,e,E),c(e,l),c(e,n),c(e,a),c(e,s),c(e,i),c(i,o),oe(u,o,null),c(i,d),r[4](e),f=!0,v||(b=le(e,"submit",r[3]),v=!0)},p(C,[E]){(!f||E&1&&t!==(t=C[0].name))&&(l.value=t),(!f||E&2)&&(a.value=C[1])},i(C){f||(D(u.$$.fragment,C),f=!0)},o(C){j(u.$$.fragment,C),f=!1},d(C){C&&h(e),ue(u),r[4](null),v=!1,b()}}}function tr(r,e,l){let t,n;Pe(r,H,f=>l(5,t=f)),Pe(r,yt,f=>l(6,n=f));let{table:a}=e,{id:s}=e,i,o=Ct();const u=async f=>{f.preventDefault(),o("success");const v=await Ne.restore({table:a.name,properties:new FormData(i)});v.errors?H.notification.create("error",`Record ${v.record_update.id} could not be restored`):(Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.notification.create("success",`Record ${v.record_update.id} restored`))};function d(f){rt[f?"unshift":"push"](()=>{i=f,l(2,i)})}return r.$$set=f=>{"table"in f&&l(0,a=f.table),"id"in f&&l(1,s=f.id)},[a,s,i,u,d]}class lr extends Ge{constructor(e){super(),Qe(this,e,tr,er,Ze,{table:0,id:1})}}function rr(r){let e,l;return e=new xl({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[6]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function nr(r){let e,l;return e=new lr({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[5]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function ar(r){let e,l,t,n,a,s,i,o,u,d,f,v,b;a=new Se({props:{icon:"copy",size:"22"}});const C=[nr,rr],E=[];function m(k,p){return k[1].filters.deleted==="true"?0:1}return u=m(r),d=E[u]=C[u](r),{c(){e=g("menu"),l=g("ul"),t=g("li"),n=g("button"),se(a.$$.fragment),s=W(`\r
        Copy record`),i=L(),o=g("li"),d.c(),this.h()},l(k){e=$(k,"MENU",{class:!0});var p=I(e);l=$(p,"UL",{});var w=I(l);t=$(w,"LI",{class:!0});var T=I(t);n=$(T,"BUTTON",{type:!0});var B=I(n);ie(a.$$.fragment,B),s=K(B,`\r
        Copy record`),B.forEach(h),T.forEach(h),i=F(w),o=$(w,"LI",{class:!0});var q=I(o);d.l(q),q.forEach(h),w.forEach(h),p.forEach(h),this.h()},h(){_(n,"type","button"),_(t,"class","svelte-1tht2a1"),_(o,"class","svelte-1tht2a1"),_(e,"class","content-context svelte-1tht2a1")},m(k,p){A(k,e,p),c(e,l),c(l,t),c(t,n),oe(a,n,null),c(n,s),c(l,i),c(l,o),E[u].m(o,null),f=!0,v||(b=[le(window,"keyup",r[3]),le(n,"click",r[4]),ml(Dl.call(null,e,r[7]))],v=!0)},p(k,[p]){let w=u;u=m(k),u===w?E[u].p(k,p):(ge(),j(E[w],1,1,()=>{E[w]=null}),$e(),d=E[u],d?d.p(k,p):(d=E[u]=C[u](k),d.c()),D(d,1),d.m(o,null))},i(k){f||(D(a.$$.fragment,k),D(d),f=!0)},o(k){j(a.$$.fragment,k),j(d),f=!1},d(k){k&&h(e),ue(a),E[u].d(),v=!1,st(b)}}}function sr(r,e,l){let t;Pe(r,H,f=>l(1,t=f));let{record:n}=e;const a=Ct(),s=f=>{f.key==="Escape"&&a("close")},i=()=>{a("close"),Fe(H,t.record={...n},t),Fe(H,t.record.id=null,t)},o=()=>a("close"),u=()=>a("close"),d=()=>a("close");return r.$$set=f=>{"record"in f&&l(0,n=f.record)},[n,t,a,s,i,o,u,d]}class ir extends Ge{constructor(e){super(),Qe(this,e,sr,ar,Ze,{record:0})}}function Yt(r,e,l){const t=r.slice();return t[5]=e[l],t}function Zt(r,e,l){const t=r.slice();t[8]=e[l];const n=gl(t[5].properties[t[8].name],t[8].attribute_type);return t[9]=n,t}function Gt(r,e,l){const t=r.slice();return t[8]=e[l],t}function Qt(r){var B,q;let e,l,t,n,a="id",s,i,o,u="created at",d,f,v="updated at",b,C,E,m,k=Ee(r[1].table.properties),p=[];for(let S=0;S<k.length;S+=1)p[S]=xt(Gt(r,k,S));let w=r[1].filters.deleted==="true"&&el(),T=((q=(B=r[1].records)==null?void 0:B.results)==null?void 0:q.length)&&tl(r);return{c(){e=g("table"),l=g("thead"),t=g("tr"),n=g("th"),n.textContent=a,s=L();for(let S=0;S<p.length;S+=1)p[S].c();i=L(),o=g("th"),o.textContent=u,d=L(),f=g("th"),f.textContent=v,b=L(),w&&w.c(),C=L(),T&&T.c(),this.h()},l(S){e=$(S,"TABLE",{class:!0});var V=I(e);l=$(V,"THEAD",{class:!0});var N=I(l);t=$(N,"TR",{});var y=I(t);n=$(y,"TH",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-1i366gx"&&(n.textContent=a),s=F(y);for(let O=0;O<p.length;O+=1)p[O].l(y);i=F(y),o=$(y,"TH",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-g832ob"&&(o.textContent=u),d=F(y),f=$(y,"TH",{class:!0,"data-svelte-h":!0}),ne(f)!=="svelte-1dvr12"&&(f.textContent=v),b=F(y),w&&w.l(y),y.forEach(h),N.forEach(h),C=F(V),T&&T.l(V),V.forEach(h),this.h()},h(){_(n,"class","id svelte-1bwwtph"),_(o,"class","svelte-1bwwtph"),_(f,"class","svelte-1bwwtph"),_(l,"class","svelte-1bwwtph"),_(e,"class",E=jt(r[1].view.tableStyle)+" svelte-1bwwtph")},m(S,V){A(S,e,V),c(e,l),c(l,t),c(t,n),c(t,s);for(let N=0;N<p.length;N+=1)p[N]&&p[N].m(t,null);c(t,i),c(t,o),c(t,d),c(t,f),c(t,b),w&&w.m(t,null),c(e,C),T&&T.m(e,null),m=!0},p(S,V){var N,y;if(V&2){k=Ee(S[1].table.properties);let O;for(O=0;O<k.length;O+=1){const P=Gt(S,k,O);p[O]?p[O].p(P,V):(p[O]=xt(P),p[O].c(),p[O].m(t,i))}for(;O<p.length;O+=1)p[O].d(1);p.length=k.length}S[1].filters.deleted==="true"?w||(w=el(),w.c(),w.m(t,null)):w&&(w.d(1),w=null),(y=(N=S[1].records)==null?void 0:N.results)!=null&&y.length?T?(T.p(S,V),V&2&&D(T,1)):(T=tl(S),T.c(),D(T,1),T.m(e,null)):T&&(ge(),j(T,1,1,()=>{T=null}),$e()),(!m||V&2&&E!==(E=jt(S[1].view.tableStyle)+" svelte-1bwwtph"))&&_(e,"class",E)},i(S){m||(D(T),m=!0)},o(S){j(T),m=!1},d(S){S&&h(e),Ye(p,S),w&&w.d(),T&&T.d()}}}function xt(r){let e,l=r[8].name+"",t,n,a,s,i=r[8].attribute_type+"",o,u;return{c(){e=g("th"),t=W(l),n=L(),a=g("small"),s=W("("),o=W(i),u=W(")"),this.h()},l(d){e=$(d,"TH",{class:!0});var f=I(e);t=K(f,l),n=F(f),a=$(f,"SMALL",{class:!0});var v=I(a);s=K(v,"("),o=K(v,i),u=K(v,")"),v.forEach(h),f.forEach(h),this.h()},h(){_(a,"class","type svelte-1bwwtph"),_(e,"class","svelte-1bwwtph")},m(d,f){A(d,e,f),c(e,t),c(e,n),c(e,a),c(a,s),c(a,o),c(a,u)},p(d,f){f&2&&l!==(l=d[8].name+"")&&_e(t,l),f&2&&i!==(i=d[8].attribute_type+"")&&_e(o,i)},d(d){d&&h(e)}}}function el(r){let e,l="deleted at";return{c(){e=g("th"),e.textContent=l,this.h()},l(t){e=$(t,"TH",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1jwm27o"&&(e.textContent=l),this.h()},h(){_(e,"class","svelte-1bwwtph")},m(t,n){A(t,e,n)},d(t){t&&h(e)}}}function tl(r){var i;let e=[],l=new Map,t,n,a=Ee((i=r[1].records)==null?void 0:i.results);const s=o=>o[5].id;for(let o=0;o<a.length;o+=1){let u=Yt(r,a,o),d=s(u);l.set(d,e[o]=sl(d,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ae()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ae()},m(o,u){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,u);A(o,t,u),n=!0},p(o,u){var d;u&3&&(a=Ee((d=o[1].records)==null?void 0:d.results),ge(),e=Ol(e,u,s,1,o,a,l,t.parentNode,Il,sl,t,Yt),$e())},i(o){if(!n){for(let u=0;u<a.length;u+=1)D(e[u]);n=!0}},o(o){for(let u=0;u<e.length;u+=1)j(e[u]);n=!1},d(o){o&&h(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function ll(r){let e,l;return e=new ir({props:{record:r[5]}}),e.$on("close",r[4]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.record=t[5]),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function rl(r){let e,l,t,n;const a=[ur,or],s=[];function i(o,u){return o[9].type==="json"||o[9].type==="jsonEscaped"?0:1}return e=i(r),l=s[e]=a[e](r),{c(){l.c(),t=Ae()},l(o){l.l(o),t=Ae()},m(o,u){s[e].m(o,u),A(o,t,u),n=!0},p(o,u){let d=e;e=i(o),e===d?s[e].p(o,u):(ge(),j(s[d],1,1,()=>{s[d]=null}),$e(),l=s[e],l?l.p(o,u):(l=s[e]=a[e](o),l.c()),D(l,1),l.m(t.parentNode,t))},i(o){n||(D(l),n=!0)},o(o){j(l),n=!1},d(o){o&&h(t),s[e].d(o)}}}function or(r){let e=r[9].value+"",l;return{c(){l=W(e)},l(t){l=K(t,e)},m(t,n){A(t,l,n)},p(t,n){n&2&&e!==(e=t[9].value+"")&&_e(l,e)},i:Re,o:Re,d(t){t&&h(l)}}}function ur(r){let e,l,t,n;const a=[cr,fr],s=[];function i(o,u){return o[1].view.tableStyle==="expanded"?0:1}return e=i(r),l=s[e]=a[e](r),{c(){l.c(),t=Ae()},l(o){l.l(o),t=Ae()},m(o,u){s[e].m(o,u),A(o,t,u),n=!0},p(o,u){let d=e;e=i(o),e===d?s[e].p(o,u):(ge(),j(s[d],1,1,()=>{s[d]=null}),$e(),l=s[e],l?l.p(o,u):(l=s[e]=a[e](o),l.c()),D(l,1),l.m(t.parentNode,t))},i(o){n||(D(l),n=!0)},o(o){j(l),n=!1},d(o){o&&h(t),s[e].d(o)}}}function fr(r){let e=JSON.stringify(r[9].value)+"",l;return{c(){l=W(e)},l(t){l=K(t,e)},m(t,n){A(t,l,n)},p(t,n){n&2&&e!==(e=JSON.stringify(t[9].value)+"")&&_e(l,e)},i:Re,o:Re,d(t){t&&h(l)}}}function cr(r){let e,l;return e=new Fl({props:{value:r[9].value}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.value=t[9].value),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function nl(r){let e,l,t=r[9].value!==void 0&&rl(r);return{c(){e=g("td"),t&&t.c(),this.h()},l(n){e=$(n,"TD",{class:!0});var a=I(e);t&&t.l(a),a.forEach(h),this.h()},h(){_(e,"class","svelte-1bwwtph"),ke(e,"value-null",r[9].type==="null")},m(n,a){A(n,e,a),t&&t.m(e,null),l=!0},p(n,a){n[9].value!==void 0?t?(t.p(n,a),a&2&&D(t,1)):(t=rl(n),t.c(),D(t,1),t.m(e,null)):t&&(ge(),j(t,1,1,()=>{t=null}),$e()),(!l||a&2)&&ke(e,"value-null",n[9].type==="null")},i(n){l||(D(t),l=!0)},o(n){j(t),l=!1},d(n){n&&h(e),t&&t.d()}}}function al(r){var o,u;let e,l=new Date((o=r[5])==null?void 0:o.deleted_at).toLocaleDateString(void 0,{})+"",t,n,a,s=new Date((u=r[5])==null?void 0:u.deleted_at).toLocaleTimeString(void 0,{})+"",i;return{c(){e=g("td"),t=W(l),n=L(),a=g("span"),i=W(s),this.h()},l(d){e=$(d,"TD",{class:!0});var f=I(e);t=K(f,l),n=F(f),a=$(f,"SPAN",{class:!0});var v=I(a);i=K(v,s),v.forEach(h),f.forEach(h),this.h()},h(){_(a,"class","svelte-1bwwtph"),_(e,"class","date svelte-1bwwtph")},m(d,f){A(d,e,f),c(e,t),c(e,n),c(e,a),c(a,i)},p(d,f){var v,b;f&2&&l!==(l=new Date((v=d[5])==null?void 0:v.deleted_at).toLocaleDateString(void 0,{})+"")&&_e(t,l),f&2&&s!==(s=new Date((b=d[5])==null?void 0:b.deleted_at).toLocaleTimeString(void 0,{})+"")&&_e(i,s)},d(d){d&&h(e)}}}function sl(r,e){var nt,we,Be,at;let l,t,n,a,s,i,o="More options",u,d,f,v,b,C="Edit record",E,m,k,p,w=e[5].id+"",T,B,q,S,V=new Date((nt=e[5])==null?void 0:nt.created_at).toLocaleDateString(void 0,{})+"",N,y,O,P=new Date((we=e[5])==null?void 0:we.created_at).toLocaleTimeString(void 0,{})+"",M,Z,G,R=new Date((Be=e[5])==null?void 0:Be.updated_at).toLocaleDateString(void 0,{})+"",Y,z,ae,Ce=new Date((at=e[5])==null?void 0:at.updated_at).toLocaleTimeString(void 0,{})+"",ve,ee,Oe,fe,ye,Ue;d=new Se({props:{icon:"navigationMenuVertical",size:"16"}});function it(){return e[2](e[5])}m=new Se({props:{icon:"pencil",size:"16"}});function Ve(){return e[3](e[5])}let ce=e[0].id===e[5].id&&ll(e),De=Ee(e[1].table.properties),Q=[];for(let X=0;X<De.length;X+=1)Q[X]=nl(Zt(e,De,X));const ot=X=>j(Q[X],1,1,()=>{Q[X]=null});let pe=e[1].filters.deleted==="true"&&al(e);return{key:r,first:null,c(){l=g("tr"),t=g("td"),n=g("div"),a=g("div"),s=g("button"),i=g("span"),i.textContent=o,u=L(),se(d.$$.fragment),f=L(),v=g("button"),b=g("span"),b.textContent=C,E=L(),se(m.$$.fragment),k=L(),ce&&ce.c(),p=L(),T=W(w),B=L();for(let X=0;X<Q.length;X+=1)Q[X].c();q=L(),S=g("td"),N=W(V),y=L(),O=g("span"),M=W(P),Z=L(),G=g("td"),Y=W(R),z=L(),ae=g("span"),ve=W(Ce),ee=L(),pe&&pe.c(),Oe=L(),this.h()},l(X){l=$(X,"TR",{class:!0});var J=I(l);t=$(J,"TD",{class:!0});var Te=I(t);n=$(Te,"DIV",{class:!0});var Ie=I(n);a=$(Ie,"DIV",{class:!0});var je=I(a);s=$(je,"BUTTON",{class:!0});var Le=I(s);i=$(Le,"SPAN",{class:!0,"data-svelte-h":!0}),ne(i)!=="svelte-1agpmtc"&&(i.textContent=o),u=F(Le),ie(d.$$.fragment,Le),Le.forEach(h),f=F(je),v=$(je,"BUTTON",{class:!0,title:!0});var de=I(v);b=$(de,"SPAN",{class:!0,"data-svelte-h":!0}),ne(b)!=="svelte-1qpnaf4"&&(b.textContent=C),E=F(de),ie(m.$$.fragment,de),de.forEach(h),je.forEach(h),k=F(Ie),ce&&ce.l(Ie),p=F(Ie),T=K(Ie,w),Ie.forEach(h),Te.forEach(h),B=F(J);for(let he=0;he<Q.length;he+=1)Q[he].l(J);q=F(J),S=$(J,"TD",{class:!0});var te=I(S);N=K(te,V),y=F(te),O=$(te,"SPAN",{class:!0});var xe=I(O);M=K(xe,P),xe.forEach(h),te.forEach(h),Z=F(J),G=$(J,"TD",{class:!0});var qe=I(G);Y=K(qe,R),z=F(qe),ae=$(qe,"SPAN",{class:!0});var He=I(ae);ve=K(He,Ce),He.forEach(h),qe.forEach(h),ee=F(J),pe&&pe.l(J),Oe=F(J),J.forEach(h),this.h()},h(){_(i,"class","label svelte-1bwwtph"),_(s,"class","button compact more svelte-1bwwtph"),ke(s,"active",e[0].id===e[5].id),_(b,"class","label svelte-1bwwtph"),_(v,"class","button compact edit svelte-1bwwtph"),_(v,"title","Edit record"),_(a,"class","combo svelte-1bwwtph"),_(n,"class","id svelte-1bwwtph"),_(t,"class","svelte-1bwwtph"),_(O,"class","svelte-1bwwtph"),_(S,"class","date svelte-1bwwtph"),_(ae,"class","svelte-1bwwtph"),_(G,"class","date svelte-1bwwtph"),_(l,"class","svelte-1bwwtph"),ke(l,"highlighted",e[1].highlighted.record===e[5].id),ke(l,"hasContextMenu",e[0].id===e[5].id),this.first=l},m(X,J){A(X,l,J),c(l,t),c(t,n),c(n,a),c(a,s),c(s,i),c(s,u),oe(d,s,null),c(a,f),c(a,v),c(v,b),c(v,E),oe(m,v,null),c(n,k),ce&&ce.m(n,null),c(n,p),c(n,T),c(l,B);for(let Te=0;Te<Q.length;Te+=1)Q[Te]&&Q[Te].m(l,null);c(l,q),c(l,S),c(S,N),c(S,y),c(S,O),c(O,M),c(l,Z),c(l,G),c(G,Y),c(G,z),c(G,ae),c(ae,ve),c(l,ee),pe&&pe.m(l,null),c(l,Oe),fe=!0,ye||(Ue=[le(s,"click",it),le(v,"click",Ve)],ye=!0)},p(X,J){var Te,Ie,je,Le;if(e=X,(!fe||J&3)&&ke(s,"active",e[0].id===e[5].id),e[0].id===e[5].id?ce?(ce.p(e,J),J&3&&D(ce,1)):(ce=ll(e),ce.c(),D(ce,1),ce.m(n,p)):ce&&(ge(),j(ce,1,1,()=>{ce=null}),$e()),(!fe||J&2)&&w!==(w=e[5].id+"")&&_e(T,w),J&2){De=Ee(e[1].table.properties);let de;for(de=0;de<De.length;de+=1){const te=Zt(e,De,de);Q[de]?(Q[de].p(te,J),D(Q[de],1)):(Q[de]=nl(te),Q[de].c(),D(Q[de],1),Q[de].m(l,q))}for(ge(),de=De.length;de<Q.length;de+=1)ot(de);$e()}(!fe||J&2)&&V!==(V=new Date((Te=e[5])==null?void 0:Te.created_at).toLocaleDateString(void 0,{})+"")&&_e(N,V),(!fe||J&2)&&P!==(P=new Date((Ie=e[5])==null?void 0:Ie.created_at).toLocaleTimeString(void 0,{})+"")&&_e(M,P),(!fe||J&2)&&R!==(R=new Date((je=e[5])==null?void 0:je.updated_at).toLocaleDateString(void 0,{})+"")&&_e(Y,R),(!fe||J&2)&&Ce!==(Ce=new Date((Le=e[5])==null?void 0:Le.updated_at).toLocaleTimeString(void 0,{})+"")&&_e(ve,Ce),e[1].filters.deleted==="true"?pe?pe.p(e,J):(pe=al(e),pe.c(),pe.m(l,Oe)):pe&&(pe.d(1),pe=null),(!fe||J&2)&&ke(l,"highlighted",e[1].highlighted.record===e[5].id),(!fe||J&3)&&ke(l,"hasContextMenu",e[0].id===e[5].id)},i(X){if(!fe){D(d.$$.fragment,X),D(m.$$.fragment,X),D(ce);for(let J=0;J<De.length;J+=1)D(Q[J]);fe=!0}},o(X){j(d.$$.fragment,X),j(m.$$.fragment,X),j(ce),Q=Q.filter(Boolean);for(let J=0;J<Q.length;J+=1)j(Q[J]);fe=!1},d(X){X&&h(l),ue(d),ue(m),ce&&ce.d(),Ye(Q,X),pe&&pe.d(),ye=!1,st(Ue)}}}function dr(r){var n;let e,l,t=((n=r[1].table)==null?void 0:n.properties)&&Qt(r);return{c(){t&&t.c(),e=Ae()},l(a){t&&t.l(a),e=Ae()},m(a,s){t&&t.m(a,s),A(a,e,s),l=!0},p(a,[s]){var i;(i=a[1].table)!=null&&i.properties?t?(t.p(a,s),s&2&&D(t,1)):(t=Qt(a),t.c(),D(t,1),t.m(e.parentNode,e)):t&&(ge(),j(t,1,1,()=>{t=null}),$e())},i(a){l||(D(t),l=!0)},o(a){j(t),l=!1},d(a){a&&h(e),t&&t.d(a)}}}function _r(r,e,l){let t;Pe(r,H,o=>l(1,t=o));let n={id:null};return[n,t,o=>l(0,n.id=o.id,n),o=>{Fe(H,t.record=o,t)},()=>l(0,n.id=null,n)]}class pr extends Ge{constructor(e){super(),Qe(this,e,_r,dr,Ze,{})}}var ct=new Map;function hr(r){var e=ct.get(r);e&&e.destroy()}function vr(r){var e=ct.get(r);e&&e.update()}var ft=null;typeof window>"u"?((ft=function(r){return r}).destroy=function(r){return r},ft.update=function(r){return r}):((ft=function(r,e){return r&&Array.prototype.forEach.call(r.length?r:[r],function(l){return function(t){if(t&&t.nodeName&&t.nodeName==="TEXTAREA"&&!ct.has(t)){var n,a=null,s=window.getComputedStyle(t),i=(n=t.value,function(){u({testForHeightReduction:n===""||!t.value.startsWith(n),restoreTextAlign:null}),n=t.value}),o=(function(f){t.removeEventListener("autosize:destroy",o),t.removeEventListener("autosize:update",d),t.removeEventListener("input",i),window.removeEventListener("resize",d),Object.keys(f).forEach(function(v){return t.style[v]=f[v]}),ct.delete(t)}).bind(t,{height:t.style.height,resize:t.style.resize,textAlign:t.style.textAlign,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",o),t.addEventListener("autosize:update",d),t.addEventListener("input",i),window.addEventListener("resize",d),t.style.overflowX="hidden",t.style.wordWrap="break-word",ct.set(t,{destroy:o,update:d}),d()}function u(f){var v,b,C=f.restoreTextAlign,E=C===void 0?null:C,m=f.testForHeightReduction,k=m===void 0||m,p=s.overflowY;if(t.scrollHeight!==0&&(s.resize==="vertical"?t.style.resize="none":s.resize==="both"&&(t.style.resize="horizontal"),k&&(v=function(T){for(var B=[];T&&T.parentNode&&T.parentNode instanceof Element;)T.parentNode.scrollTop&&B.push([T.parentNode,T.parentNode.scrollTop]),T=T.parentNode;return function(){return B.forEach(function(q){var S=q[0],V=q[1];S.style.scrollBehavior="auto",S.scrollTop=V,S.style.scrollBehavior=null})}}(t),t.style.height=""),b=s.boxSizing==="content-box"?t.scrollHeight-(parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)):t.scrollHeight+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),s.maxHeight!=="none"&&b>parseFloat(s.maxHeight)?(s.overflowY==="hidden"&&(t.style.overflow="scroll"),b=parseFloat(s.maxHeight)):s.overflowY!=="hidden"&&(t.style.overflow="hidden"),t.style.height=b+"px",E&&(t.style.textAlign=E),v&&v(),a!==b&&(t.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),a=b),p!==s.overflow&&!E)){var w=s.textAlign;s.overflow==="hidden"&&(t.style.textAlign=w==="start"?"end":"start"),u({restoreTextAlign:w,testForHeightReduction:!0})}}function d(){u({testForHeightReduction:!0,restoreTextAlign:null})}}(l)}),r}).destroy=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],hr),r},ft.update=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],vr),r});var $t=ft;const Nt=r=>($t(r),{destroy(){$t.destroy(r)}});Nt.update=$t.update;Nt.destroy=$t.destroy;function il(r,e,l){const t=r.slice();return t[13]=e[l],t}function ol(r,e,l){const t=r.slice();t[16]=e[l];const n=t[1].properties?gl(t[1].properties[t[16].name],t[16].attribute_type):{type:t[16].attribute_type,value:""};return t[17]=n,t}function ul(r){let e,l;return{c(){e=g("input"),this.h()},l(t){e=$(t,"INPUT",{type:!0,name:!0}),this.h()},h(){_(e,"type","hidden"),_(e,"name","recordId"),e.value=l=r[1].id},m(t,n){A(t,e,n)},p(t,n){n&2&&l!==(l=t[1].id)&&(e.value=l)},d(t){t&&h(e)}}}function mr(r){let e=r[16].attribute_type+"",l,t,n,a,s;return{c(){l=W(e),t=L(),n=g("input"),this.h()},l(i){l=K(i,e),t=F(i),n=$(i,"INPUT",{type:!0,name:!0}),this.h()},h(){_(n,"type","hidden"),_(n,"name",a=r[16].name+"[type]"),n.value=s=r[16].attribute_type},m(i,o){A(i,l,o),A(i,t,o),A(i,n,o)},p(i,o){o&1&&e!==(e=i[16].attribute_type+"")&&_e(l,e),o&1&&a!==(a=i[16].name+"[type]")&&_(n,"name",a),o&1&&s!==(s=i[16].attribute_type)&&(n.value=s)},i:Re,o:Re,d(i){i&&(h(l),h(t),h(n))}}}function br(r){let e,l;return e=new Ll({props:{name:r[16].name+"[type]",options:[{value:"string",label:"string"},{value:"json",label:"json"}],checked:r[17].type==="json"?"json":"string"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.name=t[16].name+"[type]"),n&3&&(a.checked=t[17].type==="json"?"json":"string"),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function fl(r){let e;return{c(){e=W("(non editable)")},l(l){e=K(l,"(non editable)")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function gr(r){let e,l,t,n,a,s,i;return{c(){e=g("textarea"),this.h()},l(o){e=$(o,"TEXTAREA",{rows:!0,name:!0,id:!0,class:!0}),I(e).forEach(h),this.h()},h(){_(e,"rows","1"),_(e,"name",l=r[16].name+"[value]"),_(e,"id",t="edit_"+r[16].name),e.disabled=n=r[16].attribute_type==="upload",e.value=a=r[17].type==="json"||r[17].type==="jsonEscaped"&&!pl?JSON.stringify(r[17].value,void 0,2):r[17].value,_(e,"class","svelte-1udbufw")},m(o,u){A(o,e,u),s||(i=ml(Nt.call(null,e)),s=!0)},p(o,u){u&1&&l!==(l=o[16].name+"[value]")&&_(e,"name",l),u&1&&t!==(t="edit_"+o[16].name)&&_(e,"id",t),u&1&&n!==(n=o[16].attribute_type==="upload")&&(e.disabled=n),u&3&&a!==(a=o[17].type==="json"||o[17].type==="jsonEscaped"&&!pl?JSON.stringify(o[17].value,void 0,2):o[17].value)&&(e.value=a)},d(o){o&&h(e),s=!1,i()}}}function $r(r){let e,l,t,n,a,s,i,o,u,d;return{c(){e=g("select"),l=g("option"),t=g("option"),n=W("true"),s=g("option"),i=W("false"),this.h()},l(f){e=$(f,"SELECT",{name:!0,id:!0,class:!0});var v=I(e);l=$(v,"OPTION",{class:!0}),I(l).forEach(h),t=$(v,"OPTION",{});var b=I(t);n=K(b,"true"),b.forEach(h),s=$(v,"OPTION",{});var C=I(s);i=K(C,"false"),C.forEach(h),v.forEach(h),this.h()},h(){l.__value="",re(l,l.__value),_(l,"class","value-null"),t.__value="true",re(t,t.__value),t.selected=a=r[17].value==="true",s.__value="false",re(s,s.__value),s.selected=o=r[17].value==="false",_(e,"name",u=r[16].name+"[value]"),_(e,"id",d="edit_"+r[16].name),_(e,"class","svelte-1udbufw")},m(f,v){A(f,e,v),c(e,l),c(e,t),c(t,n),c(e,s),c(s,i)},p(f,v){v&3&&a!==(a=f[17].value==="true")&&(t.selected=a),v&3&&o!==(o=f[17].value==="false")&&(s.selected=o),v&1&&u!==(u=f[16].name+"[value]")&&_(e,"name",u),v&1&&d!==(d="edit_"+f[16].name)&&_(e,"id",d)},d(f){f&&h(e)}}}function cl(r){let e=r[5][r[16].name].message+"",l;return{c(){l=W(e)},l(t){l=K(t,e)},m(t,n){A(t,l,n)},p(t,n){n&33&&e!==(e=t[5][t[16].name].message+"")&&_e(l,e)},d(t){t&&h(l)}}}function dl(r){let e,l,t,n=r[16].name+"",a,s,i,o,u,d,f,v,b,C,E,m,k;const p=[br,mr],w=[];function T(y,O){return y[16].attribute_type==="string"?0:1}u=T(r),d=w[u]=p[u](r);let B=r[16].attribute_type==="upload"&&fl();function q(y,O){return y[16].attribute_type==="boolean"?$r:gr}let S=q(r),V=S(r),N=r[5][r[16].name]&&cl(r);return{c(){e=g("fieldset"),l=g("dir"),t=g("label"),a=W(n),s=g("br"),i=L(),o=g("div"),d.c(),f=L(),B&&B.c(),b=L(),C=g("div"),V.c(),E=L(),m=g("div"),N&&N.c(),this.h()},l(y){e=$(y,"FIELDSET",{class:!0});var O=I(e);l=$(O,"DIR",{});var P=I(l);t=$(P,"LABEL",{for:!0,class:!0});var M=I(t);a=K(M,n),s=$(M,"BR",{}),i=F(M),o=$(M,"DIV",{class:!0});var Z=I(o);d.l(Z),f=F(Z),B&&B.l(Z),Z.forEach(h),M.forEach(h),P.forEach(h),b=F(O),C=$(O,"DIV",{});var G=I(C);V.l(G),E=F(G),m=$(G,"DIV",{role:!0,class:!0});var R=I(m);N&&N.l(R),R.forEach(h),G.forEach(h),O.forEach(h),this.h()},h(){_(o,"class","type svelte-1udbufw"),_(t,"for",v="edit_"+r[16].name),_(t,"class","svelte-1udbufw"),_(m,"role","alert"),_(m,"class","svelte-1udbufw"),_(e,"class","svelte-1udbufw")},m(y,O){A(y,e,O),c(e,l),c(l,t),c(t,a),c(t,s),c(t,i),c(t,o),w[u].m(o,null),c(o,f),B&&B.m(o,null),c(e,b),c(e,C),V.m(C,null),c(C,E),c(C,m),N&&N.m(m,null),k=!0},p(y,O){(!k||O&1)&&n!==(n=y[16].name+"")&&_e(a,n);let P=u;u=T(y),u===P?w[u].p(y,O):(ge(),j(w[P],1,1,()=>{w[P]=null}),$e(),d=w[u],d?d.p(y,O):(d=w[u]=p[u](y),d.c()),D(d,1),d.m(o,f)),y[16].attribute_type==="upload"?B||(B=fl(),B.c(),B.m(o,null)):B&&(B.d(1),B=null),(!k||O&1&&v!==(v="edit_"+y[16].name))&&_(t,"for",v),S===(S=q(y))&&V?V.p(y,O):(V.d(1),V=S(y),V&&(V.c(),V.m(C,E))),y[5][y[16].name]?N?N.p(y,O):(N=cl(y),N.c(),N.m(m,null)):N&&(N.d(1),N=null)},i(y){k||(D(d),k=!0)},o(y){j(d),k=!1},d(y){y&&h(e),w[u].d(),B&&B.d(),V.d(),N&&N.d()}}}function _l(r){let e,l=JSON.stringify(r[4])+"",t,n;return{c(){e=g("li"),t=W(l),n=L(),this.h()},l(a){e=$(a,"LI",{class:!0});var s=I(e);t=K(s,l),n=F(s),s.forEach(h),this.h()},h(){_(e,"class","svelte-1udbufw")},m(a,s){A(a,e,s),c(e,t),c(e,n)},p(a,s){s&16&&l!==(l=JSON.stringify(a[4])+"")&&_e(t,l)},d(a){a&&h(e)}}}function yr(r){let e;return{c(){e=W("Create record")},l(l){e=K(l,"Create record")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function wr(r){let e;return{c(){e=W("Edit record")},l(l){e=K(l,"Edit record")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function kr(r){let e,l,t,n,a,s,i,o,u,d,f,v,b,C="Cancel",E,m,k,p,w,T,B,q,S=r[1].id&&ul(r),V=Ee(r[0]),N=[];for(let R=0;R<V.length;R+=1)N[R]=dl(ol(r,V,R));const y=R=>j(N[R],1,1,()=>{N[R]=null});let O=Ee(r[4]),P=[];for(let R=0;R<O.length;R+=1)P[R]=_l(il(r,O,R));function M(R,Y){return R[1].id?wr:yr}let Z=M(r),G=Z(r);return p=new Se({props:{icon:"arrowRight"}}),{c(){e=g("dialog"),l=g("div"),t=g("form"),n=g("input"),s=L(),S&&S.c(),i=L();for(let R=0;R<N.length;R+=1)N[R].c();o=L(),u=g("div"),d=g("ul");for(let R=0;R<P.length;R+=1)P[R].c();f=L(),v=g("fieldset"),b=g("button"),b.textContent=C,E=L(),m=g("button"),G.c(),k=L(),se(p.$$.fragment),this.h()},l(R){e=$(R,"DIALOG",{class:!0});var Y=I(e);l=$(Y,"DIV",{class:!0});var z=I(l);t=$(z,"FORM",{class:!0});var ae=I(t);n=$(ae,"INPUT",{type:!0,name:!0}),s=F(ae),S&&S.l(ae),i=F(ae);for(let fe=0;fe<N.length;fe+=1)N[fe].l(ae);o=F(ae),u=$(ae,"DIV",{class:!0});var Ce=I(u);d=$(Ce,"UL",{class:!0,"aria-live":!0});var ve=I(d);for(let fe=0;fe<P.length;fe+=1)P[fe].l(ve);ve.forEach(h),f=F(Ce),v=$(Ce,"FIELDSET",{class:!0});var ee=I(v);b=$(ee,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ne(b)!=="svelte-1oq6ax6"&&(b.textContent=C),E=F(ee),m=$(ee,"BUTTON",{type:!0,class:!0});var Oe=I(m);G.l(Oe),k=F(Oe),ie(p.$$.fragment,Oe),Oe.forEach(h),ee.forEach(h),Ce.forEach(h),ae.forEach(h),z.forEach(h),Y.forEach(h),this.h()},h(){_(n,"type","hidden"),_(n,"name","tableName"),n.value=a=r[6].table.name,_(d,"class","error svelte-1udbufw"),_(d,"aria-live","assertive"),_(b,"type","button"),_(b,"class","button"),_(m,"type","submit"),_(m,"class","button"),_(v,"class","actions svelte-1udbufw"),_(u,"class","footer svelte-1udbufw"),_(t,"class","svelte-1udbufw"),_(l,"class","content content-context svelte-1udbufw"),_(e,"class","svelte-1udbufw")},m(R,Y){A(R,e,Y),c(e,l),c(l,t),c(t,n),c(t,s),S&&S.m(t,null),c(t,i);for(let z=0;z<N.length;z+=1)N[z]&&N[z].m(t,null);c(t,o),c(t,u),c(u,d);for(let z=0;z<P.length;z+=1)P[z]&&P[z].m(d,null);c(u,f),c(u,v),c(v,b),c(v,E),c(v,m),G.m(m,null),c(m,k),oe(p,m,null),r[10](t),r[11](e),T=!0,B||(q=[le(b,"click",r[9]),le(t,"submit",_t(r[8]))],B=!0)},p(R,[Y]){if((!T||Y&64&&a!==(a=R[6].table.name))&&(n.value=a),R[1].id?S?S.p(R,Y):(S=ul(R),S.c(),S.m(t,i)):S&&(S.d(1),S=null),Y&35){V=Ee(R[0]);let z;for(z=0;z<V.length;z+=1){const ae=ol(R,V,z);N[z]?(N[z].p(ae,Y),D(N[z],1)):(N[z]=dl(ae),N[z].c(),D(N[z],1),N[z].m(t,o))}for(ge(),z=V.length;z<N.length;z+=1)y(z);$e()}if(Y&16){O=Ee(R[4]);let z;for(z=0;z<O.length;z+=1){const ae=il(R,O,z);P[z]?P[z].p(ae,Y):(P[z]=_l(ae),P[z].c(),P[z].m(d,null))}for(;z<P.length;z+=1)P[z].d(1);P.length=O.length}Z!==(Z=M(R))&&(G.d(1),G=Z(R),G&&(G.c(),G.m(m,k)))},i(R){if(!T){for(let Y=0;Y<V.length;Y+=1)D(N[Y]);D(p.$$.fragment,R),R&&dt(()=>{T&&(w||(w=Rt(e,r[7],{},!0)),w.run(1))}),T=!0}},o(R){N=N.filter(Boolean);for(let Y=0;Y<N.length;Y+=1)j(N[Y]);j(p.$$.fragment,R),R&&(w||(w=Rt(e,r[7],{},!1)),w.run(0)),T=!1},d(R){R&&h(e),S&&S.d(),Ye(N,R),Ye(P,R),G.d(),ue(p),r[10](null),r[11](null),R&&w&&w.end(),B=!1,st(q)}}}let pl=!1;function Er(r,e,l){let t,n;Pe(r,H,m=>l(6,t=m)),Pe(r,yt,m=>l(12,n=m));let{properties:a}=e,{editing:s}=e,i,o,u=[],d={};const f=function(m,{delay:k=0,duration:p=150}){return{delay:k,duration:p,css:w=>{const T=Pl(w);return`opacity: ${T}; transform: scale(${T});`}}};yl(()=>{setTimeout(()=>{i.showModal()},10)}),document.addEventListener("keydown",m=>{m.key==="Escape"&&(m.preventDefault(),Fe(H,t.record=null,t))},{once:!0});const v=async m=>{m.preventDefault();const k=new FormData(o);l(5,d={});for(const p of k.entries())if(p[0].endsWith("[type]")&&(p[1]==="json"||p[1]==="array")){const w=p[0].replace("[type]",""),T=k.get(w+"[value]");T!==""&&!Tt(T)&&l(5,d[w]={property:w,message:`Not a valid ${p[1]}`},d)}if(Object.keys(d).length)await wl(),document.querySelector('[role="alert"]:not(:empty)').scrollIntoView({behavior:"smooth",block:"center"});else if(t.record.id){const p=await Ne.edit({table:t.table.name,id:t.record.id,properties:k});p.errors?l(4,u=p.errors):(Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.highlight("record",p.record_update.id),H.notification.create("success",`Record ${p.record_update.id} updated`),Fe(H,t.record=null,t))}else{const p=await Ne.create({table:t.table.name,properties:k});p.errors?l(4,u=p.errors):(H.clearFilters(),Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.highlight("record",p.record_create.id),H.notification.create("success",`Record ${p.record_create.id} created`),Fe(H,t.record=null,t))}},b=()=>Fe(H,t.record=null,t);function C(m){rt[m?"unshift":"push"](()=>{o=m,l(3,o)})}function E(m){rt[m?"unshift":"push"](()=>{i=m,l(2,i)})}return r.$$set=m=>{"properties"in m&&l(0,a=m.properties),"editing"in m&&l(1,s=m.editing)},[a,s,i,o,u,d,t,f,v,b,C,E]}class Tr extends Ge{constructor(e){super(),Qe(this,e,Er,kr,Ze,{properties:0,editing:1})}}const{document:Et}=Sl;function Cr(r){let e;return{c(){e=W("Work in progress :)")},l(l){e=K(l,"Work in progress :)")},m(l,t){A(l,e,t)},i:Re,o:Re,d(l){l&&h(e)}}}function Nr(r){let e,l;return e=new pr({}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function hl(r){let e,l,t,n,a,s,i;const o=[Or,Sr],u=[];function d(f,v){return f[0].view.tableStyle==="collapsed"?0:1}return l=d(r),t=u[l]=o[l](r),{c(){e=g("button"),t.c(),this.h()},l(f){e=$(f,"BUTTON",{class:!0,title:!0});var v=I(e);t.l(v),v.forEach(h),this.h()},h(){_(e,"class","button"),_(e,"title",n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values")},m(f,v){A(f,e,v),u[l].m(e,null),a=!0,s||(i=le(e,"click",_t(function(){Cl(r[0].view.tableStyle==="collapsed"?H.setView({tableStyle:"expanded"}):H.setView({tableStyle:"collapsed"}))&&(r[0].view.tableStyle==="collapsed"?H.setView({tableStyle:"expanded"}):H.setView({tableStyle:"collapsed"})).apply(this,arguments)})),s=!0)},p(f,v){r=f;let b=l;l=d(r),l!==b&&(ge(),j(u[b],1,1,()=>{u[b]=null}),$e(),t=u[l],t||(t=u[l]=o[l](r),t.c()),D(t,1),t.m(e,null)),(!a||v&1&&n!==(n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values"))&&_(e,"title",n)},i(f){a||(D(t),a=!0)},o(f){j(t),a=!1},d(f){f&&h(e),u[l].d(),s=!1,i()}}}function Sr(r){let e,l="Collapse values",t,n,a;return n=new Se({props:{icon:"collapse"}}),{c(){e=g("span"),e.textContent=l,t=L(),se(n.$$.fragment),this.h()},l(s){e=$(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-jserey"&&(e.textContent=l),t=F(s),ie(n.$$.fragment,s),this.h()},h(){_(e,"class","label")},m(s,i){A(s,e,i),A(s,t,i),oe(n,s,i),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){j(n.$$.fragment,s),a=!1},d(s){s&&(h(e),h(t)),ue(n,s)}}}function Or(r){let e,l="Expand values",t,n,a;return n=new Se({props:{icon:"expand"}}),{c(){e=g("span"),e.textContent=l,t=L(),se(n.$$.fragment),this.h()},l(s){e=$(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1tvmrgx"&&(e.textContent=l),t=F(s),ie(n.$$.fragment,s),this.h()},h(){_(e,"class","label")},m(s,i){A(s,e,i),A(s,t,i),oe(n,s,i),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){j(n.$$.fragment,s),a=!1},d(s){s&&(h(e),h(t)),ue(n,s)}}}function vl(r){let e,l;return e=new Tr({props:{properties:r[0].table.properties,editing:r[0].record}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.properties=t[0].table.properties),n&1&&(a.editing=t[0].record),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Ir(r){var Lt,Ft,Pt,At;let e,l,t,n,a,s,i,o,u,d,f="Refresh current view",v,b,C,E,m,k,p,w,T,B="Page:",q,S,V,N,y=(((Lt=r[0].records)==null?void 0:Lt.total_pages)||1)+"",O,P,M,Z,G,R,Y,z="Create new record",ae,Ce,ve,ee,Oe,fe,ye,Ue,it,Ve,ce,De=r[0].filters.deleted==="false"?"ing":"",Q,ot,pe,nt,we,Be,at,X,J,Te=r[0].filters.deleted==="true"?"ing":"",Ie,je,Le,de,te,xe,qe,He,he,wt,kt,St;Et.title=e=(((Ft=r[0].table)==null?void 0:Ft.name)||"Loading…")+((Pt=r[0].online)!=null&&Pt.MPKIT_URL?": "+r[0].online.MPKIT_URL.replace("https://",""):""),a=new Jl({}),i=new Zl({}),b=new Se({props:{icon:"refresh"}});const Ot=[Nr,Cr],et=[];function It(U,x){return U[0].view.database!=="tiles"?0:1}E=It(r),m=et[E]=Ot[E](r);function $l(U){r[5](U)}let Dt={name:"page",min:1,max:(At=r[0].records)==null?void 0:At.total_pages,step:1,decreaseLabel:"Previous page",increaseLabel:"Next page",style:"navigation"};r[0].filters.page!==void 0&&(Dt.value=r[0].filters.page),S=new Al({props:Dt}),rt.push(()=>Nl(S,"value",$l)),S.$on("input",r[6]),G=new Se({props:{icon:"plus"}});let me=r[0].view.database!=="tiles"&&hl(r);Ue=new Se({props:{icon:"leaf"}}),Be=new Se({props:{icon:"recycle"}});let be=r[0].record!==null&&vl(r);return wt=kl(r[9][0]),{c(){l=L(),t=g("section"),n=g("nav"),se(a.$$.fragment),s=L(),se(i.$$.fragment),o=L(),u=g("button"),d=g("span"),d.textContent=f,v=L(),se(b.$$.fragment),C=L(),m.c(),k=L(),p=g("nav"),w=g("div"),T=g("label"),T.textContent=B,q=L(),se(S.$$.fragment),N=W(`\r
      of `),O=W(y),P=L(),M=g("div"),Z=g("button"),se(G.$$.fragment),R=L(),Y=g("span"),Y.textContent=z,ae=L(),me&&me.c(),Ce=L(),ve=g("div"),ee=g("input"),fe=L(),ye=g("label"),se(Ue.$$.fragment),it=L(),Ve=g("span"),ce=W("Show"),Q=W(De),ot=W(" current database state"),nt=L(),we=g("label"),se(Be.$$.fragment),at=L(),X=g("span"),J=W("Show"),Ie=W(Te),je=W(" deleted records"),de=L(),te=g("input"),qe=L(),be&&be.c(),He=Ae(),this.h()},l(U){El("svelte-1ke6alb",Et.head).forEach(h),l=F(U),t=$(U,"SECTION",{class:!0});var ze=I(t);n=$(ze,"NAV",{class:!0});var Me=I(n);ie(a.$$.fragment,Me),s=F(Me),ie(i.$$.fragment,Me),o=F(Me),u=$(Me,"BUTTON",{class:!0,title:!0});var tt=I(u);d=$(tt,"SPAN",{class:!0,"data-svelte-h":!0}),ne(d)!=="svelte-iqo23s"&&(d.textContent=f),v=F(tt),ie(b.$$.fragment,tt),tt.forEach(h),Me.forEach(h),C=F(ze),m.l(ze),k=F(ze),p=$(ze,"NAV",{class:!0});var lt=I(p);w=$(lt,"DIV",{});var Je=I(w);T=$(Je,"LABEL",{for:!0,"data-svelte-h":!0}),ne(T)!=="svelte-1r8oyu6"&&(T.textContent=B),q=F(Je),ie(S.$$.fragment,Je),N=K(Je,`\r
      of `),O=K(Je,y),Je.forEach(h),P=F(lt),M=$(lt,"DIV",{id:!0,class:!0});var We=I(M);Z=$(We,"BUTTON",{class:!0,title:!0});var pt=I(Z);ie(G.$$.fragment,pt),R=F(pt),Y=$(pt,"SPAN",{class:!0,"data-svelte-h":!0}),ne(Y)!=="svelte-19x6y3e"&&(Y.textContent=z),pt.forEach(h),ae=F(We),me&&me.l(We),Ce=F(We),ve=$(We,"DIV",{class:!0});var Ke=I(ve);ee=$(Ke,"INPUT",{type:!0,name:!0,id:!0,class:!0}),fe=F(Ke),ye=$(Ke,"LABEL",{for:!0,class:!0,title:!0});var ht=I(ye);ie(Ue.$$.fragment,ht),it=F(ht),Ve=$(ht,"SPAN",{class:!0});var vt=I(Ve);ce=K(vt,"Show"),Q=K(vt,De),ot=K(vt," current database state"),vt.forEach(h),ht.forEach(h),nt=F(Ke),we=$(Ke,"LABEL",{for:!0,class:!0,title:!0});var mt=I(we);ie(Be.$$.fragment,mt),at=F(mt),X=$(mt,"SPAN",{class:!0});var bt=I(X);J=K(bt,"Show"),Ie=K(bt,Te),je=K(bt," deleted records"),bt.forEach(h),mt.forEach(h),de=F(Ke),te=$(Ke,"INPUT",{type:!0,name:!0,id:!0,class:!0}),Ke.forEach(h),We.forEach(h),lt.forEach(h),ze.forEach(h),qe=F(U),be&&be.l(U),He=Ae(),this.h()},h(){_(d,"class","label"),_(u,"class","button svelte-afbo94"),_(u,"title","Refresh current view (R)"),ke(u,"refreshing",r[2]),_(n,"class","svelte-afbo94"),_(T,"for","page"),_(Y,"class","label"),_(Z,"class","button"),_(Z,"title","Create new record"),_(ee,"type","radio"),_(ee,"name","deleted"),_(ee,"id","deletedTrue"),ee.__value="false",re(ee,ee.__value),ee.disabled=Oe=r[0].filters.deleted==="false",_(ee,"class","svelte-afbo94"),_(Ve,"class","label"),_(ye,"for","deletedTrue"),_(ye,"class","button"),_(ye,"title",pe="Show"+(r[0].filters.deleted==="false"?"ing":"")+" current database state"),ke(ye,"active",r[0].filters.deleted==="false"),ke(ye,"disabled",r[0].filters.deleted==="false"),_(X,"class","label"),_(we,"for","deletedFalse"),_(we,"class","button"),_(we,"title",Le="Show"+(r[0].filters.deleted==="true"?"ing":"")+" deleted records"),ke(we,"active",r[0].filters.deleted==="true"),ke(we,"disabled",r[0].filters.deleted==="true"),_(te,"type","radio"),_(te,"name","deleted"),_(te,"id","deletedFalse"),te.__value="true",re(te,te.__value),te.disabled=xe=r[0].filters.deleted==="true",_(te,"class","svelte-afbo94"),_(ve,"class","combo svelte-afbo94"),_(M,"id","viewOptions"),_(M,"class","svelte-afbo94"),_(p,"class","pagination svelte-afbo94"),_(t,"class","svelte-afbo94"),wt.p(ee,te)},m(U,x){A(U,l,x),A(U,t,x),c(t,n),oe(a,n,null),c(n,s),oe(i,n,null),c(n,o),c(n,u),c(u,d),c(u,v),oe(b,u,null),c(t,C),et[E].m(t,null),c(t,k),c(t,p),c(p,w),c(w,T),c(w,q),oe(S,w,null),c(w,N),c(w,O),c(p,P),c(p,M),c(M,Z),oe(G,Z,null),c(Z,R),c(Z,Y),c(M,ae),me&&me.m(M,null),c(M,Ce),c(M,ve),c(ve,ee),ee.checked=ee.__value===r[0].filters.deleted,c(ve,fe),c(ve,ye),oe(Ue,ye,null),c(ye,it),c(ye,Ve),c(Ve,ce),c(Ve,Q),c(Ve,ot),c(ve,nt),c(ve,we),oe(Be,we,null),c(we,at),c(we,X),c(X,J),c(X,Ie),c(X,je),c(ve,de),c(ve,te),te.checked=te.__value===r[0].filters.deleted,A(U,qe,x),be&&be.m(U,x),A(U,He,x),he=!0,kt||(St=[le(window,"keypress",r[4]),le(u,"click",r[3]),le(Z,"click",_t(r[7])),le(ee,"change",r[8]),le(ee,"change",r[10]),le(te,"change",r[11]),le(te,"change",r[12])],kt=!0)},p(U,[x]){var tt,lt,Je,We;(!he||x&1)&&e!==(e=(((tt=U[0].table)==null?void 0:tt.name)||"Loading…")+((lt=U[0].online)!=null&&lt.MPKIT_URL?": "+U[0].online.MPKIT_URL.replace("https://",""):""))&&(Et.title=e),(!he||x&4)&&ke(u,"refreshing",U[2]);let ze=E;E=It(U),E!==ze&&(ge(),j(et[ze],1,1,()=>{et[ze]=null}),$e(),m=et[E],m||(m=et[E]=Ot[E](U),m.c()),D(m,1),m.m(t,k));const Me={};x&1&&(Me.max=(Je=U[0].records)==null?void 0:Je.total_pages),!V&&x&1&&(V=!0,Me.value=U[0].filters.page,Tl(()=>V=!1)),S.$set(Me),(!he||x&1)&&y!==(y=(((We=U[0].records)==null?void 0:We.total_pages)||1)+"")&&_e(O,y),U[0].view.database!=="tiles"?me?(me.p(U,x),x&1&&D(me,1)):(me=hl(U),me.c(),D(me,1),me.m(M,Ce)):me&&(ge(),j(me,1,1,()=>{me=null}),$e()),(!he||x&1&&Oe!==(Oe=U[0].filters.deleted==="false"))&&(ee.disabled=Oe),x&1&&(ee.checked=ee.__value===U[0].filters.deleted),(!he||x&1)&&De!==(De=U[0].filters.deleted==="false"?"ing":"")&&_e(Q,De),(!he||x&1&&pe!==(pe="Show"+(U[0].filters.deleted==="false"?"ing":"")+" current database state"))&&_(ye,"title",pe),(!he||x&1)&&ke(ye,"active",U[0].filters.deleted==="false"),(!he||x&1)&&ke(ye,"disabled",U[0].filters.deleted==="false"),(!he||x&1)&&Te!==(Te=U[0].filters.deleted==="true"?"ing":"")&&_e(Ie,Te),(!he||x&1&&Le!==(Le="Show"+(U[0].filters.deleted==="true"?"ing":"")+" deleted records"))&&_(we,"title",Le),(!he||x&1)&&ke(we,"active",U[0].filters.deleted==="true"),(!he||x&1)&&ke(we,"disabled",U[0].filters.deleted==="true"),(!he||x&1&&xe!==(xe=U[0].filters.deleted==="true"))&&(te.disabled=xe),x&1&&(te.checked=te.__value===U[0].filters.deleted),U[0].record!==null?be?(be.p(U,x),x&1&&D(be,1)):(be=vl(U),be.c(),D(be,1),be.m(He.parentNode,He)):be&&(ge(),j(be,1,1,()=>{be=null}),$e())},i(U){he||(D(a.$$.fragment,U),D(i.$$.fragment,U),D(b.$$.fragment,U),D(m),D(S.$$.fragment,U),D(G.$$.fragment,U),D(me),D(Ue.$$.fragment,U),D(Be.$$.fragment,U),D(be),he=!0)},o(U){j(a.$$.fragment,U),j(i.$$.fragment,U),j(b.$$.fragment,U),j(m),j(S.$$.fragment,U),j(G.$$.fragment,U),j(me),j(Ue.$$.fragment,U),j(Be.$$.fragment,U),j(be),he=!1},d(U){U&&(h(l),h(t),h(qe),h(He)),ue(a),ue(i),ue(b),et[E].d(),ue(S),ue(G),me&&me.d(),ue(Ue),ue(Be),be&&be.d(U),wt.r(),kt=!1,st(St)}}}function Dr(r,e,l){let t,n;Pe(r,H,m=>l(0,t=m)),Pe(r,yt,m=>l(1,n=m));let a=!1;const s=()=>{l(2,a=!0),Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}).then(()=>l(2,a=!1))},i=m=>{document.activeElement===document.body&&!m.target.matches("input, textarea")&&m.key==="r"&&s()},o=[[]];function u(m){r.$$.not_equal(t.filters.page,m)&&(t.filters.page=m,H.set(t))}const d=()=>{Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})},f=()=>Fe(H,t.record={},t);function v(){t.filters.deleted=this.__value,H.set(t)}const b=()=>{Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function C(){t.filters.deleted=this.__value,H.set(t)}const E=()=>{Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};return r.$$.update=()=>{r.$$.dirty&3&&Fe(H,t.table=t.tables.filter(m=>m.id===n.params.id)[0],t),r.$$.dirty&2&&n.params.id&&Ne.get({table:n.params.id})&&H.clearFilters()},[t,n,a,s,i,u,d,f,v,o,b,C,E]}class Jr extends Ge{constructor(e){super(),Qe(this,e,Dr,Ir,Ze,{})}}export{Jr as component};
