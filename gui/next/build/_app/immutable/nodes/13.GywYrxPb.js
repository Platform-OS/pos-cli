import{s as Me,f as g,g as $,h as I,d as _,i as P,x as Q,R as ut,w as Pe,e as Fe,N as Xe,a as F,r as ne,c as A,j as f,K as x,B as ot,v as c,L as Ke,y as Ge,A as De,P as gt,p as Ze,l as W,m as K,n as de,z as Le,H as Ct,S as pl,T as Dt,u as ke,U as hl,o as gl,t as $l,J as kl,M as yl,I as wl}from"../chunks/scheduler.sKKhyktU.js";import{S as qe,i as He,a as D,g as be,t as R,c as ge,b as se,d as ie,m as oe,e as ue,f as Pt,h as El}from"../chunks/index.LYVpS7Hw.js";import{g as Tl}from"../chunks/globals.0cDDIVm6.js";import{p as kt}from"../chunks/stores.0gpSmyXK.js";import{s as J}from"../chunks/state.u3CNLQkb.js";import{g as at}from"../chunks/graphql.vANW7X3L.js";import{I as Ce}from"../chunks/Icon.rkznIECp.js";import{e as ye,u as Cl,o as Nl}from"../chunks/each.3GYeTQvW.js";import{t as Tt}from"../chunks/tryParseJSON.KtkvGy73.js";import{J as Sl}from"../chunks/JSONTree.k3p57Rl8.js";import{q as Ol}from"../chunks/index.yKNLBoKC.js";import{N as Il}from"../chunks/Number.AOsc1o8j.js";const Ll={array:"value_array",boolean:"value_boolean",date:"value",datetime:"value",float:"value_float",integer:"value_int",string:"value",text:"value",upload:"value",json:"value_json"},vl={string:"String",integer:"Int",float:"Float",boolean:"Boolean",array:"[String!]",json:"JSONPayload",range:"RangeFilter"},Dl=(r=[])=>{let e="",l={},t="";const n={string:["array_contains","not_array_contains","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with","value"],int:["value_int","not_value_int"],float:["not_value_float","value_float"],bool:["exists","not_value_boolean","value_boolean"],range:["range"],array:["value_array","not_value_array","value_in","not_value_in","array_overlaps","not_array_overlaps"]};for(const a of r){if(!a.minFilterValue&&!a.maxFilterValue&&!a.value)break;let s="",i="";n.int.includes(a.operation)?(s="integer",i=parseInt(a.value)):n.float.includes(a.operation)?(s="float",i=parseFloat(a.value)):n.bool.includes(a.operation)?(s="boolean",i=a.value==="true"):n.range.includes(a.operation)?(s="range",i={},i[a.minFilter]=a.minFilterValue,i[a.maxFilter]=a.maxFilterValue):n.array.includes(a.operation)?(s="array",i=JSON.parse(a.value)):(s="string",i=a.value),a.name!=="id"&&(e+=`, $${a.name}: ${vl[s]}`,l[a.name]=i,t+=`{
        name: "${a.name}",
        ${a.operation}: $${a.name}
      }`)}return e.length&&(e=e.slice(2),e=`(${e})`),t=`
    properties: [${t}]
  `,{variablesDefinition:e,variables:l,propertiesFilter:t}},Ft=r=>{const e=r.entries();let l="",t={},n="",a={};function s(i,o){return o===""?null:i==="integer"?parseInt(o):i==="float"?parseFloat(o):i==="boolean"?o==="true":i==="array"||i==="json"?JSON.parse(o):o}for(const[i,o]of e)if(i.indexOf("[")>=0){let u=i.slice(0,i.indexOf("[")),p=i.slice(i.indexOf("[")+1,i.indexOf("]"));(a[u]??={})[p]=o}for(const i in a)l+=`, $${i}: ${vl[a[i].type]}`,t[i]=s(a[i].type,a[i].value),n+=`{ name: "${i}", ${Ll[a[i].type]}: $${i} }`;return l.length&&(l=l.slice(2),l=`(${l})`),{variablesDefinition:l,variables:t,properties:n}},Te={get:r=>{const l={...{deleted:!1,filters:{page:1}},...r},t=l.table?`table_id: { value: ${l.table} }`:"",n=l.filters?.attributes?.findIndex(p=>p.name==="id");let a="";n>=0&&l.filters.attributes[n].value&&(a=`id: { ${l.filters.attributes[n].operation}: ${l.filters.attributes[n].value} }`);let s="";l.sort?l.sort.by==="id"||l.sort.by==="created_at"||l.sort.by==="updated_at"?s=`${l.sort.by}: { order: ${l.sort.order} }`:s=`properties: { name: "${l.sort.by}", order: ${l.sort.order} }`:s="created_at: { order: DESC }";const i=l.deleted==="true"?"deleted_at: { exists: true }":"",o=Dl(l.filters?.attributes),u=`
      query${o.variablesDefinition} {
        records(
          page: ${l.filters.page}
          per_page: 20,
          sort: { ${s} },
          filter: {
            ${t}
            ${a}
            ${i}
            ${o.propertiesFilter}
          }
        ) {
          current_page
          total_pages
          results {
            id
            created_at
            updated_at
            deleted_at
            properties
          }
        }
      }`;return at({query:u,variables:o.variables}).then(p=>{J.data("records",p.records)})},create:r=>{const l=Object.fromEntries(r.properties.entries()).tableName,t=Ft(r.properties),n=`
      mutation${t.variablesDefinition} {
        record_create(record: {
          table: "${l}",
          properties: [${t.properties}]
        }) {
          id
        }
      }`;return at({query:n,variables:t.variables})},edit:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=Ft(r.properties),a=`
      mutation${n.variablesDefinition} {
        record_update(
          id: ${t},
          record: {
            table: "${l}"
            properties: [${n.properties}]
          }
        ) {
          id
        }
      }`;return at({query:a,variables:n.variables})},delete:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=`
      mutation {
        record_delete(table: "${l}", id: ${t}) {
          id
        }
      }`;return at({query:n})},restore:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,n=`
      mutation {
        record_update(
          id: ${e.recordId},
          record: {
            table: "${l}",
            deleted_at: null
          }
        ) {
          id
        }
      }`;return at({query:n})}};function At(r,e,l){const t=r.slice();return t[10]=e[l],t[11]=e,t[12]=l,t}function jt(r,e,l){const t=r.slice();return t[13]=e[l],t}function Rt(r,e,l){const t=r.slice();return t[16]=e[l],t}function Ut(r){let e,l,t=ye(r[1].filters.attributes),n=[];for(let s=0;s<t.length;s+=1)n[s]=zt(At(r,t,s));const a=s=>R(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Fe()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);e=Fe()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);P(s,e,i),l=!0},p(s,i){if(i&6){t=ye(s[1].filters.attributes);let o;for(o=0;o<t.length;o+=1){const u=At(s,t,o);n[o]?(n[o].p(u,i),D(n[o],1)):(n[o]=zt(u),n[o].c(),D(n[o],1),n[o].m(e.parentNode,e))}for(be(),o=t.length;o<n.length;o+=1)a(o);ge()}},i(s){if(!l){for(let i=0;i<t.length;i+=1)D(n[i]);l=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)R(n[i]);l=!1},d(s){s&&_(e),Xe(n,s)}}}function Vt(r){let e,l=r[16].name+"",t,n,a;return{c(){e=g("option"),t=W(l),n=F(),this.h()},l(s){e=$(s,"OPTION",{});var i=I(e);t=K(i,l),n=A(i),i.forEach(_),this.h()},h(){e.__value=a=r[16].name,x(e,e.__value)},m(s,i){P(s,e,i),c(e,t),c(e,n)},p(s,i){i&2&&l!==(l=s[16].name+"")&&de(t,l),i&2&&a!==(a=s[16].name)&&(e.__value=a,x(e,e.__value))},d(s){s&&_(e)}}}function Pl(r){let e,l,t=r[10].attribute_type+"",n;return{c(){e=W("Unknow property type: "),l=g("code"),n=W(t)},l(a){e=K(a,"Unknow property type: "),l=$(a,"CODE",{});var s=I(l);n=K(s,t),s.forEach(_)},m(a,s){P(a,e,s),P(a,l,s),c(l,n)},p(a,s){s&2&&t!==(t=a[10].attribute_type+"")&&de(n,t)},i:Le,o:Le,d(a){a&&(_(e),_(l))}}}function Fl(r){let e,l,t,n,a,s="Apply filters",i,o,u,p,d,v=ye(r[2][r[10].attribute_type]),k=[];for(let h=0;h<v.length;h+=1)k[h]=Bt(jt(r,v,h));function w(){r[7].call(e,r[11],r[12])}function T(h,y){return h[10].operation==="exists"?Rl:h[10].operation==="range"?jl:Al}let b=T(r),E=b(r);return o=new Ce({props:{icon:"arrowRight"}}),{c(){e=g("select");for(let h=0;h<k.length;h+=1)k[h].c();l=F(),E.c(),t=F(),n=g("button"),a=g("span"),a.textContent=s,i=F(),se(o.$$.fragment),this.h()},l(h){e=$(h,"SELECT",{name:!0,class:!0});var y=I(e);for(let L=0;L<k.length;L+=1)k[L].l(y);y.forEach(_),l=A(h),E.l(h),t=A(h),n=$(h,"BUTTON",{type:!0,class:!0});var C=I(n);a=$(C,"SPAN",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-6jbkuq"&&(a.textContent=s),i=A(C),ie(o.$$.fragment,C),C.forEach(_),this.h()},h(){f(e,"name","operation"),f(e,"class","svelte-y4u12o"),r[10].operation===void 0&&ot(w),f(a,"class","label"),f(n,"type","submit"),f(n,"class","button svelte-y4u12o")},m(h,y){P(h,e,y);for(let C=0;C<k.length;C+=1)k[C]&&k[C].m(e,null);Ke(e,r[10].operation,!0),P(h,l,y),E.m(h,y),P(h,t,y),P(h,n,y),c(n,a),c(n,i),oe(o,n,null),u=!0,p||(d=Q(e,"change",w),p=!0)},p(h,y){if(r=h,y&6){v=ye(r[2][r[10].attribute_type]);let C;for(C=0;C<v.length;C+=1){const L=jt(r,v,C);k[C]?k[C].p(L,y):(k[C]=Bt(L),k[C].c(),k[C].m(e,null))}for(;C<k.length;C+=1)k[C].d(1);k.length=v.length}y&2&&Ke(e,r[10].operation),b===(b=T(r))&&E?E.p(r,y):(E.d(1),E=b(r),E&&(E.c(),E.m(t.parentNode,t)))},i(h){u||(D(o.$$.fragment,h),u=!0)},o(h){R(o.$$.fragment,h),u=!1},d(h){h&&(_(e),_(l),_(t),_(n)),Xe(k,h),E.d(h),ue(o),p=!1,d()}}}function Bt(r){let e,l=r[13]+"",t,n;return{c(){e=g("option"),t=W(l),this.h()},l(a){e=$(a,"OPTION",{});var s=I(e);t=K(s,l),s.forEach(_),this.h()},h(){e.__value=n=r[13],x(e,e.__value)},m(a,s){P(a,e,s),c(e,t)},p(a,s){s&2&&l!==(l=a[13]+"")&&de(t,l),s&2&&n!==(n=a[13])&&(e.__value=n,x(e,e.__value))},d(a){a&&_(e)}}}function Al(r){let e,l,t;function n(){r[8].call(e,r[11],r[12])}return{c(){e=g("input"),this.h()},l(a){e=$(a,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){f(e,"type","text"),f(e,"name","value"),f(e,"placeholder","filter value"),f(e,"class","svelte-y4u12o")},m(a,s){P(a,e,s),x(e,r[10].value),l||(t=Q(e,"input",n),l=!0)},p(a,s){r=a,s&2&&e.value!==r[10].value&&x(e,r[10].value)},d(a){a&&_(e),l=!1,t()}}}function jl(r){let e,l,t=">",n,a="≥",s,i,o,u,p,d,v="<",k,w="≤",T,b,E;return{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,s=F(),i=g("input"),u=F(),p=g("select"),d=g("option"),d.textContent=v,k=g("option"),k.textContent=w,T=F(),b=g("input"),this.h()},l(h){e=$(h,"SELECT",{name:!0,class:!0});var y=I(e);l=$(y,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-1xj81f9"&&(l.textContent=t),n=$(y,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-w6lec5"&&(n.textContent=a),y.forEach(_),s=A(h),i=$(h,"INPUT",{type:!0,name:!0,class:!0}),u=A(h),p=$(h,"SELECT",{name:!0,class:!0});var C=I(p);d=$(C,"OPTION",{"data-svelte-h":!0}),ne(d)!=="svelte-1kxptxj"&&(d.textContent=v),k=$(C,"OPTION",{"data-svelte-h":!0}),ne(k)!=="svelte-1juwqhl"&&(k.textContent=w),C.forEach(_),T=A(h),b=$(h,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){l.__value="gt",x(l,l.__value),n.__value="gte",x(n,n.__value),f(e,"name","maxFilter"),f(e,"class","svelte-y4u12o"),f(i,"type","number"),f(i,"name","maxFilterValue"),i.value=o=r[10].maxFilterValue,f(i,"class","svelte-y4u12o"),d.__value="lt",x(d,d.__value),k.__value="lte",x(k,k.__value),f(p,"name","minFilter"),f(p,"class","svelte-y4u12o"),f(b,"type","number"),f(b,"name","minFilterValue"),b.value=E=r[10].minFilterValue,f(b,"class","svelte-y4u12o")},m(h,y){P(h,e,y),c(e,l),c(e,n),P(h,s,y),P(h,i,y),P(h,u,y),P(h,p,y),c(p,d),c(p,k),P(h,T,y),P(h,b,y)},p(h,y){y&2&&o!==(o=h[10].maxFilterValue)&&i.value!==o&&(i.value=o),y&2&&E!==(E=h[10].minFilterValue)&&b.value!==E&&(b.value=E)},d(h){h&&(_(e),_(s),_(i),_(u),_(p),_(T),_(b))}}}function Rl(r){let e,l,t="true",n,a="false";return{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,this.h()},l(s){e=$(s,"SELECT",{name:!0,class:!0});var i=I(e);l=$(i,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-ogzxji"&&(l.textContent=t),n=$(i,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-gyv02o"&&(n.textContent=a),i.forEach(_),this.h()},h(){l.__value="true",x(l,l.__value),n.__value="false",x(n,n.__value),f(e,"name","value"),f(e,"class","svelte-y4u12o")},m(s,i){P(s,e,i),c(e,l),c(e,n)},p:Le,d(s){s&&_(e)}}}function zt(r){let e,l,t="Filter by:",n,a,s,i="id",o,u,p,d,v,k,w,T,b,E=ye(r[1].table.properties),h=[];for(let S=0;S<E.length;S+=1)h[S]=Vt(Rt(r,E,S));function y(){r[4].call(a,r[11],r[12])}function C(){return r[5](r[10],r[11],r[12])}function L(){r[6].call(u,r[11],r[12])}const z=[Fl,Pl],O=[];function B(S,m){return S[2][S[10].attribute_type]?0:1}return d=B(r),v=O[d]=z[d](r),{c(){e=g("fieldset"),l=g("label"),l.textContent=t,n=F(),a=g("select"),s=g("option"),s.textContent=i;for(let S=0;S<h.length;S+=1)h[S].c();o=F(),u=g("input"),p=F(),v.c(),k=F(),this.h()},l(S){e=$(S,"FIELDSET",{class:!0});var m=I(e);l=$(m,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ne(l)!=="svelte-1adf875"&&(l.textContent=t),n=A(m),a=$(m,"SELECT",{name:!0,class:!0});var N=I(a);s=$(N,"OPTION",{"data-svelte-h":!0}),ne(s)!=="svelte-ns3pfu"&&(s.textContent=i);for(let j=0;j<h.length;j+=1)h[j].l(N);N.forEach(_),o=A(m),u=$(m,"INPUT",{type:!0,name:!0}),p=A(m),v.l(m),k=A(m),m.forEach(_),this.h()},h(){f(l,"for",""),f(l,"class","svelte-y4u12o"),s.__value="id",x(s,s.__value),f(a,"name","name"),f(a,"class","svelte-y4u12o"),r[10].name===void 0&&ot(y),f(u,"type","hidden"),f(u,"name","attribute_type"),f(e,"class","svelte-y4u12o")},m(S,m){P(S,e,m),c(e,l),c(e,n),c(e,a),c(a,s);for(let N=0;N<h.length;N+=1)h[N]&&h[N].m(a,null);Ke(a,r[10].name,!0),c(e,o),c(e,u),x(u,r[10].attribute_type),c(e,p),O[d].m(e,null),c(e,k),w=!0,T||(b=[Q(a,"change",y),Q(a,"change",C),Q(u,"input",L)],T=!0)},p(S,m){if(r=S,m&2){E=ye(r[1].table.properties);let j;for(j=0;j<E.length;j+=1){const H=Rt(r,E,j);h[j]?h[j].p(H,m):(h[j]=Vt(H),h[j].c(),h[j].m(a,null))}for(;j<h.length;j+=1)h[j].d(1);h.length=E.length}m&2&&Ke(a,r[10].name),m&2&&x(u,r[10].attribute_type);let N=d;d=B(r),d===N?O[d].p(r,m):(be(),R(O[N],1,1,()=>{O[N]=null}),ge(),v=O[d],v?v.p(r,m):(v=O[d]=z[d](r),v.c()),D(v,1),v.m(e,k))},i(S){w||(D(v),w=!0)},o(S){R(v),w=!1},d(S){S&&_(e),Xe(h,S),O[d].d(),T=!1,Ge(b)}}}function Ul(r){let e,l,t,n,a=r[1].table?.properties&&Ut(r);return{c(){e=g("form"),a&&a.c()},l(s){e=$(s,"FORM",{});var i=I(e);a&&a.l(i),i.forEach(_)},m(s,i){P(s,e,i),a&&a.m(e,null),r[9](e),l=!0,t||(n=Q(e,"submit",ut(r[3])),t=!0)},p(s,[i]){s[1].table?.properties?a?(a.p(s,i),i&2&&D(a,1)):(a=Ut(s),a.c(),D(a,1),a.m(e,null)):a&&(be(),R(a,1,1,()=>{a=null}),ge())},i(s){l||(D(a),l=!0)},o(s){R(a),l=!1},d(s){s&&_(e),a&&a.d(),r[9](null),t=!1,n()}}}function Vl(r,e,l){let t;Pe(r,J,k=>l(1,t=k));let n;const a={id:["value"],string:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"],text:["value","exists","not_value"],array:["array_contains","value_array","value_in","exists","array_overlaps","not_array_contains","not_array_overlaps","not_value_array","not_value_in"],boolean:["value_boolean","exists","not_value_boolean"],integer:["value_int","exists","not_value_int","range"],float:["value_float","exists","not_value_float","range"],upload:["value","exists","not_value"],datetime:["value","exists","not_value"],date:["value","exists","not_value"]},s=()=>{De(J,t.filters={page:1,attributes:[Object.fromEntries(new FormData(n).entries())],deleted:t.filters.deleted},t),Te.get({table:t.table.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function i(k,w){k[w].name=gt(this),J.set(t)}const o=(k,w,T)=>{De(J,w[T].attribute_type=t.table.properties.find(b=>b.name===k.name)?.attribute_type||"id",t)};function u(k,w){k[w].attribute_type=this.value,J.set(t)}function p(k,w){k[w].operation=gt(this),J.set(t)}function d(k,w){k[w].value=this.value,J.set(t)}function v(k){Ze[k?"unshift":"push"](()=>{n=k,l(0,n)})}return[n,t,a,s,i,o,u,p,d,v]}class Bl extends qe{constructor(e){super(),He(this,e,Vl,Ul,Me,{})}}function Mt(r,e,l){const t=r.slice();return t[8]=e[l],t}function qt(r){let e,l,t="created at",n,a="updated at",s,i="id",o,u,p,d="DESC [Z→A]",v,k="ASC [A→Z]",w,T,b,E,h,y,C,L=ye(r[1].table.properties),z=[];for(let m=0;m<L.length;m+=1)z[m]=Ht(Mt(r,L,m));const O=[Ml,zl],B=[];function S(m,N){return m[1].sort.order==="DESC"?0:1}return b=S(r),E=B[b]=O[b](r),{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,s=g("option"),s.textContent=i;for(let m=0;m<z.length;m+=1)z[m].c();o=F(),u=g("select"),p=g("option"),p.textContent=d,v=g("option"),v.textContent=k,w=F(),T=g("label"),E.c(),this.h()},l(m){e=$(m,"SELECT",{name:!0,id:!0,class:!0});var N=I(e);l=$(N,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-waq5ct"&&(l.textContent=t),n=$(N,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-msojyp"&&(n.textContent=a),s=$(N,"OPTION",{"data-svelte-h":!0}),ne(s)!=="svelte-ns3pfu"&&(s.textContent=i);for(let Y=0;Y<z.length;Y+=1)z[Y].l(N);N.forEach(_),o=A(m),u=$(m,"SELECT",{name:!0,id:!0,class:!0});var j=I(u);p=$(j,"OPTION",{"data-svelte-h":!0}),ne(p)!=="svelte-1soe6tv"&&(p.textContent=d),v=$(j,"OPTION",{"data-svelte-h":!0}),ne(v)!=="svelte-ih5v4p"&&(v.textContent=k),j.forEach(_),w=A(m),T=$(m,"LABEL",{for:!0,class:!0});var H=I(T);E.l(H),H.forEach(_),this.h()},h(){l.__value="created_at",x(l,l.__value),n.__value="updated_at",x(n,n.__value),s.__value="id",x(s,s.__value),f(e,"name","by"),f(e,"id","sort_by"),f(e,"class","svelte-yzlk61"),r[1].sort.by===void 0&&ot(()=>r[3].call(e)),p.__value="DESC",x(p,p.__value),v.__value="ASC",x(v,v.__value),f(u,"name","order"),f(u,"id","sort_order"),f(u,"class","svelte-yzlk61"),r[1].sort.order===void 0&&ot(()=>r[5].call(u)),f(T,"for","sort_order"),f(T,"class","button svelte-yzlk61")},m(m,N){P(m,e,N),c(e,l),c(e,n),c(e,s);for(let j=0;j<z.length;j+=1)z[j]&&z[j].m(e,null);Ke(e,r[1].sort.by,!0),P(m,o,N),P(m,u,N),c(u,p),c(u,v),Ke(u,r[1].sort.order,!0),P(m,w,N),P(m,T,N),B[b].m(T,null),h=!0,y||(C=[Q(e,"change",r[3]),Q(e,"change",r[4]),Q(u,"change",r[5]),Q(u,"change",r[6])],y=!0)},p(m,N){if(N&2){L=ye(m[1].table.properties);let H;for(H=0;H<L.length;H+=1){const Y=Mt(m,L,H);z[H]?z[H].p(Y,N):(z[H]=Ht(Y),z[H].c(),z[H].m(e,null))}for(;H<z.length;H+=1)z[H].d(1);z.length=L.length}N&2&&Ke(e,m[1].sort.by),N&2&&Ke(u,m[1].sort.order);let j=b;b=S(m),b!==j&&(be(),R(B[j],1,1,()=>{B[j]=null}),ge(),E=B[b],E||(E=B[b]=O[b](m),E.c()),D(E,1),E.m(T,null))},i(m){h||(D(E),h=!0)},o(m){R(E),h=!1},d(m){m&&(_(e),_(o),_(u),_(w),_(T)),Xe(z,m),B[b].d(),y=!1,Ge(C)}}}function Ht(r){let e,l=r[8].name+"",t,n,a;return{c(){e=g("option"),t=W(l),n=F(),this.h()},l(s){e=$(s,"OPTION",{});var i=I(e);t=K(i,l),n=A(i),i.forEach(_),this.h()},h(){e.__value=a=r[8].name,x(e,e.__value)},m(s,i){P(s,e,i),c(e,t),c(e,n)},p(s,i){i&2&&l!==(l=s[8].name+"")&&de(t,l),i&2&&a!==(a=s[8].name)&&(e.__value=a,x(e,e.__value))},d(s){s&&_(e)}}}function zl(r){let e,l;return e=new Ce({props:{icon:"sortAZ"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Ml(r){let e,l;return e=new Ce({props:{icon:"sortZA"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function ql(r){let e,l,t,n,a=r[1].table?.properties&&qt(r);return{c(){e=g("form"),a&&a.c(),this.h()},l(s){e=$(s,"FORM",{class:!0});var i=I(e);a&&a.l(i),i.forEach(_),this.h()},h(){f(e,"class","svelte-yzlk61")},m(s,i){P(s,e,i),a&&a.m(e,null),r[7](e),l=!0,t||(n=Q(e,"submit",ut(r[2])),t=!0)},p(s,[i]){s[1].table?.properties?a?(a.p(s,i),i&2&&D(a,1)):(a=qt(s),a.c(),D(a,1),a.m(e,null)):a&&(be(),R(a,1,1,()=>{a=null}),ge())},i(s){l||(D(a),l=!0)},o(s){R(a),l=!1},d(s){s&&_(e),a&&a.d(),r[7](null),t=!1,n()}}}function Hl(r,e,l){let t;Pe(r,J,d=>l(1,t=d));let n;const a=()=>{De(J,t.filters.page=1,t),Te.get({table:t.table.id,filters:t.filters,sort:Object.fromEntries(new FormData(n).entries()),deleted:t.filters.deleted})};function s(){t.sort.by=gt(this),J.set(t)}const i=()=>n.requestSubmit();function o(){t.sort.order=gt(this),J.set(t)}const u=()=>n.requestSubmit();function p(d){Ze[d?"unshift":"push"](()=>{n=d,l(0,n)})}return[n,t,a,s,i,o,u,p]}class Jl extends qe{constructor(e){super(),He(this,e,Hl,ql,Me,{})}}const ml=(r,e)=>{let l={value:r,type:e};return r===null?(l.value=null,l.type="null",{...l}):(e==="boolean"&&(r===!0?l.value="true":r===void 0?(l.value=null,l.type="null"):l.value="false"),typeof r=="object"?(l.value=r,l.type="json",{...l}):Tt(r)?(l.value=Tt(r),l.type="jsonEscaped",{...l}):{...l,original:{value:r,type:e}})},Wl=(r,e)=>{const l=t=>{t.composedPath().includes(r)||e()};return document.addEventListener("mousedown",l),{destroy(){document.removeEventListener("mousedown",l)}}};function Kl(r){let e,l,t,n,a,s,i,o,u,p,d,v,k;return u=new Ce({props:{icon:"x",size:"22"}}),{c(){e=g("form"),l=g("input"),n=F(),a=g("input"),s=F(),i=g("button"),o=g("i"),se(u.$$.fragment),p=W(`\r
    Delete record`),this.h()},l(w){e=$(w,"FORM",{});var T=I(e);l=$(T,"INPUT",{type:!0,name:!0}),n=A(T),a=$(T,"INPUT",{type:!0,name:!0}),s=A(T),i=$(T,"BUTTON",{class:!0});var b=I(i);o=$(b,"I",{class:!0});var E=I(o);ie(u.$$.fragment,E),E.forEach(_),p=K(b,`\r
    Delete record`),b.forEach(_),T.forEach(_),this.h()},h(){f(l,"type","hidden"),f(l,"name","tableName"),l.value=t=r[0].name,f(a,"type","hidden"),f(a,"name","recordId"),a.value=r[1],f(o,"class","svelte-ooaugn"),f(i,"class","danger")},m(w,T){P(w,e,T),c(e,l),c(e,n),c(e,a),c(e,s),c(e,i),c(i,o),oe(u,o,null),c(i,p),r[4](e),d=!0,v||(k=Q(e,"submit",r[3]),v=!0)},p(w,[T]){(!d||T&1&&t!==(t=w[0].name))&&(l.value=t),(!d||T&2)&&(a.value=w[1])},i(w){d||(D(u.$$.fragment,w),d=!0)},o(w){R(u.$$.fragment,w),d=!1},d(w){w&&_(e),ue(u),r[4](null),v=!1,k()}}}function Xl(r,e,l){let t,n;Pe(r,J,d=>l(5,t=d)),Pe(r,kt,d=>l(6,n=d));let{table:a}=e,{id:s}=e,i,o=Ct();const u=async d=>{if(d.preventDefault(),confirm("Are you sure you want to delete this record?")){o("success");const v=await Te.delete({table:a.name,properties:new FormData(i)});v.errors?J.notification.create("error",`Record ${v.record_delete.id} could not be deleted`):(Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),J.notification.create("success",`Record ${v.record_delete.id} deleted`))}};function p(d){Ze[d?"unshift":"push"](()=>{i=d,l(2,i)})}return r.$$set=d=>{"table"in d&&l(0,a=d.table),"id"in d&&l(1,s=d.id)},[a,s,i,u,p]}class Yl extends qe{constructor(e){super(),He(this,e,Xl,Kl,Me,{table:0,id:1})}}function Zl(r){let e,l,t,n,a,s,i,o,u,p,d,v,k;return u=new Ce({props:{icon:"recycleRefresh"}}),{c(){e=g("form"),l=g("input"),n=F(),a=g("input"),s=F(),i=g("button"),o=g("i"),se(u.$$.fragment),p=W(`\r
    Restore record`),this.h()},l(w){e=$(w,"FORM",{});var T=I(e);l=$(T,"INPUT",{type:!0,name:!0}),n=A(T),a=$(T,"INPUT",{type:!0,name:!0}),s=A(T),i=$(T,"BUTTON",{});var b=I(i);o=$(b,"I",{});var E=I(o);ie(u.$$.fragment,E),E.forEach(_),p=K(b,`\r
    Restore record`),b.forEach(_),T.forEach(_),this.h()},h(){f(l,"type","hidden"),f(l,"name","tableName"),l.value=t=r[0].name,f(a,"type","hidden"),f(a,"name","recordId"),a.value=r[1]},m(w,T){P(w,e,T),c(e,l),c(e,n),c(e,a),c(e,s),c(e,i),c(i,o),oe(u,o,null),c(i,p),r[4](e),d=!0,v||(k=Q(e,"submit",r[3]),v=!0)},p(w,[T]){(!d||T&1&&t!==(t=w[0].name))&&(l.value=t),(!d||T&2)&&(a.value=w[1])},i(w){d||(D(u.$$.fragment,w),d=!0)},o(w){R(u.$$.fragment,w),d=!1},d(w){w&&_(e),ue(u),r[4](null),v=!1,k()}}}function Gl(r,e,l){let t,n;Pe(r,J,d=>l(5,t=d)),Pe(r,kt,d=>l(6,n=d));let{table:a}=e,{id:s}=e,i,o=Ct();const u=async d=>{d.preventDefault(),o("success");const v=await Te.restore({table:a.name,properties:new FormData(i)});v.errors?J.notification.create("error",`Record ${v.record_update.id} could not be restored`):(Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),J.notification.create("success",`Record ${v.record_update.id} restored`))};function p(d){Ze[d?"unshift":"push"](()=>{i=d,l(2,i)})}return r.$$set=d=>{"table"in d&&l(0,a=d.table),"id"in d&&l(1,s=d.id)},[a,s,i,u,p]}class Ql extends qe{constructor(e){super(),He(this,e,Gl,Zl,Me,{table:0,id:1})}}function xl(r){let e,l;return e=new Yl({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[6]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function er(r){let e,l;return e=new Ql({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[5]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function tr(r){let e,l,t,n,a,s,i,o,u,p,d,v,k;a=new Ce({props:{icon:"copy",size:"22"}});const w=[er,xl],T=[];function b(E,h){return E[1].filters.deleted==="true"?0:1}return u=b(r),p=T[u]=w[u](r),{c(){e=g("menu"),l=g("ul"),t=g("li"),n=g("button"),se(a.$$.fragment),s=W(`\r
        Copy record`),i=F(),o=g("li"),p.c(),this.h()},l(E){e=$(E,"MENU",{class:!0});var h=I(e);l=$(h,"UL",{});var y=I(l);t=$(y,"LI",{class:!0});var C=I(t);n=$(C,"BUTTON",{type:!0});var L=I(n);ie(a.$$.fragment,L),s=K(L,`\r
        Copy record`),L.forEach(_),C.forEach(_),i=A(y),o=$(y,"LI",{class:!0});var z=I(o);p.l(z),z.forEach(_),y.forEach(_),h.forEach(_),this.h()},h(){f(n,"type","button"),f(t,"class","svelte-1tht2a1"),f(o,"class","svelte-1tht2a1"),f(e,"class","content-context svelte-1tht2a1")},m(E,h){P(E,e,h),c(e,l),c(l,t),c(t,n),oe(a,n,null),c(n,s),c(l,i),c(l,o),T[u].m(o,null),d=!0,v||(k=[Q(window,"keyup",r[3]),Q(n,"click",r[4]),pl(Wl.call(null,e,r[7]))],v=!0)},p(E,[h]){let y=u;u=b(E),u===y?T[u].p(E,h):(be(),R(T[y],1,1,()=>{T[y]=null}),ge(),p=T[u],p?p.p(E,h):(p=T[u]=w[u](E),p.c()),D(p,1),p.m(o,null))},i(E){d||(D(a.$$.fragment,E),D(p),d=!0)},o(E){R(a.$$.fragment,E),R(p),d=!1},d(E){E&&_(e),ue(a),T[u].d(),v=!1,Ge(k)}}}function lr(r,e,l){let t;Pe(r,J,d=>l(1,t=d));let{record:n}=e;const a=Ct(),s=d=>{d.key==="Escape"&&a("close")},i=()=>{a("close"),De(J,t.record={...n},t),De(J,t.record.id=null,t)},o=()=>a("close"),u=()=>a("close"),p=()=>a("close");return r.$$set=d=>{"record"in d&&l(0,n=d.record)},[n,t,a,s,i,o,u,p]}class rr extends qe{constructor(e){super(),He(this,e,lr,tr,Me,{record:0})}}function Jt(r,e,l){const t=r.slice();return t[5]=e[l],t}function Wt(r,e,l){const t=r.slice();t[8]=e[l];const n=ml(t[5].properties[t[8].name],t[8].attribute_type);return t[9]=n,t}function Kt(r,e,l){const t=r.slice();return t[8]=e[l],t}function Xt(r){let e,l,t,n,a="id",s,i,o,u="created at",p,d,v="updated at",k,w,T,b,E=ye(r[1].table.properties),h=[];for(let L=0;L<E.length;L+=1)h[L]=Yt(Kt(r,E,L));let y=r[1].filters.deleted==="true"&&Zt(),C=r[1].records?.results?.length&&Gt(r);return{c(){e=g("table"),l=g("thead"),t=g("tr"),n=g("th"),n.textContent=a,s=F();for(let L=0;L<h.length;L+=1)h[L].c();i=F(),o=g("th"),o.textContent=u,p=F(),d=g("th"),d.textContent=v,k=F(),y&&y.c(),w=F(),C&&C.c(),this.h()},l(L){e=$(L,"TABLE",{class:!0});var z=I(e);l=$(z,"THEAD",{class:!0});var O=I(l);t=$(O,"TR",{});var B=I(t);n=$(B,"TH",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-1i366gx"&&(n.textContent=a),s=A(B);for(let S=0;S<h.length;S+=1)h[S].l(B);i=A(B),o=$(B,"TH",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-g832ob"&&(o.textContent=u),p=A(B),d=$(B,"TH",{class:!0,"data-svelte-h":!0}),ne(d)!=="svelte-1dvr12"&&(d.textContent=v),k=A(B),y&&y.l(B),B.forEach(_),O.forEach(_),w=A(z),C&&C.l(z),z.forEach(_),this.h()},h(){f(n,"class","id svelte-1bwwtph"),f(o,"class","svelte-1bwwtph"),f(d,"class","svelte-1bwwtph"),f(l,"class","svelte-1bwwtph"),f(e,"class",T=Dt(r[1].view.tableStyle)+" svelte-1bwwtph")},m(L,z){P(L,e,z),c(e,l),c(l,t),c(t,n),c(t,s);for(let O=0;O<h.length;O+=1)h[O]&&h[O].m(t,null);c(t,i),c(t,o),c(t,p),c(t,d),c(t,k),y&&y.m(t,null),c(e,w),C&&C.m(e,null),b=!0},p(L,z){if(z&2){E=ye(L[1].table.properties);let O;for(O=0;O<E.length;O+=1){const B=Kt(L,E,O);h[O]?h[O].p(B,z):(h[O]=Yt(B),h[O].c(),h[O].m(t,i))}for(;O<h.length;O+=1)h[O].d(1);h.length=E.length}L[1].filters.deleted==="true"?y||(y=Zt(),y.c(),y.m(t,null)):y&&(y.d(1),y=null),L[1].records?.results?.length?C?(C.p(L,z),z&2&&D(C,1)):(C=Gt(L),C.c(),D(C,1),C.m(e,null)):C&&(be(),R(C,1,1,()=>{C=null}),ge()),(!b||z&2&&T!==(T=Dt(L[1].view.tableStyle)+" svelte-1bwwtph"))&&f(e,"class",T)},i(L){b||(D(C),b=!0)},o(L){R(C),b=!1},d(L){L&&_(e),Xe(h,L),y&&y.d(),C&&C.d()}}}function Yt(r){let e,l=r[8].name+"",t,n,a,s,i=r[8].attribute_type+"",o,u;return{c(){e=g("th"),t=W(l),n=F(),a=g("small"),s=W("("),o=W(i),u=W(")"),this.h()},l(p){e=$(p,"TH",{class:!0});var d=I(e);t=K(d,l),n=A(d),a=$(d,"SMALL",{class:!0});var v=I(a);s=K(v,"("),o=K(v,i),u=K(v,")"),v.forEach(_),d.forEach(_),this.h()},h(){f(a,"class","type svelte-1bwwtph"),f(e,"class","svelte-1bwwtph")},m(p,d){P(p,e,d),c(e,t),c(e,n),c(e,a),c(a,s),c(a,o),c(a,u)},p(p,d){d&2&&l!==(l=p[8].name+"")&&de(t,l),d&2&&i!==(i=p[8].attribute_type+"")&&de(o,i)},d(p){p&&_(e)}}}function Zt(r){let e,l="deleted at";return{c(){e=g("th"),e.textContent=l,this.h()},l(t){e=$(t,"TH",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1jwm27o"&&(e.textContent=l),this.h()},h(){f(e,"class","svelte-1bwwtph")},m(t,n){P(t,e,n)},d(t){t&&_(e)}}}function Gt(r){let e=[],l=new Map,t,n,a=ye(r[1].records?.results);const s=i=>i[5].id;for(let i=0;i<a.length;i+=1){let o=Jt(r,a,i),u=s(o);l.set(u,e[i]=ll(u,o))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=Fe()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);t=Fe()},m(i,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(i,o);P(i,t,o),n=!0},p(i,o){o&3&&(a=ye(i[1].records?.results),be(),e=Cl(e,o,s,1,i,a,l,t.parentNode,Nl,ll,t,Jt),ge())},i(i){if(!n){for(let o=0;o<a.length;o+=1)D(e[o]);n=!0}},o(i){for(let o=0;o<e.length;o+=1)R(e[o]);n=!1},d(i){i&&_(t);for(let o=0;o<e.length;o+=1)e[o].d(i)}}}function Qt(r){let e,l;return e=new rr({props:{record:r[5]}}),e.$on("close",r[4]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.record=t[5]),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function xt(r){let e,l,t,n;const a=[ar,nr],s=[];function i(o,u){return o[9].type==="json"||o[9].type==="jsonEscaped"?0:1}return e=i(r),l=s[e]=a[e](r),{c(){l.c(),t=Fe()},l(o){l.l(o),t=Fe()},m(o,u){s[e].m(o,u),P(o,t,u),n=!0},p(o,u){let p=e;e=i(o),e===p?s[e].p(o,u):(be(),R(s[p],1,1,()=>{s[p]=null}),ge(),l=s[e],l?l.p(o,u):(l=s[e]=a[e](o),l.c()),D(l,1),l.m(t.parentNode,t))},i(o){n||(D(l),n=!0)},o(o){R(l),n=!1},d(o){o&&_(t),s[e].d(o)}}}function nr(r){let e=r[9].value+"",l;return{c(){l=W(e)},l(t){l=K(t,e)},m(t,n){P(t,l,n)},p(t,n){n&2&&e!==(e=t[9].value+"")&&de(l,e)},i:Le,o:Le,d(t){t&&_(l)}}}function ar(r){let e,l,t,n;const a=[ir,sr],s=[];function i(o,u){return o[1].view.tableStyle==="expanded"?0:1}return e=i(r),l=s[e]=a[e](r),{c(){l.c(),t=Fe()},l(o){l.l(o),t=Fe()},m(o,u){s[e].m(o,u),P(o,t,u),n=!0},p(o,u){let p=e;e=i(o),e===p?s[e].p(o,u):(be(),R(s[p],1,1,()=>{s[p]=null}),ge(),l=s[e],l?l.p(o,u):(l=s[e]=a[e](o),l.c()),D(l,1),l.m(t.parentNode,t))},i(o){n||(D(l),n=!0)},o(o){R(l),n=!1},d(o){o&&_(t),s[e].d(o)}}}function sr(r){let e=JSON.stringify(r[9].value)+"",l;return{c(){l=W(e)},l(t){l=K(t,e)},m(t,n){P(t,l,n)},p(t,n){n&2&&e!==(e=JSON.stringify(t[9].value)+"")&&de(l,e)},i:Le,o:Le,d(t){t&&_(l)}}}function ir(r){let e,l;return e=new Sl({props:{value:r[9].value}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.value=t[9].value),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function el(r){let e,l,t=r[9].value!==void 0&&xt(r);return{c(){e=g("td"),t&&t.c(),this.h()},l(n){e=$(n,"TD",{class:!0});var a=I(e);t&&t.l(a),a.forEach(_),this.h()},h(){f(e,"class","svelte-1bwwtph"),ke(e,"value-null",r[9].type==="null")},m(n,a){P(n,e,a),t&&t.m(e,null),l=!0},p(n,a){n[9].value!==void 0?t?(t.p(n,a),a&2&&D(t,1)):(t=xt(n),t.c(),D(t,1),t.m(e,null)):t&&(be(),R(t,1,1,()=>{t=null}),ge()),(!l||a&2)&&ke(e,"value-null",n[9].type==="null")},i(n){l||(D(t),l=!0)},o(n){R(t),l=!1},d(n){n&&_(e),t&&t.d()}}}function tl(r){let e,l=new Date(r[5]?.deleted_at).toLocaleDateString(void 0,{})+"",t,n,a,s=new Date(r[5]?.deleted_at).toLocaleTimeString(void 0,{})+"",i;return{c(){e=g("td"),t=W(l),n=F(),a=g("span"),i=W(s),this.h()},l(o){e=$(o,"TD",{class:!0});var u=I(e);t=K(u,l),n=A(u),a=$(u,"SPAN",{class:!0});var p=I(a);i=K(p,s),p.forEach(_),u.forEach(_),this.h()},h(){f(a,"class","svelte-1bwwtph"),f(e,"class","date svelte-1bwwtph")},m(o,u){P(o,e,u),c(e,t),c(e,n),c(e,a),c(a,i)},p(o,u){u&2&&l!==(l=new Date(o[5]?.deleted_at).toLocaleDateString(void 0,{})+"")&&de(t,l),u&2&&s!==(s=new Date(o[5]?.deleted_at).toLocaleTimeString(void 0,{})+"")&&de(i,s)},d(o){o&&_(e)}}}function ll(r,e){let l,t,n,a,s,i,o="More options",u,p,d,v,k,w="Edit record",T,b,E,h,y=e[5].id+"",C,L,z,O,B=new Date(e[5]?.created_at).toLocaleDateString(void 0,{})+"",S,m,N,j=new Date(e[5]?.created_at).toLocaleTimeString(void 0,{})+"",H,Y,Z,U=new Date(e[5]?.updated_at).toLocaleDateString(void 0,{})+"",X,q,ae,Ee=new Date(e[5]?.updated_at).toLocaleTimeString(void 0,{})+"",he,re,Ne,fe,$e,Ae;p=new Ce({props:{icon:"navigationMenuVertical",size:"16"}});function rt(){return e[2](e[5])}b=new Ce({props:{icon:"pencil",size:"16"}});function je(){return e[3](e[5])}let ce=e[0].id===e[5].id&&Qt(e),Se=ye(e[1].table.properties),te=[];for(let ee=0;ee<Se.length;ee+=1)te[ee]=el(Wt(e,Se,ee));const nt=ee=>R(te[ee],1,1,()=>{te[ee]=null});let pe=e[1].filters.deleted==="true"&&tl(e);return{key:r,first:null,c(){l=g("tr"),t=g("td"),n=g("div"),a=g("div"),s=g("button"),i=g("span"),i.textContent=o,u=F(),se(p.$$.fragment),d=F(),v=g("button"),k=g("span"),k.textContent=w,T=F(),se(b.$$.fragment),E=F(),ce&&ce.c(),h=F(),C=W(y),L=F();for(let ee=0;ee<te.length;ee+=1)te[ee].c();z=F(),O=g("td"),S=W(B),m=F(),N=g("span"),H=W(j),Y=F(),Z=g("td"),X=W(U),q=F(),ae=g("span"),he=W(Ee),re=F(),pe&&pe.c(),Ne=F(),this.h()},l(ee){l=$(ee,"TR",{class:!0});var M=I(l);t=$(M,"TD",{class:!0});var G=I(t);n=$(G,"DIV",{class:!0});var Oe=I(n);a=$(Oe,"DIV",{class:!0});var Ie=I(a);s=$(Ie,"BUTTON",{class:!0});var Je=I(s);i=$(Je,"SPAN",{class:!0,"data-svelte-h":!0}),ne(i)!=="svelte-1agpmtc"&&(i.textContent=o),u=A(Je),ie(p.$$.fragment,Je),Je.forEach(_),d=A(Ie),v=$(Ie,"BUTTON",{class:!0,title:!0});var Re=I(v);k=$(Re,"SPAN",{class:!0,"data-svelte-h":!0}),ne(k)!=="svelte-1qpnaf4"&&(k.textContent=w),T=A(Re),ie(b.$$.fragment,Re),Re.forEach(_),Ie.forEach(_),E=A(Oe),ce&&ce.l(Oe),h=A(Oe),C=K(Oe,y),Oe.forEach(_),G.forEach(_),L=A(M);for(let _e=0;_e<te.length;_e+=1)te[_e].l(M);z=A(M),O=$(M,"TD",{class:!0});var Be=I(O);S=K(Be,B),m=A(Be),N=$(Be,"SPAN",{class:!0});var Qe=I(N);H=K(Qe,j),Qe.forEach(_),Be.forEach(_),Y=A(M),Z=$(M,"TD",{class:!0});var ze=I(Z);X=K(ze,U),q=A(ze),ae=$(ze,"SPAN",{class:!0});var xe=I(ae);he=K(xe,Ee),xe.forEach(_),ze.forEach(_),re=A(M),pe&&pe.l(M),Ne=A(M),M.forEach(_),this.h()},h(){f(i,"class","label svelte-1bwwtph"),f(s,"class","button compact more svelte-1bwwtph"),ke(s,"active",e[0].id===e[5].id),f(k,"class","label svelte-1bwwtph"),f(v,"class","button compact edit svelte-1bwwtph"),f(v,"title","Edit record"),f(a,"class","combo svelte-1bwwtph"),f(n,"class","id svelte-1bwwtph"),f(t,"class","svelte-1bwwtph"),f(N,"class","svelte-1bwwtph"),f(O,"class","date svelte-1bwwtph"),f(ae,"class","svelte-1bwwtph"),f(Z,"class","date svelte-1bwwtph"),f(l,"class","svelte-1bwwtph"),ke(l,"highlighted",e[1].highlighted.record===e[5].id),ke(l,"hasContextMenu",e[0].id===e[5].id),this.first=l},m(ee,M){P(ee,l,M),c(l,t),c(t,n),c(n,a),c(a,s),c(s,i),c(s,u),oe(p,s,null),c(a,d),c(a,v),c(v,k),c(v,T),oe(b,v,null),c(n,E),ce&&ce.m(n,null),c(n,h),c(n,C),c(l,L);for(let G=0;G<te.length;G+=1)te[G]&&te[G].m(l,null);c(l,z),c(l,O),c(O,S),c(O,m),c(O,N),c(N,H),c(l,Y),c(l,Z),c(Z,X),c(Z,q),c(Z,ae),c(ae,he),c(l,re),pe&&pe.m(l,null),c(l,Ne),fe=!0,$e||(Ae=[Q(s,"click",rt),Q(v,"click",je)],$e=!0)},p(ee,M){if(e=ee,(!fe||M&3)&&ke(s,"active",e[0].id===e[5].id),e[0].id===e[5].id?ce?(ce.p(e,M),M&3&&D(ce,1)):(ce=Qt(e),ce.c(),D(ce,1),ce.m(n,h)):ce&&(be(),R(ce,1,1,()=>{ce=null}),ge()),(!fe||M&2)&&y!==(y=e[5].id+"")&&de(C,y),M&2){Se=ye(e[1].table.properties);let G;for(G=0;G<Se.length;G+=1){const Oe=Wt(e,Se,G);te[G]?(te[G].p(Oe,M),D(te[G],1)):(te[G]=el(Oe),te[G].c(),D(te[G],1),te[G].m(l,z))}for(be(),G=Se.length;G<te.length;G+=1)nt(G);ge()}(!fe||M&2)&&B!==(B=new Date(e[5]?.created_at).toLocaleDateString(void 0,{})+"")&&de(S,B),(!fe||M&2)&&j!==(j=new Date(e[5]?.created_at).toLocaleTimeString(void 0,{})+"")&&de(H,j),(!fe||M&2)&&U!==(U=new Date(e[5]?.updated_at).toLocaleDateString(void 0,{})+"")&&de(X,U),(!fe||M&2)&&Ee!==(Ee=new Date(e[5]?.updated_at).toLocaleTimeString(void 0,{})+"")&&de(he,Ee),e[1].filters.deleted==="true"?pe?pe.p(e,M):(pe=tl(e),pe.c(),pe.m(l,Ne)):pe&&(pe.d(1),pe=null),(!fe||M&2)&&ke(l,"highlighted",e[1].highlighted.record===e[5].id),(!fe||M&3)&&ke(l,"hasContextMenu",e[0].id===e[5].id)},i(ee){if(!fe){D(p.$$.fragment,ee),D(b.$$.fragment,ee),D(ce);for(let M=0;M<Se.length;M+=1)D(te[M]);fe=!0}},o(ee){R(p.$$.fragment,ee),R(b.$$.fragment,ee),R(ce),te=te.filter(Boolean);for(let M=0;M<te.length;M+=1)R(te[M]);fe=!1},d(ee){ee&&_(l),ue(p),ue(b),ce&&ce.d(),Xe(te,ee),pe&&pe.d(),$e=!1,Ge(Ae)}}}function or(r){let e,l,t=r[1].table?.properties&&Xt(r);return{c(){t&&t.c(),e=Fe()},l(n){t&&t.l(n),e=Fe()},m(n,a){t&&t.m(n,a),P(n,e,a),l=!0},p(n,[a]){n[1].table?.properties?t?(t.p(n,a),a&2&&D(t,1)):(t=Xt(n),t.c(),D(t,1),t.m(e.parentNode,e)):t&&(be(),R(t,1,1,()=>{t=null}),ge())},i(n){l||(D(t),l=!0)},o(n){R(t),l=!1},d(n){n&&_(e),t&&t.d(n)}}}function ur(r,e,l){let t;Pe(r,J,o=>l(1,t=o));let n={id:null};return[n,t,o=>l(0,n.id=o.id,n),o=>{De(J,t.record=o,t)},()=>l(0,n.id=null,n)]}class fr extends qe{constructor(e){super(),He(this,e,ur,or,Me,{})}}var it=new Map;function cr(r){var e=it.get(r);e&&e.destroy()}function dr(r){var e=it.get(r);e&&e.update()}var st=null;typeof window>"u"?((st=function(r){return r}).destroy=function(r){return r},st.update=function(r){return r}):((st=function(r,e){return r&&Array.prototype.forEach.call(r.length?r:[r],function(l){return function(t){if(t&&t.nodeName&&t.nodeName==="TEXTAREA"&&!it.has(t)){var n,a=null,s=window.getComputedStyle(t),i=(n=t.value,function(){u({testForHeightReduction:n===""||!t.value.startsWith(n),restoreTextAlign:null}),n=t.value}),o=function(d){t.removeEventListener("autosize:destroy",o),t.removeEventListener("autosize:update",p),t.removeEventListener("input",i),window.removeEventListener("resize",p),Object.keys(d).forEach(function(v){return t.style[v]=d[v]}),it.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,textAlign:t.style.textAlign,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",o),t.addEventListener("autosize:update",p),t.addEventListener("input",i),window.addEventListener("resize",p),t.style.overflowX="hidden",t.style.wordWrap="break-word",it.set(t,{destroy:o,update:p}),p()}function u(d){var v,k,w=d.restoreTextAlign,T=w===void 0?null:w,b=d.testForHeightReduction,E=b===void 0||b,h=s.overflowY;if(t.scrollHeight!==0&&(s.resize==="vertical"?t.style.resize="none":s.resize==="both"&&(t.style.resize="horizontal"),E&&(v=function(C){for(var L=[];C&&C.parentNode&&C.parentNode instanceof Element;)C.parentNode.scrollTop&&L.push([C.parentNode,C.parentNode.scrollTop]),C=C.parentNode;return function(){return L.forEach(function(z){var O=z[0],B=z[1];O.style.scrollBehavior="auto",O.scrollTop=B,O.style.scrollBehavior=null})}}(t),t.style.height=""),k=s.boxSizing==="content-box"?t.scrollHeight-(parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)):t.scrollHeight+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),s.maxHeight!=="none"&&k>parseFloat(s.maxHeight)?(s.overflowY==="hidden"&&(t.style.overflow="scroll"),k=parseFloat(s.maxHeight)):s.overflowY!=="hidden"&&(t.style.overflow="hidden"),t.style.height=k+"px",T&&(t.style.textAlign=T),v&&v(),a!==k&&(t.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),a=k),h!==s.overflow&&!T)){var y=s.textAlign;s.overflow==="hidden"&&(t.style.textAlign=y==="start"?"end":"start"),u({restoreTextAlign:y,testForHeightReduction:!0})}}function p(){u({testForHeightReduction:!0,restoreTextAlign:null})}}(l)}),r}).destroy=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],cr),r},st.update=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],dr),r});var $t=st;const Nt=r=>($t(r),{destroy(){$t.destroy(r)}});Nt.update=$t.update;Nt.destroy=$t.destroy;function rl(r){let e,l,t=!1,n,a,s,i=r[1][0].label+"",o,u,p,d,v,k,w,T,b=!1,E,h,y,C=r[1][1].label+"",L,z,O,B,S;return O=hl(r[5][0]),{c(){e=g("input"),a=F(),s=g("label"),o=W(i),p=F(),d=g("label"),k=F(),w=g("input"),h=F(),y=g("label"),L=W(C),this.h()},l(m){e=$(m,"INPUT",{type:!0,name:!0,id:!0,class:!0}),a=A(m),s=$(m,"LABEL",{for:!0,class:!0});var N=I(s);o=K(N,i),N.forEach(_),p=A(m),d=$(m,"LABEL",{for:!0,class:!0}),I(d).forEach(_),k=A(m),w=$(m,"INPUT",{type:!0,name:!0,id:!0,class:!0}),h=A(m),y=$(m,"LABEL",{for:!0,class:!0});var j=I(y);L=K(j,C),j.forEach(_),this.h()},h(){f(e,"type","radio"),f(e,"name",r[0]),e.__value=l=r[1][0].value,x(e,e.__value),f(e,"id",n="toggle-"+r[0]+"-"+r[1][0].value),f(e,"class","svelte-1dpe1av"),f(s,"for",u="toggle-"+r[0]+"-"+r[1][0].value),f(s,"class","svelte-1dpe1av"),f(d,"for",v="toggle-"+r[0]+"-"+(r[2]===r[1][0].value?r[1][1].value:r[1][0].value)),f(d,"class","switcher svelte-1dpe1av"),f(w,"type","radio"),f(w,"name",r[0]),w.__value=T=r[1][1].value,x(w,w.__value),f(w,"id",E="toggle-"+r[0]+"-"+r[1][1].value),f(w,"class","svelte-1dpe1av"),f(y,"for",z="toggle-"+r[0]+"-"+r[1][1].value),f(y,"class","svelte-1dpe1av"),O.p(e,w)},m(m,N){P(m,e,N),e.checked=e.__value===r[2],P(m,a,N),P(m,s,N),c(s,o),P(m,p,N),P(m,d,N),P(m,k,N),P(m,w,N),w.checked=w.__value===r[2],P(m,h,N),P(m,y,N),c(y,L),B||(S=[Q(e,"change",r[4]),Q(e,"keydown",r[6]),Q(w,"change",r[7]),Q(w,"keydown",r[8])],B=!0)},p(m,N){N&1&&f(e,"name",m[0]),N&2&&l!==(l=m[1][0].value)&&(e.__value=l,x(e,e.__value),t=!0),N&3&&n!==(n="toggle-"+m[0]+"-"+m[1][0].value)&&f(e,"id",n),(t||N&4)&&(e.checked=e.__value===m[2]),N&2&&i!==(i=m[1][0].label+"")&&de(o,i),N&3&&u!==(u="toggle-"+m[0]+"-"+m[1][0].value)&&f(s,"for",u),N&7&&v!==(v="toggle-"+m[0]+"-"+(m[2]===m[1][0].value?m[1][1].value:m[1][0].value))&&f(d,"for",v),N&1&&f(w,"name",m[0]),N&2&&T!==(T=m[1][1].value)&&(w.__value=T,x(w,w.__value),b=!0),N&3&&E!==(E="toggle-"+m[0]+"-"+m[1][1].value)&&f(w,"id",E),(b||N&4)&&(w.checked=w.__value===m[2]),N&2&&C!==(C=m[1][1].label+"")&&de(L,C),N&3&&z!==(z="toggle-"+m[0]+"-"+m[1][1].value)&&f(y,"for",z)},d(m){m&&(_(e),_(a),_(s),_(p),_(d),_(k),_(w),_(h),_(y)),O.r(),B=!1,Ge(S)}}}function _r(r){let e,l=r[1].length===2&&rl(r);return{c(){e=g("div"),l&&l.c(),this.h()},l(t){e=$(t,"DIV",{class:!0});var n=I(e);l&&l.l(n),n.forEach(_),this.h()},h(){f(e,"class","toggle svelte-1dpe1av")},m(t,n){P(t,e,n),l&&l.m(e,null)},p(t,[n]){t[1].length===2?l?l.p(t,n):(l=rl(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:Le,o:Le,d(t){t&&_(e),l&&l.d()}}}function pr(r,e,l){let{name:t}=e,{options:n=[]}=e,{checked:a=n[0].value}=e,s=(" "+a).slice(1);const i=[[]];function o(){s=this.__value,l(2,s)}const u=v=>{v.code==="Space"&&(v.preventDefault(),l(2,s=s===n[0].value?n[1].value:n[0].value))};function p(){s=this.__value,l(2,s)}const d=v=>{v.code==="Space"&&(v.preventDefault(),l(2,s=s===n[0].value?n[1].value:n[0].value))};return r.$$set=v=>{"name"in v&&l(0,t=v.name),"options"in v&&l(1,n=v.options),"checked"in v&&l(3,a=v.checked)},[t,n,s,a,o,i,u,p,d]}class hr extends qe{constructor(e){super(),He(this,e,pr,_r,Me,{name:0,options:1,checked:3})}}function nl(r,e,l){const t=r.slice();return t[13]=e[l],t}function al(r,e,l){const t=r.slice();t[16]=e[l];const n=t[1].properties?ml(t[1].properties[t[16].name],t[16].attribute_type):{type:t[16].attribute_type,value:""};return t[17]=n,t}function sl(r){let e,l;return{c(){e=g("input"),this.h()},l(t){e=$(t,"INPUT",{type:!0,name:!0}),this.h()},h(){f(e,"type","hidden"),f(e,"name","recordId"),e.value=l=r[1].id},m(t,n){P(t,e,n)},p(t,n){n&2&&l!==(l=t[1].id)&&(e.value=l)},d(t){t&&_(e)}}}function vr(r){let e=r[16].attribute_type+"",l,t,n,a,s;return{c(){l=W(e),t=F(),n=g("input"),this.h()},l(i){l=K(i,e),t=A(i),n=$(i,"INPUT",{type:!0,name:!0}),this.h()},h(){f(n,"type","hidden"),f(n,"name",a=r[16].name+"[type]"),n.value=s=r[16].attribute_type},m(i,o){P(i,l,o),P(i,t,o),P(i,n,o)},p(i,o){o&1&&e!==(e=i[16].attribute_type+"")&&de(l,e),o&1&&a!==(a=i[16].name+"[type]")&&f(n,"name",a),o&1&&s!==(s=i[16].attribute_type)&&(n.value=s)},i:Le,o:Le,d(i){i&&(_(l),_(t),_(n))}}}function mr(r){let e,l;return e=new hr({props:{name:r[16].name+"[type]",options:[{value:"string",label:"string"},{value:"json",label:"json"}],checked:r[17].type==="json"?"json":"string"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.name=t[16].name+"[type]"),n&3&&(a.checked=t[17].type==="json"?"json":"string"),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function il(r){let e;return{c(){e=W("(non editable)")},l(l){e=K(l,"(non editable)")},m(l,t){P(l,e,t)},d(l){l&&_(e)}}}function br(r){let e,l,t,n,a,s,i;return{c(){e=g("textarea"),this.h()},l(o){e=$(o,"TEXTAREA",{rows:!0,name:!0,id:!0,class:!0}),I(e).forEach(_),this.h()},h(){f(e,"rows","1"),f(e,"name",l=r[16].name+"[value]"),f(e,"id",t="edit_"+r[16].name),e.disabled=n=r[16].attribute_type==="upload",e.value=a=r[17].type==="json"||r[17].type==="jsonEscaped"&&!cl?JSON.stringify(r[17].value,void 0,2):r[17].value,f(e,"class","svelte-1udbufw")},m(o,u){P(o,e,u),s||(i=pl(Nt.call(null,e)),s=!0)},p(o,u){u&1&&l!==(l=o[16].name+"[value]")&&f(e,"name",l),u&1&&t!==(t="edit_"+o[16].name)&&f(e,"id",t),u&1&&n!==(n=o[16].attribute_type==="upload")&&(e.disabled=n),u&3&&a!==(a=o[17].type==="json"||o[17].type==="jsonEscaped"&&!cl?JSON.stringify(o[17].value,void 0,2):o[17].value)&&(e.value=a)},d(o){o&&_(e),s=!1,i()}}}function gr(r){let e,l,t,n,a,s,i,o,u,p;return{c(){e=g("select"),l=g("option"),t=g("option"),n=W("true"),s=g("option"),i=W("false"),this.h()},l(d){e=$(d,"SELECT",{name:!0,id:!0,class:!0});var v=I(e);l=$(v,"OPTION",{class:!0}),I(l).forEach(_),t=$(v,"OPTION",{});var k=I(t);n=K(k,"true"),k.forEach(_),s=$(v,"OPTION",{});var w=I(s);i=K(w,"false"),w.forEach(_),v.forEach(_),this.h()},h(){l.__value="",x(l,l.__value),f(l,"class","value-null"),t.__value="true",x(t,t.__value),t.selected=a=r[17].value==="true",s.__value="false",x(s,s.__value),s.selected=o=r[17].value==="false",f(e,"name",u=r[16].name+"[value]"),f(e,"id",p="edit_"+r[16].name),f(e,"class","svelte-1udbufw")},m(d,v){P(d,e,v),c(e,l),c(e,t),c(t,n),c(e,s),c(s,i)},p(d,v){v&3&&a!==(a=d[17].value==="true")&&(t.selected=a),v&3&&o!==(o=d[17].value==="false")&&(s.selected=o),v&1&&u!==(u=d[16].name+"[value]")&&f(e,"name",u),v&1&&p!==(p="edit_"+d[16].name)&&f(e,"id",p)},d(d){d&&_(e)}}}function ol(r){let e=r[5][r[16].name].message+"",l;return{c(){l=W(e)},l(t){l=K(t,e)},m(t,n){P(t,l,n)},p(t,n){n&33&&e!==(e=t[5][t[16].name].message+"")&&de(l,e)},d(t){t&&_(l)}}}function ul(r){let e,l,t,n=r[16].name+"",a,s,i,o,u,p,d,v,k,w,T,b,E;const h=[mr,vr],y=[];function C(m,N){return m[16].attribute_type==="string"?0:1}u=C(r),p=y[u]=h[u](r);let L=r[16].attribute_type==="upload"&&il();function z(m,N){return m[16].attribute_type==="boolean"?gr:br}let O=z(r),B=O(r),S=r[5][r[16].name]&&ol(r);return{c(){e=g("fieldset"),l=g("dir"),t=g("label"),a=W(n),s=g("br"),i=F(),o=g("div"),p.c(),d=F(),L&&L.c(),k=F(),w=g("div"),B.c(),T=F(),b=g("div"),S&&S.c(),this.h()},l(m){e=$(m,"FIELDSET",{class:!0});var N=I(e);l=$(N,"DIR",{});var j=I(l);t=$(j,"LABEL",{for:!0,class:!0});var H=I(t);a=K(H,n),s=$(H,"BR",{}),i=A(H),o=$(H,"DIV",{class:!0});var Y=I(o);p.l(Y),d=A(Y),L&&L.l(Y),Y.forEach(_),H.forEach(_),j.forEach(_),k=A(N),w=$(N,"DIV",{});var Z=I(w);B.l(Z),T=A(Z),b=$(Z,"DIV",{role:!0,class:!0});var U=I(b);S&&S.l(U),U.forEach(_),Z.forEach(_),N.forEach(_),this.h()},h(){f(o,"class","type svelte-1udbufw"),f(t,"for",v="edit_"+r[16].name),f(t,"class","svelte-1udbufw"),f(b,"role","alert"),f(b,"class","svelte-1udbufw"),f(e,"class","svelte-1udbufw")},m(m,N){P(m,e,N),c(e,l),c(l,t),c(t,a),c(t,s),c(t,i),c(t,o),y[u].m(o,null),c(o,d),L&&L.m(o,null),c(e,k),c(e,w),B.m(w,null),c(w,T),c(w,b),S&&S.m(b,null),E=!0},p(m,N){(!E||N&1)&&n!==(n=m[16].name+"")&&de(a,n);let j=u;u=C(m),u===j?y[u].p(m,N):(be(),R(y[j],1,1,()=>{y[j]=null}),ge(),p=y[u],p?p.p(m,N):(p=y[u]=h[u](m),p.c()),D(p,1),p.m(o,d)),m[16].attribute_type==="upload"?L||(L=il(),L.c(),L.m(o,null)):L&&(L.d(1),L=null),(!E||N&1&&v!==(v="edit_"+m[16].name))&&f(t,"for",v),O===(O=z(m))&&B?B.p(m,N):(B.d(1),B=O(m),B&&(B.c(),B.m(w,T))),m[5][m[16].name]?S?S.p(m,N):(S=ol(m),S.c(),S.m(b,null)):S&&(S.d(1),S=null)},i(m){E||(D(p),E=!0)},o(m){R(p),E=!1},d(m){m&&_(e),y[u].d(),L&&L.d(),B.d(),S&&S.d()}}}function fl(r){let e,l=JSON.stringify(r[4])+"",t,n;return{c(){e=g("li"),t=W(l),n=F(),this.h()},l(a){e=$(a,"LI",{class:!0});var s=I(e);t=K(s,l),n=A(s),s.forEach(_),this.h()},h(){f(e,"class","svelte-1udbufw")},m(a,s){P(a,e,s),c(e,t),c(e,n)},p(a,s){s&16&&l!==(l=JSON.stringify(a[4])+"")&&de(t,l)},d(a){a&&_(e)}}}function $r(r){let e;return{c(){e=W("Create record")},l(l){e=K(l,"Create record")},m(l,t){P(l,e,t)},d(l){l&&_(e)}}}function kr(r){let e;return{c(){e=W("Edit record")},l(l){e=K(l,"Edit record")},m(l,t){P(l,e,t)},d(l){l&&_(e)}}}function yr(r){let e,l,t,n,a,s,i,o,u,p,d,v,k,w="Cancel",T,b,E,h,y,C,L,z,O=r[1].id&&sl(r),B=ye(r[0]),S=[];for(let U=0;U<B.length;U+=1)S[U]=ul(al(r,B,U));const m=U=>R(S[U],1,1,()=>{S[U]=null});let N=ye(r[4]),j=[];for(let U=0;U<N.length;U+=1)j[U]=fl(nl(r,N,U));function H(U,X){return U[1].id?kr:$r}let Y=H(r),Z=Y(r);return h=new Ce({props:{icon:"arrowRight"}}),{c(){e=g("dialog"),l=g("div"),t=g("form"),n=g("input"),s=F(),O&&O.c(),i=F();for(let U=0;U<S.length;U+=1)S[U].c();o=F(),u=g("div"),p=g("ul");for(let U=0;U<j.length;U+=1)j[U].c();d=F(),v=g("fieldset"),k=g("button"),k.textContent=w,T=F(),b=g("button"),Z.c(),E=F(),se(h.$$.fragment),this.h()},l(U){e=$(U,"DIALOG",{class:!0});var X=I(e);l=$(X,"DIV",{class:!0});var q=I(l);t=$(q,"FORM",{class:!0});var ae=I(t);n=$(ae,"INPUT",{type:!0,name:!0}),s=A(ae),O&&O.l(ae),i=A(ae);for(let fe=0;fe<S.length;fe+=1)S[fe].l(ae);o=A(ae),u=$(ae,"DIV",{class:!0});var Ee=I(u);p=$(Ee,"UL",{class:!0,"aria-live":!0});var he=I(p);for(let fe=0;fe<j.length;fe+=1)j[fe].l(he);he.forEach(_),d=A(Ee),v=$(Ee,"FIELDSET",{class:!0});var re=I(v);k=$(re,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ne(k)!=="svelte-1oq6ax6"&&(k.textContent=w),T=A(re),b=$(re,"BUTTON",{type:!0,class:!0});var Ne=I(b);Z.l(Ne),E=A(Ne),ie(h.$$.fragment,Ne),Ne.forEach(_),re.forEach(_),Ee.forEach(_),ae.forEach(_),q.forEach(_),X.forEach(_),this.h()},h(){f(n,"type","hidden"),f(n,"name","tableName"),n.value=a=r[6].table.name,f(p,"class","error svelte-1udbufw"),f(p,"aria-live","assertive"),f(k,"type","button"),f(k,"class","button"),f(b,"type","submit"),f(b,"class","button"),f(v,"class","actions svelte-1udbufw"),f(u,"class","footer svelte-1udbufw"),f(t,"class","svelte-1udbufw"),f(l,"class","content content-context svelte-1udbufw"),f(e,"class","svelte-1udbufw")},m(U,X){P(U,e,X),c(e,l),c(l,t),c(t,n),c(t,s),O&&O.m(t,null),c(t,i);for(let q=0;q<S.length;q+=1)S[q]&&S[q].m(t,null);c(t,o),c(t,u),c(u,p);for(let q=0;q<j.length;q+=1)j[q]&&j[q].m(p,null);c(u,d),c(u,v),c(v,k),c(v,T),c(v,b),Z.m(b,null),c(b,E),oe(h,b,null),r[10](t),r[11](e),C=!0,L||(z=[Q(k,"click",r[9]),Q(t,"submit",ut(r[8]))],L=!0)},p(U,[X]){if((!C||X&64&&a!==(a=U[6].table.name))&&(n.value=a),U[1].id?O?O.p(U,X):(O=sl(U),O.c(),O.m(t,i)):O&&(O.d(1),O=null),X&35){B=ye(U[0]);let q;for(q=0;q<B.length;q+=1){const ae=al(U,B,q);S[q]?(S[q].p(ae,X),D(S[q],1)):(S[q]=ul(ae),S[q].c(),D(S[q],1),S[q].m(t,o))}for(be(),q=B.length;q<S.length;q+=1)m(q);ge()}if(X&16){N=ye(U[4]);let q;for(q=0;q<N.length;q+=1){const ae=nl(U,N,q);j[q]?j[q].p(ae,X):(j[q]=fl(ae),j[q].c(),j[q].m(p,null))}for(;q<j.length;q+=1)j[q].d(1);j.length=N.length}Y!==(Y=H(U))&&(Z.d(1),Z=Y(U),Z&&(Z.c(),Z.m(b,E)))},i(U){if(!C){for(let X=0;X<B.length;X+=1)D(S[X]);D(h.$$.fragment,U),U&&ot(()=>{C&&(y||(y=Pt(e,r[7],{},!0)),y.run(1))}),C=!0}},o(U){S=S.filter(Boolean);for(let X=0;X<S.length;X+=1)R(S[X]);R(h.$$.fragment,U),U&&(y||(y=Pt(e,r[7],{},!1)),y.run(0)),C=!1},d(U){U&&_(e),O&&O.d(),Xe(S,U),Xe(j,U),Z.d(),ue(h),r[10](null),r[11](null),U&&y&&y.end(),L=!1,Ge(z)}}}let cl=!1;function wr(r,e,l){let t,n;Pe(r,J,b=>l(6,t=b)),Pe(r,kt,b=>l(12,n=b));let{properties:a}=e,{editing:s}=e,i,o,u=[],p={};const d=function(b,{delay:E=0,duration:h=150}){return{delay:E,duration:h,css:y=>{const C=Ol(y);return`opacity: ${C}; transform: scale(${C});`}}};gl(()=>{setTimeout(()=>{i.showModal()},10)}),document.addEventListener("keydown",b=>{b.key==="Escape"&&(b.preventDefault(),De(J,t.record=null,t))},{once:!0});const v=async b=>{b.preventDefault();const E=new FormData(o);l(5,p={});for(const h of E.entries())if(h[0].endsWith("[type]")&&(h[1]==="json"||h[1]==="array")){const y=h[0].replace("[type]",""),C=E.get(y+"[value]");C!==""&&!Tt(C)&&l(5,p[y]={property:y,message:`Not a valid ${h[1]}`},p)}if(Object.keys(p).length)await $l(),document.querySelector('[role="alert"]:not(:empty)').scrollIntoView({behavior:"smooth",block:"center"});else if(t.record.id){const h=await Te.edit({table:t.table.name,id:t.record.id,properties:E});h.errors?l(4,u=h.errors):(Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),J.highlight("record",h.record_update.id),J.notification.create("success",`Record ${h.record_update.id} updated`),De(J,t.record=null,t))}else{const h=await Te.create({table:t.table.name,properties:E});h.errors?l(4,u=h.errors):(J.clearFilters(),Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),J.highlight("record",h.record_create.id),J.notification.create("success",`Record ${h.record_create.id} created`),De(J,t.record=null,t))}},k=()=>De(J,t.record=null,t);function w(b){Ze[b?"unshift":"push"](()=>{o=b,l(3,o)})}function T(b){Ze[b?"unshift":"push"](()=>{i=b,l(2,i)})}return r.$$set=b=>{"properties"in b&&l(0,a=b.properties),"editing"in b&&l(1,s=b.editing)},[a,s,i,o,u,p,t,d,v,k,w,T]}class Er extends qe{constructor(e){super(),He(this,e,wr,yr,Me,{properties:0,editing:1})}}const{document:Et}=Tl;function Tr(r){let e;return{c(){e=W("Work in progress :)")},l(l){e=K(l,"Work in progress :)")},m(l,t){P(l,e,t)},i:Le,o:Le,d(l){l&&_(e)}}}function Cr(r){let e,l;return e=new fr({}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function dl(r){let e,l,t,n,a,s,i;const o=[Sr,Nr],u=[];function p(d,v){return d[0].view.tableStyle==="collapsed"?0:1}return l=p(r),t=u[l]=o[l](r),{c(){e=g("button"),t.c(),this.h()},l(d){e=$(d,"BUTTON",{class:!0,title:!0});var v=I(e);t.l(v),v.forEach(_),this.h()},h(){f(e,"class","button"),f(e,"title",n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values")},m(d,v){P(d,e,v),u[l].m(e,null),a=!0,s||(i=Q(e,"click",ut(function(){wl(r[0].view.tableStyle==="collapsed"?J.setView({tableStyle:"expanded"}):J.setView({tableStyle:"collapsed"}))&&(r[0].view.tableStyle==="collapsed"?J.setView({tableStyle:"expanded"}):J.setView({tableStyle:"collapsed"})).apply(this,arguments)})),s=!0)},p(d,v){r=d;let k=l;l=p(r),l!==k&&(be(),R(u[k],1,1,()=>{u[k]=null}),ge(),t=u[l],t||(t=u[l]=o[l](r),t.c()),D(t,1),t.m(e,null)),(!a||v&1&&n!==(n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values"))&&f(e,"title",n)},i(d){a||(D(t),a=!0)},o(d){R(t),a=!1},d(d){d&&_(e),u[l].d(),s=!1,i()}}}function Nr(r){let e,l="Collapse values",t,n,a;return n=new Ce({props:{icon:"collapse"}}),{c(){e=g("span"),e.textContent=l,t=F(),se(n.$$.fragment),this.h()},l(s){e=$(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-jserey"&&(e.textContent=l),t=A(s),ie(n.$$.fragment,s),this.h()},h(){f(e,"class","label")},m(s,i){P(s,e,i),P(s,t,i),oe(n,s,i),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){R(n.$$.fragment,s),a=!1},d(s){s&&(_(e),_(t)),ue(n,s)}}}function Sr(r){let e,l="Expand values",t,n,a;return n=new Ce({props:{icon:"expand"}}),{c(){e=g("span"),e.textContent=l,t=F(),se(n.$$.fragment),this.h()},l(s){e=$(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1tvmrgx"&&(e.textContent=l),t=A(s),ie(n.$$.fragment,s),this.h()},h(){f(e,"class","label")},m(s,i){P(s,e,i),P(s,t,i),oe(n,s,i),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){R(n.$$.fragment,s),a=!1},d(s){s&&(_(e),_(t)),ue(n,s)}}}function _l(r){let e,l;return e=new Er({props:{properties:r[0].table.properties,editing:r[0].record}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.properties=t[0].table.properties),n&1&&(a.editing=t[0].record),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Or(r){let e,l,t,n,a,s,i,o,u,p,d="Refresh current view",v,k,w,T,b,E,h,y,C,L="Page:",z,O,B,S,m=(r[0].records?.total_pages||1)+"",N,j,H,Y,Z,U,X,q="Create new record",ae,Ee,he,re,Ne,fe,$e,Ae,rt,je,ce,Se=r[0].filters.deleted==="false"?"ing":"",te,nt,pe,ee,M,G,Oe,Ie,Je,Re=r[0].filters.deleted==="true"?"ing":"",Be,Qe,ze,xe,_e,ft,ct,et,we,yt,wt,St;Et.title=e=(r[0].table?.name||"Loading…")+(r[0].online?.MPKIT_URL?": "+r[0].online.MPKIT_URL.replace("https://",""):""),a=new Bl({}),i=new Jl({}),k=new Ce({props:{icon:"refresh"}});const Ot=[Cr,Tr],Ye=[];function It(V,le){return V[0].view.database!=="tiles"?0:1}T=It(r),b=Ye[T]=Ot[T](r);function bl(V){r[5](V)}let Lt={name:"page",min:1,max:r[0].records?.total_pages,step:1,decreaseLabel:"Previous page",increaseLabel:"Next page",style:"navigation"};r[0].filters.page!==void 0&&(Lt.value=r[0].filters.page),O=new Il({props:Lt}),Ze.push(()=>El(O,"value",bl)),O.$on("input",r[6]),Z=new Ce({props:{icon:"plus"}});let ve=r[0].view.database!=="tiles"&&dl(r);Ae=new Ce({props:{icon:"leaf"}}),G=new Ce({props:{icon:"recycle"}});let me=r[0].record!==null&&_l(r);return yt=hl(r[9][0]),{c(){l=F(),t=g("section"),n=g("nav"),se(a.$$.fragment),s=F(),se(i.$$.fragment),o=F(),u=g("button"),p=g("span"),p.textContent=d,v=F(),se(k.$$.fragment),w=F(),b.c(),E=F(),h=g("nav"),y=g("div"),C=g("label"),C.textContent=L,z=F(),se(O.$$.fragment),S=W(`\r
      of `),N=W(m),j=F(),H=g("div"),Y=g("button"),se(Z.$$.fragment),U=F(),X=g("span"),X.textContent=q,ae=F(),ve&&ve.c(),Ee=F(),he=g("div"),re=g("input"),fe=F(),$e=g("label"),se(Ae.$$.fragment),rt=F(),je=g("span"),ce=W("Show"),te=W(Se),nt=W(" current database state"),ee=F(),M=g("label"),se(G.$$.fragment),Oe=F(),Ie=g("span"),Je=W("Show"),Be=W(Re),Qe=W(" deleted records"),xe=F(),_e=g("input"),ct=F(),me&&me.c(),et=Fe(),this.h()},l(V){kl("svelte-1ke6alb",Et.head).forEach(_),l=A(V),t=$(V,"SECTION",{class:!0});var Ue=I(t);n=$(Ue,"NAV",{class:!0});var Ve=I(n);ie(a.$$.fragment,Ve),s=A(Ve),ie(i.$$.fragment,Ve),o=A(Ve),u=$(Ve,"BUTTON",{class:!0,title:!0});var dt=I(u);p=$(dt,"SPAN",{class:!0,"data-svelte-h":!0}),ne(p)!=="svelte-iqo23s"&&(p.textContent=d),v=A(dt),ie(k.$$.fragment,dt),dt.forEach(_),Ve.forEach(_),w=A(Ue),b.l(Ue),E=A(Ue),h=$(Ue,"NAV",{class:!0});var _t=I(h);y=$(_t,"DIV",{});var tt=I(y);C=$(tt,"LABEL",{for:!0,"data-svelte-h":!0}),ne(C)!=="svelte-1r8oyu6"&&(C.textContent=L),z=A(tt),ie(O.$$.fragment,tt),S=K(tt,`\r
      of `),N=K(tt,m),tt.forEach(_),j=A(_t),H=$(_t,"DIV",{id:!0,class:!0});var lt=I(H);Y=$(lt,"BUTTON",{class:!0,title:!0});var pt=I(Y);ie(Z.$$.fragment,pt),U=A(pt),X=$(pt,"SPAN",{class:!0,"data-svelte-h":!0}),ne(X)!=="svelte-19x6y3e"&&(X.textContent=q),pt.forEach(_),ae=A(lt),ve&&ve.l(lt),Ee=A(lt),he=$(lt,"DIV",{class:!0});var We=I(he);re=$(We,"INPUT",{type:!0,name:!0,id:!0,class:!0}),fe=A(We),$e=$(We,"LABEL",{for:!0,class:!0,title:!0});var ht=I($e);ie(Ae.$$.fragment,ht),rt=A(ht),je=$(ht,"SPAN",{class:!0});var vt=I(je);ce=K(vt,"Show"),te=K(vt,Se),nt=K(vt," current database state"),vt.forEach(_),ht.forEach(_),ee=A(We),M=$(We,"LABEL",{for:!0,class:!0,title:!0});var mt=I(M);ie(G.$$.fragment,mt),Oe=A(mt),Ie=$(mt,"SPAN",{class:!0});var bt=I(Ie);Je=K(bt,"Show"),Be=K(bt,Re),Qe=K(bt," deleted records"),bt.forEach(_),mt.forEach(_),xe=A(We),_e=$(We,"INPUT",{type:!0,name:!0,id:!0,class:!0}),We.forEach(_),lt.forEach(_),_t.forEach(_),Ue.forEach(_),ct=A(V),me&&me.l(V),et=Fe(),this.h()},h(){f(p,"class","label"),f(u,"class","button svelte-afbo94"),f(u,"title","Refresh current view (R)"),ke(u,"refreshing",r[2]),f(n,"class","svelte-afbo94"),f(C,"for","page"),f(X,"class","label"),f(Y,"class","button"),f(Y,"title","Create new record"),f(re,"type","radio"),f(re,"name","deleted"),f(re,"id","deletedTrue"),re.__value="false",x(re,re.__value),re.disabled=Ne=r[0].filters.deleted==="false",f(re,"class","svelte-afbo94"),f(je,"class","label"),f($e,"for","deletedTrue"),f($e,"class","button"),f($e,"title",pe="Show"+(r[0].filters.deleted==="false"?"ing":"")+" current database state"),ke($e,"active",r[0].filters.deleted==="false"),ke($e,"disabled",r[0].filters.deleted==="false"),f(Ie,"class","label"),f(M,"for","deletedFalse"),f(M,"class","button"),f(M,"title",ze="Show"+(r[0].filters.deleted==="true"?"ing":"")+" deleted records"),ke(M,"active",r[0].filters.deleted==="true"),ke(M,"disabled",r[0].filters.deleted==="true"),f(_e,"type","radio"),f(_e,"name","deleted"),f(_e,"id","deletedFalse"),_e.__value="true",x(_e,_e.__value),_e.disabled=ft=r[0].filters.deleted==="true",f(_e,"class","svelte-afbo94"),f(he,"class","combo svelte-afbo94"),f(H,"id","viewOptions"),f(H,"class","svelte-afbo94"),f(h,"class","pagination svelte-afbo94"),f(t,"class","svelte-afbo94"),yt.p(re,_e)},m(V,le){P(V,l,le),P(V,t,le),c(t,n),oe(a,n,null),c(n,s),oe(i,n,null),c(n,o),c(n,u),c(u,p),c(u,v),oe(k,u,null),c(t,w),Ye[T].m(t,null),c(t,E),c(t,h),c(h,y),c(y,C),c(y,z),oe(O,y,null),c(y,S),c(y,N),c(h,j),c(h,H),c(H,Y),oe(Z,Y,null),c(Y,U),c(Y,X),c(H,ae),ve&&ve.m(H,null),c(H,Ee),c(H,he),c(he,re),re.checked=re.__value===r[0].filters.deleted,c(he,fe),c(he,$e),oe(Ae,$e,null),c($e,rt),c($e,je),c(je,ce),c(je,te),c(je,nt),c(he,ee),c(he,M),oe(G,M,null),c(M,Oe),c(M,Ie),c(Ie,Je),c(Ie,Be),c(Ie,Qe),c(he,xe),c(he,_e),_e.checked=_e.__value===r[0].filters.deleted,P(V,ct,le),me&&me.m(V,le),P(V,et,le),we=!0,wt||(St=[Q(window,"keypress",r[4]),Q(u,"click",r[3]),Q(Y,"click",ut(r[7])),Q(re,"change",r[8]),Q(re,"change",r[10]),Q(_e,"change",r[11]),Q(_e,"change",r[12])],wt=!0)},p(V,[le]){(!we||le&1)&&e!==(e=(V[0].table?.name||"Loading…")+(V[0].online?.MPKIT_URL?": "+V[0].online.MPKIT_URL.replace("https://",""):""))&&(Et.title=e),(!we||le&4)&&ke(u,"refreshing",V[2]);let Ue=T;T=It(V),T!==Ue&&(be(),R(Ye[Ue],1,1,()=>{Ye[Ue]=null}),ge(),b=Ye[T],b||(b=Ye[T]=Ot[T](V),b.c()),D(b,1),b.m(t,E));const Ve={};le&1&&(Ve.max=V[0].records?.total_pages),!B&&le&1&&(B=!0,Ve.value=V[0].filters.page,yl(()=>B=!1)),O.$set(Ve),(!we||le&1)&&m!==(m=(V[0].records?.total_pages||1)+"")&&de(N,m),V[0].view.database!=="tiles"?ve?(ve.p(V,le),le&1&&D(ve,1)):(ve=dl(V),ve.c(),D(ve,1),ve.m(H,Ee)):ve&&(be(),R(ve,1,1,()=>{ve=null}),ge()),(!we||le&1&&Ne!==(Ne=V[0].filters.deleted==="false"))&&(re.disabled=Ne),le&1&&(re.checked=re.__value===V[0].filters.deleted),(!we||le&1)&&Se!==(Se=V[0].filters.deleted==="false"?"ing":"")&&de(te,Se),(!we||le&1&&pe!==(pe="Show"+(V[0].filters.deleted==="false"?"ing":"")+" current database state"))&&f($e,"title",pe),(!we||le&1)&&ke($e,"active",V[0].filters.deleted==="false"),(!we||le&1)&&ke($e,"disabled",V[0].filters.deleted==="false"),(!we||le&1)&&Re!==(Re=V[0].filters.deleted==="true"?"ing":"")&&de(Be,Re),(!we||le&1&&ze!==(ze="Show"+(V[0].filters.deleted==="true"?"ing":"")+" deleted records"))&&f(M,"title",ze),(!we||le&1)&&ke(M,"active",V[0].filters.deleted==="true"),(!we||le&1)&&ke(M,"disabled",V[0].filters.deleted==="true"),(!we||le&1&&ft!==(ft=V[0].filters.deleted==="true"))&&(_e.disabled=ft),le&1&&(_e.checked=_e.__value===V[0].filters.deleted),V[0].record!==null?me?(me.p(V,le),le&1&&D(me,1)):(me=_l(V),me.c(),D(me,1),me.m(et.parentNode,et)):me&&(be(),R(me,1,1,()=>{me=null}),ge())},i(V){we||(D(a.$$.fragment,V),D(i.$$.fragment,V),D(k.$$.fragment,V),D(b),D(O.$$.fragment,V),D(Z.$$.fragment,V),D(ve),D(Ae.$$.fragment,V),D(G.$$.fragment,V),D(me),we=!0)},o(V){R(a.$$.fragment,V),R(i.$$.fragment,V),R(k.$$.fragment,V),R(b),R(O.$$.fragment,V),R(Z.$$.fragment,V),R(ve),R(Ae.$$.fragment,V),R(G.$$.fragment,V),R(me),we=!1},d(V){V&&(_(l),_(t),_(ct),_(et)),ue(a),ue(i),ue(k),Ye[T].d(),ue(O),ue(Z),ve&&ve.d(),ue(Ae),ue(G),me&&me.d(V),yt.r(),wt=!1,Ge(St)}}}function Ir(r,e,l){let t,n;Pe(r,J,b=>l(0,t=b)),Pe(r,kt,b=>l(1,n=b));let a=!1;const s=()=>{l(2,a=!0),Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}).then(()=>l(2,a=!1))},i=b=>{document.activeElement===document.body&&!b.target.matches("input, textarea")&&b.key==="r"&&s()},o=[[]];function u(b){r.$$.not_equal(t.filters.page,b)&&(t.filters.page=b,J.set(t))}const p=()=>{Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})},d=()=>De(J,t.record={},t);function v(){t.filters.deleted=this.__value,J.set(t)}const k=()=>{Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function w(){t.filters.deleted=this.__value,J.set(t)}const T=()=>{Te.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};return r.$$.update=()=>{r.$$.dirty&3&&De(J,t.table=t.tables.filter(b=>b.id===n.params.id)[0],t),r.$$.dirty&2&&n.params.id&&Te.get({table:n.params.id})&&J.clearFilters()},[t,n,a,s,i,u,p,d,v,o,k,w,T]}class qr extends qe{constructor(e){super(),He(this,e,Ir,Or,Me,{})}}export{qr as component};
