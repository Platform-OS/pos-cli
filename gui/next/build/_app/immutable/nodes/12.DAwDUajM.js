import{S as Ue,i as De,s as Pe,d as N,E as ce,O as Ae,x as Se,o as G,p as K,F as Te,H as Ce,b as de,c as n,I as me,J as te,V as be,z as l,v as Re,h as F,e as m,f as O,K as se,g as ge,L as _e,k as I,j as _,t as Ee,M as he,l as He,n as qe,X as Be,a3 as Ve,a as Le,Q as Y,R as Ne}from"../chunks/n7YEDvJi.js";import{e as ke}from"../chunks/DMhVG_ro.js";import"../chunks/IHki7fMi.js";import{f as Ke}from"../chunks/BaKpYqK2.js";import{g as ve}from"../chunks/BD1m7lx9.js";import{s as j}from"../chunks/Bp_ajb_u.js";import{I as pe}from"../chunks/DHO4ENnJ.js";const ne={get:()=>ve({query:`
      query {
        constants(
          per_page: 100
        ) {
          results {
            name,
            value,
            updated_at
          }
        }
      }`}).then(t=>t.constants.results),edit:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_set(name: "${e.name}", value: "${e.value}"){
          name,
          value
        }
      }`;return ve({query:t})},delete:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_unset(name: "${e.name}"){
          name
        }
      }
    `;return ve({query:t})}};function ye(e,t,a){const o=e.slice();return o[13]=t[a],o[14]=t,o[15]=a,o}function Fe(e){let t,a,o="Clear filter",E,i,h,y,R;return i=new pe({props:{icon:"x",size:"12"}}),{c(){t=_("button"),a=_("span"),a.textContent=o,E=I(),he(i.$$.fragment),this.h()},l(f){t=m(f,"BUTTON",{class:!0});var k=O(t);a=m(k,"SPAN",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-1bu6mgu"&&(a.textContent=o),E=F(k),_e(i.$$.fragment,k),k.forEach(N),this.h()},h(){l(a,"class","label svelte-9flr1b"),l(t,"class","clearFilter svelte-9flr1b")},m(f,k){de(f,t,k),n(t,a),n(t,E),me(i,t,null),h=!0,y||(R=te(t,"click",e[8]),y=!0)},p:qe,i(f){h||(K(i.$$.fragment,f),h=!0)},o(f){G(i.$$.fragment,f),h=!1},d(f){f&&N(t),ce(i),y=!1,R()}}}function Ie(e){let t,a,o,E,i,h,y,R="Delete constant",f,k,z,T,C,U=e[13].name+"",J,r,c,v,Q,q,H,g,W,D,V,Z,M,d,P=e[13].exposed?"Hide value":"Show value",u,ae,B,s,$,p,L="Save",A,le,b,x,re;k=new pe({props:{icon:"x",size:"14"}});function oe(){return e[10](e[13],e[14],e[15])}B=new pe({props:{icon:e[13].exposed?"eyeStriked":"eye"}});function Oe(){return e[11](e[13],e[14],e[15])}function Me(...S){return e[12](e[15],...S)}return{c(){t=_("li"),a=_("form"),o=_("input"),i=I(),h=_("button"),y=_("span"),y.textContent=R,f=I(),he(k.$$.fragment),z=I(),T=_("form"),C=_("label"),J=Ee(U),c=I(),v=_("input"),q=I(),H=_("fieldset"),g=_("input"),Z=I(),M=_("button"),d=_("span"),u=Ee(P),ae=I(),he(B.$$.fragment),$=I(),p=_("button"),p.textContent=L,A=I(),this.h()},l(S){t=m(S,"LI",{class:!0});var w=O(t);a=m(w,"FORM",{class:!0});var ee=O(a);o=m(ee,"INPUT",{type:!0,name:!0,class:!0}),i=F(ee),h=m(ee,"BUTTON",{type:!0,title:!0,class:!0});var ie=O(h);y=m(ie,"SPAN",{class:!0,"data-svelte-h":!0}),se(y)!=="svelte-1p7u8ms"&&(y.textContent=R),f=F(ie),_e(k.$$.fragment,ie),ie.forEach(N),ee.forEach(N),z=F(w),T=m(w,"FORM",{class:!0});var X=O(T);C=m(X,"LABEL",{for:!0,class:!0});var $e=O(C);J=ge($e,U),$e.forEach(N),c=F(X),v=m(X,"INPUT",{type:!0,name:!0,class:!0}),q=F(X),H=m(X,"FIELDSET",{class:!0});var ue=O(H);g=m(ue,"INPUT",{name:!0,id:!0,class:!0}),Z=F(ue),M=m(ue,"BUTTON",{type:!0,class:!0,title:!0});var fe=O(M);d=m(fe,"SPAN",{class:!0});var we=O(d);u=ge(we,P),we.forEach(N),ae=F(fe),_e(B.$$.fragment,fe),fe.forEach(N),ue.forEach(N),$=F(X),p=m(X,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),se(p)!=="svelte-1g3xn8h"&&(p.textContent=L),X.forEach(N),A=F(w),w.forEach(N),this.h()},h(){l(o,"type","hidden"),l(o,"name","name"),o.value=E=e[13].name,l(o,"class","svelte-9flr1b"),l(y,"class","label svelte-9flr1b"),l(h,"type","submit"),l(h,"title","Delete constant"),l(h,"class","svelte-9flr1b"),l(a,"class","delete svelte-9flr1b"),l(C,"for",r=e[13].name),l(C,"class","svelte-9flr1b"),l(v,"type","hidden"),l(v,"name","name"),v.value=Q=e[13].name,l(v,"class","svelte-9flr1b"),g.disabled=W=!e[13].exposed,l(g,"name","value"),g.value=D=e[13].value,l(g,"id",V=e[13].name),l(g,"class","svelte-9flr1b"),Y(g,"exposed",e[13].exposed),l(d,"class","label svelte-9flr1b"),l(M,"type","button"),l(M,"class","toggleExposition svelte-9flr1b"),l(M,"title",s=e[13].exposed?"Hide value":"Show value"),l(H,"class","svelte-9flr1b"),l(p,"type","submit"),l(p,"class","button svelte-9flr1b"),Y(p,"needed",e[1][e[15]].changed),l(T,"class","edit svelte-9flr1b"),l(t,"class","svelte-9flr1b"),Y(t,"hidden",e[0]&&e[3](e[13])),Y(t,"highlighted",e[2].highlighted.constant===e[13].name)},m(S,w){de(S,t,w),n(t,a),n(a,o),n(a,i),n(a,h),n(h,y),n(h,f),me(k,h,null),n(t,z),n(t,T),n(T,C),n(C,J),n(T,c),n(T,v),n(T,q),n(T,H),n(H,g),n(H,Z),n(H,M),n(M,d),n(d,u),n(M,ae),me(B,M,null),n(T,$),n(T,p),n(t,A),b=!0,x||(re=[te(a,"submit",be(e[9])),te(g,"input",oe),te(M,"click",Oe),te(T,"submit",be(Me))],x=!0)},p(S,w){e=S,(!b||w&2&&E!==(E=e[13].name))&&(o.value=E),(!b||w&2)&&U!==(U=e[13].name+"")&&Le(J,U),(!b||w&2&&r!==(r=e[13].name))&&l(C,"for",r),(!b||w&2&&Q!==(Q=e[13].name))&&(v.value=Q),(!b||w&2&&W!==(W=!e[13].exposed))&&(g.disabled=W),(!b||w&2&&D!==(D=e[13].value)&&g.value!==D)&&(g.value=D),(!b||w&2&&V!==(V=e[13].name))&&l(g,"id",V),(!b||w&2)&&Y(g,"exposed",e[13].exposed),(!b||w&2)&&P!==(P=e[13].exposed?"Hide value":"Show value")&&Le(u,P);const ee={};w&2&&(ee.icon=e[13].exposed?"eyeStriked":"eye"),B.$set(ee),(!b||w&2&&s!==(s=e[13].exposed?"Hide value":"Show value"))&&l(M,"title",s),(!b||w&2)&&Y(p,"needed",e[1][e[15]].changed),(!b||w&11)&&Y(t,"hidden",e[0]&&e[3](e[13])),(!b||w&6)&&Y(t,"highlighted",e[2].highlighted.constant===e[13].name)},i(S){b||(K(k.$$.fragment,S),K(B.$$.fragment,S),S&&(le||Be(()=>{le=Ve(t,Ke,{duration:100,delay:10*e[15]}),le.start()})),b=!0)},o(S){G(k.$$.fragment,S),G(B.$$.fragment,S),b=!1},d(S){S&&N(t),ce(k),ce(B),x=!1,Se(re)}}}function je(e){var B;let t,a,o,E,i,h,y="Find:",R,f,k,z,T,C,U,J='<label for="newName" class="svelte-9flr1b">Name</label> <input type="text" name="name" id="newName" placeholder="MY_NEW_CONSTANT" class="svelte-9flr1b"/>',r,c,v='<label for="newValue" class="svelte-9flr1b">Value</label> <input type="text" name="value" id="newValue" class="svelte-9flr1b"/>',Q,q,H,g,W,D,V,Z,M;document.title=t="Constants"+((B=e[2].online)!=null&&B.MPKIT_URL?": "+e[2].online.MPKIT_URL.replace("https://",""):"");let d=e[0]&&Fe(e);g=new pe({props:{icon:"arrowRight"}});let P=ke(e[1]),u=[];for(let s=0;s<P.length;s+=1)u[s]=Ie(ye(e,P,s));const ae=s=>G(u[s],1,1,()=>{u[s]=null});return{c(){a=I(),o=_("div"),E=_("nav"),i=_("form"),h=_("label"),h.textContent=y,R=I(),f=_("input"),k=I(),d&&d.c(),z=I(),T=_("section"),C=_("form"),U=_("fieldset"),U.innerHTML=J,r=I(),c=_("fieldset"),c.innerHTML=v,Q=I(),q=_("button"),H=Ee(`Add
        `),he(g.$$.fragment),W=I(),D=_("ul");for(let s=0;s<u.length;s+=1)u[s].c();this.h()},l(s){Re("svelte-2x07wh",document.head).forEach(N),a=F(s),o=m(s,"DIV",{class:!0});var p=O(o);E=m(p,"NAV",{class:!0});var L=O(E);i=m(L,"FORM",{});var A=O(i);h=m(A,"LABEL",{for:!0,"data-svelte-h":!0}),se(h)!=="svelte-1otrvr9"&&(h.textContent=y),R=F(A),f=m(A,"INPUT",{type:!0,id:!0,class:!0}),k=F(A),d&&d.l(A),A.forEach(N),L.forEach(N),z=F(p),T=m(p,"SECTION",{class:!0});var le=O(T);C=m(le,"FORM",{class:!0});var b=O(C);U=m(b,"FIELDSET",{class:!0,"data-svelte-h":!0}),se(U)!=="svelte-1pelkcv"&&(U.innerHTML=J),r=F(b),c=m(b,"FIELDSET",{class:!0,"data-svelte-h":!0}),se(c)!=="svelte-t20vqf"&&(c.innerHTML=v),Q=F(b),q=m(b,"BUTTON",{class:!0});var x=O(q);H=ge(x,`Add
        `),_e(g.$$.fragment,x),x.forEach(N),b.forEach(N),le.forEach(N),W=F(p),D=m(p,"UL",{class:!0});var re=O(D);for(let oe=0;oe<u.length;oe+=1)u[oe].l(re);re.forEach(N),p.forEach(N),this.h()},h(){l(h,"for","filter"),l(f,"type","text"),l(f,"id","filter"),f.autofocus=!0,l(f,"class","svelte-9flr1b"),l(E,"class","svelte-9flr1b"),l(U,"class","svelte-9flr1b"),l(c,"class","svelte-9flr1b"),l(q,"class","button svelte-9flr1b"),l(C,"class","svelte-9flr1b"),l(T,"class","create svelte-9flr1b"),l(D,"class","svelte-9flr1b"),l(o,"class","container")},m(s,$){de(s,a,$),de(s,o,$),n(o,E),n(E,i),n(i,h),n(i,R),n(i,f),Te(f,e[0]),n(i,k),d&&d.m(i,null),n(o,z),n(o,T),n(T,C),n(C,U),n(C,r),n(C,c),n(C,Q),n(C,q),n(q,H),me(g,q,null),n(o,W),n(o,D);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(D,null);V=!0,f.focus(),Z||(M=[te(f,"input",e[7]),te(C,"submit",be(e[6]))],Z=!0)},p(s,[$]){var p;if((!V||$&4)&&t!==(t="Constants"+((p=s[2].online)!=null&&p.MPKIT_URL?": "+s[2].online.MPKIT_URL.replace("https://",""):""))&&(document.title=t),$&1&&f.value!==s[0]&&Te(f,s[0]),s[0]?d?(d.p(s,$),$&1&&K(d,1)):(d=Fe(s),d.c(),K(d,1),d.m(i,null)):d&&(Ne(),G(d,1,1,()=>{d=null}),Ce()),$&63){P=ke(s[1]);let L;for(L=0;L<P.length;L+=1){const A=ye(s,P,L);u[L]?(u[L].p(A,$),K(u[L],1)):(u[L]=Ie(A),u[L].c(),K(u[L],1),u[L].m(D,null))}for(Ne(),L=P.length;L<u.length;L+=1)ae(L);Ce()}},i(s){if(!V){K(d),K(g.$$.fragment,s);for(let $=0;$<P.length;$+=1)K(u[$]);V=!0}},o(s){G(d),G(g.$$.fragment,s),u=u.filter(Boolean);for(let $=0;$<u.length;$+=1)G(u[$]);V=!1},d(s){s&&(N(a),N(o)),d&&d.d(),ce(g),Ae(u,s),Z=!1,Se(M)}}}function ze(e,t,a){let o;He(e,j,r=>a(2,o=r));let E="",i=[];(async()=>await ne.get())().then(r=>{a(1,i=r)});const h=r=>r.name.toLowerCase().indexOf(E.toLowerCase())===-1&&r.value.toLowerCase().indexOf(E.toLowerCase())===-1,y=async(r,c)=>{r.preventDefault();const v=await ne.edit(new FormData(r.target));v.errors?j.notification.create("error",`Failed to update ${v.constant_set.name} constant`):(a(1,i[c].changed=!1,i),j.highlight("constant",v.constant_set.name),j.notification.create("success",`Constant ${v.constant_set.name} updated`))},R=async r=>{if(r.preventDefault(),confirm("Are you sure you want to delete this constant?")){const c=await ne.delete(new FormData(r.target));c.errors?j.notification.create("success",`Failed to delete ${c.constant_unset.name} constant`):(j.notification.create("success",`Constant ${c.constant_unset.name} deleted`),await ne.get().then(v=>{a(1,i=v)}))}},f=async r=>{r.preventDefault();const c=await ne.edit(new FormData(r.target));c.errors?j.notification.create("error",`Failed to create ${c.constant_set.name} constant`):(r.target.reset(),j.notification.create("success",`Constant ${c.constant_set.name} created`),await ne.get().then(v=>{a(1,i=v),j.highlight("constant",c.constant_set.name)}))};function k(){E=this.value,a(0,E)}return[E,i,o,h,y,R,f,k,()=>a(0,E=""),r=>R(r),(r,c,v)=>a(1,c[v].changed=!0,i),(r,c,v)=>a(1,c[v].exposed=!r.exposed,i),(r,c)=>y(c,r)]}class xe extends Ue{constructor(t){super(),De(this,t,ze,je,Pe,{})}}export{xe as component};
