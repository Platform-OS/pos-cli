import{s as De,k as ve,v as ke,i as qe,f as p,e as d,t as m,a as ye,c as i,b as w,A as C,d as h,g as Re,y as c,G as x,h as n,j as k,E as ge}from"../chunks/scheduler.CzbwTKXv.js";import{S as Te,i as $e,c as Pe,d as Se,m as Ee,t as Fe,a as Ne,f as Ae}from"../chunks/index.BeBfCTAL.js";import{p as Le}from"../chunks/stores.Cx_L27mC.js";import{n as Ie}from"../chunks/network.hGAcGvnf.js";import{s as ne}from"../chunks/state.Btpmmef7.js";import{A as Ue}from"../chunks/Aside.QhuFnfLu.js";const be={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};function Ce(a){let e,o,t="Time",r,u=new Date(a[1].network._timestamp/1e3).toLocaleString()+"",f,v,y="Request path",g,b,L=a[1].network.http_request_path+"",B,O,R,re="Request method",T,I=a[1].network.http_request_method+"",V,$,le="Status",_,U=a[1].network.lb_status_code+"",K,ee,M=be[a[1].network.lb_status_code]+"",J,P,de="Client IP",S,j=a[1].network.client+"",Q,E,ie="Client user agent",F,z=a[1].network.user_agent+"",W,N,ue="Processing time",q,G=parseFloat(a[1].network.request_processing_time)+parseFloat(a[1].network.target_processing_time)+"",X,te,A,_e="Response size",D,H=parseInt(a[1].network.sent_bytes)+"",Y,se;return{c(){e=d("dl"),o=d("dt"),o.textContent=t,r=d("dd"),f=m(u),v=d("dt"),v.textContent=y,g=d("dd"),b=d("a"),B=m(L),R=d("dt"),R.textContent=re,T=d("dd"),V=m(I),$=d("dt"),$.textContent=le,_=d("dd"),K=m(U),ee=ye(),J=m(M),P=d("dt"),P.textContent=de,S=d("dd"),Q=m(j),E=d("dt"),E.textContent=ie,F=d("dd"),W=m(z),N=d("dt"),N.textContent=ue,q=d("dd"),X=m(G),te=m("s"),A=d("dt"),A.textContent=_e,D=d("dd"),Y=m(H),se=m(" bytes"),this.h()},l(l){e=i(l,"DL",{class:!0});var s=w(e);o=i(s,"DT",{"data-svelte-h":!0}),C(o)!=="svelte-k4tc9n"&&(o.textContent=t),r=i(s,"DD",{class:!0});var ce=w(r);f=h(ce,u),ce.forEach(p),v=i(s,"DT",{"data-svelte-h":!0}),C(v)!=="svelte-1j5pznm"&&(v.textContent=y),g=i(s,"DD",{class:!0});var pe=w(g);b=i(pe,"A",{href:!0,class:!0});var fe=w(b);B=h(fe,L),fe.forEach(p),pe.forEach(p),R=i(s,"DT",{"data-svelte-h":!0}),C(R)!=="svelte-1wn7isk"&&(R.textContent=re),T=i(s,"DD",{class:!0});var me=w(T);V=h(me,I),me.forEach(p),$=i(s,"DT",{"data-svelte-h":!0}),C($)!=="svelte-1e9eis"&&($.textContent=le),_=i(s,"DD",{class:!0});var Z=w(_);K=h(Z,U),ee=Re(Z),J=h(Z,M),Z.forEach(p),P=i(s,"DT",{"data-svelte-h":!0}),C(P)!=="svelte-1rrvc96"&&(P.textContent=de),S=i(s,"DD",{class:!0});var he=w(S);Q=h(he,j),he.forEach(p),E=i(s,"DT",{"data-svelte-h":!0}),C(E)!=="svelte-on2p8j"&&(E.textContent=ie),F=i(s,"DD",{class:!0});var we=w(F);W=h(we,z),we.forEach(p),N=i(s,"DT",{"data-svelte-h":!0}),C(N)!=="svelte-1wlbq2"&&(N.textContent=ue),q=i(s,"DD",{class:!0});var oe=w(q);X=h(oe,G),te=h(oe,"s"),oe.forEach(p),A=i(s,"DT",{"data-svelte-h":!0}),C(A)!=="svelte-jqr426"&&(A.textContent=_e),D=i(s,"DD",{class:!0});var ae=w(D);Y=h(ae,H),se=h(ae," bytes"),ae.forEach(p),s.forEach(p),this.h()},h(){c(r,"class","svelte-ebu0yn"),c(b,"href",O=a[1].network.http_request_url),c(b,"class","svelte-ebu0yn"),c(g,"class","svelte-ebu0yn"),c(T,"class","svelte-ebu0yn"),c(_,"class","svelte-ebu0yn"),x(_,"success",a[1].network.lb_status_code>=200&&a[1].network.lb_status_code<300),x(_,"error",a[1].network.http_request_protocol.lb_status_code>=400&&a[1].network.http_request_protocol.lb_status_code<600),c(S,"class","svelte-ebu0yn"),c(F,"class","svelte-ebu0yn"),c(q,"class","svelte-ebu0yn"),c(D,"class","svelte-ebu0yn"),c(e,"class","definitions svelte-ebu0yn")},m(l,s){qe(l,e,s),n(e,o),n(e,r),n(r,f),n(e,v),n(e,g),n(g,b),n(b,B),n(e,R),n(e,T),n(T,V),n(e,$),n(e,_),n(_,K),n(_,ee),n(_,J),n(e,P),n(e,S),n(S,Q),n(e,E),n(e,F),n(F,W),n(e,N),n(e,q),n(q,X),n(q,te),n(e,A),n(e,D),n(D,Y),n(D,se)},p(l,s){s&2&&u!==(u=new Date(l[1].network._timestamp/1e3).toLocaleString()+"")&&k(f,u),s&2&&L!==(L=l[1].network.http_request_path+"")&&k(B,L),s&2&&O!==(O=l[1].network.http_request_url)&&c(b,"href",O),s&2&&I!==(I=l[1].network.http_request_method+"")&&k(V,I),s&2&&U!==(U=l[1].network.lb_status_code+"")&&k(K,U),s&2&&M!==(M=be[l[1].network.lb_status_code]+"")&&k(J,M),s&2&&x(_,"success",l[1].network.lb_status_code>=200&&l[1].network.lb_status_code<300),s&2&&x(_,"error",l[1].network.http_request_protocol.lb_status_code>=400&&l[1].network.http_request_protocol.lb_status_code<600),s&2&&j!==(j=l[1].network.client+"")&&k(Q,j),s&2&&z!==(z=l[1].network.user_agent+"")&&k(W,z),s&2&&G!==(G=parseFloat(l[1].network.request_processing_time)+parseFloat(l[1].network.target_processing_time)+"")&&k(X,G),s&2&&H!==(H=parseInt(l[1].network.sent_bytes)+"")&&k(Y,H)},d(l){l&&p(e)}}}function Me(a){let e,o=a[1].network._timestamp&&Ce(a);return{c(){o&&o.c(),e=ke()},l(t){o&&o.l(t),e=ke()},m(t,r){o&&o.m(t,r),qe(t,e,r)},p(t,r){t[1].network._timestamp?o?o.p(t,r):(o=Ce(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},d(t){t&&p(e),o&&o.d(t)}}}function je(a){let e,o;return e=new Ue({props:{title:a[1].network.lb_status_code?`<span class="log-detail-method">${a[1].network.http_request_method}</span> ${a[1].network.http_request_path}`:"Loading…",closeUrl:"/network?"+a[0].url.searchParams.toString(),$$slots:{default:[Me]},$$scope:{ctx:a}}}),{c(){Pe(e.$$.fragment)},l(t){Se(e.$$.fragment,t)},m(t,r){Ee(e,t,r),o=!0},p(t,[r]){const u={};r&2&&(u.title=t[1].network.lb_status_code?`<span class="log-detail-method">${t[1].network.http_request_method}</span> ${t[1].network.http_request_path}`:"Loading…"),r&1&&(u.closeUrl="/network?"+t[0].url.searchParams.toString()),r&10&&(u.$$scope={dirty:r,ctx:t}),e.$set(u)},i(t){o||(Fe(e.$$.fragment,t),o=!0)},o(t){Ne(e.$$.fragment,t),o=!1},d(t){Ae(e,t)}}}function ze(a,e,o){let t,r;ve(a,Le,f=>o(0,t=f)),ve(a,ne,f=>o(1,r=f));const u=async()=>{var v;const f=(v=r.networks.hits)==null?void 0:v.find(y=>y._timestamp==t.params.id);if(f)ge(ne,r.network=f,r);else{const y={size:1,sql:`select * from requests where _timestamp = ${t.params.id}`};await Ie.get(y).then(g=>{ge(ne,r.network=g.hits[0],r)})}};return a.$$.update=()=>{a.$$.dirty&1&&t.params.id&&u()},[t,r]}class Je extends Te{constructor(e){super(),$e(this,e,ze,je,De,{})}}export{Je as component};
