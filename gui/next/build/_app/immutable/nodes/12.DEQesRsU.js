import{s as Ue,a as F,e as m,t as be,p as De,f as N,g as S,c as _,b as O,A as se,d as ge,y as l,i as ce,h as n,B as Ce,C as te,J as Ee,F as Pe,r as Ie,k as Ae,n as Be,G as Q,j as Te,M as Re}from"../chunks/scheduler.CKQ5dLhN.js";import{S as qe,i as He,c as de,d as me,m as _e,t as j,a as X,e as Le,f as he,j as Ve,g as Ne}from"../chunks/index.CGVWAVV-.js";import{e as ke}from"../chunks/each.BWzj3zy9.js";import{f as je}from"../chunks/index.WWWgbq8H.js";import{g as ve}from"../chunks/graphql.BD1m7lx9.js";import{s as K}from"../chunks/state.nqMW8J5l.js";import{I as pe}from"../chunks/Icon.CkKwi_WD.js";const ne={get:()=>ve({query:`
      query {
        constants(
          per_page: 100
        ) {
          results {
            name,
            value,
            updated_at
          }
        }
      }`}).then(t=>t.constants.results),edit:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_set(name: "${e.name}", value: "${e.value}"){
          name,
          value
        }
      }`;return ve({query:t})},delete:e=>{e=Object.fromEntries(e.entries());const t=`
      mutation {
        constant_unset(name: "${e.name}"){
          name
        }
      }
    `;return ve({query:t})}};function ye(e,t,a){const o=e.slice();return o[13]=t[a],o[14]=t,o[15]=a,o}function Fe(e){let t,a,o="Clear filter",E,i,h,y,B;return i=new pe({props:{icon:"x",size:"12"}}),{c(){t=m("button"),a=m("span"),a.textContent=o,E=F(),de(i.$$.fragment),this.h()},l(f){t=_(f,"BUTTON",{class:!0});var k=O(t);a=_(k,"SPAN",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-1bu6mgu"&&(a.textContent=o),E=S(k),me(i.$$.fragment,k),k.forEach(N),this.h()},h(){l(a,"class","label svelte-9flr1b"),l(t,"class","clearFilter svelte-9flr1b")},m(f,k){ce(f,t,k),n(t,a),n(t,E),_e(i,t,null),h=!0,y||(B=te(t,"click",e[8]),y=!0)},p:Be,i(f){h||(j(i.$$.fragment,f),h=!0)},o(f){X(i.$$.fragment,f),h=!1},d(f){f&&N(t),he(i),y=!1,B()}}}function Se(e){let t,a,o,E,i,h,y,B="Delete constant",f,k,z,C,T,U=e[13].name+"",G,r,c,v,J,q,R,g,W,D,V,Z,M,d,P=e[13].exposed?"Hide value":"Show value",u,ae,H,s,$,p,L="Save",A,le,b,x,re;k=new pe({props:{icon:"x",size:"14"}});function oe(){return e[10](e[13],e[14],e[15])}H=new pe({props:{icon:e[13].exposed?"eyeStriked":"eye"}});function Oe(){return e[11](e[13],e[14],e[15])}function Me(...I){return e[12](e[15],...I)}return{c(){t=m("li"),a=m("form"),o=m("input"),i=F(),h=m("button"),y=m("span"),y.textContent=B,f=F(),de(k.$$.fragment),z=F(),C=m("form"),T=m("label"),G=be(U),c=F(),v=m("input"),q=F(),R=m("fieldset"),g=m("input"),Z=F(),M=m("button"),d=m("span"),u=be(P),ae=F(),de(H.$$.fragment),$=F(),p=m("button"),p.textContent=L,A=F(),this.h()},l(I){t=_(I,"LI",{class:!0});var w=O(t);a=_(w,"FORM",{class:!0});var ee=O(a);o=_(ee,"INPUT",{type:!0,name:!0,class:!0}),i=S(ee),h=_(ee,"BUTTON",{type:!0,title:!0,class:!0});var ie=O(h);y=_(ie,"SPAN",{class:!0,"data-svelte-h":!0}),se(y)!=="svelte-1p7u8ms"&&(y.textContent=B),f=S(ie),me(k.$$.fragment,ie),ie.forEach(N),ee.forEach(N),z=S(w),C=_(w,"FORM",{class:!0});var Y=O(C);T=_(Y,"LABEL",{for:!0,class:!0});var $e=O(T);G=ge($e,U),$e.forEach(N),c=S(Y),v=_(Y,"INPUT",{type:!0,name:!0,class:!0}),q=S(Y),R=_(Y,"FIELDSET",{class:!0});var ue=O(R);g=_(ue,"INPUT",{name:!0,id:!0,class:!0}),Z=S(ue),M=_(ue,"BUTTON",{type:!0,class:!0,title:!0});var fe=O(M);d=_(fe,"SPAN",{class:!0});var we=O(d);u=ge(we,P),we.forEach(N),ae=S(fe),me(H.$$.fragment,fe),fe.forEach(N),ue.forEach(N),$=S(Y),p=_(Y,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),se(p)!=="svelte-1g3xn8h"&&(p.textContent=L),Y.forEach(N),A=S(w),w.forEach(N),this.h()},h(){l(o,"type","hidden"),l(o,"name","name"),o.value=E=e[13].name,l(o,"class","svelte-9flr1b"),l(y,"class","label svelte-9flr1b"),l(h,"type","submit"),l(h,"title","Delete constant"),l(h,"class","svelte-9flr1b"),l(a,"class","delete svelte-9flr1b"),l(T,"for",r=e[13].name),l(T,"class","svelte-9flr1b"),l(v,"type","hidden"),l(v,"name","name"),v.value=J=e[13].name,l(v,"class","svelte-9flr1b"),g.disabled=W=!e[13].exposed,l(g,"name","value"),g.value=D=e[13].value,l(g,"id",V=e[13].name),l(g,"class","svelte-9flr1b"),Q(g,"exposed",e[13].exposed),l(d,"class","label svelte-9flr1b"),l(M,"type","button"),l(M,"class","toggleExposition svelte-9flr1b"),l(M,"title",s=e[13].exposed?"Hide value":"Show value"),l(R,"class","svelte-9flr1b"),l(p,"type","submit"),l(p,"class","button svelte-9flr1b"),Q(p,"needed",e[1][e[15]].changed),l(C,"class","edit svelte-9flr1b"),l(t,"class","svelte-9flr1b"),Q(t,"hidden",e[0]&&e[3](e[13])),Q(t,"highlighted",e[2].highlighted.constant===e[13].name)},m(I,w){ce(I,t,w),n(t,a),n(a,o),n(a,i),n(a,h),n(h,y),n(h,f),_e(k,h,null),n(t,z),n(t,C),n(C,T),n(T,G),n(C,c),n(C,v),n(C,q),n(C,R),n(R,g),n(R,Z),n(R,M),n(M,d),n(d,u),n(M,ae),_e(H,M,null),n(C,$),n(C,p),n(t,A),b=!0,x||(re=[te(a,"submit",Ee(e[9])),te(g,"input",oe),te(M,"click",Oe),te(C,"submit",Ee(Me))],x=!0)},p(I,w){e=I,(!b||w&2&&E!==(E=e[13].name))&&(o.value=E),(!b||w&2)&&U!==(U=e[13].name+"")&&Te(G,U),(!b||w&2&&r!==(r=e[13].name))&&l(T,"for",r),(!b||w&2&&J!==(J=e[13].name))&&(v.value=J),(!b||w&2&&W!==(W=!e[13].exposed))&&(g.disabled=W),(!b||w&2&&D!==(D=e[13].value)&&g.value!==D)&&(g.value=D),(!b||w&2&&V!==(V=e[13].name))&&l(g,"id",V),(!b||w&2)&&Q(g,"exposed",e[13].exposed),(!b||w&2)&&P!==(P=e[13].exposed?"Hide value":"Show value")&&Te(u,P);const ee={};w&2&&(ee.icon=e[13].exposed?"eyeStriked":"eye"),H.$set(ee),(!b||w&2&&s!==(s=e[13].exposed?"Hide value":"Show value"))&&l(M,"title",s),(!b||w&2)&&Q(p,"needed",e[1][e[15]].changed),(!b||w&11)&&Q(t,"hidden",e[0]&&e[3](e[13])),(!b||w&6)&&Q(t,"highlighted",e[2].highlighted.constant===e[13].name)},i(I){b||(j(k.$$.fragment,I),j(H.$$.fragment,I),I&&(le||Re(()=>{le=Ve(t,je,{duration:100,delay:10*e[15]}),le.start()})),b=!0)},o(I){X(k.$$.fragment,I),X(H.$$.fragment,I),b=!1},d(I){I&&N(t),he(k),he(H),x=!1,Ie(re)}}}function Ke(e){var H;let t,a,o,E,i,h,y="Find:",B,f,k,z,C,T,U,G='<label for="newName" class="svelte-9flr1b">Name</label> <input type="text" name="name" id="newName" placeholder="MY_NEW_CONSTANT" class="svelte-9flr1b"/>',r,c,v='<label for="newValue" class="svelte-9flr1b">Value</label> <input type="text" name="value" id="newValue" class="svelte-9flr1b"/>',J,q,R,g,W,D,V,Z,M;document.title=t="Constants"+((H=e[2].online)!=null&&H.MPKIT_URL?": "+e[2].online.MPKIT_URL.replace("https://",""):"");let d=e[0]&&Fe(e);g=new pe({props:{icon:"arrowRight"}});let P=ke(e[1]),u=[];for(let s=0;s<P.length;s+=1)u[s]=Se(ye(e,P,s));const ae=s=>X(u[s],1,1,()=>{u[s]=null});return{c(){a=F(),o=m("div"),E=m("nav"),i=m("form"),h=m("label"),h.textContent=y,B=F(),f=m("input"),k=F(),d&&d.c(),z=F(),C=m("section"),T=m("form"),U=m("fieldset"),U.innerHTML=G,r=F(),c=m("fieldset"),c.innerHTML=v,J=F(),q=m("button"),R=be(`Add\r
        `),de(g.$$.fragment),W=F(),D=m("ul");for(let s=0;s<u.length;s+=1)u[s].c();this.h()},l(s){De("svelte-2x07wh",document.head).forEach(N),a=S(s),o=_(s,"DIV",{class:!0});var p=O(o);E=_(p,"NAV",{class:!0});var L=O(E);i=_(L,"FORM",{});var A=O(i);h=_(A,"LABEL",{for:!0,"data-svelte-h":!0}),se(h)!=="svelte-1otrvr9"&&(h.textContent=y),B=S(A),f=_(A,"INPUT",{type:!0,id:!0,class:!0}),k=S(A),d&&d.l(A),A.forEach(N),L.forEach(N),z=S(p),C=_(p,"SECTION",{class:!0});var le=O(C);T=_(le,"FORM",{class:!0});var b=O(T);U=_(b,"FIELDSET",{class:!0,"data-svelte-h":!0}),se(U)!=="svelte-1pelkcv"&&(U.innerHTML=G),r=S(b),c=_(b,"FIELDSET",{class:!0,"data-svelte-h":!0}),se(c)!=="svelte-t20vqf"&&(c.innerHTML=v),J=S(b),q=_(b,"BUTTON",{class:!0});var x=O(q);R=ge(x,`Add\r
        `),me(g.$$.fragment,x),x.forEach(N),b.forEach(N),le.forEach(N),W=S(p),D=_(p,"UL",{class:!0});var re=O(D);for(let oe=0;oe<u.length;oe+=1)u[oe].l(re);re.forEach(N),p.forEach(N),this.h()},h(){l(h,"for","filter"),l(f,"type","text"),l(f,"id","filter"),f.autofocus=!0,l(f,"class","svelte-9flr1b"),l(E,"class","svelte-9flr1b"),l(U,"class","svelte-9flr1b"),l(c,"class","svelte-9flr1b"),l(q,"class","button svelte-9flr1b"),l(T,"class","svelte-9flr1b"),l(C,"class","create svelte-9flr1b"),l(D,"class","svelte-9flr1b"),l(o,"class","container")},m(s,$){ce(s,a,$),ce(s,o,$),n(o,E),n(E,i),n(i,h),n(i,B),n(i,f),Ce(f,e[0]),n(i,k),d&&d.m(i,null),n(o,z),n(o,C),n(C,T),n(T,U),n(T,r),n(T,c),n(T,J),n(T,q),n(q,R),_e(g,q,null),n(o,W),n(o,D);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(D,null);V=!0,f.focus(),Z||(M=[te(f,"input",e[7]),te(T,"submit",Ee(e[6]))],Z=!0)},p(s,[$]){var p;if((!V||$&4)&&t!==(t="Constants"+((p=s[2].online)!=null&&p.MPKIT_URL?": "+s[2].online.MPKIT_URL.replace("https://",""):""))&&(document.title=t),$&1&&f.value!==s[0]&&Ce(f,s[0]),s[0]?d?(d.p(s,$),$&1&&j(d,1)):(d=Fe(s),d.c(),j(d,1),d.m(i,null)):d&&(Ne(),X(d,1,1,()=>{d=null}),Le()),$&63){P=ke(s[1]);let L;for(L=0;L<P.length;L+=1){const A=ye(s,P,L);u[L]?(u[L].p(A,$),j(u[L],1)):(u[L]=Se(A),u[L].c(),j(u[L],1),u[L].m(D,null))}for(Ne(),L=P.length;L<u.length;L+=1)ae(L);Le()}},i(s){if(!V){j(d),j(g.$$.fragment,s);for(let $=0;$<P.length;$+=1)j(u[$]);V=!0}},o(s){X(d),X(g.$$.fragment,s),u=u.filter(Boolean);for(let $=0;$<u.length;$+=1)X(u[$]);V=!1},d(s){s&&(N(a),N(o)),d&&d.d(),he(g),Pe(u,s),Z=!1,Ie(M)}}}function ze(e,t,a){let o;Ae(e,K,r=>a(2,o=r));let E="",i=[];(async()=>await ne.get())().then(r=>{a(1,i=r)});const h=r=>r.name.toLowerCase().indexOf(E.toLowerCase())===-1&&r.value.toLowerCase().indexOf(E.toLowerCase())===-1,y=async(r,c)=>{r.preventDefault();const v=await ne.edit(new FormData(r.target));v.errors?K.notification.create("error",`Failed to update ${v.constant_set.name} constant`):(a(1,i[c].changed=!1,i),K.highlight("constant",v.constant_set.name),K.notification.create("success",`Constant ${v.constant_set.name} updated`))},B=async r=>{if(r.preventDefault(),confirm("Are you sure you want to delete this constant?")){const c=await ne.delete(new FormData(r.target));c.errors?K.notification.create("success",`Failed to delete ${c.constant_unset.name} constant`):(K.notification.create("success",`Constant ${c.constant_unset.name} deleted`),await ne.get().then(v=>{a(1,i=v)}))}},f=async r=>{r.preventDefault();const c=await ne.edit(new FormData(r.target));c.errors?K.notification.create("error",`Failed to create ${c.constant_set.name} constant`):(r.target.reset(),K.notification.create("success",`Constant ${c.constant_set.name} created`),await ne.get().then(v=>{a(1,i=v),K.highlight("constant",c.constant_set.name)}))};function k(){E=this.value,a(0,E)}return[E,i,o,h,y,B,f,k,()=>a(0,E=""),r=>B(r),(r,c,v)=>a(1,c[v].changed=!0,i),(r,c,v)=>a(1,c[v].exposed=!r.exposed,i),(r,c)=>y(c,r)]}class xe extends qe{constructor(t){super(),He(this,t,ze,Ke,Ue,{})}}export{xe as component};
