import{s as He,e as p,a as A,t as fe,c as v,b,g as M,f as _,d as ce,y as u,i as ee,h as o,C as _e,L as xe,z as Ue,Y as Ct,r as Je,A as ue,J as kt,M as et,F as Xe,k as Qe,U as Pt,E as we,j as De,n as Ze,B as Ie,p as wt,a1 as rt,D as It,G as Oe,l as Dt,u as jt,m as Nt,o as Lt,H as it,a3 as Ot}from"../chunks/scheduler.CKQ5dLhN.js";import{S as ze,i as Ke,c as me,d as pe,m as ve,t as O,a as H,f as he,g as ye,e as Ce,h as qe,b as St}from"../chunks/index.CGVWAVV-.js";import{g as Ut}from"../chunks/globals.D0QH3NT1.js";import{e as Se}from"../chunks/each.BWzj3zy9.js";import{g as At}from"../chunks/entry.COceLI_i.js";import{s as re}from"../chunks/state.nqMW8J5l.js";import{q as Tt}from"../chunks/index.iVSWiVfi.js";import{p as Mt}from"../chunks/stores.BLuxmlax.js";import{u as Ae}from"../chunks/user.CRviTK4n.js";import{c as Rt,T as Bt}from"../chunks/Toggle.CtBEfrzX.js";import{I as je}from"../chunks/Icon.CkKwi_WD.js";import{p as Vt}from"../chunks/parseValue.BxCUwhRQ.js";import{t as Ft}from"../chunks/tryParseJSON.x4PJc0Qf.js";import{N as qt}from"../chunks/Number.B4JDnNHn.js";function Ht(l){let e,a,t,s,r,n,f,i,h,m;return n=new je({props:{icon:"x",size:"22"}}),{c(){e=p("form"),a=p("input"),t=A(),s=p("button"),r=p("i"),me(n.$$.fragment),f=fe(`\r
    Delete user`),this.h()},l(c){e=v(c,"FORM",{});var E=b(e);a=v(E,"INPUT",{type:!0,name:!0}),t=M(E),s=v(E,"BUTTON",{class:!0});var T=b(s);r=v(T,"I",{class:!0});var y=b(r);pe(n.$$.fragment,y),y.forEach(_),f=ce(T,`\r
    Delete user`),T.forEach(_),E.forEach(_),this.h()},h(){u(a,"type","hidden"),u(a,"name","id"),a.value=l[0],u(r,"class","svelte-ooaugn"),u(s,"class","danger")},m(c,E){ee(c,e,E),o(e,a),o(e,t),o(e,s),o(s,r),ve(n,r,null),o(s,f),l[3](e),i=!0,h||(m=_e(e,"submit",l[2]),h=!0)},p(c,[E]){(!i||E&1)&&(a.value=c[0])},i(c){i||(O(n.$$.fragment,c),i=!0)},o(c){H(n.$$.fragment,c),i=!1},d(c){c&&_(e),he(n),l[3](null),h=!1,m()}}}function Jt(l,e,a){let{id:t}=e,s,r=xe();const n=async i=>{if(i.preventDefault(),confirm("Are you sure you want to delete this user?")){r("close");const m=new FormData(s).get("id");(await Ae.delete(m)).errors?re.notification.create("error",`Record ${m} could not be deleted`):(re.notification.create("success",`Record ${m} deleted`),r("success"))}};function f(i){Ue[i?"unshift":"push"](()=>{s=i,a(1,s)})}return l.$$set=i=>{"id"in i&&a(0,t=i.id)},[t,s,n,f]}class zt extends ze{constructor(e){super(),Ke(this,e,Jt,Ht,He,{id:0})}}function Kt(l){let e,a,t,s,r,n,f;return s=new zt({props:{id:l[0].id}}),s.$on("success",l[3]),s.$on("close",l[4]),{c(){e=p("menu"),a=p("ul"),t=p("li"),me(s.$$.fragment),this.h()},l(i){e=v(i,"MENU",{class:!0});var h=b(e);a=v(h,"UL",{});var m=b(a);t=v(m,"LI",{class:!0});var c=b(t);pe(s.$$.fragment,c),c.forEach(_),m.forEach(_),h.forEach(_),this.h()},h(){u(t,"class","svelte-8i1sxu"),u(e,"class","content-context svelte-8i1sxu")},m(i,h){ee(i,e,h),o(e,a),o(a,t),ve(s,t,null),r=!0,n||(f=[_e(window,"keyup",l[2]),Ct(Rt.call(null,e,l[5]))],n=!0)},p(i,[h]){const m={};h&1&&(m.id=i[0].id),s.$set(m)},i(i){r||(O(s.$$.fragment,i),r=!0)},o(i){H(s.$$.fragment,i),r=!1},d(i){i&&_(e),he(s),n=!1,Je(f)}}}function Gt(l,e,a){let{record:t}=e;const s=xe(),r=h=>{h.key==="Escape"&&s("close")},n=()=>s("reload"),f=()=>s("close"),i=()=>s("close");return l.$$set=h=>{"record"in h&&a(0,t=h.record)},[t,s,r,n,f,i]}class Yt extends ze{constructor(e){super(),Ke(this,e,Gt,Kt,He,{record:0})}}function ot(l,e,a){const t=l.slice();return t[13]=e[a],t}function ut(l,e,a){const t=l.slice();t[16]=e[a];const s=t[1]!==null?Vt(t[1].properties[t[16].name],t[16].attribute_type):{type:t[16].attribute_type,value:""};return t[17]=s,t}function ft(l){let e,a=`<dir><label for="password" class="svelte-26svji">Password
            <div class="type svelte-26svji">string</div></label></dir> <div><input type="password" name="password" id="password" class="svelte-26svji"/></div>`;return{c(){e=p("fieldset"),e.innerHTML=a,this.h()},l(t){e=v(t,"FIELDSET",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1u8xex3"&&(e.innerHTML=a),this.h()},h(){u(e,"class","svelte-26svji")},m(t,s){ee(t,e,s)},d(t){t&&_(e)}}}function Wt(l){let e=l[16].attribute_type+"",a,t,s,r,n;return{c(){a=fe(e),t=A(),s=p("input"),this.h()},l(f){a=ce(f,e),t=M(f),s=v(f,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){u(s,"type","hidden"),u(s,"name",r=l[16].name+"[type]"),s.value=n=l[16].attribute_type,u(s,"class","svelte-26svji")},m(f,i){ee(f,a,i),ee(f,t,i),ee(f,s,i)},p(f,i){i&1&&e!==(e=f[16].attribute_type+"")&&De(a,e),i&1&&r!==(r=f[16].name+"[type]")&&u(s,"name",r),i&1&&n!==(n=f[16].attribute_type)&&(s.value=n)},i:Ze,o:Ze,d(f){f&&(_(a),_(t),_(s))}}}function Xt(l){let e,a;return e=new Bt({props:{name:l[16].name+"[type]",options:[{value:"string",label:"string"},{value:"json",label:"json"}],checked:l[17].type==="json"?"json":"string"}}),{c(){me(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ve(e,t,s),a=!0},p(t,s){const r={};s&1&&(r.name=t[16].name+"[type]"),s&3&&(r.checked=t[17].type==="json"?"json":"string"),e.$set(r)},i(t){a||(O(e.$$.fragment,t),a=!0)},o(t){H(e.$$.fragment,t),a=!1},d(t){he(e,t)}}}function Qt(l){let e,a,t,s;return{c(){e=p("textarea"),this.h()},l(r){e=v(r,"TEXTAREA",{rows:!0,name:!0,id:!0,class:!0}),b(e).forEach(_),this.h()},h(){u(e,"rows","1"),u(e,"name",a=l[16].name+"[value]"),u(e,"id",t="edit_"+l[16].name),e.value=s=l[17].type==="json"||l[17].type==="jsonEscaped"&&!mt?JSON.stringify(l[17].value,void 0,2):l[17].value,u(e,"class","svelte-26svji")},m(r,n){ee(r,e,n)},p(r,n){n&1&&a!==(a=r[16].name+"[value]")&&u(e,"name",a),n&1&&t!==(t="edit_"+r[16].name)&&u(e,"id",t),n&3&&s!==(s=r[17].type==="json"||r[17].type==="jsonEscaped"&&!mt?JSON.stringify(r[17].value,void 0,2):r[17].value)&&(e.value=s)},d(r){r&&_(e)}}}function Zt(l){let e,a,t,s,r,n,f,i,h,m;return{c(){e=p("select"),a=p("option"),t=p("option"),s=fe("true"),n=p("option"),f=fe("false"),this.h()},l(c){e=v(c,"SELECT",{name:!0,id:!0});var E=b(e);a=v(E,"OPTION",{class:!0}),b(a).forEach(_),t=v(E,"OPTION",{});var T=b(t);s=ce(T,"true"),T.forEach(_),n=v(E,"OPTION",{});var y=b(n);f=ce(y,"false"),y.forEach(_),E.forEach(_),this.h()},h(){a.__value="",Ie(a,a.__value),u(a,"class","value-null"),t.__value="true",Ie(t,t.__value),t.selected=r=l[17].value==="true",n.__value="false",Ie(n,n.__value),n.selected=i=l[17].value==="false",u(e,"name",h=l[16].name+"[value]"),u(e,"id",m="edit_"+l[16].name)},m(c,E){ee(c,e,E),o(e,a),o(e,t),o(t,s),o(e,n),o(n,f)},p(c,E){E&3&&r!==(r=c[17].value==="true")&&(t.selected=r),E&3&&i!==(i=c[17].value==="false")&&(n.selected=i),E&1&&h!==(h=c[16].name+"[value]")&&u(e,"name",h),E&1&&m!==(m="edit_"+c[16].name)&&u(e,"id",m)},d(c){c&&_(e)}}}function ct(l){let e=l[5][l[16].name].message+"",a;return{c(){a=fe(e)},l(t){a=ce(t,e)},m(t,s){ee(t,a,s)},p(t,s){s&33&&e!==(e=t[5][t[16].name].message+"")&&De(a,e)},d(t){t&&_(a)}}}function dt(l){let e,a,t,s=l[16].name+"",r,n,f,i,h,m,c,E,T,y,F,P;const k=[Xt,Wt],C=[];function J($,V){return $[16].attribute_type==="string"?0:1}h=J(l),m=C[h]=k[h](l);function S($,V){return $[16].attribute_type==="boolean"?Zt:Qt}let R=S(l),z=R(l),U=l[5][l[16].name]&&ct(l);return{c(){e=p("fieldset"),a=p("dir"),t=p("label"),r=fe(s),n=p("br"),f=A(),i=p("div"),m.c(),E=A(),T=p("div"),z.c(),y=A(),F=p("div"),U&&U.c(),this.h()},l($){e=v($,"FIELDSET",{class:!0});var V=b(e);a=v(V,"DIR",{});var K=b(a);t=v(K,"LABEL",{for:!0,class:!0});var q=b(t);r=ce(q,s),n=v(q,"BR",{}),f=M(q),i=v(q,"DIV",{class:!0});var B=b(i);m.l(B),B.forEach(_),q.forEach(_),K.forEach(_),E=M(V),T=v(V,"DIV",{});var Y=b(T);z.l(Y),y=M(Y),F=v(Y,"DIV",{role:!0,class:!0});var I=b(F);U&&U.l(I),I.forEach(_),Y.forEach(_),V.forEach(_),this.h()},h(){u(i,"class","type svelte-26svji"),u(t,"for",c="edit_"+l[16].name),u(t,"class","svelte-26svji"),u(F,"role","alert"),u(F,"class","svelte-26svji"),u(e,"class","svelte-26svji")},m($,V){ee($,e,V),o(e,a),o(a,t),o(t,r),o(t,n),o(t,f),o(t,i),C[h].m(i,null),o(e,E),o(e,T),z.m(T,null),o(T,y),o(T,F),U&&U.m(F,null),P=!0},p($,V){(!P||V&1)&&s!==(s=$[16].name+"")&&De(r,s);let K=h;h=J($),h===K?C[h].p($,V):(ye(),H(C[K],1,1,()=>{C[K]=null}),Ce(),m=C[h],m?m.p($,V):(m=C[h]=k[h]($),m.c()),O(m,1),m.m(i,null)),(!P||V&1&&c!==(c="edit_"+$[16].name))&&u(t,"for",c),R===(R=S($))&&z?z.p($,V):(z.d(1),z=R($),z&&(z.c(),z.m(T,y))),$[5][$[16].name]?U?U.p($,V):(U=ct($),U.c(),U.m(F,null)):U&&(U.d(1),U=null)},i($){P||(O(m),P=!0)},o($){H(m),P=!1},d($){$&&_(e),C[h].d(),z.d(),U&&U.d()}}}function _t(l){let e,a=(l[13].message??JSON.stringify(l[13]))+"",t,s;return{c(){e=p("li"),t=fe(a),s=A(),this.h()},l(r){e=v(r,"LI",{class:!0});var n=b(e);t=ce(n,a),s=M(n),n.forEach(_),this.h()},h(){u(e,"class","svelte-26svji")},m(r,n){ee(r,e,n),o(e,t),o(e,s)},p(r,n){n&16&&a!==(a=(r[13].message??JSON.stringify(r[13]))+"")&&De(t,a)},d(r){r&&_(e)}}}function xt(l){let e;return{c(){e=fe("Edit user")},l(a){e=ce(a,"Edit user")},m(a,t){ee(a,e,t)},d(a){a&&_(e)}}}function el(l){let e;return{c(){e=fe("Create user")},l(a){e=ce(a,"Create user")},m(a,t){ee(a,e,t)},d(a){a&&_(e)}}}function tl(l){let e,a,t,s,r,n=`<label for="email" class="svelte-26svji">Email
            <div class="type svelte-26svji">string</div></label>`,f,i,h,m,c,E,T,y,F,P,k,C,J="Cancel",S,R,z,U,$,V,K,q,B=l[1]===null&&ft(),Y=Se(l[0]),I=[];for(let d=0;d<Y.length;d+=1)I[d]=dt(ut(l,Y,d));const w=d=>H(I[d],1,1,()=>{I[d]=null});let L=Se(l[4]),j=[];for(let d=0;d<L.length;d+=1)j[d]=_t(ot(l,L,d));function se(d,N){return d[1]===null?el:xt}let ge=se(l),ae=ge(l);return U=new je({props:{icon:"arrowRight"}}),{c(){e=p("dialog"),a=p("div"),t=p("form"),s=p("fieldset"),r=p("dir"),r.innerHTML=n,f=A(),i=p("div"),h=p("input"),c=A(),B&&B.c(),E=A();for(let d=0;d<I.length;d+=1)I[d].c();T=A(),y=p("div"),F=p("ul");for(let d=0;d<j.length;d+=1)j[d].c();P=A(),k=p("fieldset"),C=p("button"),C.textContent=J,S=A(),R=p("button"),ae.c(),z=A(),me(U.$$.fragment),this.h()},l(d){e=v(d,"DIALOG",{class:!0});var N=b(e);a=v(N,"DIV",{class:!0});var g=b(a);t=v(g,"FORM",{class:!0});var G=b(t);s=v(G,"FIELDSET",{class:!0});var de=b(s);r=v(de,"DIR",{"data-svelte-h":!0}),ue(r)!=="svelte-r4cqvg"&&(r.innerHTML=n),f=M(de),i=v(de,"DIV",{});var Ee=b(i);h=v(Ee,"INPUT",{type:!0,name:!0,id:!0,class:!0}),Ee.forEach(_),de.forEach(_),c=M(G),B&&B.l(G),E=M(G);for(let oe=0;oe<I.length;oe+=1)I[oe].l(G);T=M(G),y=v(G,"DIV",{class:!0});var W=b(y);F=v(W,"UL",{class:!0,"aria-live":!0});var ne=b(F);for(let oe=0;oe<j.length;oe+=1)j[oe].l(ne);ne.forEach(_),P=M(W),k=v(W,"FIELDSET",{class:!0});var ie=b(k);C=v(ie,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ue(C)!=="svelte-15a47u9"&&(C.textContent=J),S=M(ie),R=v(ie,"BUTTON",{type:!0,class:!0});var le=b(R);ae.l(le),z=M(le),pe(U.$$.fragment,le),le.forEach(_),ie.forEach(_),W.forEach(_),G.forEach(_),g.forEach(_),N.forEach(_),this.h()},h(){u(h,"type","email"),u(h,"name","email"),u(h,"id","email"),h.value=m=l[1]!==null?l[1].email:"",u(h,"class","svelte-26svji"),u(s,"class","svelte-26svji"),u(F,"class","error svelte-26svji"),u(F,"aria-live","assertive"),u(C,"type","button"),u(C,"class","button"),u(R,"type","submit"),u(R,"class","button"),u(k,"class","actions svelte-26svji"),u(y,"class","footer svelte-26svji"),u(t,"class","svelte-26svji"),u(a,"class","content content-context svelte-26svji"),u(e,"class","svelte-26svji")},m(d,N){ee(d,e,N),o(e,a),o(a,t),o(t,s),o(s,r),o(s,f),o(s,i),o(i,h),o(t,c),B&&B.m(t,null),o(t,E);for(let g=0;g<I.length;g+=1)I[g]&&I[g].m(t,null);o(t,T),o(t,y),o(y,F);for(let g=0;g<j.length;g+=1)j[g]&&j[g].m(F,null);o(y,P),o(y,k),o(k,C),o(k,S),o(k,R),ae.m(R,null),o(R,z),ve(U,R,null),l[10](t),l[11](e),V=!0,K||(q=[_e(C,"click",l[9]),_e(t,"submit",kt(l[8]))],K=!0)},p(d,[N]){if((!V||N&2&&m!==(m=d[1]!==null?d[1].email:"")&&h.value!==m)&&(h.value=m),d[1]===null?B||(B=ft(),B.c(),B.m(t,E)):B&&(B.d(1),B=null),N&35){Y=Se(d[0]);let g;for(g=0;g<Y.length;g+=1){const G=ut(d,Y,g);I[g]?(I[g].p(G,N),O(I[g],1)):(I[g]=dt(G),I[g].c(),O(I[g],1),I[g].m(t,T))}for(ye(),g=Y.length;g<I.length;g+=1)w(g);Ce()}if(N&16){L=Se(d[4]);let g;for(g=0;g<L.length;g+=1){const G=ot(d,L,g);j[g]?j[g].p(G,N):(j[g]=_t(G),j[g].c(),j[g].m(F,null))}for(;g<j.length;g+=1)j[g].d(1);j.length=L.length}ge!==(ge=se(d))&&(ae.d(1),ae=ge(d),ae&&(ae.c(),ae.m(R,z)))},i(d){if(!V){for(let N=0;N<Y.length;N+=1)O(I[N]);O(U.$$.fragment,d),d&&et(()=>{V&&($||($=qe(e,l[7],{},!0)),$.run(1))}),V=!0}},o(d){I=I.filter(Boolean);for(let N=0;N<I.length;N+=1)H(I[N]);H(U.$$.fragment,d),d&&($||($=qe(e,l[7],{},!1)),$.run(0)),V=!1},d(d){d&&_(e),B&&B.d(),Xe(I,d),Xe(j,d),ae.d(),he(U),l[10](null),l[11](null),d&&$&&$.end(),K=!1,Je(q)}}}let mt=!1;function ll(l,e,a){let t;Qe(l,re,P=>a(6,t=P));let s,r,n=[],f={},{userProperties:i}=e,{userToEdit:h}=e;const m=xe(),c=function(P,{delay:k=0,duration:C=150}){return{delay:k,duration:C,css:J=>{const S=Tt(J);return`opacity: ${S}; transform: scale(${S});`}}};Pt(()=>{setTimeout(()=>{s.showModal()},10)}),document.addEventListener("keydown",P=>{P.key==="Escape"&&(P.preventDefault(),we(re,t.user=void 0,t))},{once:!0});const E=async P=>{P.preventDefault();const k=new FormData(r);a(5,f={});for(const C of k.entries())if(C[0].endsWith("[type]")&&(C[1]==="json"||C[1]==="array")){const J=C[0].replace("[type]",""),S=k.get(J+"[value]");S!==""&&!Ft(S)&&a(5,f[J]={property:J,message:`Not a valid ${C[1]}`},f)}if(Object.keys(f).length)await tick(),document.querySelector('[role="alert"]:not(:empty)').scrollIntoView({behavior:"smooth",block:"center"});else if(h===null){const C=k.get("email"),J=k.get("password");k.delete("email"),k.delete("password");const S=await Ae.create(C,J,k);S.errors?a(4,n=S.errors):(we(re,t.user=void 0,t),re.notification.create("success",`User ${S.user.id} created`),m("success"))}else{const C=k.get("email");k.delete("email");const J=await Ae.edit(h.id,C,k);J.errors?a(4,n=J.errors):(we(re,t.user=void 0,t),re.notification.create("success",`User ${J.user_update.id} edited`),m("success"))}},T=()=>we(re,t.user=void 0,t);function y(P){Ue[P?"unshift":"push"](()=>{r=P,a(3,r)})}function F(P){Ue[P?"unshift":"push"](()=>{s=P,a(2,s)})}return l.$$set=P=>{"userProperties"in P&&a(0,i=P.userProperties),"userToEdit"in P&&a(1,h=P.userToEdit)},[i,h,s,r,n,f,t,c,E,T,y,F]}class sl extends ze{constructor(e){super(),Ke(this,e,ll,tl,He,{userProperties:0,userToEdit:1})}}const{document:We}=Ut;function pt(l,e,a){const t=l.slice();return t[28]=e[a],t}function vt(l){let e,a,t="Clear filters",s,r,n,f,i,h;return r=new je({props:{icon:"x",size:"14"}}),{c(){e=p("button"),a=p("span"),a.textContent=t,s=A(),me(r.$$.fragment),this.h()},l(m){e=v(m,"BUTTON",{type:!0,class:!0});var c=b(e);a=v(c,"SPAN",{class:!0,"data-svelte-h":!0}),ue(a)!=="svelte-ki22n5"&&(a.textContent=t),s=M(c),pe(r.$$.fragment,c),c.forEach(_),this.h()},h(){u(a,"class","label svelte-1g093it"),u(e,"type","button"),u(e,"class","clear svelte-1g093it")},m(m,c){ee(m,e,c),o(e,a),o(e,s),ve(r,e,null),f=!0,i||(h=_e(e,"click",l[10]),i=!0)},p:Ze,i(m){f||(O(r.$$.fragment,m),m&&et(()=>{f&&(n||(n=qe(e,l[8],{},!0)),n.run(1))}),f=!0)},o(m){H(r.$$.fragment,m),m&&(n||(n=qe(e,l[8],{},!1)),n.run(0)),f=!1},d(m){m&&_(e),he(r),m&&n&&n.end(),i=!1,h()}}}function ht(l){let e,a,t=Se(l[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=bt(pt(l,t,n));const r=n=>H(s[n],1,1,()=>{s[n]=null});return{c(){e=p("tbody");for(let n=0;n<s.length;n+=1)s[n].c()},l(n){e=v(n,"TBODY",{});var f=b(e);for(let i=0;i<s.length;i+=1)s[i].l(f);f.forEach(_)},m(n,f){ee(n,e,f);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);a=!0},p(n,f){if(f&690){t=Se(n[1]);let i;for(i=0;i<t.length;i+=1){const h=pt(n,t,i);s[i]?(s[i].p(h,f),O(s[i],1)):(s[i]=bt(h),s[i].c(),O(s[i],1),s[i].m(e,null))}for(ye(),i=t.length;i<s.length;i+=1)r(i);Ce()}},i(n){if(!a){for(let f=0;f<t.length;f+=1)O(s[f]);a=!0}},o(n){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)H(s[f]);a=!1},d(n){n&&_(e),Xe(s,n)}}}function gt(l){let e,a;return e=new Yt({props:{record:l[28]}}),e.$on("reload",l[21]),e.$on("close",l[22]),{c(){me(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ve(e,t,s),a=!0},p(t,s){const r={};s&2&&(r.record=t[28]),e.$set(r)},i(t){a||(O(e.$$.fragment,t),a=!0)},o(t){H(e.$$.fragment,t),a=!1},d(t){he(e,t)}}}function bt(l){let e,a,t,s,r,n,f,i,h="More options",m,c,E,T,y,F="Edit user",P,k,C,J,S,R,z=l[28].id+"",U,$,V,K,q,B=l[28].email+"",Y,I,w,L,j,se;c=new je({props:{icon:"navigationMenuVertical",size:"16"}});function ge(){return l[19](l[28])}k=new je({props:{icon:"pencil",size:"16"}});function ae(){return l[20](l[28])}let d=l[4].id===l[28].id&&gt(l);return{c(){e=p("tr"),a=p("td"),t=p("span"),s=p("div"),r=p("div"),n=p("div"),f=p("button"),i=p("span"),i.textContent=h,m=A(),me(c.$$.fragment),E=A(),T=p("button"),y=p("span"),y.textContent=F,P=A(),me(k.$$.fragment),C=A(),d&&d.c(),J=A(),S=p("td"),R=p("a"),U=fe(z),V=A(),K=p("td"),q=p("a"),Y=fe(B),w=A(),this.h()},l(N){e=v(N,"TR",{class:!0});var g=b(e);a=v(g,"TD",{class:!0});var G=b(a);t=v(G,"SPAN",{class:!0});var de=b(t);s=v(de,"DIV",{class:!0});var Ee=b(s);r=v(Ee,"DIV",{class:!0});var W=b(r);n=v(W,"DIV",{class:!0});var ne=b(n);f=v(ne,"BUTTON",{class:!0});var ie=b(f);i=v(ie,"SPAN",{class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-1agpmtc"&&(i.textContent=h),m=M(ie),pe(c.$$.fragment,ie),ie.forEach(_),E=M(ne),T=v(ne,"BUTTON",{class:!0,title:!0});var le=b(T);y=v(le,"SPAN",{class:!0,"data-svelte-h":!0}),ue(y)!=="svelte-1bbczt2"&&(y.textContent=F),P=M(le),pe(k.$$.fragment,le),le.forEach(_),ne.forEach(_),C=M(W),d&&d.l(W),W.forEach(_),Ee.forEach(_),de.forEach(_),G.forEach(_),J=M(g),S=v(g,"TD",{class:!0});var oe=b(S);R=v(oe,"A",{href:!0,class:!0});var Ne=b(R);U=ce(Ne,z),Ne.forEach(_),oe.forEach(_),V=M(g),K=v(g,"TD",{class:!0});var Pe=b(K);q=v(Pe,"A",{href:!0,class:!0});var $e=b(q);Y=ce($e,B),$e.forEach(_),Pe.forEach(_),w=M(g),g.forEach(_),this.h()},h(){u(i,"class","label"),u(f,"class","button compact more svelte-1g093it"),Oe(f,"active",l[4].id===l[28].id),u(y,"class","label"),u(T,"class","button compact edit"),u(T,"title","Edit user"),u(n,"class","combo"),u(r,"class","inner-menu svelte-1g093it"),u(s,"class","menu svelte-1g093it"),u(t,"class","svelte-1g093it"),u(a,"class","svelte-1g093it"),u(R,"href",$="/users/"+l[28].id+"?"+l[5].url.searchParams.toString()),u(R,"class","svelte-1g093it"),u(S,"class","table-id svelte-1g093it"),u(q,"href",I="/users/"+l[28].id+"?"+l[5].url.searchParams.toString()),u(q,"class","svelte-1g093it"),u(K,"class","svelte-1g093it"),u(e,"class","svelte-1g093it"),Oe(e,"active",l[5].params.id==l[28].id),Oe(e,"context",l[4].id===l[28].id)},m(N,g){ee(N,e,g),o(e,a),o(a,t),o(t,s),o(s,r),o(r,n),o(n,f),o(f,i),o(f,m),ve(c,f,null),o(n,E),o(n,T),o(T,y),o(T,P),ve(k,T,null),o(r,C),d&&d.m(r,null),o(e,J),o(e,S),o(S,R),o(R,U),o(e,V),o(e,K),o(K,q),o(q,Y),o(e,w),L=!0,j||(se=[_e(f,"click",ge),_e(T,"click",ae)],j=!0)},p(N,g){l=N,(!L||g&18)&&Oe(f,"active",l[4].id===l[28].id),l[4].id===l[28].id?d?(d.p(l,g),g&18&&O(d,1)):(d=gt(l),d.c(),O(d,1),d.m(r,null)):d&&(ye(),H(d,1,1,()=>{d=null}),Ce()),(!L||g&2)&&z!==(z=l[28].id+"")&&De(U,z),(!L||g&34&&$!==($="/users/"+l[28].id+"?"+l[5].url.searchParams.toString()))&&u(R,"href",$),(!L||g&2)&&B!==(B=l[28].email+"")&&De(Y,B),(!L||g&34&&I!==(I="/users/"+l[28].id+"?"+l[5].url.searchParams.toString()))&&u(q,"href",I),(!L||g&34)&&Oe(e,"active",l[5].params.id==l[28].id),(!L||g&18)&&Oe(e,"context",l[4].id===l[28].id)},i(N){L||(O(c.$$.fragment,N),O(k.$$.fragment,N),O(d),L=!0)},o(N){H(c.$$.fragment,N),H(k.$$.fragment,N),H(d),L=!1},d(N){N&&_(e),he(c),he(k),d&&d.d(),j=!1,Je(se)}}}function Et(l){let e;const a=l[13].default,t=Dt(a,l,l[12],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,r){t&&t.m(s,r),e=!0},p(s,r){t&&t.p&&(!e||r&4096)&&jt(t,a,s,s[12],e?Lt(a,s[12],r,null):Nt(s[12]),null)},i(s){e||(O(t,s),e=!0)},o(s){H(t,s),e=!1},d(s){t&&t.d(s)}}}function $t(l){let e,a;return e=new sl({props:{userProperties:l[2],userToEdit:l[6].user}}),e.$on("success",l[26]),{c(){me(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ve(e,t,s),a=!0},p(t,s){const r={};s&4&&(r.userProperties=t[2]),s&64&&(r.userToEdit=t[6].user),e.$set(r)},i(t){a||(O(e.$$.fragment,t),a=!0)},o(t){H(e.$$.fragment,t),a=!1},d(t){he(e,t)}}}function al(l){var st;let e,a,t,s,r,n,f,i="Filter by",h,m,c,E,T="email",y,F="id",P,k,C,J,S,R,z="Apply filter",U,$,V,K,q,B,Y='<tr class="svelte-1g093it"><th class="menu svelte-1g093it"></th> <th class="table-id svelte-1g093it">ID</th> <th class="svelte-1g093it">Email</th></tr>',I,w,L,j,se,ge="Page:",ae,d,N,g,G=l[3].totalPages+"",de,Ee,W,ne,ie,le,oe="Create a new user",Ne,Pe,$e,Ge,tt;We.title=e="Users"+((st=l[6].online)!=null&&st.MPKIT_URL?": "+l[6].online.MPKIT_URL.replace("https://",""):"");let X=l[3].value&&vt(l);$=new je({props:{icon:"arrowRight"}});let Q=l[1]&&ht(l);function yt(D){l[23](D)}let lt={form:"filters",name:"page",min:1,max:l[3].totalPages,step:1,decreaseLabel:"Previous page",increaseLabel:"Next page",style:"navigation"};l[3].page!==void 0&&(lt.value=l[3].page),d=new qt({props:lt}),Ue.push(()=>St(d,"value",yt)),d.$on("input",l[24]),ne=new je({props:{icon:"plus"}});let Z=l[5].params.id&&Et(l),x=l[6].user!==void 0&&$t(l);return{c(){a=A(),t=p("div"),s=p("section"),r=p("nav"),n=p("form"),f=p("label"),f.textContent=i,h=A(),m=p("fieldset"),c=p("select"),E=p("option"),E.textContent=T,y=p("option"),y.textContent=F,P=A(),k=p("input"),C=A(),X&&X.c(),J=A(),S=p("button"),R=p("span"),R.textContent=z,U=A(),me($.$$.fragment),V=A(),K=p("article"),q=p("table"),B=p("thead"),B.innerHTML=Y,I=A(),Q&&Q.c(),w=A(),L=p("nav"),j=p("div"),se=p("label"),se.textContent=ge,ae=A(),me(d.$$.fragment),g=fe(`\r
      of `),de=fe(G),Ee=A(),W=p("button"),me(ne.$$.fragment),ie=A(),le=p("span"),le.textContent=oe,Ne=A(),Z&&Z.c(),Pe=A(),x&&x.c(),this.h()},l(D){wt("svelte-mcmxo",We.head).forEach(_),a=M(D),t=v(D,"DIV",{class:!0});var be=b(t);s=v(be,"SECTION",{class:!0});var ke=b(s);r=v(ke,"NAV",{class:!0});var at=b(r);n=v(at,"FORM",{action:!0,id:!0,class:!0});var Me=b(n);f=v(Me,"LABEL",{for:!0,"data-svelte-h":!0}),ue(f)!=="svelte-rbwhex"&&(f.textContent=i),h=M(Me),m=v(Me,"FIELDSET",{class:!0});var Te=b(m);c=v(Te,"SELECT",{id:!0,name:!0,class:!0});var Ye=b(c);E=v(Ye,"OPTION",{"data-svelte-h":!0}),ue(E)!=="svelte-51kto6"&&(E.textContent=T),y=v(Ye,"OPTION",{"data-svelte-h":!0}),ue(y)!=="svelte-ns3pfu"&&(y.textContent=F),Ye.forEach(_),P=M(Te),k=v(Te,"INPUT",{type:!0,name:!0,class:!0}),C=M(Te),X&&X.l(Te),J=M(Te),S=v(Te,"BUTTON",{type:!0,class:!0});var Re=b(S);R=v(Re,"SPAN",{class:!0,"data-svelte-h":!0}),ue(R)!=="svelte-ctu7wl"&&(R.textContent=z),U=M(Re),pe($.$$.fragment,Re),Re.forEach(_),Te.forEach(_),Me.forEach(_),at.forEach(_),V=M(ke),K=v(ke,"ARTICLE",{class:!0});var nt=b(K);q=v(nt,"TABLE",{class:!0});var Be=b(q);B=v(Be,"THEAD",{class:!0,"data-svelte-h":!0}),ue(B)!=="svelte-17vx132"&&(B.innerHTML=Y),I=M(Be),Q&&Q.l(Be),Be.forEach(_),nt.forEach(_),w=M(ke),L=v(ke,"NAV",{class:!0});var Ve=b(L);j=v(Ve,"DIV",{});var Le=b(j);se=v(Le,"LABEL",{for:!0,"data-svelte-h":!0}),ue(se)!=="svelte-1r8oyu6"&&(se.textContent=ge),ae=M(Le),pe(d.$$.fragment,Le),g=ce(Le,`\r
      of `),de=ce(Le,G),Le.forEach(_),Ee=M(Ve),W=v(Ve,"BUTTON",{class:!0,title:!0});var Fe=b(W);pe(ne.$$.fragment,Fe),ie=M(Fe),le=v(Fe,"SPAN",{class:!0,"data-svelte-h":!0}),ue(le)!=="svelte-vjukmr"&&(le.textContent=oe),Fe.forEach(_),Ve.forEach(_),ke.forEach(_),Ne=M(be),Z&&Z.l(be),Pe=M(be),x&&x.l(be),be.forEach(_),this.h()},h(){u(f,"for","filters_attribute"),E.__value="email",Ie(E,E.__value),y.__value="id",Ie(y,y.__value),u(c,"id","filters_attribute"),u(c,"name","attribute"),u(c,"class","svelte-1g093it"),l[3].attribute===void 0&&et(()=>l[14].call(c)),u(k,"type","text"),u(k,"name","value"),u(k,"class","svelte-1g093it"),u(R,"class","label svelte-1g093it"),u(S,"type","submit"),u(S,"class","button svelte-1g093it"),u(m,"class","search svelte-1g093it"),u(n,"action",""),u(n,"id","filters"),u(n,"class","svelte-1g093it"),u(r,"class","filters svelte-1g093it"),u(B,"class","svelte-1g093it"),u(q,"class","svelte-1g093it"),u(K,"class","contetnt"),u(se,"for","page"),u(le,"class","label"),u(W,"class","button"),u(W,"title","Create user"),u(L,"class","pagination svelte-1g093it"),u(s,"class","container svelte-1g093it"),u(t,"class","page svelte-1g093it")},m(D,te){ee(D,a,te),ee(D,t,te),o(t,s),o(s,r),o(r,n),o(n,f),o(n,h),o(n,m),o(m,c),o(c,E),o(c,y),rt(c,l[3].attribute,!0),o(m,P),o(m,k),Ie(k,l[3].value),o(m,C),X&&X.m(m,null),o(m,J),o(m,S),o(S,R),o(S,U),ve($,S,null),l[17](n),o(s,V),o(s,K),o(K,q),o(q,B),o(q,I),Q&&Q.m(q,null),o(s,w),o(s,L),o(L,j),o(j,se),o(j,ae),ve(d,j,null),o(j,g),o(j,de),o(L,Ee),o(L,W),ve(ne,W,null),o(W,ie),o(W,le),o(t,Ne),Z&&Z.m(t,null),o(t,Pe),x&&x.m(t,null),$e=!0,Ge||(tt=[_e(c,"change",l[14]),_e(c,"change",l[15]),_e(k,"input",l[16]),_e(n,"submit",l[18]),_e(W,"click",kt(l[25]))],Ge=!0)},p(D,[te]){var ke;(!$e||te&64)&&e!==(e="Users"+((ke=D[6].online)!=null&&ke.MPKIT_URL?": "+D[6].online.MPKIT_URL.replace("https://",""):""))&&(We.title=e),te&8&&rt(c,D[3].attribute),te&8&&k.value!==D[3].value&&Ie(k,D[3].value),D[3].value?X?(X.p(D,te),te&8&&O(X,1)):(X=vt(D),X.c(),O(X,1),X.m(m,J)):X&&(ye(),H(X,1,1,()=>{X=null}),Ce()),D[1]?Q?(Q.p(D,te),te&2&&O(Q,1)):(Q=ht(D),Q.c(),O(Q,1),Q.m(q,null)):Q&&(ye(),H(Q,1,1,()=>{Q=null}),Ce());const be={};te&8&&(be.max=D[3].totalPages),!N&&te&8&&(N=!0,be.value=D[3].page,It(()=>N=!1)),d.$set(be),(!$e||te&8)&&G!==(G=D[3].totalPages+"")&&De(de,G),D[5].params.id?Z?(Z.p(D,te),te&32&&O(Z,1)):(Z=Et(D),Z.c(),O(Z,1),Z.m(t,Pe)):Z&&(ye(),H(Z,1,1,()=>{Z=null}),Ce()),D[6].user!==void 0?x?(x.p(D,te),te&64&&O(x,1)):(x=$t(D),x.c(),O(x,1),x.m(t,null)):x&&(ye(),H(x,1,1,()=>{x=null}),Ce())},i(D){$e||(O(X),O($.$$.fragment,D),O(Q),O(d.$$.fragment,D),O(ne.$$.fragment,D),O(Z),O(x),$e=!0)},o(D){H(X),H($.$$.fragment,D),H(Q),H(d.$$.fragment,D),H(ne.$$.fragment,D),H(Z),H(x),$e=!1},d(D){D&&(_(a),_(t)),X&&X.d(),he($),l[17](null),Q&&Q.d(),he(d),he(ne),Z&&Z.d(),x&&x.d(),Ge=!1,Je(tt)}}}function nl(l,e,a){let t,s;Qe(l,Mt,w=>a(5,t=w)),Qe(l,re,w=>a(6,s=w));let{$$slots:r={},$$scope:n}=e,f,i=[],h=null,m={page:1,attribute:"email",value:""},c={page:1,totalPages:1,attribute:"email",value:"",...Object.fromEntries(t.url.searchParams)};we(re,s.user=void 0,s);let E={id:null};const T=function(){const w=Object.fromEntries(t.url.searchParams);Ae.get(w).then(L=>{a(1,i=L.results),a(3,c.totalPages=L.total_pages,c)})},y=function(w,{delay:L=0,duration:j=150}){return{delay:L,duration:j,css:se=>`scale: ${Tt(se)};`}},F=function(w=null){h===null?Ae.getCustomProperties().then(L=>{a(2,h=L),we(re,s.user=w,s)}).catch(()=>{re.notification.create("error","Could not load table properties. Please try again later.")}):we(re,s.user=w,s)},P=async function(){a(3,c=structuredClone(m)),await it(),f.requestSubmit()},k=async function(w){w.preventDefault();const L=t.url.searchParams,j=new URLSearchParams(new FormData(w.target));L.get("value")!==j.get("value")&&(j.set("page",1),a(3,c.page=1,c)),await At(document.location.pathname+"?"+j.toString()),await it(),await T()};function C(){c.attribute=Ot(this),a(3,c)}const J=()=>a(3,c.value="",c);function S(){c.value=this.value,a(3,c)}function R(w){Ue[w?"unshift":"push"](()=>{f=w,a(0,f)})}const z=w=>k(w),U=w=>a(4,E.id=w.id,E),$=w=>{F(w)},V=()=>T(),K=()=>a(4,E.id=null,E);function q(w){l.$$.not_equal(c.page,w)&&(c.page=w,a(3,c))}const B=w=>{f.requestSubmit(w.detail.submitter)},Y=()=>F(),I=()=>T();return l.$$set=w=>{"$$scope"in w&&a(12,n=w.$$scope)},T(),[f,i,h,c,E,t,s,T,y,F,P,k,n,r,C,J,S,R,z,U,$,V,K,q,B,Y,I]}class El extends ze{constructor(e){super(),Ke(this,e,nl,al,He,{})}}export{El as component};
