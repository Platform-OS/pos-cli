import{s as Et,k as gt,v as Dt,i as $t,f as i,e as d,t as f,c as _,b as h,z as k,d as m,y as K,E as tt,h as a,j as v,C as qt}from"../chunks/scheduler.CatAnzbk.js";import{S as Tt,i as St,c as zt,b as jt,m as Ft,t as Lt,a as It,e as Pt}from"../chunks/index.N6gnbVk9.js";import{p as Rt}from"../chunks/stores.f4jqCXuP.js";import{n as At}from"../chunks/network.cqR_alpd.js";import{s as at}from"../chunks/state.5gKcL4gY.js";import{A as Ut}from"../chunks/Aside.Lf2QZhoZ.js";function bt(n){let t,o,e="Time",r,u=new Date(n[1].network._timestamp/1e3).toLocaleString()+"",p,w,D="Request path",g,C,L=n[1].network.http_request_path+"",M,O,q,rt="Request method",I,P=n[1].network.http_request_method+"",Q,b,lt="Request protocol",R,A=n[1].network.http_request_protocol+"",V,$,dt="Status",c,U=n[1].network.lb_status_code+"",W,E,_t="Client IP",y,N=n[1].network.client+"",X,T,it="Client user agent",B,G=n[1].network.user_agent+"",Y,S,ut="Execution duration",z,H=parseFloat(n[1].network.request_processing_time)+parseFloat(n[1].network.target_processing_time)+"",Z,et,j,pt="Response size",F,J=parseInt(n[1].network.sent_bytes)+"",x,st;return{c(){t=d("dl"),o=d("dt"),o.textContent=e,r=d("dd"),p=f(u),w=d("dt"),w.textContent=D,g=d("dd"),C=d("a"),M=f(L),q=d("dt"),q.textContent=rt,I=d("dd"),Q=f(P),b=d("dt"),b.textContent=lt,R=d("dd"),V=f(A),$=d("dt"),$.textContent=dt,c=d("dd"),W=f(U),E=d("dt"),E.textContent=_t,y=d("dd"),X=f(N),T=d("dt"),T.textContent=it,B=d("dd"),Y=f(G),S=d("dt"),S.textContent=ut,z=d("dd"),Z=f(H),et=f("s"),j=d("dt"),j.textContent=pt,F=d("dd"),x=f(J),st=f(" bytes"),this.h()},l(l){t=_(l,"DL",{class:!0});var s=h(t);o=_(s,"DT",{"data-svelte-h":!0}),k(o)!=="svelte-k4tc9n"&&(o.textContent=e),r=_(s,"DD",{});var ft=h(r);p=m(ft,u),ft.forEach(i),w=_(s,"DT",{"data-svelte-h":!0}),k(w)!=="svelte-1j5pznm"&&(w.textContent=D),g=_(s,"DD",{});var ht=h(g);C=_(ht,"A",{href:!0,class:!0});var mt=h(C);M=m(mt,L),mt.forEach(i),ht.forEach(i),q=_(s,"DT",{"data-svelte-h":!0}),k(q)!=="svelte-1wn7isk"&&(q.textContent=rt),I=_(s,"DD",{});var ct=h(I);Q=m(ct,P),ct.forEach(i),b=_(s,"DT",{"data-svelte-h":!0}),k(b)!=="svelte-jgi2gh"&&(b.textContent=lt),R=_(s,"DD",{});var wt=h(R);V=m(wt,A),wt.forEach(i),$=_(s,"DT",{"data-svelte-h":!0}),k($)!=="svelte-1e9eis"&&($.textContent=dt),c=_(s,"DD",{class:!0});var kt=h(c);W=m(kt,U),kt.forEach(i),E=_(s,"DT",{"data-svelte-h":!0}),k(E)!=="svelte-1rrvc96"&&(E.textContent=_t),y=_(s,"DD",{});var vt=h(y);X=m(vt,N),vt.forEach(i),T=_(s,"DT",{"data-svelte-h":!0}),k(T)!=="svelte-on2p8j"&&(T.textContent=it),B=_(s,"DD",{});var Ct=h(B);Y=m(Ct,G),Ct.forEach(i),S=_(s,"DT",{"data-svelte-h":!0}),k(S)!=="svelte-1abn46o"&&(S.textContent=ut),z=_(s,"DD",{});var ot=h(z);Z=m(ot,H),et=m(ot,"s"),ot.forEach(i),j=_(s,"DT",{"data-svelte-h":!0}),k(j)!=="svelte-jqr426"&&(j.textContent=pt),F=_(s,"DD",{});var nt=h(F);x=m(nt,J),st=m(nt," bytes"),nt.forEach(i),s.forEach(i),this.h()},h(){K(C,"href",O=n[1].network.http_request_url),K(C,"class","svelte-wyyz12"),K(c,"class","svelte-wyyz12"),tt(c,"success",n[1].network.lb_status_code>=200&&n[1].network.lb_status_code<300),tt(c,"error",n[1].network.http_request_protocol.lb_status_code>=400&&n[1].network.http_request_protocol.lb_status_code<600),K(t,"class","definitions")},m(l,s){$t(l,t,s),a(t,o),a(t,r),a(r,p),a(t,w),a(t,g),a(g,C),a(C,M),a(t,q),a(t,I),a(I,Q),a(t,b),a(t,R),a(R,V),a(t,$),a(t,c),a(c,W),a(t,E),a(t,y),a(y,X),a(t,T),a(t,B),a(B,Y),a(t,S),a(t,z),a(z,Z),a(z,et),a(t,j),a(t,F),a(F,x),a(F,st)},p(l,s){s&2&&u!==(u=new Date(l[1].network._timestamp/1e3).toLocaleString()+"")&&v(p,u),s&2&&L!==(L=l[1].network.http_request_path+"")&&v(M,L),s&2&&O!==(O=l[1].network.http_request_url)&&K(C,"href",O),s&2&&P!==(P=l[1].network.http_request_method+"")&&v(Q,P),s&2&&A!==(A=l[1].network.http_request_protocol+"")&&v(V,A),s&2&&U!==(U=l[1].network.lb_status_code+"")&&v(W,U),s&2&&tt(c,"success",l[1].network.lb_status_code>=200&&l[1].network.lb_status_code<300),s&2&&tt(c,"error",l[1].network.http_request_protocol.lb_status_code>=400&&l[1].network.http_request_protocol.lb_status_code<600),s&2&&N!==(N=l[1].network.client+"")&&v(X,N),s&2&&G!==(G=l[1].network.user_agent+"")&&v(Y,G),s&2&&H!==(H=parseFloat(l[1].network.request_processing_time)+parseFloat(l[1].network.target_processing_time)+"")&&v(Z,H),s&2&&J!==(J=parseInt(l[1].network.sent_bytes)+"")&&v(x,J)},d(l){l&&i(t)}}}function yt(n){let t,o=n[1].network._timestamp&&bt(n);return{c(){o&&o.c(),t=Dt()},l(e){o&&o.l(e),t=Dt()},m(e,r){o&&o.m(e,r),$t(e,t,r)},p(e,r){e[1].network._timestamp?o?o.p(e,r):(o=bt(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){e&&i(t),o&&o.d(e)}}}function Nt(n){let t,o;return t=new Ut({props:{title:n[1].network.lb_status_code?`<span class="log-detail-method">${n[1].network.http_request_method}</span> ${n[1].network.http_request_path}`:"Loading…",closeUrl:"/network?"+n[0].url.searchParams.toString(),$$slots:{default:[yt]},$$scope:{ctx:n}}}),{c(){zt(t.$$.fragment)},l(e){jt(t.$$.fragment,e)},m(e,r){Ft(t,e,r),o=!0},p(e,[r]){const u={};r&2&&(u.title=e[1].network.lb_status_code?`<span class="log-detail-method">${e[1].network.http_request_method}</span> ${e[1].network.http_request_path}`:"Loading…"),r&1&&(u.closeUrl="/network?"+e[0].url.searchParams.toString()),r&10&&(u.$$scope={dirty:r,ctx:e}),t.$set(u)},i(e){o||(Lt(t.$$.fragment,e),o=!0)},o(e){It(t.$$.fragment,e),o=!1},d(e){Pt(t,e)}}}function Bt(n,t,o){let e,r;gt(n,Rt,p=>o(0,e=p)),gt(n,at,p=>o(1,r=p));const u=async()=>{var w;const p=(w=r.networks.hits)==null?void 0:w.find(D=>D._timestamp==e.params.id);if(p)qt(at,r.network=p,r);else{const D={size:1,sql:`select * from requests where _timestamp = ${e.params.id}`};await At.get(D).then(g=>{qt(at,r.network=g.hits[0],r)})}};return n.$$.update=()=>{n.$$.dirty&1&&e.params.id&&u()},[e,r]}class Qt extends Tt{constructor(t){super(),St(this,t,Bt,Nt,Et,{})}}export{Qt as component};
