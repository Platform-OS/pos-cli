import{s as Ye,a as C,f as p,J as Ze,d as _,c as I,g,h as w,r as se,j as c,i as U,v as u,K as ye,x as te,y as Ke,w as xe,o as et,A as me,X as tt,b as lt,z as pe,N as He,l as H,m as X,u as ae,R as st,n as Q,B as nt,t as at,p as ot,e as Te}from"../chunks/scheduler.sKKhyktU.js";import{S as rt,i as it,b as ie,d as fe,m as ue,a as L,t as P,c as oe,e as ce,g as re,j as ft}from"../chunks/index.LYVpS7Hw.js";import{g as ut}from"../chunks/globals.0cDDIVm6.js";import{e as Ee}from"../chunks/each.3GYeTQvW.js";import{f as ct}from"../chunks/index.jubkZZMc.js";import{s as he}from"../chunks/state.u3CNLQkb.js";import{t as Xe}from"../chunks/tryParseJSON.KtkvGy73.js";import{J as Ge}from"../chunks/JSONTree.k3p57Rl8.js";import{I as ge}from"../chunks/Icon.rkznIECp.js";import{A as dt}from"../chunks/Aside.Na6AmxZs.js";const _t={get:async n=>{const t=typeof window<"u"&&window.location.port!=="4173"&&window.location.port!=="5173"?`http://localhost:${parseInt(window.location.port)}/api/logs`:"http://localhost:3333/api/logs",a=n.last??null;return fetch(`${t}?lastId=`+a).then(e=>e.ok?e.json():Promise.reject(e)).then(e=>(e.logs.forEach(l=>{l.downloaded_at=Date.now()}),e)).catch(e=>({error:e}))}},{document:Le}=ut;function Ne(n,t,a){const e=n.slice();e[23]=t[a],e[25]=t,e[26]=a;const l=e[23].message.length<262144&&Xe(e[23].message);return e[24]=l,e}function Pe(n,t,a){const e=n.slice();e[23]=t[a],e[27]=t,e[28]=a;const l=e[23].message.length<262144&&Xe(e[23].message);return e[24]=l,e}function Ue(n){let t,a,e="Clear filter",l,o,s,r,i;return o=new ge({props:{icon:"x",size:"12"}}),{c(){t=p("button"),a=p("span"),a.textContent=e,l=C(),ie(o.$$.fragment),this.h()},l(f){t=g(f,"BUTTON",{class:!0});var h=w(t);a=g(h,"SPAN",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-1bu6mgu"&&(a.textContent=e),l=I(h),fe(o.$$.fragment,h),h.forEach(_),this.h()},h(){c(a,"class","label svelte-8fkf35"),c(t,"class","clearFilter svelte-8fkf35")},m(f,h){U(f,t,h),u(t,a),u(t,l),ue(o,t,null),s=!0,r||(i=te(t,"click",n[9]),r=!0)},p:pe,i(f){s||(L(o.$$.fragment,f),s=!0)},o(f){P(o.$$.fragment,f),s=!1},d(f){f&&_(t),ce(o),r=!1,i()}}}function Oe(n){let t,a,e=Ee(n[4].logs.logs),l=[];for(let s=0;s<e.length;s+=1)l[s]=Me(Pe(n,e,s));const o=s=>P(l[s],1,1,()=>{l[s]=null});return{c(){t=p("table");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=g(s,"TABLE",{class:!0});var r=w(t);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(_),this.h()},h(){c(t,"class","svelte-8fkf35")},m(s,r){U(s,t,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,null);a=!0},p(s,r){if(r&118){e=Ee(s[4].logs.logs);let i;for(i=0;i<e.length;i+=1){const f=Pe(s,e,i);l[i]?(l[i].p(f,r),L(l[i],1)):(l[i]=Me(f),l[i].c(),L(l[i],1),l[i].m(t,null))}for(re(),i=e.length;i<l.length;i+=1)o(i);oe()}},i(s){if(!a){for(let r=0;r<e.length;r+=1)L(l[r]);a=!0}},o(s){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)P(l[r]);a=!1},d(s){s&&_(t),He(l,s)}}}function ht(n){let t;function a(o,s){return o[23].showFull?gt:pt}let e=a(n),l=e(n);return{c(){t=p("div"),l.c(),this.h()},l(o){t=g(o,"DIV",{class:!0});var s=w(t);l.l(s),s.forEach(_),this.h()},h(){c(t,"class","pre svelte-8fkf35")},m(o,s){U(o,t,s),l.m(t,null)},p(o,s){e===(e=a(o))&&l?l.p(o,s):(l.d(1),l=e(o),l&&(l.c(),l.m(t,null)))},i:pe,o:pe,d(o){o&&_(t),l.d()}}}function mt(n){let t,a;return t=new Ge({props:{value:n[24],showFullLines:!0}}),{c(){ie(t.$$.fragment)},l(e){fe(t.$$.fragment,e)},m(e,l){ue(t,e,l),a=!0},p(e,l){const o={};l&16&&(o.value=e[24]),t.$set(o)},i(e){a||(L(t.$$.fragment,e),a=!0)},o(e){P(t.$$.fragment,e),a=!1},d(e){ce(t,e)}}}function pt(n){let t=n[23].message.substr(0,x)+"",a,e,l,o=n[23].message.length>x&&Be(n);return{c(){a=H(t),e=C(),o&&o.c(),l=Te()},l(s){a=X(s,t),e=I(s),o&&o.l(s),l=Te()},m(s,r){U(s,a,r),U(s,e,r),o&&o.m(s,r),U(s,l,r)},p(s,r){r&16&&t!==(t=s[23].message.substr(0,x)+"")&&Q(a,t),s[23].message.length>x?o?o.p(s,r):(o=Be(s),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},d(s){s&&(_(a),_(e),_(l)),o&&o.d(s)}}}function gt(n){let t=n[23].message+"",a;return{c(){a=H(t)},l(e){a=X(e,t)},m(e,l){U(e,a,l)},p(e,l){l&16&&t!==(t=e[23].message+"")&&Q(a,t)},d(e){e&&_(a)}}}function Be(n){let t,a,e=n[23].message.length-x+"",l,o,s,r;function i(){return n[11](n[23],n[27],n[28])}return{c(){t=p("div"),a=p("button"),l=H(e),o=H(" more characters"),this.h()},l(f){t=g(f,"DIV",{class:!0});var h=w(t);a=g(h,"BUTTON",{type:!0,class:!0});var k=w(a);l=X(k,e),o=X(k," more characters"),k.forEach(_),h.forEach(_),this.h()},h(){c(a,"type","button"),c(a,"class","svelte-8fkf35"),c(t,"class","longStringInfo svelte-8fkf35")},m(f,h){U(f,t,h),u(t,a),u(a,l),u(a,o),s||(r=te(a,"click",i),s=!0)},p(f,h){n=f,h&16&&e!==(e=n[23].message.length-x+"")&&Q(l,e)},d(f){f&&_(t),s=!1,r()}}}function Ae(n){let t,a,e,l=n[23].data.url+"",o,s,r=n[23].data.user&&Ve(n);return{c(){t=p("ul"),a=p("li"),e=H("Page: "),o=H(l),s=C(),r&&r.c(),this.h()},l(i){t=g(i,"UL",{class:!0});var f=w(t);a=g(f,"LI",{});var h=w(a);e=X(h,"Page: "),o=X(h,l),h.forEach(_),s=I(f),r&&r.l(f),f.forEach(_),this.h()},h(){c(t,"class","info svelte-8fkf35")},m(i,f){U(i,t,f),u(t,a),u(a,e),u(a,o),u(t,s),r&&r.m(t,null)},p(i,f){f&16&&l!==(l=i[23].data.url+"")&&Q(o,l),i[23].data.user?r?r.p(i,f):(r=Ve(i),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(i){i&&_(t),r&&r.d()}}}function Ve(n){let t,a,e,l=n[23].data.user.id+"",o,s;return{c(){t=p("li"),a=H("User ID: "),e=p("a"),o=H(l),this.h()},l(r){t=g(r,"LI",{});var i=w(t);a=X(i,"User ID: "),e=g(i,"A",{href:!0,class:!0});var f=w(e);o=X(f,l),f.forEach(_),i.forEach(_),this.h()},h(){c(e,"href",s="/users/"+n[23].data.user.id),c(e,"class","svelte-8fkf35")},m(r,i){U(r,t,i),u(t,a),u(t,e),u(e,o)},p(r,i){i&16&&l!==(l=r[23].data.user.id+"")&&Q(o,l),i&16&&s!==(s="/users/"+r[23].data.user.id)&&c(e,"href",s)},d(r){r&&_(t)}}}function Me(n){let t,a,e,l=new Date(n[23].created_at).toLocaleDateString(void 0,{})+"",o,s,r=new Date(n[23].created_at).toLocaleTimeString(void 0,{})+"",i,f,h,k,B=n[23].error_type+"",q,J,O,A,T,V,F,D,M,y,K,ee="Copy message",W,d,S,m,E,$="Pin this log",b,v,R,Y,j,ne,le;const de=[mt,ht],Z=[];function Ce(z,N){return z[24]?0:1}A=Ce(n),T=Z[A]=de[A](n);let G=n[23].data?.url&&Ae(n);d=new ge({props:{icon:"copy"}});function Qe(...z){return n[12](n[23],...z)}v=new ge({props:{icon:"pin"}});function We(){return n[13](n[23])}function Ie(...z){return n[14](n[23],...z)}return{c(){t=p("tr"),a=p("td"),e=p("time"),o=H(l),s=C(),i=H(r),h=C(),k=p("td"),q=H(B),J=C(),O=p("td"),T.c(),V=C(),G&&G.c(),F=C(),D=p("td"),M=p("div"),y=p("button"),K=p("span"),K.textContent=ee,W=C(),ie(d.$$.fragment),S=C(),m=p("button"),E=p("span"),E.textContent=$,b=C(),ie(v.$$.fragment),R=C(),this.h()},l(z){t=g(z,"TR",{class:!0});var N=w(t);a=g(N,"TD",{class:!0});var _e=w(a);e=g(_e,"TIME",{datetime:!0,class:!0});var ve=w(e);o=X(ve,l),s=I(ve),i=X(ve,r),ve.forEach(_),_e.forEach(_),h=I(N),k=g(N,"TD",{class:!0});var Se=w(k);q=X(Se,B),Se.forEach(_),J=I(N),O=g(N,"TD",{class:!0});var be=w(O);T.l(be),V=I(be),G&&G.l(be),be.forEach(_),F=I(N),D=g(N,"TD",{class:!0});var De=w(D);M=g(De,"DIV",{class:!0});var ke=w(M);y=g(ke,"BUTTON",{type:!0,class:!0,title:!0});var we=w(y);K=g(we,"SPAN",{class:!0,"data-svelte-h":!0}),se(K)!=="svelte-1qjln59"&&(K.textContent=ee),W=I(we),fe(d.$$.fragment,we),we.forEach(_),S=I(ke),m=g(ke,"BUTTON",{type:!0,class:!0,title:!0});var $e=w(m);E=g($e,"SPAN",{class:!0,"data-svelte-h":!0}),se(E)!=="svelte-yzd8i4"&&(E.textContent=$),b=I($e),fe(v.$$.fragment,$e),$e.forEach(_),ke.forEach(_),De.forEach(_),R=I(N),N.forEach(_),this.h()},h(){c(e,"datetime",f=n[23].created_at),c(e,"class","svelte-8fkf35"),c(a,"class","date svelte-8fkf35"),c(k,"class","logType svelte-8fkf35"),c(O,"class","message svelte-8fkf35"),c(K,"class","label"),c(y,"type","button"),c(y,"class","button svelte-8fkf35"),c(y,"title","Copy message"),c(E,"class","label"),c(m,"type","button"),c(m,"class","button svelte-8fkf35"),c(m,"title","Pin this log"),ae(m,"active",n[2].find(Ie)),c(M,"class","svelte-8fkf35"),c(D,"class","actions svelte-8fkf35"),c(t,"class","svelte-8fkf35"),ae(t,"hidden",n[1]&&n[5](n[23])||n[23].hidden),ae(t,"error",n[23].error_type.match(/error/i)),ae(t,"fresh",n[23].downloaded_at>n[4].logs.downloaded_at[0])},m(z,N){U(z,t,N),u(t,a),u(a,e),u(e,o),u(e,s),u(e,i),u(t,h),u(t,k),u(k,q),u(t,J),u(t,O),Z[A].m(O,null),u(O,V),G&&G.m(O,null),u(t,F),u(t,D),u(D,M),u(M,y),u(y,K),u(y,W),ue(d,y,null),u(M,S),u(M,m),u(m,E),u(m,b),ue(v,m,null),u(t,R),j=!0,ne||(le=[te(y,"click",Qe),te(m,"click",st(We))],ne=!0)},p(z,N){n=z,(!j||N&16)&&l!==(l=new Date(n[23].created_at).toLocaleDateString(void 0,{})+"")&&Q(o,l),(!j||N&16)&&r!==(r=new Date(n[23].created_at).toLocaleTimeString(void 0,{})+"")&&Q(i,r),(!j||N&16&&f!==(f=n[23].created_at))&&c(e,"datetime",f),(!j||N&16)&&B!==(B=n[23].error_type+"")&&Q(q,B);let _e=A;A=Ce(n),A===_e?Z[A].p(n,N):(re(),P(Z[_e],1,1,()=>{Z[_e]=null}),oe(),T=Z[A],T?T.p(n,N):(T=Z[A]=de[A](n),T.c()),L(T,1),T.m(O,V)),n[23].data?.url?G?G.p(n,N):(G=Ae(n),G.c(),G.m(O,null)):G&&(G.d(1),G=null),(!j||N&20)&&ae(m,"active",n[2].find(Ie)),(!j||N&50)&&ae(t,"hidden",n[1]&&n[5](n[23])||n[23].hidden),(!j||N&16)&&ae(t,"error",n[23].error_type.match(/error/i)),(!j||N&16)&&ae(t,"fresh",n[23].downloaded_at>n[4].logs.downloaded_at[0])},i(z){j||(L(T),L(d.$$.fragment,z),L(v.$$.fragment,z),z&&(Y||nt(()=>{Y=ft(t,ct,{duration:200}),Y.start()})),j=!0)},o(z){P(T),P(d.$$.fragment,z),P(v.$$.fragment,z),j=!1},d(z){z&&_(t),Z[A].d(),G&&G.d(),ce(d),ce(v),ne=!1,Ke(le)}}}function je(n){let t,a="No newer logs to show<br/>Checking every 3 seconds";return{c(){t=p("footer"),t.innerHTML=a,this.h()},l(e){t=g(e,"FOOTER",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-akhvzo"&&(t.innerHTML=a),this.h()},h(){c(t,"class","svelte-8fkf35")},m(e,l){U(e,t,l)},d(e){e&&_(t)}}}function Fe(n){let t,a;return t=new dt({props:{$$slots:{default:[$t]},$$scope:{ctx:n}}}),{c(){ie(t.$$.fragment)},l(e){fe(t.$$.fragment,e)},m(e,l){ue(t,e,l),a=!0},p(e,l){const o={};l&536870916&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){a||(L(t.$$.fragment,e),a=!0)},o(e){P(t.$$.fragment,e),a=!1},d(e){ce(t,e)}}}function Re(n){let t,a,e=Ee(n[2]),l=[];for(let s=0;s<e.length;s+=1)l[s]=Je(Ne(n,e,s));const o=s=>P(l[s],1,1,()=>{l[s]=null});return{c(){t=p("ul");for(let s=0;s<l.length;s+=1)l[s].c()},l(s){t=g(s,"UL",{});var r=w(t);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(_)},m(s,r){U(s,t,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,null);a=!0},p(s,r){if(r&68){e=Ee(s[2]);let i;for(i=0;i<e.length;i+=1){const f=Ne(s,e,i);l[i]?(l[i].p(f,r),L(l[i],1)):(l[i]=Je(f),l[i].c(),L(l[i],1),l[i].m(t,null))}for(re(),i=e.length;i<l.length;i+=1)o(i);oe()}},i(s){if(!a){for(let r=0;r<e.length;r+=1)L(l[r]);a=!0}},o(s){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)P(l[r]);a=!1},d(s){s&&_(t),He(l,s)}}}function qe(n){let t,a=n[23].data.url+"",e;return{c(){t=p("div"),e=H(a),this.h()},l(l){t=g(l,"DIV",{class:!0});var o=w(t);e=X(o,a),o.forEach(_),this.h()},h(){c(t,"class","url svelte-8fkf35")},m(l,o){U(l,t,o),u(t,e)},p(l,o){o&4&&a!==(a=l[23].data.url+"")&&Q(e,a)},d(l){l&&_(t)}}}function vt(n){let t;function a(o,s){return o[23].showFull?wt:kt}let e=a(n),l=e(n);return{c(){t=p("div"),l.c(),this.h()},l(o){t=g(o,"DIV",{class:!0});var s=w(t);l.l(s),s.forEach(_),this.h()},h(){c(t,"class","pre svelte-8fkf35")},m(o,s){U(o,t,s),l.m(t,null)},p(o,s){e===(e=a(o))&&l?l.p(o,s):(l.d(1),l=e(o),l&&(l.c(),l.m(t,null)))},i:pe,o:pe,d(o){o&&_(t),l.d()}}}function bt(n){let t,a;return t=new Ge({props:{value:n[24],showFullLines:!0}}),{c(){ie(t.$$.fragment)},l(e){fe(t.$$.fragment,e)},m(e,l){ue(t,e,l),a=!0},p(e,l){const o={};l&4&&(o.value=e[24]),t.$set(o)},i(e){a||(L(t.$$.fragment,e),a=!0)},o(e){P(t.$$.fragment,e),a=!1},d(e){ce(t,e)}}}function kt(n){let t=n[23].message.substr(0,x)+"",a,e,l,o=n[23].message.length>x&&ze(n);return{c(){a=H(t),e=C(),o&&o.c(),l=Te()},l(s){a=X(s,t),e=I(s),o&&o.l(s),l=Te()},m(s,r){U(s,a,r),U(s,e,r),o&&o.m(s,r),U(s,l,r)},p(s,r){r&4&&t!==(t=s[23].message.substr(0,x)+"")&&Q(a,t),s[23].message.length>x?o?o.p(s,r):(o=ze(s),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},d(s){s&&(_(a),_(e),_(l)),o&&o.d(s)}}}function wt(n){let t=n[23].message+"",a;return{c(){a=H(t)},l(e){a=X(e,t)},m(e,l){U(e,a,l)},p(e,l){l&4&&t!==(t=e[23].message+"")&&Q(a,t)},d(e){e&&_(a)}}}function ze(n){let t,a=n[23].message.length-x+"",e,l,o,s;function r(){return n[17](n[23],n[25],n[26])}return{c(){t=p("button"),e=H(a),l=H(" more characters"),this.h()},l(i){t=g(i,"BUTTON",{type:!0,class:!0});var f=w(t);e=X(f,a),l=X(f," more characters"),f.forEach(_),this.h()},h(){c(t,"type","button"),c(t,"class","svelte-8fkf35")},m(i,f){U(i,t,f),u(t,e),u(t,l),o||(s=te(t,"click",r),o=!0)},p(i,f){n=i,f&4&&a!==(a=n[23].message.length-x+"")&&Q(e,a)},d(i){i&&_(t),o=!1,s()}}}function Je(n){let t,a,e,l=new Date(n[23].created_at).toLocaleDateString(void 0,{})+"",o,s,r=new Date(n[23].created_at).toLocaleTimeString(void 0,{})+"",i,f,h,k,B,q="Remove log from pinned panel",J,O,A,T,V,F,D,M,y,K,ee;O=new ge({props:{icon:"trash",size:"18"}});function W(){return n[16](n[23])}let d=n[23].data?.url&&qe(n);const S=[bt,vt],m=[];function E($,b){return $[24]?0:1}return F=E(n),D=m[F]=S[F](n),{c(){t=p("li"),a=p("div"),e=p("time"),o=H(l),s=C(),i=H(r),h=C(),k=p("button"),B=p("span"),B.textContent=q,J=C(),ie(O.$$.fragment),A=C(),d&&d.c(),T=C(),V=p("div"),D.c(),M=C(),this.h()},l($){t=g($,"LI",{class:!0});var b=w(t);a=g(b,"DIV",{class:!0});var v=w(a);e=g(v,"TIME",{class:!0,datetime:!0});var R=w(e);o=X(R,l),s=I(R),i=X(R,r),R.forEach(_),h=I(v),k=g(v,"BUTTON",{type:!0,title:!0,class:!0});var Y=w(k);B=g(Y,"SPAN",{class:!0,"data-svelte-h":!0}),se(B)!=="svelte-flzfhp"&&(B.textContent=q),J=I(Y),fe(O.$$.fragment,Y),Y.forEach(_),v.forEach(_),A=I(b),d&&d.l(b),T=I(b),V=g(b,"DIV",{class:!0});var j=w(V);D.l(j),j.forEach(_),M=I(b),b.forEach(_),this.h()},h(){c(e,"class","date svelte-8fkf35"),c(e,"datetime",f=n[23].created_at),c(B,"class","label"),c(k,"type","button"),c(k,"title","Remove log from pinned panel"),c(k,"class","svelte-8fkf35"),c(a,"class","info svelte-8fkf35"),c(V,"class","message svelte-8fkf35"),c(t,"class","svelte-8fkf35")},m($,b){U($,t,b),u(t,a),u(a,e),u(e,o),u(e,s),u(e,i),u(a,h),u(a,k),u(k,B),u(k,J),ue(O,k,null),u(t,A),d&&d.m(t,null),u(t,T),u(t,V),m[F].m(V,null),u(t,M),y=!0,K||(ee=te(k,"click",W),K=!0)},p($,b){n=$,(!y||b&4)&&l!==(l=new Date(n[23].created_at).toLocaleDateString(void 0,{})+"")&&Q(o,l),(!y||b&4)&&r!==(r=new Date(n[23].created_at).toLocaleTimeString(void 0,{})+"")&&Q(i,r),(!y||b&4&&f!==(f=n[23].created_at))&&c(e,"datetime",f),n[23].data?.url?d?d.p(n,b):(d=qe(n),d.c(),d.m(t,T)):d&&(d.d(1),d=null);let v=F;F=E(n),F===v?m[F].p(n,b):(re(),P(m[v],1,1,()=>{m[v]=null}),oe(),D=m[F],D?D.p(n,b):(D=m[F]=S[F](n),D.c()),L(D,1),D.m(V,null))},i($){y||(L(O.$$.fragment,$),L(D),y=!0)},o($){P(O.$$.fragment,$),P(D),y=!1},d($){$&&_(t),ce(O),d&&d.d(),m[F].d(),K=!1,ee()}}}function $t(n){let t,a,e,l="Clear pinned logs",o,s,r,i,f=n[2]&&Re(n);return{c(){t=p("div"),a=p("nav"),e=p("button"),e.textContent=l,o=C(),f&&f.c(),this.h()},l(h){t=g(h,"DIV",{class:!0});var k=w(t);a=g(k,"NAV",{class:!0});var B=w(a);e=g(B,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),se(e)!=="svelte-eeid91"&&(e.textContent=l),B.forEach(_),o=I(k),f&&f.l(k),k.forEach(_),this.h()},h(){c(e,"type","button"),c(e,"class","button svelte-8fkf35"),c(a,"class","asideNav svelte-8fkf35"),c(t,"class","pins svelte-8fkf35")},m(h,k){U(h,t,k),u(t,a),u(a,e),u(t,o),f&&f.m(t,null),s=!0,r||(i=te(e,"click",n[15]),r=!0)},p(h,k){h[2]?f?(f.p(h,k),k&4&&L(f,1)):(f=Re(h),f.c(),L(f,1),f.m(t,null)):f&&(re(),P(f,1,1,()=>{f=null}),oe())},i(h){s||(L(f),s=!0)},o(h){P(f),s=!1},d(h){h&&_(t),f&&f.d(),r=!1,i()}}}function Tt(n){let t,a,e,l,o,s,r,i="Filter:",f,h,k,B,q,J,O="Clear screen",A,T,V,F="Toggle pinned logs panel",D,M,y,K,ee,W,d,S;Le.title=t="Logs"+(n[4].online?.MPKIT_URL?": "+n[4].online.MPKIT_URL.replace("https://",""):"");let m=n[1]&&Ue(n);M=new ge({props:{icon:"pin"}});let E=n[4].logs.logs&&Oe(n),$=!n[1]&&je(),b=n[3]&&Fe(n);return{c(){a=C(),e=p("div"),l=p("section"),o=p("nav"),s=p("form"),r=p("label"),r.textContent=i,f=C(),h=p("input"),k=C(),m&&m.c(),B=C(),q=p("div"),J=p("button"),J.textContent=O,A=C(),T=p("button"),V=p("span"),V.textContent=F,D=C(),ie(M.$$.fragment),y=C(),E&&E.c(),K=C(),$&&$.c(),ee=C(),b&&b.c(),this.h()},l(v){Ze("svelte-dfdkqr",Le.head).forEach(_),a=I(v),e=g(v,"DIV",{class:!0});var Y=w(e);l=g(Y,"SECTION",{class:!0});var j=w(l);o=g(j,"NAV",{class:!0});var ne=w(o);s=g(ne,"FORM",{});var le=w(s);r=g(le,"LABEL",{for:!0,"data-svelte-h":!0}),se(r)!=="svelte-kf6j7o"&&(r.textContent=i),f=I(le),h=g(le,"INPUT",{type:!0,id:!0,class:!0}),k=I(le),m&&m.l(le),le.forEach(_),B=I(ne),q=g(ne,"DIV",{class:!0});var de=w(q);J=g(de,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),se(J)!=="svelte-1hlqgjb"&&(J.textContent=O),A=I(de),T=g(de,"BUTTON",{type:!0,title:!0,class:!0});var Z=w(T);V=g(Z,"SPAN",{class:!0,"data-svelte-h":!0}),se(V)!=="svelte-1o6petk"&&(V.textContent=F),D=I(Z),fe(M.$$.fragment,Z),Z.forEach(_),de.forEach(_),ne.forEach(_),y=I(j),E&&E.l(j),K=I(j),$&&$.l(j),j.forEach(_),ee=I(Y),b&&b.l(Y),Y.forEach(_),this.h()},h(){c(r,"for","filter"),c(h,"type","text"),c(h,"id","filter"),c(h,"class","svelte-8fkf35"),c(J,"type","button"),c(J,"class","button"),c(V,"class","label"),c(T,"type","button"),c(T,"title","Toggle pinned logs panel"),c(T,"class","button"),c(q,"class","svelte-8fkf35"),c(o,"class","svelte-8fkf35"),c(l,"class","logs svelte-8fkf35"),c(e,"class","container svelte-8fkf35")},m(v,R){U(v,a,R),U(v,e,R),u(e,l),u(l,o),u(o,s),u(s,r),u(s,f),u(s,h),ye(h,n[1]),u(s,k),m&&m.m(s,null),u(o,B),u(o,q),u(q,J),u(q,A),u(q,T),u(T,V),u(T,D),ue(M,T,null),u(l,y),E&&E.m(l,null),u(l,K),$&&$.m(l,null),u(e,ee),b&&b.m(e,null),n[18](e),W=!0,d||(S=[te(h,"input",n[8]),te(J,"click",n[10]),te(T,"click",n[7])],d=!0)},p(v,[R]){(!W||R&16)&&t!==(t="Logs"+(v[4].online?.MPKIT_URL?": "+v[4].online.MPKIT_URL.replace("https://",""):""))&&(Le.title=t),R&2&&h.value!==v[1]&&ye(h,v[1]),v[1]?m?(m.p(v,R),R&2&&L(m,1)):(m=Ue(v),m.c(),L(m,1),m.m(s,null)):m&&(re(),P(m,1,1,()=>{m=null}),oe()),v[4].logs.logs?E?(E.p(v,R),R&16&&L(E,1)):(E=Oe(v),E.c(),L(E,1),E.m(l,K)):E&&(re(),P(E,1,1,()=>{E=null}),oe()),v[1]?$&&($.d(1),$=null):$||($=je(),$.c(),$.m(l,null)),v[3]?b?(b.p(v,R),R&8&&L(b,1)):(b=Fe(v),b.c(),L(b,1),b.m(e,null)):b&&(re(),P(b,1,1,()=>{b=null}),oe())},i(v){W||(L(m),L(M.$$.fragment,v),L(E),L(b),W=!0)},o(v){P(m),P(M.$$.fragment,v),P(E),P(b),W=!1},d(v){v&&(_(a),_(e)),m&&m.d(),ce(M),E&&E.d(),$&&$.d(),b&&b.d(),n[18](null),d=!1,Ke(S)}}}let x=262144;function Et(n,t,a){let e;xe(n,he,d=>a(4,e=d));let l,o="",s=[],r,i;et(()=>(f(),B(),i=setInterval(()=>{document.visibilityState!=="hidden"&&f()},3e3),()=>clearInterval(i)));const f=async()=>{const d=e.logs.logs?.at(-1)?.id??null,S=await _t.get({last:d});d?S.logs?.length&&(me(he,e.logs.logs=[...e.logs.logs,...S.logs],e),e.logs.downloaded_at.push(Date.now()),e.logs.downloaded_at.length>2&&e.logs.downloaded_at.splice(0,1)):e.logs.logs||(me(he,e.logs=S,e),e.logs.downloaded_at||me(he,e.logs.downloaded_at=[Date.now()],e))},h=d=>d.hidden===!0||d.error_type.toLowerCase().indexOf(o)===-1&&d.message.toLowerCase().indexOf(o)===-1;let k=!1;tt(()=>{{const d=document.querySelector(".logs");d&&Math.abs(d.scrollHeight-d.scrollTop-d.clientHeight)<10&&(k=!1)}}),lt(async()=>{k||(await at(),document.querySelector("footer").scrollIntoView(),e.logs.logs?.length&&(k=!0))});const B=()=>{a(3,r=localStorage.pinnedPanel==="true"),a(2,s=localStorage.pinnedLogs?JSON.parse(localStorage.pinnedLogs):[])},q=d=>{s.find(S=>S.id===d.id)?a(2,s=s.filter(S=>S.id!==d.id)):a(2,s=[...s,d]),localStorage.pinnedLogs=JSON.stringify(s)},J=()=>{r?(a(3,r=!1),localStorage.pinnedPanel=!1):(a(3,r=!0),localStorage.pinnedPanel=!0)};function O(){o=this.value,a(1,o)}const A=()=>a(1,o=""),T=()=>e.logs.logs.forEach((d,S)=>me(he,e.logs.logs[S].hidden=!0,e)),V=(d,S,m)=>me(he,S[m].showFull=!0,e),F=(d,S)=>navigator.clipboard.writeText(d.message).then(()=>{S.target.classList.add("confirmation"),setTimeout(()=>S.target.classList.remove("confirmation"),1e3)}),D=d=>q(d),M=(d,S)=>S.id===d.id,y=()=>{localStorage.pinnedLogs=[],a(2,s=[])},K=d=>q(d),ee=(d,S,m)=>a(2,S[m].showFull=!0,s);function W(d){ot[d?"unshift":"push"](()=>{l=d,a(0,l)})}return[l,o,s,r,e,h,q,J,O,A,T,V,F,D,M,y,K,ee,W]}class Bt extends rt{constructor(t){super(),it(this,t,Et,Tt,Ye,{})}}export{Bt as component};
