import{s as Ke,e as g,c as $,b as I,f as h,i as A,C as le,J as _t,k as Pe,v as Ae,F as Ze,a as L,A as ne,g as F,y as _,B as re,M as dt,h as c,a1 as Xe,r as st,E as Fe,a3 as gt,z as rt,t as W,d as Y,j as _e,n as Ue,L as Tt,Y as ml,ah as At,G as ke,U as gl,H as $l,_ as wl,p as yl,D as kl,Z as El}from"../chunks/scheduler.CKQ5dLhN.js";import{S as Ge,i as Qe,t as D,g as ge,a as R,e as $e,c as se,d as ie,m as oe,f as ue,h as Rt,b as Tl}from"../chunks/index.CGVWAVV-.js";import{g as Cl}from"../chunks/globals.D0QH3NT1.js";import{p as wt}from"../chunks/stores.BLuxmlax.js";import{s as H}from"../chunks/state.nqMW8J5l.js";import{g as ut}from"../chunks/graphql.BD1m7lx9.js";import{b as Ut,c as Nl}from"../chunks/buildMutationIngredients.BkeFH9yg.js";import{I as Se}from"../chunks/Icon.CkKwi_WD.js";import{e as Ee,u as Sl,o as Ol}from"../chunks/each.BWzj3zy9.js";import{p as vl}from"../chunks/parseValue.BxCUwhRQ.js";import{c as Il,T as Dl}from"../chunks/Toggle.CtBEfrzX.js";import{J as Ll}from"../chunks/JSONTree.B6rnjEUC.js";import{q as Fl}from"../chunks/index.iVSWiVfi.js";import{t as Pl}from"../chunks/tryParseJSON.x4PJc0Qf.js";import{N as Al}from"../chunks/Number.B4JDnNHn.js";const Rl=(r=[])=>{let e="",l={},t="";const n={string:["array_contains","not_array_contains","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with","value"],int:["value_int","not_value_int"],float:["not_value_float","value_float"],bool:["exists","not_value_boolean","value_boolean"],range:["range"],array:["value_array","not_value_array","value_in","not_value_in","array_overlaps","not_array_overlaps"]};for(const a of r){if(!a.minFilterValue&&!a.maxFilterValue&&!a.value)break;let s="",o="";n.int.includes(a.operation)?(s="integer",o=parseInt(a.value)):n.float.includes(a.operation)?(s="float",o=parseFloat(a.value)):n.bool.includes(a.operation)?(s="boolean",o=a.value==="true"):n.range.includes(a.operation)?(s="range",o={},o[a.minFilter]=a.minFilterValue,o[a.maxFilter]=a.maxFilterValue):n.array.includes(a.operation)?(s="array",o=JSON.parse(a.value)):(s="string",o=a.value),a.name!=="id"&&(e+=`, $${a.name}: ${Nl[s]||"String"}`,l[a.name]=o,t+=`{
        name: "${a.name}",
        ${a.operation}: $${a.name}
      }`)}return e.length&&(e=e.slice(2),e=`(${e})`),t=`
    properties: [${t}]
  `,{variablesDefinition:e,variables:l,propertiesFilter:t}},Ne={get:r=>{var d,f,m;const l={...{deleted:!1,filters:{page:1}},...r},t=l.table?`table_id: { value: ${l.table} }`:"",n=(f=(d=l.filters)==null?void 0:d.attributes)==null?void 0:f.findIndex(b=>b.name==="id");let a="";n>=0&&l.filters.attributes[n].value&&(a=`id: { ${l.filters.attributes[n].operation}: ${l.filters.attributes[n].value} }`);let s="";l.sort?l.sort.by==="id"||l.sort.by==="created_at"||l.sort.by==="updated_at"?s=`${l.sort.by}: { order: ${l.sort.order} }`:s=`properties: { name: "${l.sort.by}", order: ${l.sort.order} }`:s="created_at: { order: DESC }";const o=l.deleted==="true"?"deleted_at: { exists: true }":"",i=Rl((m=l.filters)==null?void 0:m.attributes),u=`
      query${i.variablesDefinition} {
        records(
          page: ${l.filters.page}
          per_page: 20,
          sort: { ${s} },
          filter: {
            ${t}
            ${a}
            ${o}
            ${i.propertiesFilter}
          }
        ) {
          current_page
          total_pages
          results {
            id
            created_at
            updated_at
            deleted_at
            properties
          }
        }
      }`;return ut({query:u,variables:i.variables}).then(b=>{H.data("records",b.records)})},create:r=>{const l=Object.fromEntries(r.properties.entries()).tableName,t=Ut(r.properties),n=`
      mutation${t.variablesDefinition} {
        record_create(record: {
          table: "${l}",
          properties: [${t.properties}]
        }) {
          id
        }
      }`;return ut({query:n,variables:t.variables})},edit:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=Ut(r.properties),a=`
      mutation${n.variablesDefinition} {
        record_update(
          id: ${t},
          record: {
            table: "${l}"
            properties: [${n.properties}]
          }
        ) {
          id
        }
      }`;return ut({query:a,variables:n.variables})},delete:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,t=e.recordId,n=`
      mutation {
        record_delete(table: "${l}", id: ${t}) {
          id
        }
      }`;return ut({query:n})},restore:r=>{let e=Object.fromEntries(r.properties.entries());const l=e.tableName,n=`
      mutation {
        record_update(
          id: ${e.recordId},
          record: {
            table: "${l}",
            deleted_at: null
          }
        ) {
          id
        }
      }`;return ut({query:n})}};function jt(r,e,l){const t=r.slice();return t[10]=e[l],t[11]=e,t[12]=l,t}function Vt(r,e,l){const t=r.slice();return t[13]=e[l],t}function Bt(r,e,l){const t=r.slice();return t[16]=e[l],t}function zt(r){let e,l,t=Ee(r[1].filters.attributes),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ht(jt(r,t,s));const a=s=>R(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Ae()},l(s){for(let o=0;o<n.length;o+=1)n[o].l(s);e=Ae()},m(s,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,o);A(s,e,o),l=!0},p(s,o){if(o&6){t=Ee(s[1].filters.attributes);let i;for(i=0;i<t.length;i+=1){const u=jt(s,t,i);n[i]?(n[i].p(u,o),D(n[i],1)):(n[i]=Ht(u),n[i].c(),D(n[i],1),n[i].m(e.parentNode,e))}for(ge(),i=t.length;i<n.length;i+=1)a(i);$e()}},i(s){if(!l){for(let o=0;o<t.length;o+=1)D(n[o]);l=!0}},o(s){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)R(n[o]);l=!1},d(s){s&&h(e),Ze(n,s)}}}function Mt(r){let e,l=r[16].name+"",t,n,a;return{c(){e=g("option"),t=W(l),n=L(),this.h()},l(s){e=$(s,"OPTION",{});var o=I(e);t=Y(o,l),n=F(o),o.forEach(h),this.h()},h(){e.__value=a=r[16].name,re(e,e.__value)},m(s,o){A(s,e,o),c(e,t),c(e,n)},p(s,o){o&2&&l!==(l=s[16].name+"")&&_e(t,l),o&2&&a!==(a=s[16].name)&&(e.__value=a,re(e,e.__value))},d(s){s&&h(e)}}}function Ul(r){let e,l,t=r[10].attribute_type+"",n;return{c(){e=W("Unknow property type: "),l=g("code"),n=W(t)},l(a){e=Y(a,"Unknow property type: "),l=$(a,"CODE",{});var s=I(l);n=Y(s,t),s.forEach(h)},m(a,s){A(a,e,s),A(a,l,s),c(l,n)},p(a,s){s&2&&t!==(t=a[10].attribute_type+"")&&_e(n,t)},i:Ue,o:Ue,d(a){a&&(h(e),h(l))}}}function jl(r){let e,l,t,n,a,s="Apply filters",o,i,u,d,f,m=Ee(r[2][r[10].attribute_type]),b=[];for(let p=0;p<m.length;p+=1)b[p]=qt(Vt(r,m,p));function C(){r[7].call(e,r[11],r[12])}function E(p,y){return p[10].operation==="exists"?zl:p[10].operation==="range"?Bl:Vl}let v=E(r),k=v(r);return i=new Se({props:{icon:"arrowRight"}}),{c(){e=g("select");for(let p=0;p<b.length;p+=1)b[p].c();l=L(),k.c(),t=L(),n=g("button"),a=g("span"),a.textContent=s,o=L(),se(i.$$.fragment),this.h()},l(p){e=$(p,"SELECT",{name:!0,class:!0});var y=I(e);for(let B=0;B<b.length;B+=1)b[B].l(y);y.forEach(h),l=F(p),k.l(p),t=F(p),n=$(p,"BUTTON",{type:!0,class:!0});var T=I(n);a=$(T,"SPAN",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-6jbkuq"&&(a.textContent=s),o=F(T),ie(i.$$.fragment,T),T.forEach(h),this.h()},h(){_(e,"name","operation"),_(e,"class","svelte-y4u12o"),r[10].operation===void 0&&dt(C),_(a,"class","label"),_(n,"type","submit"),_(n,"class","button svelte-y4u12o")},m(p,y){A(p,e,y);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(e,null);Xe(e,r[10].operation,!0),A(p,l,y),k.m(p,y),A(p,t,y),A(p,n,y),c(n,a),c(n,o),oe(i,n,null),u=!0,d||(f=le(e,"change",C),d=!0)},p(p,y){if(r=p,y&6){m=Ee(r[2][r[10].attribute_type]);let T;for(T=0;T<m.length;T+=1){const B=Vt(r,m,T);b[T]?b[T].p(B,y):(b[T]=qt(B),b[T].c(),b[T].m(e,null))}for(;T<b.length;T+=1)b[T].d(1);b.length=m.length}y&2&&Xe(e,r[10].operation),v===(v=E(r))&&k?k.p(r,y):(k.d(1),k=v(r),k&&(k.c(),k.m(t.parentNode,t)))},i(p){u||(D(i.$$.fragment,p),u=!0)},o(p){R(i.$$.fragment,p),u=!1},d(p){p&&(h(e),h(l),h(t),h(n)),Ze(b,p),k.d(p),ue(i),d=!1,f()}}}function qt(r){let e,l=r[13]+"",t,n;return{c(){e=g("option"),t=W(l),this.h()},l(a){e=$(a,"OPTION",{});var s=I(e);t=Y(s,l),s.forEach(h),this.h()},h(){e.__value=n=r[13],re(e,e.__value)},m(a,s){A(a,e,s),c(e,t)},p(a,s){s&2&&l!==(l=a[13]+"")&&_e(t,l),s&2&&n!==(n=a[13])&&(e.__value=n,re(e,e.__value))},d(a){a&&h(e)}}}function Vl(r){let e,l,t;function n(){r[8].call(e,r[11],r[12])}return{c(){e=g("input"),this.h()},l(a){e=$(a,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){_(e,"type","text"),_(e,"name","value"),_(e,"placeholder","filter value"),_(e,"class","svelte-y4u12o")},m(a,s){A(a,e,s),re(e,r[10].value),l||(t=le(e,"input",n),l=!0)},p(a,s){r=a,s&2&&e.value!==r[10].value&&re(e,r[10].value)},d(a){a&&h(e),l=!1,t()}}}function Bl(r){let e,l,t=">",n,a="≥",s,o,i,u,d,f,m="<",b,C="≤",E,v,k;return{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,s=L(),o=g("input"),u=L(),d=g("select"),f=g("option"),f.textContent=m,b=g("option"),b.textContent=C,E=L(),v=g("input"),this.h()},l(p){e=$(p,"SELECT",{name:!0,class:!0});var y=I(e);l=$(y,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-1xj81f9"&&(l.textContent=t),n=$(y,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-w6lec5"&&(n.textContent=a),y.forEach(h),s=F(p),o=$(p,"INPUT",{type:!0,name:!0,class:!0}),u=F(p),d=$(p,"SELECT",{name:!0,class:!0});var T=I(d);f=$(T,"OPTION",{"data-svelte-h":!0}),ne(f)!=="svelte-1kxptxj"&&(f.textContent=m),b=$(T,"OPTION",{"data-svelte-h":!0}),ne(b)!=="svelte-1juwqhl"&&(b.textContent=C),T.forEach(h),E=F(p),v=$(p,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){l.__value="gt",re(l,l.__value),n.__value="gte",re(n,n.__value),_(e,"name","maxFilter"),_(e,"class","svelte-y4u12o"),_(o,"type","number"),_(o,"name","maxFilterValue"),o.value=i=r[10].maxFilterValue,_(o,"class","svelte-y4u12o"),f.__value="lt",re(f,f.__value),b.__value="lte",re(b,b.__value),_(d,"name","minFilter"),_(d,"class","svelte-y4u12o"),_(v,"type","number"),_(v,"name","minFilterValue"),v.value=k=r[10].minFilterValue,_(v,"class","svelte-y4u12o")},m(p,y){A(p,e,y),c(e,l),c(e,n),A(p,s,y),A(p,o,y),A(p,u,y),A(p,d,y),c(d,f),c(d,b),A(p,E,y),A(p,v,y)},p(p,y){y&2&&i!==(i=p[10].maxFilterValue)&&o.value!==i&&(o.value=i),y&2&&k!==(k=p[10].minFilterValue)&&v.value!==k&&(v.value=k)},d(p){p&&(h(e),h(s),h(o),h(u),h(d),h(E),h(v))}}}function zl(r){let e,l,t="true",n,a="false";return{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,this.h()},l(s){e=$(s,"SELECT",{name:!0,class:!0});var o=I(e);l=$(o,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-ogzxji"&&(l.textContent=t),n=$(o,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-gyv02o"&&(n.textContent=a),o.forEach(h),this.h()},h(){l.__value="true",re(l,l.__value),n.__value="false",re(n,n.__value),_(e,"name","value"),_(e,"class","svelte-y4u12o")},m(s,o){A(s,e,o),c(e,l),c(e,n)},p:Ue,d(s){s&&h(e)}}}function Ht(r){let e,l,t="Filter by:",n,a,s,o="id",i,u,d,f,m,b,C,E,v,k=Ee(r[1].table.properties),p=[];for(let N=0;N<k.length;N+=1)p[N]=Mt(Bt(r,k,N));function y(){r[4].call(a,r[11],r[12])}function T(){return r[5](r[10],r[11],r[12])}function B(){r[6].call(u,r[11],r[12])}const q=[jl,Ul],S=[];function V(N,w){return N[2][N[10].attribute_type]?0:1}return f=V(r),m=S[f]=q[f](r),{c(){e=g("fieldset"),l=g("label"),l.textContent=t,n=L(),a=g("select"),s=g("option"),s.textContent=o;for(let N=0;N<p.length;N+=1)p[N].c();i=L(),u=g("input"),d=L(),m.c(),b=L(),this.h()},l(N){e=$(N,"FIELDSET",{class:!0});var w=I(e);l=$(w,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ne(l)!=="svelte-1adf875"&&(l.textContent=t),n=F(w),a=$(w,"SELECT",{name:!0,class:!0});var O=I(a);s=$(O,"OPTION",{"data-svelte-h":!0}),ne(s)!=="svelte-ns3pfu"&&(s.textContent=o);for(let P=0;P<p.length;P+=1)p[P].l(O);O.forEach(h),i=F(w),u=$(w,"INPUT",{type:!0,name:!0}),d=F(w),m.l(w),b=F(w),w.forEach(h),this.h()},h(){_(l,"for",""),_(l,"class","svelte-y4u12o"),s.__value="id",re(s,s.__value),_(a,"name","name"),_(a,"class","svelte-y4u12o"),r[10].name===void 0&&dt(y),_(u,"type","hidden"),_(u,"name","attribute_type"),_(e,"class","svelte-y4u12o")},m(N,w){A(N,e,w),c(e,l),c(e,n),c(e,a),c(a,s);for(let O=0;O<p.length;O+=1)p[O]&&p[O].m(a,null);Xe(a,r[10].name,!0),c(e,i),c(e,u),re(u,r[10].attribute_type),c(e,d),S[f].m(e,null),c(e,b),C=!0,E||(v=[le(a,"change",y),le(a,"change",T),le(u,"input",B)],E=!0)},p(N,w){if(r=N,w&2){k=Ee(r[1].table.properties);let P;for(P=0;P<k.length;P+=1){const M=Bt(r,k,P);p[P]?p[P].p(M,w):(p[P]=Mt(M),p[P].c(),p[P].m(a,null))}for(;P<p.length;P+=1)p[P].d(1);p.length=k.length}w&2&&Xe(a,r[10].name),w&2&&re(u,r[10].attribute_type);let O=f;f=V(r),f===O?S[f].p(r,w):(ge(),R(S[O],1,1,()=>{S[O]=null}),$e(),m=S[f],m?m.p(r,w):(m=S[f]=q[f](r),m.c()),D(m,1),m.m(e,b))},i(N){C||(D(m),C=!0)},o(N){R(m),C=!1},d(N){N&&h(e),Ze(p,N),S[f].d(),E=!1,st(v)}}}function Ml(r){var s;let e,l,t,n,a=((s=r[1].table)==null?void 0:s.properties)&&zt(r);return{c(){e=g("form"),a&&a.c()},l(o){e=$(o,"FORM",{});var i=I(e);a&&a.l(i),i.forEach(h)},m(o,i){A(o,e,i),a&&a.m(e,null),r[9](e),l=!0,t||(n=le(e,"submit",_t(r[3])),t=!0)},p(o,[i]){var u;(u=o[1].table)!=null&&u.properties?a?(a.p(o,i),i&2&&D(a,1)):(a=zt(o),a.c(),D(a,1),a.m(e,null)):a&&(ge(),R(a,1,1,()=>{a=null}),$e())},i(o){l||(D(a),l=!0)},o(o){R(a),l=!1},d(o){o&&h(e),a&&a.d(),r[9](null),t=!1,n()}}}function ql(r,e,l){let t;Pe(r,H,b=>l(1,t=b));let n;const a={id:["value"],string:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"],text:["value","exists","not_value"],array:["array_contains","value_array","value_in","exists","array_overlaps","not_array_contains","not_array_overlaps","not_value_array","not_value_in"],boolean:["value_boolean","exists","not_value_boolean"],integer:["value_int","exists","not_value_int","range"],float:["value_float","exists","not_value_float","range"],upload:["value","exists","not_value"],datetime:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"],date:["value","exists","contains","ends_with","not_contains","not_ends_with","not_starts_with","not_value","starts_with"]},s=()=>{Fe(H,t.filters={page:1,attributes:[Object.fromEntries(new FormData(n).entries())],deleted:t.filters.deleted},t),Ne.get({table:t.table.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function o(b,C){b[C].name=gt(this),H.set(t)}const i=(b,C,E)=>{var v;Fe(H,C[E].attribute_type=((v=t.table.properties.find(k=>k.name===b.name))==null?void 0:v.attribute_type)||"id",t)};function u(b,C){b[C].attribute_type=this.value,H.set(t)}function d(b,C){b[C].operation=gt(this),H.set(t)}function f(b,C){b[C].value=this.value,H.set(t)}function m(b){rt[b?"unshift":"push"](()=>{n=b,l(0,n)})}return[n,t,a,s,o,i,u,d,f,m]}class Hl extends Ge{constructor(e){super(),Qe(this,e,ql,Ml,Ke,{})}}function Jt(r,e,l){const t=r.slice();return t[8]=e[l],t}function Wt(r){let e,l,t="created at",n,a="updated at",s,o="id",i,u,d,f="DESC [Z→A]",m,b="ASC [A→Z]",C,E,v,k,p,y,T,B=Ee(r[1].table.properties),q=[];for(let w=0;w<B.length;w+=1)q[w]=Yt(Jt(r,B,w));const S=[Wl,Jl],V=[];function N(w,O){return w[1].sort.order==="DESC"?0:1}return v=N(r),k=V[v]=S[v](r),{c(){e=g("select"),l=g("option"),l.textContent=t,n=g("option"),n.textContent=a,s=g("option"),s.textContent=o;for(let w=0;w<q.length;w+=1)q[w].c();i=L(),u=g("select"),d=g("option"),d.textContent=f,m=g("option"),m.textContent=b,C=L(),E=g("label"),k.c(),this.h()},l(w){e=$(w,"SELECT",{name:!0,id:!0,class:!0});var O=I(e);l=$(O,"OPTION",{"data-svelte-h":!0}),ne(l)!=="svelte-waq5ct"&&(l.textContent=t),n=$(O,"OPTION",{"data-svelte-h":!0}),ne(n)!=="svelte-msojyp"&&(n.textContent=a),s=$(O,"OPTION",{"data-svelte-h":!0}),ne(s)!=="svelte-ns3pfu"&&(s.textContent=o);for(let K=0;K<q.length;K+=1)q[K].l(O);O.forEach(h),i=F(w),u=$(w,"SELECT",{name:!0,id:!0,class:!0});var P=I(u);d=$(P,"OPTION",{"data-svelte-h":!0}),ne(d)!=="svelte-1soe6tv"&&(d.textContent=f),m=$(P,"OPTION",{"data-svelte-h":!0}),ne(m)!=="svelte-ih5v4p"&&(m.textContent=b),P.forEach(h),C=F(w),E=$(w,"LABEL",{for:!0,class:!0});var M=I(E);k.l(M),M.forEach(h),this.h()},h(){l.__value="created_at",re(l,l.__value),n.__value="updated_at",re(n,n.__value),s.__value="id",re(s,s.__value),_(e,"name","by"),_(e,"id","sort_by"),_(e,"class","svelte-yzlk61"),r[1].sort.by===void 0&&dt(()=>r[3].call(e)),d.__value="DESC",re(d,d.__value),m.__value="ASC",re(m,m.__value),_(u,"name","order"),_(u,"id","sort_order"),_(u,"class","svelte-yzlk61"),r[1].sort.order===void 0&&dt(()=>r[5].call(u)),_(E,"for","sort_order"),_(E,"class","button svelte-yzlk61")},m(w,O){A(w,e,O),c(e,l),c(e,n),c(e,s);for(let P=0;P<q.length;P+=1)q[P]&&q[P].m(e,null);Xe(e,r[1].sort.by,!0),A(w,i,O),A(w,u,O),c(u,d),c(u,m),Xe(u,r[1].sort.order,!0),A(w,C,O),A(w,E,O),V[v].m(E,null),p=!0,y||(T=[le(e,"change",r[3]),le(e,"change",r[4]),le(u,"change",r[5]),le(u,"change",r[6])],y=!0)},p(w,O){if(O&2){B=Ee(w[1].table.properties);let M;for(M=0;M<B.length;M+=1){const K=Jt(w,B,M);q[M]?q[M].p(K,O):(q[M]=Yt(K),q[M].c(),q[M].m(e,null))}for(;M<q.length;M+=1)q[M].d(1);q.length=B.length}O&2&&Xe(e,w[1].sort.by),O&2&&Xe(u,w[1].sort.order);let P=v;v=N(w),v!==P&&(ge(),R(V[P],1,1,()=>{V[P]=null}),$e(),k=V[v],k||(k=V[v]=S[v](w),k.c()),D(k,1),k.m(E,null))},i(w){p||(D(k),p=!0)},o(w){R(k),p=!1},d(w){w&&(h(e),h(i),h(u),h(C),h(E)),Ze(q,w),V[v].d(),y=!1,st(T)}}}function Yt(r){let e,l=r[8].name+"",t,n,a;return{c(){e=g("option"),t=W(l),n=L(),this.h()},l(s){e=$(s,"OPTION",{});var o=I(e);t=Y(o,l),n=F(o),o.forEach(h),this.h()},h(){e.__value=a=r[8].name,re(e,e.__value)},m(s,o){A(s,e,o),c(e,t),c(e,n)},p(s,o){o&2&&l!==(l=s[8].name+"")&&_e(t,l),o&2&&a!==(a=s[8].name)&&(e.__value=a,re(e,e.__value))},d(s){s&&h(e)}}}function Jl(r){let e,l;return e=new Se({props:{icon:"sortAZ"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Wl(r){let e,l;return e=new Se({props:{icon:"sortZA"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Yl(r){var s;let e,l,t,n,a=((s=r[1].table)==null?void 0:s.properties)&&Wt(r);return{c(){e=g("form"),a&&a.c(),this.h()},l(o){e=$(o,"FORM",{class:!0});var i=I(e);a&&a.l(i),i.forEach(h),this.h()},h(){_(e,"class","svelte-yzlk61")},m(o,i){A(o,e,i),a&&a.m(e,null),r[7](e),l=!0,t||(n=le(e,"submit",_t(r[2])),t=!0)},p(o,[i]){var u;(u=o[1].table)!=null&&u.properties?a?(a.p(o,i),i&2&&D(a,1)):(a=Wt(o),a.c(),D(a,1),a.m(e,null)):a&&(ge(),R(a,1,1,()=>{a=null}),$e())},i(o){l||(D(a),l=!0)},o(o){R(a),l=!1},d(o){o&&h(e),a&&a.d(),r[7](null),t=!1,n()}}}function Xl(r,e,l){let t;Pe(r,H,f=>l(1,t=f));let n;const a=()=>{Fe(H,t.filters.page=1,t),Ne.get({table:t.table.id,filters:t.filters,sort:Object.fromEntries(new FormData(n).entries()),deleted:t.filters.deleted})};function s(){t.sort.by=gt(this),H.set(t)}const o=()=>n.requestSubmit();function i(){t.sort.order=gt(this),H.set(t)}const u=()=>n.requestSubmit();function d(f){rt[f?"unshift":"push"](()=>{n=f,l(0,n)})}return[n,t,a,s,o,i,u,d]}class Zl extends Ge{constructor(e){super(),Qe(this,e,Xl,Yl,Ke,{})}}function Kl(r){let e,l,t,n,a,s,o,i,u,d,f,m,b;return u=new Se({props:{icon:"x",size:"22"}}),{c(){e=g("form"),l=g("input"),n=L(),a=g("input"),s=L(),o=g("button"),i=g("i"),se(u.$$.fragment),d=W(`\r
    Delete record`),this.h()},l(C){e=$(C,"FORM",{});var E=I(e);l=$(E,"INPUT",{type:!0,name:!0}),n=F(E),a=$(E,"INPUT",{type:!0,name:!0}),s=F(E),o=$(E,"BUTTON",{class:!0});var v=I(o);i=$(v,"I",{class:!0});var k=I(i);ie(u.$$.fragment,k),k.forEach(h),d=Y(v,`\r
    Delete record`),v.forEach(h),E.forEach(h),this.h()},h(){_(l,"type","hidden"),_(l,"name","tableName"),l.value=t=r[0].name,_(a,"type","hidden"),_(a,"name","recordId"),a.value=r[1],_(i,"class","svelte-ooaugn"),_(o,"class","danger")},m(C,E){A(C,e,E),c(e,l),c(e,n),c(e,a),c(e,s),c(e,o),c(o,i),oe(u,i,null),c(o,d),r[4](e),f=!0,m||(b=le(e,"submit",r[3]),m=!0)},p(C,[E]){(!f||E&1&&t!==(t=C[0].name))&&(l.value=t),(!f||E&2)&&(a.value=C[1])},i(C){f||(D(u.$$.fragment,C),f=!0)},o(C){R(u.$$.fragment,C),f=!1},d(C){C&&h(e),ue(u),r[4](null),m=!1,b()}}}function Gl(r,e,l){let t,n;Pe(r,H,f=>l(5,t=f)),Pe(r,wt,f=>l(6,n=f));let{table:a}=e,{id:s}=e,o,i=Tt();const u=async f=>{if(f.preventDefault(),confirm("Are you sure you want to delete this record?")){i("success");const m=await Ne.delete({table:a.name,properties:new FormData(o)});m.errors?H.notification.create("error",`Record ${m.record_delete.id} could not be deleted`):(Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.notification.create("success",`Record ${m.record_delete.id} deleted`))}};function d(f){rt[f?"unshift":"push"](()=>{o=f,l(2,o)})}return r.$$set=f=>{"table"in f&&l(0,a=f.table),"id"in f&&l(1,s=f.id)},[a,s,o,u,d]}class Ql extends Ge{constructor(e){super(),Qe(this,e,Gl,Kl,Ke,{table:0,id:1})}}function xl(r){let e,l,t,n,a,s,o,i,u,d,f,m,b;return u=new Se({props:{icon:"recycleRefresh"}}),{c(){e=g("form"),l=g("input"),n=L(),a=g("input"),s=L(),o=g("button"),i=g("i"),se(u.$$.fragment),d=W(`\r
    Restore record`),this.h()},l(C){e=$(C,"FORM",{});var E=I(e);l=$(E,"INPUT",{type:!0,name:!0}),n=F(E),a=$(E,"INPUT",{type:!0,name:!0}),s=F(E),o=$(E,"BUTTON",{});var v=I(o);i=$(v,"I",{});var k=I(i);ie(u.$$.fragment,k),k.forEach(h),d=Y(v,`\r
    Restore record`),v.forEach(h),E.forEach(h),this.h()},h(){_(l,"type","hidden"),_(l,"name","tableName"),l.value=t=r[0].name,_(a,"type","hidden"),_(a,"name","recordId"),a.value=r[1]},m(C,E){A(C,e,E),c(e,l),c(e,n),c(e,a),c(e,s),c(e,o),c(o,i),oe(u,i,null),c(o,d),r[4](e),f=!0,m||(b=le(e,"submit",r[3]),m=!0)},p(C,[E]){(!f||E&1&&t!==(t=C[0].name))&&(l.value=t),(!f||E&2)&&(a.value=C[1])},i(C){f||(D(u.$$.fragment,C),f=!0)},o(C){R(u.$$.fragment,C),f=!1},d(C){C&&h(e),ue(u),r[4](null),m=!1,b()}}}function er(r,e,l){let t,n;Pe(r,H,f=>l(5,t=f)),Pe(r,wt,f=>l(6,n=f));let{table:a}=e,{id:s}=e,o,i=Tt();const u=async f=>{f.preventDefault(),i("success");const m=await Ne.restore({table:a.name,properties:new FormData(o)});m.errors?H.notification.create("error",`Record ${m.record_update.id} could not be restored`):(Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.notification.create("success",`Record ${m.record_update.id} restored`))};function d(f){rt[f?"unshift":"push"](()=>{o=f,l(2,o)})}return r.$$set=f=>{"table"in f&&l(0,a=f.table),"id"in f&&l(1,s=f.id)},[a,s,o,u,d]}class tr extends Ge{constructor(e){super(),Qe(this,e,er,xl,Ke,{table:0,id:1})}}function lr(r){let e,l;return e=new Ql({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[6]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function rr(r){let e,l;return e=new tr({props:{table:r[1].table,id:r[0].id}}),e.$on("success",r[5]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.table=t[1].table),n&1&&(a.id=t[0].id),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function nr(r){let e,l,t,n,a,s,o,i,u,d,f,m,b;a=new Se({props:{icon:"copy",size:"22"}});const C=[rr,lr],E=[];function v(k,p){return k[1].filters.deleted==="true"?0:1}return u=v(r),d=E[u]=C[u](r),{c(){e=g("menu"),l=g("ul"),t=g("li"),n=g("button"),se(a.$$.fragment),s=W(`\r
        Copy record`),o=L(),i=g("li"),d.c(),this.h()},l(k){e=$(k,"MENU",{class:!0});var p=I(e);l=$(p,"UL",{});var y=I(l);t=$(y,"LI",{class:!0});var T=I(t);n=$(T,"BUTTON",{type:!0});var B=I(n);ie(a.$$.fragment,B),s=Y(B,`\r
        Copy record`),B.forEach(h),T.forEach(h),o=F(y),i=$(y,"LI",{class:!0});var q=I(i);d.l(q),q.forEach(h),y.forEach(h),p.forEach(h),this.h()},h(){_(n,"type","button"),_(t,"class","svelte-1tht2a1"),_(i,"class","svelte-1tht2a1"),_(e,"class","content-context svelte-1tht2a1")},m(k,p){A(k,e,p),c(e,l),c(l,t),c(t,n),oe(a,n,null),c(n,s),c(l,o),c(l,i),E[u].m(i,null),f=!0,m||(b=[le(window,"keyup",r[3]),le(n,"click",r[4]),ml(Il.call(null,e,r[7]))],m=!0)},p(k,[p]){let y=u;u=v(k),u===y?E[u].p(k,p):(ge(),R(E[y],1,1,()=>{E[y]=null}),$e(),d=E[u],d?d.p(k,p):(d=E[u]=C[u](k),d.c()),D(d,1),d.m(i,null))},i(k){f||(D(a.$$.fragment,k),D(d),f=!0)},o(k){R(a.$$.fragment,k),R(d),f=!1},d(k){k&&h(e),ue(a),E[u].d(),m=!1,st(b)}}}function ar(r,e,l){let t;Pe(r,H,f=>l(1,t=f));let{record:n}=e;const a=Tt(),s=f=>{f.key==="Escape"&&a("close")},o=()=>{a("close"),Fe(H,t.record={...n},t),Fe(H,t.record.id=null,t)},i=()=>a("close"),u=()=>a("close"),d=()=>a("close");return r.$$set=f=>{"record"in f&&l(0,n=f.record)},[n,t,a,s,o,i,u,d]}class sr extends Ge{constructor(e){super(),Qe(this,e,ar,nr,Ke,{record:0})}}function Xt(r,e,l){const t=r.slice();return t[5]=e[l],t}function Zt(r,e,l){const t=r.slice();t[8]=e[l];const n=vl(t[5].properties[t[8].name],t[8].attribute_type);return t[9]=n,t}function Kt(r,e,l){const t=r.slice();return t[8]=e[l],t}function Gt(r){var B,q;let e,l,t,n,a="id",s,o,i,u="created at",d,f,m="updated at",b,C,E,v,k=Ee(r[1].table.properties),p=[];for(let S=0;S<k.length;S+=1)p[S]=Qt(Kt(r,k,S));let y=r[1].filters.deleted==="true"&&xt(),T=((q=(B=r[1].records)==null?void 0:B.results)==null?void 0:q.length)&&el(r);return{c(){e=g("table"),l=g("thead"),t=g("tr"),n=g("th"),n.textContent=a,s=L();for(let S=0;S<p.length;S+=1)p[S].c();o=L(),i=g("th"),i.textContent=u,d=L(),f=g("th"),f.textContent=m,b=L(),y&&y.c(),C=L(),T&&T.c(),this.h()},l(S){e=$(S,"TABLE",{class:!0});var V=I(e);l=$(V,"THEAD",{class:!0});var N=I(l);t=$(N,"TR",{});var w=I(t);n=$(w,"TH",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-1i366gx"&&(n.textContent=a),s=F(w);for(let O=0;O<p.length;O+=1)p[O].l(w);o=F(w),i=$(w,"TH",{class:!0,"data-svelte-h":!0}),ne(i)!=="svelte-g832ob"&&(i.textContent=u),d=F(w),f=$(w,"TH",{class:!0,"data-svelte-h":!0}),ne(f)!=="svelte-1dvr12"&&(f.textContent=m),b=F(w),y&&y.l(w),w.forEach(h),N.forEach(h),C=F(V),T&&T.l(V),V.forEach(h),this.h()},h(){_(n,"class","id svelte-1bwwtph"),_(i,"class","svelte-1bwwtph"),_(f,"class","svelte-1bwwtph"),_(l,"class","svelte-1bwwtph"),_(e,"class",E=At(r[1].view.tableStyle)+" svelte-1bwwtph")},m(S,V){A(S,e,V),c(e,l),c(l,t),c(t,n),c(t,s);for(let N=0;N<p.length;N+=1)p[N]&&p[N].m(t,null);c(t,o),c(t,i),c(t,d),c(t,f),c(t,b),y&&y.m(t,null),c(e,C),T&&T.m(e,null),v=!0},p(S,V){var N,w;if(V&2){k=Ee(S[1].table.properties);let O;for(O=0;O<k.length;O+=1){const P=Kt(S,k,O);p[O]?p[O].p(P,V):(p[O]=Qt(P),p[O].c(),p[O].m(t,o))}for(;O<p.length;O+=1)p[O].d(1);p.length=k.length}S[1].filters.deleted==="true"?y||(y=xt(),y.c(),y.m(t,null)):y&&(y.d(1),y=null),(w=(N=S[1].records)==null?void 0:N.results)!=null&&w.length?T?(T.p(S,V),V&2&&D(T,1)):(T=el(S),T.c(),D(T,1),T.m(e,null)):T&&(ge(),R(T,1,1,()=>{T=null}),$e()),(!v||V&2&&E!==(E=At(S[1].view.tableStyle)+" svelte-1bwwtph"))&&_(e,"class",E)},i(S){v||(D(T),v=!0)},o(S){R(T),v=!1},d(S){S&&h(e),Ze(p,S),y&&y.d(),T&&T.d()}}}function Qt(r){let e,l=r[8].name+"",t,n,a,s,o=r[8].attribute_type+"",i,u;return{c(){e=g("th"),t=W(l),n=L(),a=g("small"),s=W("("),i=W(o),u=W(")"),this.h()},l(d){e=$(d,"TH",{class:!0});var f=I(e);t=Y(f,l),n=F(f),a=$(f,"SMALL",{class:!0});var m=I(a);s=Y(m,"("),i=Y(m,o),u=Y(m,")"),m.forEach(h),f.forEach(h),this.h()},h(){_(a,"class","type svelte-1bwwtph"),_(e,"class","svelte-1bwwtph")},m(d,f){A(d,e,f),c(e,t),c(e,n),c(e,a),c(a,s),c(a,i),c(a,u)},p(d,f){f&2&&l!==(l=d[8].name+"")&&_e(t,l),f&2&&o!==(o=d[8].attribute_type+"")&&_e(i,o)},d(d){d&&h(e)}}}function xt(r){let e,l="deleted at";return{c(){e=g("th"),e.textContent=l,this.h()},l(t){e=$(t,"TH",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1jwm27o"&&(e.textContent=l),this.h()},h(){_(e,"class","svelte-1bwwtph")},m(t,n){A(t,e,n)},d(t){t&&h(e)}}}function el(r){var o;let e=[],l=new Map,t,n,a=Ee((o=r[1].records)==null?void 0:o.results);const s=i=>i[5].id;for(let i=0;i<a.length;i+=1){let u=Xt(r,a,i),d=s(u);l.set(d,e[i]=al(d,u))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=Ae()},l(i){for(let u=0;u<e.length;u+=1)e[u].l(i);t=Ae()},m(i,u){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(i,u);A(i,t,u),n=!0},p(i,u){var d;u&3&&(a=Ee((d=i[1].records)==null?void 0:d.results),ge(),e=Sl(e,u,s,1,i,a,l,t.parentNode,Ol,al,t,Xt),$e())},i(i){if(!n){for(let u=0;u<a.length;u+=1)D(e[u]);n=!0}},o(i){for(let u=0;u<e.length;u+=1)R(e[u]);n=!1},d(i){i&&h(t);for(let u=0;u<e.length;u+=1)e[u].d(i)}}}function tl(r){let e,l;return e=new sr({props:{record:r[5]}}),e.$on("close",r[4]),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.record=t[5]),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function ll(r){let e,l,t,n;const a=[or,ir],s=[];function o(i,u){return i[9].type==="json"||i[9].type==="jsonEscaped"?0:1}return e=o(r),l=s[e]=a[e](r),{c(){l.c(),t=Ae()},l(i){l.l(i),t=Ae()},m(i,u){s[e].m(i,u),A(i,t,u),n=!0},p(i,u){let d=e;e=o(i),e===d?s[e].p(i,u):(ge(),R(s[d],1,1,()=>{s[d]=null}),$e(),l=s[e],l?l.p(i,u):(l=s[e]=a[e](i),l.c()),D(l,1),l.m(t.parentNode,t))},i(i){n||(D(l),n=!0)},o(i){R(l),n=!1},d(i){i&&h(t),s[e].d(i)}}}function ir(r){let e=r[9].value+"",l;return{c(){l=W(e)},l(t){l=Y(t,e)},m(t,n){A(t,l,n)},p(t,n){n&2&&e!==(e=t[9].value+"")&&_e(l,e)},i:Ue,o:Ue,d(t){t&&h(l)}}}function or(r){let e,l,t,n;const a=[fr,ur],s=[];function o(i,u){return i[1].view.tableStyle==="expanded"?0:1}return e=o(r),l=s[e]=a[e](r),{c(){l.c(),t=Ae()},l(i){l.l(i),t=Ae()},m(i,u){s[e].m(i,u),A(i,t,u),n=!0},p(i,u){let d=e;e=o(i),e===d?s[e].p(i,u):(ge(),R(s[d],1,1,()=>{s[d]=null}),$e(),l=s[e],l?l.p(i,u):(l=s[e]=a[e](i),l.c()),D(l,1),l.m(t.parentNode,t))},i(i){n||(D(l),n=!0)},o(i){R(l),n=!1},d(i){i&&h(t),s[e].d(i)}}}function ur(r){let e=JSON.stringify(r[9].value)+"",l;return{c(){l=W(e)},l(t){l=Y(t,e)},m(t,n){A(t,l,n)},p(t,n){n&2&&e!==(e=JSON.stringify(t[9].value)+"")&&_e(l,e)},i:Ue,o:Ue,d(t){t&&h(l)}}}function fr(r){let e,l;return e=new Ll({props:{value:r[9].value}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&2&&(a.value=t[9].value),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function rl(r){let e,l,t=r[9].value!==void 0&&ll(r);return{c(){e=g("td"),t&&t.c(),this.h()},l(n){e=$(n,"TD",{class:!0});var a=I(e);t&&t.l(a),a.forEach(h),this.h()},h(){_(e,"class","svelte-1bwwtph"),ke(e,"value-null",r[9].type==="null")},m(n,a){A(n,e,a),t&&t.m(e,null),l=!0},p(n,a){n[9].value!==void 0?t?(t.p(n,a),a&2&&D(t,1)):(t=ll(n),t.c(),D(t,1),t.m(e,null)):t&&(ge(),R(t,1,1,()=>{t=null}),$e()),(!l||a&2)&&ke(e,"value-null",n[9].type==="null")},i(n){l||(D(t),l=!0)},o(n){R(t),l=!1},d(n){n&&h(e),t&&t.d()}}}function nl(r){var i,u;let e,l=new Date((i=r[5])==null?void 0:i.deleted_at).toLocaleDateString(void 0,{})+"",t,n,a,s=new Date((u=r[5])==null?void 0:u.deleted_at).toLocaleTimeString(void 0,{})+"",o;return{c(){e=g("td"),t=W(l),n=L(),a=g("span"),o=W(s),this.h()},l(d){e=$(d,"TD",{class:!0});var f=I(e);t=Y(f,l),n=F(f),a=$(f,"SPAN",{class:!0});var m=I(a);o=Y(m,s),m.forEach(h),f.forEach(h),this.h()},h(){_(a,"class","svelte-1bwwtph"),_(e,"class","date svelte-1bwwtph")},m(d,f){A(d,e,f),c(e,t),c(e,n),c(e,a),c(a,o)},p(d,f){var m,b;f&2&&l!==(l=new Date((m=d[5])==null?void 0:m.deleted_at).toLocaleDateString(void 0,{})+"")&&_e(t,l),f&2&&s!==(s=new Date((b=d[5])==null?void 0:b.deleted_at).toLocaleTimeString(void 0,{})+"")&&_e(o,s)},d(d){d&&h(e)}}}function al(r,e){var nt,ye,Be,at;let l,t,n,a,s,o,i="More options",u,d,f,m,b,C="Edit record",E,v,k,p,y=e[5].id+"",T,B,q,S,V=new Date((nt=e[5])==null?void 0:nt.created_at).toLocaleDateString(void 0,{})+"",N,w,O,P=new Date((ye=e[5])==null?void 0:ye.created_at).toLocaleTimeString(void 0,{})+"",M,K,G,U=new Date((Be=e[5])==null?void 0:Be.updated_at).toLocaleDateString(void 0,{})+"",Z,z,ae,Ce=new Date((at=e[5])==null?void 0:at.updated_at).toLocaleTimeString(void 0,{})+"",me,ee,Oe,fe,we,je;d=new Se({props:{icon:"navigationMenuVertical",size:"16"}});function it(){return e[2](e[5])}v=new Se({props:{icon:"pencil",size:"16"}});function Ve(){return e[3](e[5])}let ce=e[0].id===e[5].id&&tl(e),De=Ee(e[1].table.properties),Q=[];for(let X=0;X<De.length;X+=1)Q[X]=rl(Zt(e,De,X));const ot=X=>R(Q[X],1,1,()=>{Q[X]=null});let pe=e[1].filters.deleted==="true"&&nl(e);return{key:r,first:null,c(){l=g("tr"),t=g("td"),n=g("div"),a=g("div"),s=g("button"),o=g("span"),o.textContent=i,u=L(),se(d.$$.fragment),f=L(),m=g("button"),b=g("span"),b.textContent=C,E=L(),se(v.$$.fragment),k=L(),ce&&ce.c(),p=L(),T=W(y),B=L();for(let X=0;X<Q.length;X+=1)Q[X].c();q=L(),S=g("td"),N=W(V),w=L(),O=g("span"),M=W(P),K=L(),G=g("td"),Z=W(U),z=L(),ae=g("span"),me=W(Ce),ee=L(),pe&&pe.c(),Oe=L(),this.h()},l(X){l=$(X,"TR",{class:!0});var J=I(l);t=$(J,"TD",{class:!0});var Te=I(t);n=$(Te,"DIV",{class:!0});var Ie=I(n);a=$(Ie,"DIV",{class:!0});var Re=I(a);s=$(Re,"BUTTON",{class:!0});var Le=I(s);o=$(Le,"SPAN",{class:!0,"data-svelte-h":!0}),ne(o)!=="svelte-1agpmtc"&&(o.textContent=i),u=F(Le),ie(d.$$.fragment,Le),Le.forEach(h),f=F(Re),m=$(Re,"BUTTON",{class:!0,title:!0});var de=I(m);b=$(de,"SPAN",{class:!0,"data-svelte-h":!0}),ne(b)!=="svelte-1qpnaf4"&&(b.textContent=C),E=F(de),ie(v.$$.fragment,de),de.forEach(h),Re.forEach(h),k=F(Ie),ce&&ce.l(Ie),p=F(Ie),T=Y(Ie,y),Ie.forEach(h),Te.forEach(h),B=F(J);for(let he=0;he<Q.length;he+=1)Q[he].l(J);q=F(J),S=$(J,"TD",{class:!0});var te=I(S);N=Y(te,V),w=F(te),O=$(te,"SPAN",{class:!0});var xe=I(O);M=Y(xe,P),xe.forEach(h),te.forEach(h),K=F(J),G=$(J,"TD",{class:!0});var qe=I(G);Z=Y(qe,U),z=F(qe),ae=$(qe,"SPAN",{class:!0});var He=I(ae);me=Y(He,Ce),He.forEach(h),qe.forEach(h),ee=F(J),pe&&pe.l(J),Oe=F(J),J.forEach(h),this.h()},h(){_(o,"class","label svelte-1bwwtph"),_(s,"class","button compact more svelte-1bwwtph"),ke(s,"active",e[0].id===e[5].id),_(b,"class","label svelte-1bwwtph"),_(m,"class","button compact edit svelte-1bwwtph"),_(m,"title","Edit record"),_(a,"class","combo svelte-1bwwtph"),_(n,"class","id svelte-1bwwtph"),_(t,"class","svelte-1bwwtph"),_(O,"class","svelte-1bwwtph"),_(S,"class","date svelte-1bwwtph"),_(ae,"class","svelte-1bwwtph"),_(G,"class","date svelte-1bwwtph"),_(l,"class","svelte-1bwwtph"),ke(l,"highlighted",e[1].highlighted.record===e[5].id),ke(l,"hasContextMenu",e[0].id===e[5].id),this.first=l},m(X,J){A(X,l,J),c(l,t),c(t,n),c(n,a),c(a,s),c(s,o),c(s,u),oe(d,s,null),c(a,f),c(a,m),c(m,b),c(m,E),oe(v,m,null),c(n,k),ce&&ce.m(n,null),c(n,p),c(n,T),c(l,B);for(let Te=0;Te<Q.length;Te+=1)Q[Te]&&Q[Te].m(l,null);c(l,q),c(l,S),c(S,N),c(S,w),c(S,O),c(O,M),c(l,K),c(l,G),c(G,Z),c(G,z),c(G,ae),c(ae,me),c(l,ee),pe&&pe.m(l,null),c(l,Oe),fe=!0,we||(je=[le(s,"click",it),le(m,"click",Ve)],we=!0)},p(X,J){var Te,Ie,Re,Le;if(e=X,(!fe||J&3)&&ke(s,"active",e[0].id===e[5].id),e[0].id===e[5].id?ce?(ce.p(e,J),J&3&&D(ce,1)):(ce=tl(e),ce.c(),D(ce,1),ce.m(n,p)):ce&&(ge(),R(ce,1,1,()=>{ce=null}),$e()),(!fe||J&2)&&y!==(y=e[5].id+"")&&_e(T,y),J&2){De=Ee(e[1].table.properties);let de;for(de=0;de<De.length;de+=1){const te=Zt(e,De,de);Q[de]?(Q[de].p(te,J),D(Q[de],1)):(Q[de]=rl(te),Q[de].c(),D(Q[de],1),Q[de].m(l,q))}for(ge(),de=De.length;de<Q.length;de+=1)ot(de);$e()}(!fe||J&2)&&V!==(V=new Date((Te=e[5])==null?void 0:Te.created_at).toLocaleDateString(void 0,{})+"")&&_e(N,V),(!fe||J&2)&&P!==(P=new Date((Ie=e[5])==null?void 0:Ie.created_at).toLocaleTimeString(void 0,{})+"")&&_e(M,P),(!fe||J&2)&&U!==(U=new Date((Re=e[5])==null?void 0:Re.updated_at).toLocaleDateString(void 0,{})+"")&&_e(Z,U),(!fe||J&2)&&Ce!==(Ce=new Date((Le=e[5])==null?void 0:Le.updated_at).toLocaleTimeString(void 0,{})+"")&&_e(me,Ce),e[1].filters.deleted==="true"?pe?pe.p(e,J):(pe=nl(e),pe.c(),pe.m(l,Oe)):pe&&(pe.d(1),pe=null),(!fe||J&2)&&ke(l,"highlighted",e[1].highlighted.record===e[5].id),(!fe||J&3)&&ke(l,"hasContextMenu",e[0].id===e[5].id)},i(X){if(!fe){D(d.$$.fragment,X),D(v.$$.fragment,X),D(ce);for(let J=0;J<De.length;J+=1)D(Q[J]);fe=!0}},o(X){R(d.$$.fragment,X),R(v.$$.fragment,X),R(ce),Q=Q.filter(Boolean);for(let J=0;J<Q.length;J+=1)R(Q[J]);fe=!1},d(X){X&&h(l),ue(d),ue(v),ce&&ce.d(),Ze(Q,X),pe&&pe.d(),we=!1,st(je)}}}function cr(r){var n;let e,l,t=((n=r[1].table)==null?void 0:n.properties)&&Gt(r);return{c(){t&&t.c(),e=Ae()},l(a){t&&t.l(a),e=Ae()},m(a,s){t&&t.m(a,s),A(a,e,s),l=!0},p(a,[s]){var o;(o=a[1].table)!=null&&o.properties?t?(t.p(a,s),s&2&&D(t,1)):(t=Gt(a),t.c(),D(t,1),t.m(e.parentNode,e)):t&&(ge(),R(t,1,1,()=>{t=null}),$e())},i(a){l||(D(t),l=!0)},o(a){R(t),l=!1},d(a){a&&h(e),t&&t.d(a)}}}function dr(r,e,l){let t;Pe(r,H,i=>l(1,t=i));let n={id:null};return[n,t,i=>l(0,n.id=i.id,n),i=>{Fe(H,t.record=i,t)},()=>l(0,n.id=null,n)]}class _r extends Ge{constructor(e){super(),Qe(this,e,dr,cr,Ke,{})}}var ct=new Map;function pr(r){var e=ct.get(r);e&&e.destroy()}function hr(r){var e=ct.get(r);e&&e.update()}var ft=null;typeof window>"u"?((ft=function(r){return r}).destroy=function(r){return r},ft.update=function(r){return r}):((ft=function(r,e){return r&&Array.prototype.forEach.call(r.length?r:[r],function(l){return function(t){if(t&&t.nodeName&&t.nodeName==="TEXTAREA"&&!ct.has(t)){var n,a=null,s=window.getComputedStyle(t),o=(n=t.value,function(){u({testForHeightReduction:n===""||!t.value.startsWith(n),restoreTextAlign:null}),n=t.value}),i=(function(f){t.removeEventListener("autosize:destroy",i),t.removeEventListener("autosize:update",d),t.removeEventListener("input",o),window.removeEventListener("resize",d),Object.keys(f).forEach(function(m){return t.style[m]=f[m]}),ct.delete(t)}).bind(t,{height:t.style.height,resize:t.style.resize,textAlign:t.style.textAlign,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",i),t.addEventListener("autosize:update",d),t.addEventListener("input",o),window.addEventListener("resize",d),t.style.overflowX="hidden",t.style.wordWrap="break-word",ct.set(t,{destroy:i,update:d}),d()}function u(f){var m,b,C=f.restoreTextAlign,E=C===void 0?null:C,v=f.testForHeightReduction,k=v===void 0||v,p=s.overflowY;if(t.scrollHeight!==0&&(s.resize==="vertical"?t.style.resize="none":s.resize==="both"&&(t.style.resize="horizontal"),k&&(m=function(T){for(var B=[];T&&T.parentNode&&T.parentNode instanceof Element;)T.parentNode.scrollTop&&B.push([T.parentNode,T.parentNode.scrollTop]),T=T.parentNode;return function(){return B.forEach(function(q){var S=q[0],V=q[1];S.style.scrollBehavior="auto",S.scrollTop=V,S.style.scrollBehavior=null})}}(t),t.style.height=""),b=s.boxSizing==="content-box"?t.scrollHeight-(parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)):t.scrollHeight+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),s.maxHeight!=="none"&&b>parseFloat(s.maxHeight)?(s.overflowY==="hidden"&&(t.style.overflow="scroll"),b=parseFloat(s.maxHeight)):s.overflowY!=="hidden"&&(t.style.overflow="hidden"),t.style.height=b+"px",E&&(t.style.textAlign=E),m&&m(),a!==b&&(t.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),a=b),p!==s.overflow&&!E)){var y=s.textAlign;s.overflow==="hidden"&&(t.style.textAlign=y==="start"?"end":"start"),u({restoreTextAlign:y,testForHeightReduction:!0})}}function d(){u({testForHeightReduction:!0,restoreTextAlign:null})}}(l)}),r}).destroy=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],pr),r},ft.update=function(r){return r&&Array.prototype.forEach.call(r.length?r:[r],hr),r});var $t=ft;const Ct=r=>($t(r),{destroy(){$t.destroy(r)}});Ct.update=$t.update;Ct.destroy=$t.destroy;function sl(r,e,l){const t=r.slice();return t[13]=e[l],t}function il(r,e,l){const t=r.slice();t[16]=e[l];const n=t[1].properties?vl(t[1].properties[t[16].name],t[16].attribute_type):{type:t[16].attribute_type,value:""};return t[17]=n,t}function ol(r){let e,l;return{c(){e=g("input"),this.h()},l(t){e=$(t,"INPUT",{type:!0,name:!0}),this.h()},h(){_(e,"type","hidden"),_(e,"name","recordId"),e.value=l=r[1].id},m(t,n){A(t,e,n)},p(t,n){n&2&&l!==(l=t[1].id)&&(e.value=l)},d(t){t&&h(e)}}}function mr(r){let e=r[16].attribute_type+"",l,t,n,a,s;return{c(){l=W(e),t=L(),n=g("input"),this.h()},l(o){l=Y(o,e),t=F(o),n=$(o,"INPUT",{type:!0,name:!0}),this.h()},h(){_(n,"type","hidden"),_(n,"name",a=r[16].name+"[type]"),n.value=s=r[16].attribute_type},m(o,i){A(o,l,i),A(o,t,i),A(o,n,i)},p(o,i){i&1&&e!==(e=o[16].attribute_type+"")&&_e(l,e),i&1&&a!==(a=o[16].name+"[type]")&&_(n,"name",a),i&1&&s!==(s=o[16].attribute_type)&&(n.value=s)},i:Ue,o:Ue,d(o){o&&(h(l),h(t),h(n))}}}function vr(r){let e,l;return e=new Dl({props:{name:r[16].name+"[type]",options:[{value:"string",label:"string"},{value:"json",label:"json"}],checked:r[17].type==="json"?"json":"string"}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.name=t[16].name+"[type]"),n&3&&(a.checked=t[17].type==="json"?"json":"string"),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function ul(r){let e;return{c(){e=W("(non editable)")},l(l){e=Y(l,"(non editable)")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function br(r){let e,l,t,n,a,s,o;return{c(){e=g("textarea"),this.h()},l(i){e=$(i,"TEXTAREA",{rows:!0,name:!0,id:!0,class:!0}),I(e).forEach(h),this.h()},h(){_(e,"rows","1"),_(e,"name",l=r[16].name+"[value]"),_(e,"id",t="edit_"+r[16].name),e.disabled=n=r[16].attribute_type==="upload",e.value=a=r[17].type==="json"||r[17].type==="jsonEscaped"&&!_l?JSON.stringify(r[17].value,void 0,2):r[17].value,_(e,"class","svelte-1udbufw")},m(i,u){A(i,e,u),s||(o=ml(Ct.call(null,e)),s=!0)},p(i,u){u&1&&l!==(l=i[16].name+"[value]")&&_(e,"name",l),u&1&&t!==(t="edit_"+i[16].name)&&_(e,"id",t),u&1&&n!==(n=i[16].attribute_type==="upload")&&(e.disabled=n),u&3&&a!==(a=i[17].type==="json"||i[17].type==="jsonEscaped"&&!_l?JSON.stringify(i[17].value,void 0,2):i[17].value)&&(e.value=a)},d(i){i&&h(e),s=!1,o()}}}function gr(r){let e,l,t,n,a,s,o,i,u,d;return{c(){e=g("select"),l=g("option"),t=g("option"),n=W("true"),s=g("option"),o=W("false"),this.h()},l(f){e=$(f,"SELECT",{name:!0,id:!0,class:!0});var m=I(e);l=$(m,"OPTION",{class:!0}),I(l).forEach(h),t=$(m,"OPTION",{});var b=I(t);n=Y(b,"true"),b.forEach(h),s=$(m,"OPTION",{});var C=I(s);o=Y(C,"false"),C.forEach(h),m.forEach(h),this.h()},h(){l.__value="",re(l,l.__value),_(l,"class","value-null"),t.__value="true",re(t,t.__value),t.selected=a=r[17].value==="true",s.__value="false",re(s,s.__value),s.selected=i=r[17].value==="false",_(e,"name",u=r[16].name+"[value]"),_(e,"id",d="edit_"+r[16].name),_(e,"class","svelte-1udbufw")},m(f,m){A(f,e,m),c(e,l),c(e,t),c(t,n),c(e,s),c(s,o)},p(f,m){m&3&&a!==(a=f[17].value==="true")&&(t.selected=a),m&3&&i!==(i=f[17].value==="false")&&(s.selected=i),m&1&&u!==(u=f[16].name+"[value]")&&_(e,"name",u),m&1&&d!==(d="edit_"+f[16].name)&&_(e,"id",d)},d(f){f&&h(e)}}}function fl(r){let e=r[5][r[16].name].message+"",l;return{c(){l=W(e)},l(t){l=Y(t,e)},m(t,n){A(t,l,n)},p(t,n){n&33&&e!==(e=t[5][t[16].name].message+"")&&_e(l,e)},d(t){t&&h(l)}}}function cl(r){let e,l,t,n=r[16].name+"",a,s,o,i,u,d,f,m,b,C,E,v,k;const p=[vr,mr],y=[];function T(w,O){return w[16].attribute_type==="string"?0:1}u=T(r),d=y[u]=p[u](r);let B=r[16].attribute_type==="upload"&&ul();function q(w,O){return w[16].attribute_type==="boolean"?gr:br}let S=q(r),V=S(r),N=r[5][r[16].name]&&fl(r);return{c(){e=g("fieldset"),l=g("dir"),t=g("label"),a=W(n),s=g("br"),o=L(),i=g("div"),d.c(),f=L(),B&&B.c(),b=L(),C=g("div"),V.c(),E=L(),v=g("div"),N&&N.c(),this.h()},l(w){e=$(w,"FIELDSET",{class:!0});var O=I(e);l=$(O,"DIR",{});var P=I(l);t=$(P,"LABEL",{for:!0,class:!0});var M=I(t);a=Y(M,n),s=$(M,"BR",{}),o=F(M),i=$(M,"DIV",{class:!0});var K=I(i);d.l(K),f=F(K),B&&B.l(K),K.forEach(h),M.forEach(h),P.forEach(h),b=F(O),C=$(O,"DIV",{});var G=I(C);V.l(G),E=F(G),v=$(G,"DIV",{role:!0,class:!0});var U=I(v);N&&N.l(U),U.forEach(h),G.forEach(h),O.forEach(h),this.h()},h(){_(i,"class","type svelte-1udbufw"),_(t,"for",m="edit_"+r[16].name),_(t,"class","svelte-1udbufw"),_(v,"role","alert"),_(v,"class","svelte-1udbufw"),_(e,"class","svelte-1udbufw")},m(w,O){A(w,e,O),c(e,l),c(l,t),c(t,a),c(t,s),c(t,o),c(t,i),y[u].m(i,null),c(i,f),B&&B.m(i,null),c(e,b),c(e,C),V.m(C,null),c(C,E),c(C,v),N&&N.m(v,null),k=!0},p(w,O){(!k||O&1)&&n!==(n=w[16].name+"")&&_e(a,n);let P=u;u=T(w),u===P?y[u].p(w,O):(ge(),R(y[P],1,1,()=>{y[P]=null}),$e(),d=y[u],d?d.p(w,O):(d=y[u]=p[u](w),d.c()),D(d,1),d.m(i,f)),w[16].attribute_type==="upload"?B||(B=ul(),B.c(),B.m(i,null)):B&&(B.d(1),B=null),(!k||O&1&&m!==(m="edit_"+w[16].name))&&_(t,"for",m),S===(S=q(w))&&V?V.p(w,O):(V.d(1),V=S(w),V&&(V.c(),V.m(C,E))),w[5][w[16].name]?N?N.p(w,O):(N=fl(w),N.c(),N.m(v,null)):N&&(N.d(1),N=null)},i(w){k||(D(d),k=!0)},o(w){R(d),k=!1},d(w){w&&h(e),y[u].d(),B&&B.d(),V.d(),N&&N.d()}}}function dl(r){let e,l=JSON.stringify(r[13])+"",t,n;return{c(){e=g("li"),t=W(l),n=L(),this.h()},l(a){e=$(a,"LI",{class:!0});var s=I(e);t=Y(s,l),n=F(s),s.forEach(h),this.h()},h(){_(e,"class","svelte-1udbufw")},m(a,s){A(a,e,s),c(e,t),c(e,n)},p(a,s){s&16&&l!==(l=JSON.stringify(a[13])+"")&&_e(t,l)},d(a){a&&h(e)}}}function $r(r){let e;return{c(){e=W("Create record")},l(l){e=Y(l,"Create record")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function wr(r){let e;return{c(){e=W("Edit record")},l(l){e=Y(l,"Edit record")},m(l,t){A(l,e,t)},d(l){l&&h(e)}}}function yr(r){let e,l,t,n,a,s,o,i,u,d,f,m,b,C="Cancel",E,v,k,p,y,T,B,q,S=r[1].id&&ol(r),V=Ee(r[0]),N=[];for(let U=0;U<V.length;U+=1)N[U]=cl(il(r,V,U));const w=U=>R(N[U],1,1,()=>{N[U]=null});let O=Ee(r[4]),P=[];for(let U=0;U<O.length;U+=1)P[U]=dl(sl(r,O,U));function M(U,Z){return U[1].id?wr:$r}let K=M(r),G=K(r);return p=new Se({props:{icon:"arrowRight"}}),{c(){e=g("dialog"),l=g("div"),t=g("form"),n=g("input"),s=L(),S&&S.c(),o=L();for(let U=0;U<N.length;U+=1)N[U].c();i=L(),u=g("div"),d=g("ul");for(let U=0;U<P.length;U+=1)P[U].c();f=L(),m=g("fieldset"),b=g("button"),b.textContent=C,E=L(),v=g("button"),G.c(),k=L(),se(p.$$.fragment),this.h()},l(U){e=$(U,"DIALOG",{class:!0});var Z=I(e);l=$(Z,"DIV",{class:!0});var z=I(l);t=$(z,"FORM",{class:!0});var ae=I(t);n=$(ae,"INPUT",{type:!0,name:!0}),s=F(ae),S&&S.l(ae),o=F(ae);for(let fe=0;fe<N.length;fe+=1)N[fe].l(ae);i=F(ae),u=$(ae,"DIV",{class:!0});var Ce=I(u);d=$(Ce,"UL",{class:!0,"aria-live":!0});var me=I(d);for(let fe=0;fe<P.length;fe+=1)P[fe].l(me);me.forEach(h),f=F(Ce),m=$(Ce,"FIELDSET",{class:!0});var ee=I(m);b=$(ee,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ne(b)!=="svelte-1oq6ax6"&&(b.textContent=C),E=F(ee),v=$(ee,"BUTTON",{type:!0,class:!0});var Oe=I(v);G.l(Oe),k=F(Oe),ie(p.$$.fragment,Oe),Oe.forEach(h),ee.forEach(h),Ce.forEach(h),ae.forEach(h),z.forEach(h),Z.forEach(h),this.h()},h(){_(n,"type","hidden"),_(n,"name","tableName"),n.value=a=r[6].table.name,_(d,"class","error svelte-1udbufw"),_(d,"aria-live","assertive"),_(b,"type","button"),_(b,"class","button"),_(v,"type","submit"),_(v,"class","button"),_(m,"class","actions svelte-1udbufw"),_(u,"class","footer svelte-1udbufw"),_(t,"class","svelte-1udbufw"),_(l,"class","content content-context svelte-1udbufw"),_(e,"class","svelte-1udbufw")},m(U,Z){A(U,e,Z),c(e,l),c(l,t),c(t,n),c(t,s),S&&S.m(t,null),c(t,o);for(let z=0;z<N.length;z+=1)N[z]&&N[z].m(t,null);c(t,i),c(t,u),c(u,d);for(let z=0;z<P.length;z+=1)P[z]&&P[z].m(d,null);c(u,f),c(u,m),c(m,b),c(m,E),c(m,v),G.m(v,null),c(v,k),oe(p,v,null),r[10](t),r[11](e),T=!0,B||(q=[le(b,"click",r[9]),le(t,"submit",_t(r[8]))],B=!0)},p(U,[Z]){if((!T||Z&64&&a!==(a=U[6].table.name))&&(n.value=a),U[1].id?S?S.p(U,Z):(S=ol(U),S.c(),S.m(t,o)):S&&(S.d(1),S=null),Z&35){V=Ee(U[0]);let z;for(z=0;z<V.length;z+=1){const ae=il(U,V,z);N[z]?(N[z].p(ae,Z),D(N[z],1)):(N[z]=cl(ae),N[z].c(),D(N[z],1),N[z].m(t,i))}for(ge(),z=V.length;z<N.length;z+=1)w(z);$e()}if(Z&16){O=Ee(U[4]);let z;for(z=0;z<O.length;z+=1){const ae=sl(U,O,z);P[z]?P[z].p(ae,Z):(P[z]=dl(ae),P[z].c(),P[z].m(d,null))}for(;z<P.length;z+=1)P[z].d(1);P.length=O.length}K!==(K=M(U))&&(G.d(1),G=K(U),G&&(G.c(),G.m(v,k)))},i(U){if(!T){for(let Z=0;Z<V.length;Z+=1)D(N[Z]);D(p.$$.fragment,U),U&&dt(()=>{T&&(y||(y=Rt(e,r[7],{},!0)),y.run(1))}),T=!0}},o(U){N=N.filter(Boolean);for(let Z=0;Z<N.length;Z+=1)R(N[Z]);R(p.$$.fragment,U),U&&(y||(y=Rt(e,r[7],{},!1)),y.run(0)),T=!1},d(U){U&&h(e),S&&S.d(),Ze(N,U),Ze(P,U),G.d(),ue(p),r[10](null),r[11](null),U&&y&&y.end(),B=!1,st(q)}}}let _l=!1;function kr(r,e,l){let t,n;Pe(r,H,v=>l(6,t=v)),Pe(r,wt,v=>l(12,n=v));let{properties:a}=e,{editing:s}=e,o,i,u=[],d={};const f=function(v,{delay:k=0,duration:p=150}){return{delay:k,duration:p,css:y=>{const T=Fl(y);return`opacity: ${T}; transform: scale(${T});`}}};gl(()=>{setTimeout(()=>{o.showModal()},10)}),document.addEventListener("keydown",v=>{v.key==="Escape"&&(v.preventDefault(),Fe(H,t.record=null,t))},{once:!0});const m=async v=>{v.preventDefault();const k=new FormData(i);l(5,d={});for(const p of k.entries())if(p[0].endsWith("[type]")&&(p[1]==="json"||p[1]==="array")){const y=p[0].replace("[type]",""),T=k.get(y+"[value]");T!==""&&!Pl(T)&&l(5,d[y]={property:y,message:`Not a valid ${p[1]}`},d)}if(Object.keys(d).length)await $l(),document.querySelector('[role="alert"]:not(:empty)').scrollIntoView({behavior:"smooth",block:"center"});else if(t.record.id){const p=await Ne.edit({table:t.table.name,id:t.record.id,properties:k});p.errors?l(4,u=p.errors):(Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.highlight("record",p.record_update.id),H.notification.create("success",`Record ${p.record_update.id} updated`),Fe(H,t.record=null,t))}else{const p=await Ne.create({table:t.table.name,properties:k});p.errors?l(4,u=p.errors):(H.clearFilters(),Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}),H.highlight("record",p.record_create.id),H.notification.create("success",`Record ${p.record_create.id} created`),Fe(H,t.record=null,t))}},b=()=>Fe(H,t.record=null,t);function C(v){rt[v?"unshift":"push"](()=>{i=v,l(3,i)})}function E(v){rt[v?"unshift":"push"](()=>{o=v,l(2,o)})}return r.$$set=v=>{"properties"in v&&l(0,a=v.properties),"editing"in v&&l(1,s=v.editing)},[a,s,o,i,u,d,t,f,m,b,C,E]}class Er extends Ge{constructor(e){super(),Qe(this,e,kr,yr,Ke,{properties:0,editing:1})}}const{document:Et}=Cl;function Tr(r){let e;return{c(){e=W("Work in progress :)")},l(l){e=Y(l,"Work in progress :)")},m(l,t){A(l,e,t)},i:Ue,o:Ue,d(l){l&&h(e)}}}function Cr(r){let e,l;return e=new _r({}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function pl(r){let e,l,t,n,a,s,o;const i=[Sr,Nr],u=[];function d(f,m){return f[0].view.tableStyle==="collapsed"?0:1}return l=d(r),t=u[l]=i[l](r),{c(){e=g("button"),t.c(),this.h()},l(f){e=$(f,"BUTTON",{class:!0,title:!0});var m=I(e);t.l(m),m.forEach(h),this.h()},h(){_(e,"class","button"),_(e,"title",n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values")},m(f,m){A(f,e,m),u[l].m(e,null),a=!0,s||(o=le(e,"click",_t(function(){El(r[0].view.tableStyle==="collapsed"?H.setView({tableStyle:"expanded"}):H.setView({tableStyle:"collapsed"}))&&(r[0].view.tableStyle==="collapsed"?H.setView({tableStyle:"expanded"}):H.setView({tableStyle:"collapsed"})).apply(this,arguments)})),s=!0)},p(f,m){r=f;let b=l;l=d(r),l!==b&&(ge(),R(u[b],1,1,()=>{u[b]=null}),$e(),t=u[l],t||(t=u[l]=i[l](r),t.c()),D(t,1),t.m(e,null)),(!a||m&1&&n!==(n=r[0].view.tableStyle==="expanded"?"Collapse values":"Expand values"))&&_(e,"title",n)},i(f){a||(D(t),a=!0)},o(f){R(t),a=!1},d(f){f&&h(e),u[l].d(),s=!1,o()}}}function Nr(r){let e,l="Collapse values",t,n,a;return n=new Se({props:{icon:"collapse"}}),{c(){e=g("span"),e.textContent=l,t=L(),se(n.$$.fragment),this.h()},l(s){e=$(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-jserey"&&(e.textContent=l),t=F(s),ie(n.$$.fragment,s),this.h()},h(){_(e,"class","label")},m(s,o){A(s,e,o),A(s,t,o),oe(n,s,o),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){R(n.$$.fragment,s),a=!1},d(s){s&&(h(e),h(t)),ue(n,s)}}}function Sr(r){let e,l="Expand values",t,n,a;return n=new Se({props:{icon:"expand"}}),{c(){e=g("span"),e.textContent=l,t=L(),se(n.$$.fragment),this.h()},l(s){e=$(s,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1tvmrgx"&&(e.textContent=l),t=F(s),ie(n.$$.fragment,s),this.h()},h(){_(e,"class","label")},m(s,o){A(s,e,o),A(s,t,o),oe(n,s,o),a=!0},i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){R(n.$$.fragment,s),a=!1},d(s){s&&(h(e),h(t)),ue(n,s)}}}function hl(r){let e,l;return e=new Er({props:{properties:r[0].table.properties,editing:r[0].record}}),{c(){se(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,n){oe(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.properties=t[0].table.properties),n&1&&(a.editing=t[0].record),e.$set(a)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Or(r){var Dt,Lt,Ft,Pt;let e,l,t,n,a,s,o,i,u,d,f="Refresh current view",m,b,C,E,v,k,p,y,T,B="Page:",q,S,V,N,w=(((Dt=r[0].records)==null?void 0:Dt.total_pages)||1)+"",O,P,M,K,G,U,Z,z="Create new record",ae,Ce,me,ee,Oe,fe,we,je,it,Ve,ce,De=r[0].filters.deleted==="false"?"ing":"",Q,ot,pe,nt,ye,Be,at,X,J,Te=r[0].filters.deleted==="true"?"ing":"",Ie,Re,Le,de,te,xe,qe,He,he,yt,kt,Nt;Et.title=e=(((Lt=r[0].table)==null?void 0:Lt.name)||"Loading…")+((Ft=r[0].online)!=null&&Ft.MPKIT_URL?": "+r[0].online.MPKIT_URL.replace("https://",""):""),a=new Hl({}),o=new Zl({}),b=new Se({props:{icon:"refresh"}});const St=[Cr,Tr],et=[];function Ot(j,x){return j[0].view.database!=="tiles"?0:1}E=Ot(r),v=et[E]=St[E](r);function bl(j){r[5](j)}let It={name:"page",min:1,max:(Pt=r[0].records)==null?void 0:Pt.total_pages,step:1,decreaseLabel:"Previous page",increaseLabel:"Next page",style:"navigation"};r[0].filters.page!==void 0&&(It.value=r[0].filters.page),S=new Al({props:It}),rt.push(()=>Tl(S,"value",bl)),S.$on("input",r[6]),G=new Se({props:{icon:"plus"}});let ve=r[0].view.database!=="tiles"&&pl(r);je=new Se({props:{icon:"leaf"}}),Be=new Se({props:{icon:"recycle"}});let be=r[0].record!==null&&hl(r);return yt=wl(r[9][0]),{c(){l=L(),t=g("section"),n=g("nav"),se(a.$$.fragment),s=L(),se(o.$$.fragment),i=L(),u=g("button"),d=g("span"),d.textContent=f,m=L(),se(b.$$.fragment),C=L(),v.c(),k=L(),p=g("nav"),y=g("div"),T=g("label"),T.textContent=B,q=L(),se(S.$$.fragment),N=W(`\r
      of `),O=W(w),P=L(),M=g("div"),K=g("button"),se(G.$$.fragment),U=L(),Z=g("span"),Z.textContent=z,ae=L(),ve&&ve.c(),Ce=L(),me=g("div"),ee=g("input"),fe=L(),we=g("label"),se(je.$$.fragment),it=L(),Ve=g("span"),ce=W("Show"),Q=W(De),ot=W(" current database state"),nt=L(),ye=g("label"),se(Be.$$.fragment),at=L(),X=g("span"),J=W("Show"),Ie=W(Te),Re=W(" deleted records"),de=L(),te=g("input"),qe=L(),be&&be.c(),He=Ae(),this.h()},l(j){yl("svelte-1ke6alb",Et.head).forEach(h),l=F(j),t=$(j,"SECTION",{class:!0});var ze=I(t);n=$(ze,"NAV",{class:!0});var Me=I(n);ie(a.$$.fragment,Me),s=F(Me),ie(o.$$.fragment,Me),i=F(Me),u=$(Me,"BUTTON",{class:!0,title:!0});var tt=I(u);d=$(tt,"SPAN",{class:!0,"data-svelte-h":!0}),ne(d)!=="svelte-iqo23s"&&(d.textContent=f),m=F(tt),ie(b.$$.fragment,tt),tt.forEach(h),Me.forEach(h),C=F(ze),v.l(ze),k=F(ze),p=$(ze,"NAV",{class:!0});var lt=I(p);y=$(lt,"DIV",{});var Je=I(y);T=$(Je,"LABEL",{for:!0,"data-svelte-h":!0}),ne(T)!=="svelte-1r8oyu6"&&(T.textContent=B),q=F(Je),ie(S.$$.fragment,Je),N=Y(Je,`\r
      of `),O=Y(Je,w),Je.forEach(h),P=F(lt),M=$(lt,"DIV",{id:!0,class:!0});var We=I(M);K=$(We,"BUTTON",{class:!0,title:!0});var pt=I(K);ie(G.$$.fragment,pt),U=F(pt),Z=$(pt,"SPAN",{class:!0,"data-svelte-h":!0}),ne(Z)!=="svelte-19x6y3e"&&(Z.textContent=z),pt.forEach(h),ae=F(We),ve&&ve.l(We),Ce=F(We),me=$(We,"DIV",{class:!0});var Ye=I(me);ee=$(Ye,"INPUT",{type:!0,name:!0,id:!0,class:!0}),fe=F(Ye),we=$(Ye,"LABEL",{for:!0,class:!0,title:!0});var ht=I(we);ie(je.$$.fragment,ht),it=F(ht),Ve=$(ht,"SPAN",{class:!0});var mt=I(Ve);ce=Y(mt,"Show"),Q=Y(mt,De),ot=Y(mt," current database state"),mt.forEach(h),ht.forEach(h),nt=F(Ye),ye=$(Ye,"LABEL",{for:!0,class:!0,title:!0});var vt=I(ye);ie(Be.$$.fragment,vt),at=F(vt),X=$(vt,"SPAN",{class:!0});var bt=I(X);J=Y(bt,"Show"),Ie=Y(bt,Te),Re=Y(bt," deleted records"),bt.forEach(h),vt.forEach(h),de=F(Ye),te=$(Ye,"INPUT",{type:!0,name:!0,id:!0,class:!0}),Ye.forEach(h),We.forEach(h),lt.forEach(h),ze.forEach(h),qe=F(j),be&&be.l(j),He=Ae(),this.h()},h(){_(d,"class","label"),_(u,"class","button svelte-afbo94"),_(u,"title","Refresh current view (R)"),ke(u,"refreshing",r[2]),_(n,"class","svelte-afbo94"),_(T,"for","page"),_(Z,"class","label"),_(K,"class","button"),_(K,"title","Create new record"),_(ee,"type","radio"),_(ee,"name","deleted"),_(ee,"id","deletedTrue"),ee.__value="false",re(ee,ee.__value),ee.disabled=Oe=r[0].filters.deleted==="false",_(ee,"class","svelte-afbo94"),_(Ve,"class","label"),_(we,"for","deletedTrue"),_(we,"class","button"),_(we,"title",pe="Show"+(r[0].filters.deleted==="false"?"ing":"")+" current database state"),ke(we,"active",r[0].filters.deleted==="false"),ke(we,"disabled",r[0].filters.deleted==="false"),_(X,"class","label"),_(ye,"for","deletedFalse"),_(ye,"class","button"),_(ye,"title",Le="Show"+(r[0].filters.deleted==="true"?"ing":"")+" deleted records"),ke(ye,"active",r[0].filters.deleted==="true"),ke(ye,"disabled",r[0].filters.deleted==="true"),_(te,"type","radio"),_(te,"name","deleted"),_(te,"id","deletedFalse"),te.__value="true",re(te,te.__value),te.disabled=xe=r[0].filters.deleted==="true",_(te,"class","svelte-afbo94"),_(me,"class","combo svelte-afbo94"),_(M,"id","viewOptions"),_(M,"class","svelte-afbo94"),_(p,"class","pagination svelte-afbo94"),_(t,"class","svelte-afbo94"),yt.p(ee,te)},m(j,x){A(j,l,x),A(j,t,x),c(t,n),oe(a,n,null),c(n,s),oe(o,n,null),c(n,i),c(n,u),c(u,d),c(u,m),oe(b,u,null),c(t,C),et[E].m(t,null),c(t,k),c(t,p),c(p,y),c(y,T),c(y,q),oe(S,y,null),c(y,N),c(y,O),c(p,P),c(p,M),c(M,K),oe(G,K,null),c(K,U),c(K,Z),c(M,ae),ve&&ve.m(M,null),c(M,Ce),c(M,me),c(me,ee),ee.checked=ee.__value===r[0].filters.deleted,c(me,fe),c(me,we),oe(je,we,null),c(we,it),c(we,Ve),c(Ve,ce),c(Ve,Q),c(Ve,ot),c(me,nt),c(me,ye),oe(Be,ye,null),c(ye,at),c(ye,X),c(X,J),c(X,Ie),c(X,Re),c(me,de),c(me,te),te.checked=te.__value===r[0].filters.deleted,A(j,qe,x),be&&be.m(j,x),A(j,He,x),he=!0,kt||(Nt=[le(window,"keypress",r[4]),le(u,"click",r[3]),le(K,"click",_t(r[7])),le(ee,"change",r[8]),le(ee,"change",r[10]),le(te,"change",r[11]),le(te,"change",r[12])],kt=!0)},p(j,[x]){var tt,lt,Je,We;(!he||x&1)&&e!==(e=(((tt=j[0].table)==null?void 0:tt.name)||"Loading…")+((lt=j[0].online)!=null&&lt.MPKIT_URL?": "+j[0].online.MPKIT_URL.replace("https://",""):""))&&(Et.title=e),(!he||x&4)&&ke(u,"refreshing",j[2]);let ze=E;E=Ot(j),E!==ze&&(ge(),R(et[ze],1,1,()=>{et[ze]=null}),$e(),v=et[E],v||(v=et[E]=St[E](j),v.c()),D(v,1),v.m(t,k));const Me={};x&1&&(Me.max=(Je=j[0].records)==null?void 0:Je.total_pages),!V&&x&1&&(V=!0,Me.value=j[0].filters.page,kl(()=>V=!1)),S.$set(Me),(!he||x&1)&&w!==(w=(((We=j[0].records)==null?void 0:We.total_pages)||1)+"")&&_e(O,w),j[0].view.database!=="tiles"?ve?(ve.p(j,x),x&1&&D(ve,1)):(ve=pl(j),ve.c(),D(ve,1),ve.m(M,Ce)):ve&&(ge(),R(ve,1,1,()=>{ve=null}),$e()),(!he||x&1&&Oe!==(Oe=j[0].filters.deleted==="false"))&&(ee.disabled=Oe),x&1&&(ee.checked=ee.__value===j[0].filters.deleted),(!he||x&1)&&De!==(De=j[0].filters.deleted==="false"?"ing":"")&&_e(Q,De),(!he||x&1&&pe!==(pe="Show"+(j[0].filters.deleted==="false"?"ing":"")+" current database state"))&&_(we,"title",pe),(!he||x&1)&&ke(we,"active",j[0].filters.deleted==="false"),(!he||x&1)&&ke(we,"disabled",j[0].filters.deleted==="false"),(!he||x&1)&&Te!==(Te=j[0].filters.deleted==="true"?"ing":"")&&_e(Ie,Te),(!he||x&1&&Le!==(Le="Show"+(j[0].filters.deleted==="true"?"ing":"")+" deleted records"))&&_(ye,"title",Le),(!he||x&1)&&ke(ye,"active",j[0].filters.deleted==="true"),(!he||x&1)&&ke(ye,"disabled",j[0].filters.deleted==="true"),(!he||x&1&&xe!==(xe=j[0].filters.deleted==="true"))&&(te.disabled=xe),x&1&&(te.checked=te.__value===j[0].filters.deleted),j[0].record!==null?be?(be.p(j,x),x&1&&D(be,1)):(be=hl(j),be.c(),D(be,1),be.m(He.parentNode,He)):be&&(ge(),R(be,1,1,()=>{be=null}),$e())},i(j){he||(D(a.$$.fragment,j),D(o.$$.fragment,j),D(b.$$.fragment,j),D(v),D(S.$$.fragment,j),D(G.$$.fragment,j),D(ve),D(je.$$.fragment,j),D(Be.$$.fragment,j),D(be),he=!0)},o(j){R(a.$$.fragment,j),R(o.$$.fragment,j),R(b.$$.fragment,j),R(v),R(S.$$.fragment,j),R(G.$$.fragment,j),R(ve),R(je.$$.fragment,j),R(Be.$$.fragment,j),R(be),he=!1},d(j){j&&(h(l),h(t),h(qe),h(He)),ue(a),ue(o),ue(b),et[E].d(),ue(S),ue(G),ve&&ve.d(),ue(je),ue(Be),be&&be.d(j),yt.r(),kt=!1,st(Nt)}}}function Ir(r,e,l){let t,n;Pe(r,H,v=>l(0,t=v)),Pe(r,wt,v=>l(1,n=v));let a=!1;const s=()=>{l(2,a=!0),Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted}).then(()=>l(2,a=!1))},o=v=>{document.activeElement===document.body&&!v.target.matches("input, textarea")&&v.key==="r"&&s()},i=[[]];function u(v){r.$$.not_equal(t.filters.page,v)&&(t.filters.page=v,H.set(t))}const d=()=>{Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})},f=()=>Fe(H,t.record={},t);function m(){t.filters.deleted=this.__value,H.set(t)}const b=()=>{Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};function C(){t.filters.deleted=this.__value,H.set(t)}const E=()=>{Ne.get({table:n.params.id,filters:t.filters,sort:t.sort,deleted:t.filters.deleted})};return r.$$.update=()=>{r.$$.dirty&3&&Fe(H,t.table=t.tables.filter(v=>v.id===n.params.id)[0],t),r.$$.dirty&2&&n.params.id&&Ne.get({table:n.params.id})&&H.clearFilters()},[t,n,a,s,o,u,d,f,m,i,b,C,E]}class Wr extends Ge{constructor(e){super(),Qe(this,e,Ir,Or,Ke,{})}}export{Wr as component};
